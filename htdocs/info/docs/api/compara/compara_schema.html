<html>
<head>
  <title>Compara Database Schema</title>
</head>
<body>


<h1>Compara Database Schema</h1>


<p>
This document refers to the schema of EnsEMBL Compara version <strong>66</strong>.
</p>


<h2>Introduction</h2>

<p>
EnsEMBL Compara DB is divided into two parts:
</p>

<dl>
  <dt>Genomic Alignments</dt>
  <dd><p>This part is dedicated to DNA-DNA alignments. It includes alignments made with different alignment tools, and a list of syntenic regions.</p></dd>
  <dt>Homologues and Families (or Protein Clusters)</dt>
  <dd><p>This part is dedicated to gene-gene alignments and it
  includes protein families, protein trees and homologues defined
  from the protein trees. It also includes ncRNA families, alignments and trees. </p>
    <p>
The protein families are clusters of proteins. They are defined using
the full set of Ensembl proteins plus all the metazoan proteins from
SwissProt and SPTrEMBL.
    </p>
    <p>
The protein trees are built using the longest transcript of each
protein coding Ensembl gene. Homologies are derived from them.
    </p>
    <p>
The ncRNA trees are based on RFAM families and alignments based on
secondary structure and genomic alignments.
    </p>
  </dd>
</dl>


<h2>List of Tables</h2>


<ul>


  <li>
    <p><strong>General Tables</strong>
    </p>
    <ul>
      <li><a href="#meta">meta</a></li>
      <li><a href="#ncbi_taxa_node">ncbi_taxa_node</a></li>
      <li><a href="#ncbi_taxa_name">ncbi_taxa_name</a></li>
      <li><a href="#genome_db">genome_db</a></li>
      <li><a href="#species_set">species_set</a></li>
      <li><a href="#species_set_tag">species_set_tag</a></li>
      <li><a href="#method_link">method_link</a></li>
      <li><a href="#method_link_species_set">method_link_species_set</a></li>
      <li><a href="#method_link_species_set_tag">method_link_species_set_tag</a></li>
    </ul>
  </li>

  <li>
    <p><strong>Genomic Alignment Tables</strong>
    </p>
    <ul>
      <li><a href="#dnafrag">dnafrag</a></li>
      <li><a href="#genomic_align_block">genomic_align_block</a></li>
      <li><a href="#genomic_align">genomic_align</a></li>
      <li><a href="#genomic_align_tree">genomic_align_tree</a></li>
      <li><a href="#genomic_align_group">genomic_align_group</a></li>
      <li><a href="#conservation_score">conservation_score</a></li>
      <li><a href="#constrained_element">constrained_element</a></li>
      <li><a href="#synteny_region">synteny_region</a></li>
      <li><a href="#dnafrag_region">dnafrag_region</a></li>
    </ul>
  </li>

  <li>
    <p><strong>Orthologues and Protein Tree / ncRNA Tree Tables</strong>
    </p>
    <ul>
      <li><a href="#member">member</a></li>
      <li><a href="#sequence">sequence</a></li>
      <li><a href="#peptide_align_feature">peptide_align_feature</a></li>
      <li><a href="#homology">homology</a></li>
      <li><a href="#homology_member">homology_member</a></li>
      <li><a href="#family">family</a></li>
      <li><a href="#family_member">family_member</a></li>
      <li><a href="#gene_tree_root">gene_tree_root</a></li>
      <li><a href="#gene_tree_root_tag">gene_tree_root_tag</a></li>
      <li><a href="#gene_tree_node">gene_tree_node</a></li>
      <li><a href="#gene_tree_node_tag">gene_tree_node_tag</a></li>
      <li><a href="#gene_tree_node_attr">gene_tree_node_attr</a></li>
      <li><a href="#gene_tree_member">gene_tree_member</a></li>
      <li><a href="#protein_tree_member_score">protein_tree_member_score</a></li>
      <li><a href="#sitewise_aln">sitewise_aln</a></li>

      <li><a href="#mapping_session">mapping_session</a></li>
      <li><a href="#stable_id_history">stable_id_history</a></li>
      <li><a href="#protein_tree_stable_id">protein_tree_stable_id</a></li>
    </ul>
  </li>


</ul>


<!--
#####################################################################
#####################################################################
GENERAL TABLES
#####################################################################
#####################################################################
-->
<h2>General Tables</h2>


<!--
#####################################################################
TABLE META
#####################################################################
-->
<h4 id="meta">meta</h4>


<p>Contains configuration variables.</p>


<table class="spreadsheet">
  <caption>meta table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>meta_id</td>
      <td>int(11)</td>
      <td>NO</td>
      <td>PRI</td>
      <td>NULL</td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>species_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td>1</td>
      <td></td>
      <td>Only used in core databases</td>
    </tr>
    <tr>
      <td>meta_key</td>
      <td>varchar(40)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>meta_value</td>
      <td>text</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>


<p>Meta table stores miscelaneous values:</p>


<pre>mysql&gt; SELECT * FROM meta WHERE meta_key = "schema_version";<br />+---------+------------+----------------+------------+<br />| meta_id | species_id | meta_key       | meta_value |<br />+---------+------------+----------------+------------+<br />|       1 |       NULL | schema_version | 51         |<br />+---------+------------+----------------+------------+<br /></pre>


<p>This entry defines which API version must be used to access
this database.</p>


<!--
#####################################################################
TABLE NCBI_TAXA_NODE
#####################################################################
-->
<h4 id="ncbi_taxa_node">ncbi_taxa_node</h4>


<p>Contains a description of the taxonomic relathionships between
all the taxa used in this database. It is usually read together with
the <a href="#ncbi_taxa_name">ncbi_taxa_name</a> table</p>


<table class="spreadsheet">
  <caption>ncbi_taxa_node table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>taxon_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>the NCBI taxonomy ID</td>
    </tr>
    <tr>
      <td>parent_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>the parent taxonomy ID for this node (refers to ncbi_taxa_node.taxon_id)</td>
    </tr>
    <tr>
      <td>rank</td>
      <td>char(32)</td>
      <td>NO</td>
      <td>MUL</td>
      <td>''</td>
      <td></td>
      <td>e.g. kingdom, family, genus, etc.</td>
    </tr>
    <tr>
      <td>genbank_hidden_flag</td>
      <td>tinyint(1)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>boolean value which defines whether this rank is used or not in the abbreviated lineage</td>
    </tr>
    <tr>
      <td>left_index</td>
      <td>int(10)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>sub-set left index. All sub-nodes have left_index and right_index values larger than this left_index</td>
    </tr>
    <tr>
      <td>right_index</td>
      <td>int(10)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>sub-set right index. All sub-nodes have left_index and right_index values smaller than this right_index</td>
    </tr>
    <tr>
      <td>root_id</td>
      <td>int(10)</td>
      <td></td>
      <td></td>
      <td>1</td>
      <td></td>
      <td>the root taxonomy ID for this node (refers to ncbi_taxa_node.taxon_id)</td>
    </tr>
  </tbody>
</table>


<p>(c.f. <a href="#ncbi_taxa_name">ncbi_taxa_name</a> for examples)</p>


<!--
#####################################################################
TABLE NCBI_TAXA_NAME
#####################################################################
-->
<h4 id="ncbi_taxa_name">ncbi_taxa_name</h4>


<p>Contains descriptions the taxonimc nodes defined in the <a href="#ncbi_taxa_node">ncbi_taxa_node</a> table.</p>


<table class="spreadsheet">
  <caption>ncbi_taxa_name table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>taxon_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#ncbi_taxa_node">ncbi_taxa_node.taxon_id</a></td>
    </tr>
    <tr>
      <td>name</td>
      <td>varchar(255)</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>information assigned to this taxon_id</td>
    </tr>
    <tr>
      <td>name_class</td>
      <td>varchar(50)</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>type of information. e.g. common name, genbank_synonym, scientif name, etc.</td>
    </tr>
  </tbody>
</table>


<p>Here is an example on how to get the taxonomic ID for a species:</p>


<pre>mysql&gt; SELECT * FROM ncbi_taxa_name WHERE name_class = "scientific name" AND name = "Homo sapiens";
+----------+--------------+-----------------+
| taxon_id | name         | name_class      |
+----------+--------------+-----------------+
|     9606 | Homo sapiens | scientific name |
+----------+--------------+-----------------+
</pre>


<p>Here is another example on how to get the lineage for the
hominidae family:</p>


<pre>mysql&gt; SELECT * FROM ncbi_taxa_node WHERE left_index &gt; 351172 AND left_index &lt; 351217;
+----------+-----------+---------+---------------------+------------+-------------+---------+
| taxon_id | parent_id | rank    | genbank_hidden_flag | left_index | right_index | root_id |
+----------+-----------+---------+---------------------+------------+-------------+---------+
|    40017 |     40016 | genus   |                   0 |     351187 |      351198 |       1 |
|    40018 |     40017 | species |                   1 |     351190 |      351191 |       1 |
|   119900 |     40016 | genus   |                   0 |     351199 |      351216 |       1 |
|   119901 |    119900 | species |                   1 |     351214 |      351215 |       1 |
|   119902 |    119900 | species |                   1 |     351208 |      351209 |       1 |
|   119903 |     40017 | species |                   1 |     351196 |      351197 |       1 |
|   121093 |     40017 | species |                   1 |     351192 |      351193 |       1 |
|   178106 |    119900 | species |                   1 |     351212 |      351213 |       1 |
|   323204 |     40016 | genus   |                   0 |     351177 |      351186 |       1 |
|   323205 |    323204 | species |                   1 |     351184 |      351185 |       1 |
|   323207 |    323204 | species |                   1 |     351178 |      351179 |       1 |
|   323208 |    323204 | species |                   1 |     351182 |      351183 |       1 |
|   323209 |    119900 | species |                   1 |     351206 |      351207 |       1 |
|   323210 |    119900 | species |                   1 |     351204 |      351205 |       1 |
|   323211 |    119900 | species |                   1 |     351202 |      351203 |       1 |
|   323212 |     40017 | species |                   1 |     351194 |      351195 |       1 |
|   323213 |     40017 | species |                   1 |     351188 |      351189 |       1 |
|   323220 |    147820 | species |                   1 |     351174 |      351175 |       1 |
|   323222 |    323204 | species |                   1 |     351180 |      351181 |       1 |
|   323223 |    119900 | species |                   1 |     351210 |      351211 |       1 |
|   376202 |    119900 | species |                   1 |     351200 |      351201 |       1 |
+----------+-----------+---------+---------------------+------------+-------------+---------+
</pre>


<!--
#####################################################################
TABLE GENOME_DB
#####################################################################
-->
<h4 id="genome_db">genome_db</h4>


<p>Contains information about the version of the genome
assemblies used in this database.</p>


<table class="spreadsheet">
  <caption>genome_db table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>genome_db_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td>NULL</td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>taxon_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>external reference to <a href="#ncbi_taxa_node">ncbi_taxa_node.taxon_id</a></td>
    </tr>
    <tr>
      <td>name</td>
      <td>varchar(40)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>name of the species</td>
    </tr>
    <tr>
      <td>assembly</td>
      <td>varchar(100)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>assembly version of the genome</td>
    </tr>
    <tr>
      <td>assembly_default</td>
      <td>tinyint(1)</td>
      <td>YES</td>
      <td></td>
      <td>1</td>
      <td></td>
      <td>boolean value describing if this assembly is the default one or not, so that we can handle more than one assempbly version for a given species.</td>
    </tr>
    <tr>
      <td>genebuild</td>
      <td>varchar(100)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>version of the genebuild</td>
    </tr>
    <tr>
      <td>locator</td>
      <td>varchar(400)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>used for production purposes or for user configuration in in-house installation.</td>
    </tr>
  </tbody>
</table>


<p>Eg the rows:</p>


<pre>mysql&gt; SELECT * FROM genome_db WHERE name IN ("Homo_sapiens", "Gallus_gallus");
+--------------+----------+---------------+----------+------------------+-----------------+---------+
| genome_db_id | taxon_id | name          | assembly | assembly_default | genebuild       | locator |
+--------------+----------+---------------+----------+------------------+-----------------+---------+
|           42 |     9031 | gallus_gallus | WASHUC2  |                1 | 2006-08-Ensembl |         |
|           90 |     9606 | homo_sapiens  | GRCh37   |                1 | 2010-07-Ensembl |         |
+--------------+----------+---------------+----------+------------------+-----------------+---------+
</pre>


<p>correspond to the Human and Chicken genomes</p>


<!--
#####################################################################
TABLE SPECIES_SET
#####################################################################
-->
<h4 id="species_set">species_set</h4>


<p>Contains groups or sets of species which are used in the
<a href="#method_link_species_set">method_link_species_set</a>
table.</p>


<table class="spreadsheet">
  <caption>species_set table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal (non-unique) ID</td>
    </tr>
    <tr>
      <td>genome_db_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td>0</td>
      <td></td>
      <td>external reference to <a href="#genome_db">genome_db.genome_db_id</a></td>
    </tr>
  </tbody>
</table>


<p>E.g. the rows</p>


<pre>mysql&gt; SELECT * FROM species_set WHERE species_set_id = 32279;
+----------------+--------------+
| species_set_id | genome_db_id |
+----------------+--------------+
|          32279 |            3 |
|          32279 |           90 |
+----------------+--------------+
</pre>


<p>correspond to the species_set for the Human and Rat genomes:</p>
<pre>mysql&gt; SELECT species_set_id, name, assembly FROM species_set LEFT JOIN genome_db USING (genome_db_id) WHERE species_set_id = 32279;
+----------------+-------------------+----------+
| species_set_id | name              | assembly |
+----------------+-------------------+----------+
|          32279 | rattus_norvegicus | RGSC3.4  |
|          32279 | homo_sapiens      | GRCh37   |
+----------------+-------------------+----------+
</pre>


<!--
#####################################################################
TABLE SPECIES_SET_TAG
#####################################################################
-->
<h4 id="species_set_tag">species_set_tag</h4>


<p>Contains descriptive tags for the species_set_ids in the 
<a href="#species_set">species_set</a> table.</p>


<table class="spreadsheet">


  <caption>species_set_tag table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td>0</td>
      <td>internal (non-unique) ID</td>
    </tr>
    <tr>
      <td>tag</td>
      <td>varchar(50)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#species_set">species_set.species_set_id</a></td>
    </tr>
    <tr>
      <td>value</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td></td>
      <td></td>
      <td>more informative description for the species_set_id</td>
    </tr>
  </tbody>
</table>


<p>E.g. the rows</p>

<pre>mysql&gt; SELECT * FROM species_set_tag WHERE value LIKE "%fish%";
+----------------+------+-------+
| species_set_id | tag  | value |
+----------------+------+-------+
|          34341 | name | fish  | 
+----------------+------+-------+
</pre>

<!--
#####################################################################
TABLE METHOD_LINK
#####################################################################
-->
<h4 id="method_link">method_link</h4>


<p>Contains the list of alignment methods used to find links
(homologies) between entities in compara.</p>


<table class="spreadsheet">
  <caption>method_link table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>method_link_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>type</td>
      <td>varchar(50)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>the common name of the linking method between species.</td>
    </tr>
    <tr>
      <td>class</td>
      <td>varchar(50)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>Description of type of data associated with the \"type\" field and the main table to find these data</td>
    </tr>
  </tbody>
</table>


<p>Current values are:</p>


<pre>mysql&gt; SELECT * FROM method_link;
+----------------+--------------------------+----------------------------------------+
| method_link_id | type                     | class                                  |
+----------------+--------------------------+----------------------------------------+
|              1 | BLASTZ_NET               | GenomicAlignBlock.pairwise_alignment   |
|              7 | TRANSLATED_BLAT_NET      | GenomicAlignBlock.pairwise_alignment   |
|             10 | PECAN                    | GenomicAlignBlock.multiple_alignment   |
|             11 | GERP_CONSTRAINED_ELEMENT | ConstrainedElement.constrained_element |
|             13 | EPO                      | GenomicAlignTree.ancestral_alignment   |
|             14 | EPO_LOW_COVERAGE         | GenomicAlignTree.tree_alignment        |
|             16 | LASTZ_NET                | GenomicAlignBlock.pairwise_alignment   |
|            101 | SYNTENY                  | SyntenyRegion.synteny                  |
|            201 | ENSEMBL_ORTHOLOGUES      | Homology.homology                      |
|            202 | ENSEMBL_PARALOGUES       | Homology.homology                      |
|            205 | ENSEMBL_PROJECTIONS      | Homology.homology                      |
|            301 | FAMILY                   | Family.family                          |
|            401 | PROTEIN_TREES            | ProteinTree.protein_tree_node          |
|            402 | NC_TREES                 | NCTree.nc_tree_node                    |
|            501 | GERP_CONSERVATION_SCORE  | ConservationScore.conservation_score   |
|             19 | LASTZ_PATCH              | GenomicAlignBlock.pairwise_alignment   |
+----------------+--------------------------+----------------------------------------+
</pre>


<p>NOTE: We use method_link_ids between 1 and 100 for DNA-DNA
alignments, between 101 and 200 for genomic syntenies,
between 201 and 300 for protein homologies, between 301 and 400 for
protein families and between 401 and 500 for protein and ncRNA trees. Each
category corresponds to data stored in different tables</p>


<!--
#####################################################################
TABLE METHOD_LINK_SPECIES_SET
#####################################################################
-->
<h4 id="method_link_species_set">method_link_species_set</h4>


<p>
This table contains information about the comparisons stored in the database. A given method_link_species_set_id exist for each comparison made and
relates a <a href="#method_link">method_link.method_link_id</a> with a set of species (<a href="#species_set">species_set.species_set_id</a>.
</p>


<table class="spreadsheet">
  <caption>method_link_species table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID.</td>
    </tr>
    <tr>
      <td>method_link_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>external reference to <a href="#method_link">method_link.method_link_id</a></td>
    </tr>
    <tr>
      <td>species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>external reference to <a href="#species_set">species_set.species_set_id</a></td>
    </tr>
    <tr>
      <td>name</td>
      <td>varchar(255)</td>
      <td>NO</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>human-readable description for this method_link_species_set</td>
    </tr>
    <tr>
      <td>source</td>
      <td>varchar(255)</td>
      <td>NO</td>
      <td></td>
      <td>ensembl</td>
      <td></td>
      <td>source of the data. Currently either ensembl or ucsc if data were imported from UCSC</td>
    </tr>
    <tr>
      <td>url</td>
      <td>varchar(255)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>A URL where you can find the orignal data if they were imported.</td>
    </tr>
  </tbody>
</table>


<p>E.g. the rows</p>


<pre>mysql&gt; SELECT * FROM method_link_species_set WHERE method_link_id = 13;
+----------------------------+----------------+----------------+--------------------------+---------+-----+
| method_link_species_set_id | method_link_id | species_set_id | name                     | source  | url |
+----------------------------+----------------+----------------+--------------------------+---------+-----+
|                        528 |             13 |          33241 | 5 teleost fish EPO       | ensembl |     |
|                        505 |             13 |          33554 | 3 neognath birds EPO     | ensembl |     |
|                        547 |             13 |          34114 | 12 eutherian mammals EPO | ensembl |     |
|                        548 |             13 |          34115 | 6 primates EPO           | ensembl |     |
+----------------------------+----------------+----------------+--------------------------+---------+-----+
</pre>

<p>
correspond to all the EPO alignments in this database.
</p>

<!--
#######################################################################
TABLE METHOD_LINK_SPECIES_SET_TAG
#######################################################################
-->
<h4 id="method_link_species_set_tag">method_link_species_set_tag</h4>

<p>
Contains serveral tag/value data associated with
method_link_species_set entries
</p>
<table class="spreadsheet">
  <caption>method_link_species_set_tag</caption>
    <thead></tr>
      <th>Field</th>
      <th>Type</th>
      <th>Null</th>
      <th>Key</th>
      <th>Default</th>
      <th>Extra</th>
      <th>Description</th>
    </tr>
    </thead>
  <tbody>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to method_link_species_set.method_link_species_set_id</td>
    </tr>
    <tr>
      <td>tag</td>
      <td>varchar(50)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>value</td>
      <td>mediumtext</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>

</table>

<!--
#####################################################################
#####################################################################
GENOMIC ALIGNMENT TABLES
#####################################################################
#####################################################################
-->
<h2>Genomic Alignment Tables</h2>


<!--
#####################################################################
TABLE DNAFRAG
#####################################################################
-->
<h4 id="dnafrag">dnafrag</h4>


<p>
This table defines the genomic sequences used in the comparative
genomics analyisis. It is used by the
<a href="#genomic_align_block">genomic_align_block</a>
table to define aligned sequences. It is also used by the
<a href="#dnafrag_region">dnafrag_region</a> table
to define syntenic regions.
</p>


<table class="spreadsheet">
  <caption>dnafrag table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>dnafrag_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>length</td>
      <td>int(11)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
    </tr>
    <tr>
      <td>name</td>
      <td>varchar(40)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>name of the DNA sequence (e.g., the name of the chromosome)</td>
    </tr>
    <tr>
      <td>genome_db_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>external reference to <a href="#genome_db">genome_db.genome_db_id</a></td>
    </tr>
    <tr>
      <td>coord_system_name</td>
      <td>varchar(40)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>refers to the coord system in which this dnafrag has been defined</td>
    </tr> 
    <tr>
      <td>is_reference</td>
      <td>tinyint(1)</td>
      <td>NO</td>
      <td></td>
      <td>1</td>
      <td></td>
      <td>boolean, whether dnafrag is reference (1) or non-reference (0) eg haplotype</td>
    </tr>
  </tbody>
</table>


<p>E.g. the row</p>


<pre>mysql&gt; SELECT dnafrag.* FROM dnafrag LEFT JOIN genome_db USING (genome_db_id) WHERE dnafrag.name = "14" AND genome_db.name = "homo_sapiens";
+------------+-----------+------+--------------+-------------------+--------------+
| dnafrag_id | length    | name | genome_db_id | coord_system_name | is_reference |
+------------+-----------+------+--------------+-------------------+--------------+
|   12179421 | 107349540 | 14   |           90 | chromosome        |            1 |
+------------+-----------+------+--------------+-------------------+--------------+
</pre>


<p>
refer to the chromosome 14 of the Human genome (<a href="#genome_db">genome_db.genome_db_id</a> = 90 refers
to Human genome in this example) which is 107349540 nucleotides long.
</p>


<!--
#####################################################################
TABLE GENOMIC_ALIGN_BLOCK
#####################################################################
-->
<h4 id="genomic_align_block">genomic_align_block</h4>


<p>
This table is the key table for the genomic alignments. The software
used to align the genomic blocks is refered as an external key to the <a href="#method_link_species_set">method_link</a> table.
Nevertheless, actual aligned sequences are defined in the <a href="#genomic_align">genomic_align</a> table.
</p>

<p>
Tree alignments (EPO alignments) are best accessed through the
<a href="#genomic_align_tree">genomic_align_tree</a> table although the alignments are also indexed
in this table. This allows the user to also access the tree alignments as normal multiple alignments.
</p>


<table class="spreadsheet">
  <caption>genomic_align_block table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>genomic_align_block_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>external reference to <a href="#method_link_species_set">method_link_species_set.method_link_species_set_id</a></td>
    </tr>
    <tr>
      <td>score</td>
      <td>double</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>score returned by the homology search program</td>
    </tr>
    <tr>
      <td>perc_id</td>
      <td>tinyint(3) unsigned</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>Used for pairwise comparison. Defines the percentage of identity between both sequences</td>
    </tr>
    <tr>
      <td>length</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>total length of the alignment</td>
    </tr>
    <tr>
      <td>group_id</td>
      <td>bigint(20) unsigned</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>used to group alignments</td>
    </tr>
  </tbody>
</table>


<p>E.g. the row</p>


<pre>mysql&gt; SELECT * FROM genomic_align_block WHERE genomic_align_block_id = 5480000000010;
+------------------------+----------------------------+-------+---------+--------+----------+
| genomic_align_block_id | method_link_species_set_id | score | perc_id | length | group_id |
+------------------------+----------------------------+-------+---------+--------+----------+
|          5480000000010 |                        548 |  NULL | NULL    |  21571 |     NULL |
+------------------------+----------------------------+-------+---------+--------+----------+
</pre>


<p>
will refer to a primates EPO alignment (<a href="#method_link_species_set">method_link_species_set.method_link_species_set_id</a>
= 548) with a length of 21571 nucleotides. The actual sequences corresponding to this aligment are defined in the
<a href="#genomic_align">genomic_align</a> table.
</p>


<!--
#####################################################################
TABLE GENOMIC_ALIGN
#####################################################################
-->
<h4 id="genomic_align">genomic_align</h4>


<p>
This table contains the coordinates and all the information needed to
rebuild genomic alignments. Every entry corresponds to one of the
aligned sequences. It also contains an external key to the
<a href="#method_link_species_set">method_link_species_set</a>
which refers to the software and set of species
used for getting the corresponding alignment.
The aligned sequence is defined by an external reference to the
<a href="#dnafrag">dnafrag</a> table, the starting
and ending position within this dnafrag, the strand and a
cigar_line.
</p>


<p>
The original aligned sequence is not stored but it can be retrieved
using the <strong>cigar_line</strong> field and the
original sequence. The cigar line defines the sequence of
matches/mismatches and deletions (or gaps).
For example, this cigar line <strong>2MD3M2D2M</strong>
will mean that the alignment contains 2
matches/mismatches, 1 deletion (number 1 is omitted in order to save
some space), 3 matches/mismatches,
2 deletions and 2 matches/mismatches. If the original sequence is:
</p>


<ul>


  <li>
    
    <p><strong>Original sequence:</strong> AACGCTT
    </p>


  </li>


</ul>


<p>The aligned sequence will be:</p>


<table>
  <caption>cigar line: 2MD3M2D2M</caption>
  <thead><tr>
    <th>M</th>
    <th>M</th>
    <th>D</th>
    <th>M</th>
    <th>M</th>
    <th>M</th>
    <th>D</th>
    <th>D</th>
    <th>M</th>
    <th>M</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>A</td>
      <td>A</td>
      <td>-</td>
      <td>C</td>
      <td>G</td>
      <td>C</td>
      <td>-</td>
      <td>-</td>
      <td>T</td>
      <td>T</td>
    </tr>
  </tbody>
</table>


<table class="spreadsheet">
  <caption>genomic_align_block table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>genomic_align_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>unique internal id</td>
    </tr>
    <tr>
      <td>genomic_align_block_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#genomic_align_block">genomic_align_block.genomic_align_block_id</a></td>
    </tr>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>external reference to
      <a href="#method_link_species_set">method_link_species_set.method_link_species_set_id</a>.
This information is redundant because it also appears in the
      <a href="#genomic_align_block">genomic_align_block</a>
table but it is used to speed up the queries</td>
    </tr>
    <tr>
      <td>dnafrag_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>external reference to <a href="#dnafrag">dnafrag.dnafrag_id</a></td>
    </tr>
    <tr>
      <td>dnafrag_start</td>
      <td>int(10)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>starting position within the dnafrag defined by
dnafrag_id</td>
    </tr>
    <tr>
      <td>dnafrag_end</td>
      <td>int(10)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>ending position within the dnafrag defined by dnafrag_id</td>
    </tr>
    <tr>
      <td>dnafrag_strand</td>
      <td>tinyint(4)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>strand in the dnafrag defined by dnafrag_id</td>
    </tr>
    <tr>
      <td>cigar_line</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>internal description of the aligned sequence</td>
    </tr>
    <tr>
      <td>level_id</td>
      <td>tinyint(2) unsigned</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>level of orhologous layer. 1 corresponds to the first
layer of orthologous sequences found, 2 and over
are addiotional layers. Use for building the <a href="#synteny_region">syntenies</a> (based on
level_id
= 1 only)</td>
    </tr>
  </tbody>
</table>


<p>E.g. the rows</p>


<pre>mysql&gt; SELECT * FROM genomic_align WHERE genomic_align_block_id = 5480000000010;
+------------------+------------------------+----------------------------+------------+---------------+-------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+
| genomic_align_id | genomic_align_block_id | method_link_species_set_id | dnafrag_id | dnafrag_start | dnafrag_end | dnafrag_strand | cigar_line | level_id |
+------------------+------------------------+----------------------------+------------+---------------+-------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+
|    5480000000019 |          5480000000010 | 548 |    1045560 | 49963980  |    49974667 |              1 | 401MD210MD16M6706D64M2D125MD20MD96M3D24M987D167M9D190M3D16M4D153M11D72M14D88MD36MD22M2D59MD186M5D216M15D4M5D83M3D55MD73M137D109M2D89MD61MD158MD123MD323MD20MD25M3D22MD66M1044D45M387D5M6D251MD107MD9M2D238M3D33M7D38M16D63M3D144MD218MD50M11D60M9D191MD158M4D41M13D59M2D49M3D39MD32MD58M2D17M5D55M3D30M5D185M7D7M9D10M633D99M32D2M9D69M2DMD9M7D44M6D98MD11MD194MD28MD137MD384M2D11M14D154M4D3MD394M582D3MD64M4D95MD46M6D3M2D17M15D230MD362MD107M3D344M5DMD417M5D27M2D58M20D286MD84M4D44M4D186M14D16M10D162MD157M4D88MD231MD429M4D29M |            1 |
|    5480000000020 |          5480000000010 | 548 |   12179431 |      70205099 |    70215984 |              1 | 355M5D85M4D180M6706D64M2D270M987D64M3D318M4D89M18D47M5D31MD22M6D17M14D432M10D37MD43MD112M5D134M3D4MD73M137D2MD66M40D29MD406MD298M3D43MD25M2D23MD66M1044D45M387D5M6D79M99D73MD107MD285M7D38M16D40M5D18M3D61M14D288MD50M11D60M9D401M10D56M2D91MD110M5D50M3D2M3D148M10D62MD13M9D10M262D11M3D2M6D315M10D131M6D41MD56M2D62M54D50MD58M7D34M2D6M6D5M3D241MD10MD70MD313M2D11M14D154M8D394M582D214M6D3M18DM15D230MD817M5DMD212MD204M5D27M2D363MD79M4D2M4D81M3D83M4D56M2D37M4D166MD297M2DMD180MD7M4D241M2D24M15D169M |        1 |
|    5480000000021 |          5480000000010 | 548 |   13113625 |      45200028 |    45220283 |             -1 | 355M5D27M4D51M7D11M10D36MD18M4D71MD13M5D6803M2D70M2D51MD1174M3D185MD16M17D192M18D46M17D20MD40M2D47M3D92M2D120MD184MD66M4D45M2D36M2D136M4D47M3D19M8D21MD168MD36MD29M42D27MDM8D83MD281MD40MD14M4D413MD1582M127D65MD117M4D3MD208M5D134MD6M5D3M3D19MD57M14D4M2D48MD13MDM2D155M6D288M2D39M8D113M2D21M2D31MD69MD4M16D16M3D90M4D19MD22MD21M3DMD58M2D56MD15M3D36M2D55M2D44M2D12M10D62MDM629DM10D161M12D5MD64M13D53MD152M7D32M9DM6D5M3D30M2D8M3D180MD17MD22M2D47M2D8MD96M4D109MD164MD118M75D179M4D34MD17M4D739M4D57M8D27M3D164M4D122MD243MD335MD437MD119M7D232MD86M4D198MD2M2D78M4D84M8D84M4D56M6D28M6D22M4D6M3D114MD16MD297M4D105M2D129MD222M5D179M |        1 |
|    5480000000022 |          5480000000010 | 548 |   13203833 |      52175893 |    52186820 |              1 | 355M5D85M4D180M6706D64M2D185M2D83M987D64M3D119MD198M4D89M18D47M5D5M3D23MD45M14D255MD176M10D81MD112M5D83M3D48M3D4MD73M137D2MD66M42D27MD372M4D30MD298M3D43MD25M2D23MD66M1044D45M387D5M6D79M99D73MD107MD285M7D38M16D40M5D18M3D62M4DM8D288MD50M11D60M9D467M2D91MD91M2D17M5D50M3D2M3D148M10D62MD352M9D10M108D18M134D17M6D118M6D27MD13MD56M2D62M54D50MD58M7D42M6D5M3D241MD10MD70MD313M2D11M14D65M3D7M4D477M582D212M8D3M18DM15D230MD817M5DMD417M5D27M2D363M2D78M4D2M4D81M3D180M6D464M2D182MD7M4D267M15D169M |        1 |
|    5480000000023 |          5480000000010 | 548 |   13211513 |      69435755 |    69446651 |              1 | 143M4D208M5D85M4D14M7D159M6706D64M2D270M987D64M3D318M4D89M18D83MD45M14D432M10D37MD43MD112M5D84MD49M3D4MD73M137D2MD66M40D29MD406MD298M3D43MD25M2D23MD66M1044D45M387D5M6D79M99D73MD107MD276MD8M7D38M16D40M5D18M3D67M8D69MD63M4D151MD50M11D60M9D467M2D91MD32MD58M2D17M5D50M3D2M3D148M10D76M9D10M262D11M3D2M6D280MD34M10D131M6D24M6D11MD56M2D62M54D50MD18M2D38M7D33M3D6M6D5M3D241MD10MD70MD313M2D11M14D556M582D210M12DM18DM15D230MD817M5DMD417M5D27M2D363M2D78M4D2M4D81M3D352MD297M2DMD180MD7M4D267M15D169M |        1 |
+------------------+------------------------+----------------------------+------------+---------------+-------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+
</pre>


<p>
correspond to the three sequences included in the alignment
described above (see
<a href="#genomic_align_block">genomic_align_block</a>
table description). The first sequence includes the nucleotides from
49963980 to 49974667 in the forward strand of the chromosome 17 of the
macaca_mulatta genome
(<a href="#dnafrag">dnafrag.dnafrag_id</a> = 1045560).
And so on
</p>


<p>Here is a better way to get this by joining the <a href="#dnafrag">dnafrag</a>
and <a href="#genome_db">genome_db</a> tables:
</p>


<pre>mysql&gt; SELECT genome_db.name, dnafrag.name, dnafrag_start, dnafrag_end, dnafrag_strand str, cigar_line FROM genomic_align LEFT JOIN dnafrag USING (dnafrag_id) LEFT JOIN genome_db USING (genome_db_id) WHERE genomic_align_block_id = 5480000000010;
+--------------------+------+---------------+-------------+-----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| name               | name | dnafrag_start | dnafrag_end | str |
  cigar_line
  |
+--------------------+------+---------------+-------------+-----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| macaca_mulatta     | 17   |      49963980 |    49974667 |   1 |
  401MD210MD16M6706D64M2D125MD20MD96M3D24M987D167M9D190M3D16M4D153M11D72M14D88MD36MD22M2D59MD186M5D216M15D4M5D83M3D55MD73M137D109M2D89MD61MD158MD123MD323MD20MD25M3D22MD66M1044D45M387D5M6D251MD107MD9M2D238M3D33M7D38M16D63M3D144MD218MD50M11D60M9D191MD158M4D41M13D59M2D49M3D39MD32MD58M2D17M5D55M3D30M5D185M7D7M9D10M633D99M32D2M9D69M2DMD9M7D44M6D98MD11MD194MD28MD137MD384M2D11M14D154M4D3MD394M582D3MD64M4D95MD46M6D3M2D17M15D230MD362MD107M3D344M5DMD417M5D27M2D58M20D286MD84M4D44M4D186M14D16M10D162MD157M4D88MD231MD429M4D29M
  |
| homo_sapiens       | 13   |      70205099 |    70215984 |   1 |
  355M5D85M4D180M6706D64M2D270M987D64M3D318M4D89M18D47M5D31MD22M6D17M14D432M10D37MD43MD112M5D134M3D4MD73M137D2MD66M40D29MD406MD298M3D43MD25M2D23MD66M1044D45M387D5M6D79M99D73MD107MD285M7D38M16D40M5D18M3D61M14D288MD50M11D60M9D401M10D56M2D91MD110M5D50M3D2M3D148M10D62MD13M9D10M262D11M3D2M6D315M10D131M6D41MD56M2D62M54D50MD58M7D34M2D6M6D5M3D241MD10MD70MD313M2D11M14D154M8D394M582D214M6D3M18DM15D230MD817M5DMD212MD204M5D27M2D363MD79M4D2M4D81M3D83M4D56M2D37M4D166MD297M2DMD180MD7M4D241M2D24M15D169M
  |
| callithrix_jacchus | 1    |      45200028 |    45220283 |  -1 |
  355M5D27M4D51M7D11M10D36MD18M4D71MD13M5D6803M2D70M2D51MD1174M3D185MD16M17D192M18D46M17D20MD40M2D47M3D92M2D120MD184MD66M4D45M2D36M2D136M4D47M3D19M8D21MD168MD36MD29M42D27MDM8D83MD281MD40MD14M4D413MD1582M127D65MD117M4D3MD208M5D134MD6M5D3M3D19MD57M14D4M2D48MD13MDM2D155M6D288M2D39M8D113M2D21M2D31MD69MD4M16D16M3D90M4D19MD22MD21M3DMD58M2D56MD15M3D36M2D55M2D44M2D12M10D62MDM629DM10D161M12D5MD64M13D53MD152M7D32M9DM6D5M3D30M2D8M3D180MD17MD22M2D47M2D8MD96M4D109MD164MD118M75D179M4D34MD17M4D739M4D57M8D27M3D164M4D122MD243MD335MD437MD119M7D232MD86M4D198MD2M2D78M4D84M8D84M4D56M6D28M6D22M4D6M3D114MD16MD297M4D105M2D129MD222M5D179M
  |
| gorilla_gorilla    | 13   |      52175893 |    52186820 |   1 |
  355M5D85M4D180M6706D64M2D185M2D83M987D64M3D119MD198M4D89M18D47M5D5M3D23MD45M14D255MD176M10D81MD112M5D83M3D48M3D4MD73M137D2MD66M42D27MD372M4D30MD298M3D43MD25M2D23MD66M1044D45M387D5M6D79M99D73MD107MD285M7D38M16D40M5D18M3D62M4DM8D288MD50M11D60M9D467M2D91MD91M2D17M5D50M3D2M3D148M10D62MD352M9D10M108D18M134D17M6D118M6D27MD13MD56M2D62M54D50MD58M7D42M6D5M3D241MD10MD70MD313M2D11M14D65M3D7M4D477M582D212M8D3M18DM15D230MD817M5DMD417M5D27M2D363M2D78M4D2M4D81M3D180M6D464M2D182MD7M4D267M15D169M
  |
| pan_troglodytes    | 13   |      69435755 |    69446651 |   1 |
  143M4D208M5D85M4D14M7D159M6706D64M2D270M987D64M3D318M4D89M18D83MD45M14D432M10D37MD43MD112M5D84MD49M3D4MD73M137D2MD66M40D29MD406MD298M3D43MD25M2D23MD66M1044D45M387D5M6D79M99D73MD107MD276MD8M7D38M16D40M5D18M3D67M8D69MD63M4D151MD50M11D60M9D467M2D91MD32MD58M2D17M5D50M3D2M3D148M10D76M9D10M262D11M3D2M6D280MD34M10D131M6D24M6D11MD56M2D62M54D50MD18M2D38M7D33M3D6M6D5M3D241MD10MD70MD313M2D11M14D556M582D210M12DM18DM15D230MD817M5DMD417M5D27M2D363M2D78M4D2M4D81M3D352MD297M2DMD180MD7M4D267M15D169M
  |
+--------------------+------+---------------+-------------+-----+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
</pre>


<p>
The aligned sequences can be rebuild using the original sequences
fetched from the corresponding core
databases and the cigar lines as explained before.
</p>


<!--
#####################################################################
TABLE GENOMIC_ALIGN_TREE
#####################################################################
-->
<h4 id="genomic_align_tree">genomic_align_tree</h4>


<p>This table is used to index tree alignments, e.g. EPO alignments. These alignments include inferred ancestral sequences. The tree required
to index these sequences is stored in this table. This table stores the structure of the tree. Each node links to an entry in the <a href="#genomic_align_group">genomic_align_group</a> table, which links to one or several entries in the <a href="#genomic_align">genomic_align</a> table.</p>


<table class="spreadsheet">


  <caption>genomic_align_tree table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>node_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique id</td>
    </tr>
    <tr>
      <td>parent_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>link to the parent node</td>
    </tr>
    <tr>
      <td>root_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>link to the root node</td>
    </tr>
    <tr>
      <td>left_index</td>
      <td>int(10)</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>internal index. See below</td>
    </tr>
    <tr>
      <td>right_index</td>
      <td>int(10)</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>internal index. See below</td>
    </tr>
    <tr>
      <td>left_node_id</td>
      <td>bigint(10)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td>link to the node on the left side of this node</td>
    </tr>
    <tr>
      <td>right_node_id</td>
      <td>bigint(10)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td>link to the node on the right side of this node</td>
    </tr>
    <tr>
      <td>distance_to_parent</td>
      <td>double</td>
      <td>NO</td>
      <td></td>
      <td>1</td>
      <td></td>
      <td>phylogenetic distance between this node and its parent</td>
    </tr>
  </tbody>
</table>

<p>Left_index and right_index are used to speed up fetching trees from the database. Any given node has its left_index larger than the left_index of its parent node and its right index smaller than the right_index of its parent node. In other words, all descendent nodes of a given node can be obtained by fetching all the node with a left_index (or right_index or both) between the left_index and the right_index of that node.</p>

<p>E.g. the row</p>

<pre>mysql &gt; SELECT * FROM genomic_align_tree WHERE node_id = 5050000000384;
+---------------+-----------+---------------+------------+-------------+--------------+---------------+--------------------+
| node_id       | parent_id | root_id       | left_index | right_index | left_node_id | right_node_id | distance_to_parent |
+---------------+-----------+---------------+------------+-------------+--------------+---------------+--------------------+
| 5050000000384 |         0 | 5050000000384 |  700000767 |   700000780 |            0 |             0 |              1e-05 |
+---------------+-----------+---------------+------------+-------------+--------------+---------------+--------------------+
</pre>

<p>
correspond to the root of a tree, because parent_id = 0 and root_id = node_id. In order to fetch all the nodes of this tree, one can use the left_index and right_index values:
</p>

<pre>mysql &gt; SELECT * FROM genomic_align_tree WHERE left_index &gt;= 700000767 and left_index &lt;= 700000780;
+---------------+---------------+---------------+------------+-------------+---------------+---------------+--------------------+
| node_id       | parent_id     | root_id       | left_index | right_index | left_node_id  | right_node_id | distance_to_parent |
+---------------+---------------+---------------+------------+-------------+---------------+---------------+--------------------+
| 5050000000384 |             0 | 5050000000384 |  700000767 |   700000780 |             0 |             0 |              1e-05 |
| 5050000000385 | 5050000000384 | 5050000000384 |  700000768 |   700000773 |             0 |             0 |              1e-05 |
| 5050000000387 | 5050000000385 | 5050000000384 |  700000769 |   700000770 | 5050000017109 | 5050000018754 |           0.005763 |
| 5050000000386 | 5050000000385 | 5050000000384 |  700000771 |   700000772 | 5050000004222 | 5050000006029 |            0.00664 |
| 5050000000388 | 5050000000384 | 5050000000384 |  700000774 |   700000779 | 5050000022808 | 5050000018751 |           0.281407 |
| 5050000000390 | 5050000000388 | 5050000000384 |  700000775 |   700000776 | 5050000022809 | 5050000018752 |           0.033656 |
| 5050000000389 | 5050000000388 | 5050000000384 |  700000777 |   700000778 | 5050000022810 | 5050000018753 |           0.041709 |
+---------------+---------------+---------------+------------+-------------+---------------+---------------+--------------------+
</pre>

<p>
The API rebuilds the tree using this information. In this example, the tree is:</p>

<pre>(5050000000384 700000767,700000780)Tgut-Mgal-Ggal-Tgut[4]
|-(5050000000385 700000768,700000773)Tgut-Tgut[2]
| |-(5050000000387 700000769,700000770)Tgut_1A_67082846_67096418[-]
| |-(5050000000386 700000771,700000772)Tgut_Un_165936071_165946337[+]
|-----------------------------(5050000000388 700000774,700000779)Mgal-Ggal[2]
                              |----(5050000000390 700000775,700000776)Ggal_1_58700491_58713206[-]
                              |-----(5050000000389 700000777,700000778)Mgal_1_57744366_57757821[-]</pre>

<p>Please, refer to the <a href="#genomic_align_group">genomic_align_group</a> table for more examples on how to access tree alignments
</p>

<!--
#####################################################################
TABLE GENOMIC_ALIGN_GROUP
#####################################################################
-->
<h4 id="genomic_align_group">genomic_align_group</h4>


<p>This table is used to group genomic_aligns. It is used to support 2X genomes in the EPO alignments. These 2X genomes are split
into very small regions. We can use more than one of these regions in one single EPO alignments. This table allows us to link one single
<a href="#genomic_align_tree">genomic_align_tree.node_id</a> with several <a href="#genomic_align">genomic_align</a> entries.</p>


<table class="spreadsheet">


  <caption>genomic_align_group table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>node_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td>auto_increment</td>
      <td>external reference to <a href="#genomic_align_tree">genomic_align_tree.node_id</a></td>
    </tr>
    <tr>
      <td>genomic_align_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#genomic_align">genomic_align.genomic_align_id</a></td>
    </tr>

  </tbody>
</table>


<p>E.g. the rows</p>


<pre>mysql&gt; SELECT * FROM genomic_align_group WHERE group_id = 5530000000071;
+---------------+------------------+
| node_id       | genomic_align_id |
+---------------+------------------+
| 5530000000071 |    5530000000044 |
| 5530000000071 |    5530000000045 |
| 5530000000071 |    5530000000046 |
| 5530000000071 |    5530000000047 |
+---------------+------------------+
</pre>

<p>correspond to several segments from a 2X genome (the hedgehog in this case) that are linked together in this EPO alignment.</p>

<pre>mysql&gt; SELECT genomic_align_group.node_id, genome_db.name AS species, dnafrag.name AS chromosome, dnafrag_start, dnafrag_end, dnafrag_strand FROM genomic_align_group JOIN genomic_align USING (genomic_align_id) JOIN dnafrag USING (dnafrag_id) JOIN genome_db USING (genome_db_id) WHERE genomic_align_group.node_id = 5530000000071;
+---------------+-------------------+-----------------+---------------+-------------+----------------+
| node_id       | species           | chromosome      | dnafrag_start | dnafrag_end | dnafrag_strand |
+---------------+-------------------+-----------------+---------------+-------------+----------------+
| 5530000000071 | echinops_telfairi | scaffold_299909 |          3719 |        3770 |              1 |
| 5530000000071 | echinops_telfairi | scaffold_299909 |          3771 |        4500 |              1 |
| 5530000000071 | echinops_telfairi | scaffold_299909 |          8019 |        8729 |              1 |
| 5530000000071 | echinops_telfairi | scaffold_299909 |         10830 |       11408 |              1 |
+---------------+-------------------+-----------------+---------------+-------------+----------------+
</pre>

<!--
#####################################################################
TABLE CONSERVATION SCORE
#####################################################################
-->
<h4 id="conservation_score">conservation_score</h4>


<p>Contains conservation scores calculated from the whole-genome multiple alignments stored in the genomic_align_block table.</p>


<table class="spreadsheet">


  <caption>conservation_score table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>genomic_align_block_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#genomic_align_block">genomic_align_block.node_id</a></td>
    </tr>
    <tr>
      <td>window_size</td>
      <td>smallint(5) unsigned</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>The scores are stored at different resolution levels. This column defines the window size used to calculate the average score.</td>
    </tr>
    <tr>
      <td>position</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>expected_score</td>
      <td>blob</td>
      <td>YES</td>
      <td></td>
      <td>MUL</td>
      <td></td>
      <td>expected score</td>
    </tr>
    <tr>
      <td>diff_score</td>
      <td>blob</td>
      <td>YES</td>
      <td></td>
      <td>MUL</td>
      <td></td>
      <td>diff_score is the difference between the expected and observed variation, i.e. the conservation score.</td>
    </tr>
  </tbody>
</table>

<p>Several scores are stored per row. expected_score and diff_score are binary columns and you need to use the Perl API to access these data.</p>

<!--
#####################################################################
TABLE CONSTRAINED ELEMENT
#####################################################################
-->
<h4 id="constrained_element">constrained_element</h4>


<p>Contains constrained elements calculated from the whole-genome multiple alignments stored in the genomic_align_block table.</p>


<table class="spreadsheet">


  <caption>constrained_element table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>constrained_element_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>internal ID</td>
    </tr>
    <tr>
      <td>dnafrag_id</td>
      <td>int(12) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#dnafrag">dnafrag.dnafrag_id</a></td>
    </tr>
    <tr>
      <td>dnafrag_start</td>
      <td>int(12)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>start of the constrained element</td>
    </tr>
    <tr>
      <td>dnafrag_end</td>
      <td>int(12)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>end of the constrained element</td>
    </tr>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#method_link_species_set">method_link_species_set.method_link_species_set_id</a></td>
    </tr>
    <tr>
      <td>p_value</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>p-value derived from Gerp</td>
    </tr>
    <tr>
      <td>taxonomic_level</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>indicates the taxonomic range of the alignments from which the constrained elements were derived</td>
    </tr>
    <tr>
      <td>score</td>
      <td>double</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>score derived from Gerp</td>
    </tr>
    <tr>
      <td>dnafrag_strand</td>
      <td>int(2)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>Strand of the sequence in the alignment</td>
    </tr>
  </tbody>
</table>


<p>E.g. the row</p>


<pre>mysql&gt; SELECT * FROM constrained_element LIMIT 1;
+------------------------+------------+---------------+-------------+----------------+----------------------------+-------------+-----------------+-------+
| constrained_element_id | dnafrag_id | dnafrag_start | dnafrag_end | dnafrag_strand | method_link_species_set_id | p_value     | taxonomic_level | score |
+------------------------+------------+---------------+-------------+----------------+----------------------------+-------------+-----------------+-------+
|          5060000000001 |   12160541 |        403245 |      403580 |            -1  |                        506 | 1.53905e-11 | neognath birds  | 104.6 |
+------------------------+------------+---------------+-------------+----------------+----------------------------+-------------+-----------------+-------+


+------------------------+------------+---------------+-------------+----------------------------+---------+---------------------+-------+
| constrained_element_id | dnafrag_id | dnafrag_start | dnafrag_end | method_link_species_set_id | p_value | taxonomic_level     | score |
+------------------------+------------+---------------+-------------+----------------------------+---------+---------------------+-------+
|          3390000000001 |     905404 |     114071407 |   114071438 |                        339 | NULL    | amniota vertebrates |  27.5 |
+------------------------+------------+---------------+-------------+----------------------------+---------+---------------------+-------+ 
</pre>


<p>
refers to a constrained element from chromosome 1A_random of
taeniopygia_guttata located between nucleotide positions 403245 and 403580.
</p>

<p>There are 2 other elements in the same constrained_element:</p>
<pre>mysql&gt; SELECT constrained_element_id, genome_db.name, dnafrag.name FROM constrained_element JOIN dnafrag USING (dnafrag_id) JOIN genome_db USING (genome_db_id) WHERE constrained_element_id = 5060000000001;
+------------------------+---------------------+-----------+
| constrained_element_id | name                | name      |
+------------------------+---------------------+-----------+
|          5060000000001 | taeniopygia_guttata | 1A_random |
|          5060000000001 | gallus_gallus       | 1         |
|          5060000000001 | meleagris_gallopavo | 1         |
+------------------------+---------------------+-----------+
</pre>

<!--
#####################################################################
TABLE SYNTENY_REGION
#####################################################################
-->
<h4 id="synteny_region">synteny_region</h4>


<p>Contains all the syntenic relationships found and the relative
orientation of both syntenic regions.</p>


<table class="spreadsheet">
  <caption>synteny_region table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>synteny_region_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to
      <a href="#method_link_species_set">method_link_species_set.method_link_species_set_id</a>.</td>
    </tr>
  </tbody>
</table>


<p>E.g. the row</p>


<pre>mysql&gt; SELECT * FROM synteny_region WHERE synteny_region_id = 33234;
+-------------------+----------------------------+
| synteny_region_id | method_link_species_set_id |
+-------------------+----------------------------+
|             33234 |                      10021 |
+-------------------+----------------------------+
</pre>


<p>
means that the syntenic region 33234 corresponds to a synteny
relationship between the Mouse and Rat genomes.
</p>

<pre>mysql&gt; SELECT synteny_region_id, name FROM synteny_region join method_link_species_set USING(method_link_species_set_id) WHERE synteny_region_id = 33234;
+-------------------+---------------------+
| synteny_region_id | name                |
+-------------------+---------------------+
|             33234 | M.mus-R.nor synteny |
+-------------------+---------------------+
</pre>

<p>
See <a href="#dnafrag_region">dnafrag_region</a>
table for more details.
</p>


<!--
#####################################################################
TABLE DNAFRAG_REGION
#####################################################################
-->
<h4 id="dnafrag_region">dnafrag_region</h4>


<p>
Contains the genomic regions corresponding to every synteny
relationship found.
There are two genomic regions for every synteny relationship.
</p>


<table class="spreadsheet">
  <caption>dnafrag_region table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>synteny_region_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>external reference to <a href="#synteny_region">synteny_region.synteny_region_id</a></td>
    </tr>
    <tr>
      <td>dnafrag_id</td>
      <td>bigint(20) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td>0</td>
      <td></td>
      <td>external reference to <a href="#dnafrag">dnafrag.dnafrag_id</a></td>
    </tr>
    <tr>
      <td>dnafrag_start</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>first nucleotide from this dnafrag which is in synteny</td>
    </tr>
    <tr>
      <td>dnafrag_end</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>last nucleotide from this dnafrag which is in synteny</td>
    </tr>
    <tr>
      <td>dnafrag_strand</td>
      <td>tinyint(4)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>strand of this region</td>
    </tr>
  </tbody>
</table>


<p>E.g. the rows</p>


<pre>mysql&gt; SELECT * FROM dnafrag_region WHERE synteny_region_id = 33234;
+-------------------+------------+---------------+-------------+----------------+
| synteny_region_id | dnafrag_id | dnafrag_start | dnafrag_end | dnafrag_strand |
+-------------------+------------+---------------+-------------+----------------+
|             33234 |     175243 |        106695 |    16719004 |             -1 |
|             33234 |    3997580 |       3000306 |    17925237 |              1 |
+-------------------+------------+---------------+-------------+----------------+
</pre>


<p>Here is a better way to get this by joining the <a href="#dnafrag">dnafrag</a>
and <a href="#genome_db">genome_db</a> tables:
</p>


<pre>A<br />mysql&gt; SELECT genome_db.name, dnafrag.name, dnafrag_start, dnafrag_end, dnafrag_strand FROM dnafrag_region LEFT JOIN dnafrag USING (dnafrag_id) LEFT JOIN genome_db USING (genome_db_id) WHERE synteny_region_id = 33234;
+-------------------+------+---------------+-------------+----------------+
| name              | name | dnafrag_start | dnafrag_end | dnafrag_strand |
+-------------------+------+---------------+-------------+----------------+
| rattus_norvegicus | 5    |        106695 |    16719004 |             -1 |
| mus_musculus      | 1    |       3000306 |    17925237 |              1 |
+-------------------+------+---------------+-------------+----------------+

+-------------------+------+---------------+-------------+----------------+
| name              | name | dnafrag_start | dnafrag_end | dnafrag_strand |
+-------------------+------+---------------+-------------+----------------+
| Rattus norvegicus | X    |           498 |    12057776 |             -1 |
| Homo sapiens      | X    |     115311888 |   125710881 |              1 |
+-------------------+------+---------------+-------------+----------------+
</pre>

<p>
correspond to both genomic regions of the synteny region 33234.
In this case, the first genomic region corresponds to the negative
strand
of the sequence from 106695 to 16719004 of the chromosome 5 of the
Rat genome
(<a href="#dnafrag">dnafrag_id</a> = 175243 for this
chromosome) and the
second one corresponds to the sequence from 3000306 to 17925237
of the chromosome 1 of the Mouse genome
(<a href="#dnafrag">dnafrag_id</a> = 3997580 for this
chromosome).
</p>



<!--
#####################################################################
#####################################################################
TABLES FOR ORTHOLOGUES AND PROTEIN CLUSTERS
#####################################################################
#####################################################################
-->
<h2>Tables For Orthologues and Protein
Clusters</h2>


<!--
#####################################################################
TABLE MEMBER
#####################################################################
-->
<h4 id="member">member</h4>


<p>This table links sequences to the EnsEMBL core DB or to
external DBs.</p>


<table class="spreadsheet">
  <caption>member table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>member_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>stable_id</td>
      <td>varchar(128)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>EnsEMBL stable ID or external ID (for Uniprot/SWISSPROT and Uniprot/SPTREMBL)</td>
    </tr>
    <tr>
      <td>version</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>version of the stable ID (see EnsEMBL core DB)</td>
    </tr>
    <tr>
      <td>source_name</td>
      <td>enum('ENSEMBLGENE', 'ENSEMBLPEP', 'Uniprot/SPTREMBL', 'Uniprot/SWISSPROT', 'ENSEMBLTRANS', 'EXTERNALCDS', 'ENSEMBLPROJ')</td>
      <td>NO</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>the source of the member</td>
    </tr>
    <tr>
      <td>taxon_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#ncbi_taxa_node">ncbi_taxa_node.taxon_id</a></td>
    </tr>
    <tr>
      <td>genome_db_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>external reference to <a href="#genome_db">genome_db.genome_db_id</a></td>
    </tr>
    <tr>
      <td>sequence_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>external reference to <a href="#sequence">sequence.sequence_id</a>.<br />
May be 0 when the sequence is not available in the <a href="#sequence">sequence</a> table, e.g. for a gene instance.</td>
    </tr>
    <tr>
      <td>gene_member_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>external reference to <a href="#member">member.memebr_id</a> to allow linkage from peptides to genes.</td>
    </tr>
    <tr>
      <td>description</td>
      <td>text</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>the description of the gene/protein as described in the core database or from the Uniprot entry</td>
    </tr>
    <tr>
      <td>chr_name</td>
      <td>char(40)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>chromosome where this sequence is located</td>
    </tr>
    <tr>
      <td>chr_start</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>first nucleotide of this chromosome which corresponds to this member</td>
    </tr>
    <tr>
      <td>chr_end</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>last nucleotide of this chromosome which corresponds to this member</td>
    </tr>
    <tr>
      <td>chr_strand</td>
      <td>tinyint(1)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>strand of the chromosome in which the member is</td>
    </tr>
    <tr>
      <td>display_label</td>
      <td>varchar(128)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>


<p>E.g. the row</p>


<pre>mysql&gt; SELECT * FROM member WHERE stable_id = "ENSP00000309431";
+-----------+-----------------+---------+-------------+----------+--------------+-------------+----------------+-...
| member_id | stable_id       | version | source_name | taxon_id | genome_db_id | sequence_id | gene_member_id | 
+-----------+-----------------+---------+-------------+----------+--------------+-------------+----------------+-...
|  4356858  | ENSP00000309431 |       4 | ENSEMBLPEP  |     9606 |           90 |    1544338  |      4356847   | 
+-----------+-----------------+---------+-------------+----------+--------------+-------------+----------------+-...

...+------------------------------------------------------------------------------+----------+-----------+---------+------------+---------------+
   | description                                                                  | chr_name | chr_start | chr_end | chr_strand | display_label |
...+------------------------------------------------------------------------------+----------+-----------+---------+------------+---------------+
   | Transcript:ENST00000308911 Gene:ENSG00000173213 Chr:18 Start:47390 End:49557 | 18       |     47390 |   49557 |         -1 | RP11-683L23.1 |
...+------------------------------------------------------------------------------+----------+-----------+---------+------------+---------------+
</pre>


<p>
refers to the human (<a href="#ncbi_taxa_node">ncbi_taxa_node.taxon_id</a> =
9606 or <a href="#genome_db">genome_db_id</a> = 90)
peptide ENSP00000309431 which is located in the chromosome 18 (from
47390 to 49557, in the reverse strand).
This peptide is described as "Transcript:ENST00000308911
Gene:ENSG00000173213 Chr:18 Start:47390 End:49557"
and the sequence can be found on the <a href="#sequence">sequence</a>
table.
</p>


<!--
#####################################################################
TABLE SEQUENCE
#####################################################################
-->
<h4 id="sequence">sequence</h4>


<p>
This table contains the protein sequences present in the member table
used in the protein alignment part of the
EnsEMBL Compara DB.
</p>


<table class="spreadsheet">
  <caption>sequence table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>sequence_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>length</td>
      <td>int(10)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>the length of the sequence</td>
    </tr>
    <tr>
      <td>sequence</td>
      <td>longtext</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>the sequence</td>
    </tr>
  </tbody>
</table>


<p>E.g. the row</p>


<pre>mysql&gt; SELECT * FROM sequence WHERE sequence_id = 30;
+-------------+--------+--------------------------------------------+
| sequence_id | length | sequence                                   |
+-------------+--------+--------------------------------------------+
|          30 |     42 | MLVESEYGDEILNAIAAIVNPSTKLAGEVGAAAQLVQKTARK |
+-------------+--------+--------------------------------------------+
</pre>


<p>contains a 42 aminoacids long sequence.</p>


<!--
#####################################################################
TABLE PEPTIDE_ALIGN_FEATURE
#####################################################################
-->
<h4 id="peptide_align_feature">peptide_align_feature</h4>


<p>
This tables stores the raw HSP local alignment results of peptide to
peptide alignments returned by a
BLAST run it is translated from a FeaturePair object.
</p>


<table class="spreadsheet">
  <caption>peptide_align_feature table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>peptide_align_feature_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>qmember_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#member">member.member_id</a> for the query peptide</td>
    </tr>
    <tr>
      <td>hmember_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#member">member.member_id</a> for the hit peptide</td>
    </tr>
    <tr>
      <td>qgenome_db_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#genome_db">genome_db.genome_db_id</a> for the query peptide (for query optimization)</td>
    </tr>
    <tr>
      <td>hgenome_db_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#genome_db">genome_db.genome_db_id</a> for the hit peptide (for query optimization)</td>
    </tr>
    <tr>
      <td>analysis_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#analysis">analysis.analyis_id</a></td>
    </tr>
    <tr>
      <td>qstart</td>
      <td>int(10)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>starting position in the query peptide sequence</td>
    </tr>
    <tr>
      <td>qend</td>
      <td>int(10)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>ending position in the query peptide sequence</td>
    </tr>
    <tr>
      <td>hstart</td>
      <td>int(11)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>starting position in the hit peptide sequence</td>
    </tr>
    <tr>
      <td>hend</td>
      <td>int(11)</td>
      <td>NO</td>
      <td></td>
      <td>0</td>
      <td></td>
      <td>ending position in the hit peptide sequence</td>
    </tr>
    <tr>
      <td>score</td>
      <td>double(16,4)</td>
      <td>NO</td>
      <td></td>
      <td>0.0000</td>
      <td></td>
      <td>blast score for this HSP</td>
    </tr>
    <tr>
      <td>evalue</td>
      <td>double</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>blast evalue for this HSP</td>
    </tr>
    <tr>
      <td>align_length</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>alignment length of HSP</td>
    </tr>
    <tr>
      <td>identical_matches</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>blast HSP match score</td>
    </tr>
    <tr>
      <td>perc_ident</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>percent identical matches in the HSP length</td>
    </tr>
    <tr>
      <td>positive_matches</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>blast HSP positive score</td>
    </tr>
    <tr>
      <td>perc_pos</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>precent positive matches in the HSP length</td>
    </tr>
    <tr>
      <td>hit_rank</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>rank in blast result</td>
    </tr>
    <tr>
      <td>cigar_line</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>cigar string coding the actual alignment</td>
    </tr>
  </tbody>
</table>


<p>E.g. the rows:</p>


<pre>mysql&gt; SELECT * FROM peptide_align_feature_homo_sapiens_22 WHERE peptide_align_feature_id = 5003775;
+--------------------------+------------+------------+---------------+---------------+-...
| peptide_align_feature_id | qmember_id | hmember_id | qgenome_db_id | hgenome_db_id | 
+--------------------------+------------+------------+---------------+---------------+-...
|                  5003775 |    4907705 |    3472156 |            90 |           116 | 
+--------------------------+------------+------------+---------------+---------------+-...

...+-------------+--------+------+--------+------+----------+---------+--------------+...
   | analysis_id | qstart | qend | hstart | hend | score    | evalue  | align_length |
...+-------------+--------+------+--------+------+----------+---------+--------------+...
   |          22 |      6 |  630 |      4 |  629 |2951.0000 |       0 |          626 |
...+-------------+--------+------+--------+------+----------+---------+--------------+...

...+-------------------+------------+------------------+----------+----------+------------+
   | identical_matches | perc_ident | positive_matches | perc_pos | hit_rank | cigar_line |
...+-------------------+------------+------------------+----------+----------+------------+
   |               554 |         88 |              602 |       96 |        1 |  571MD54M  |
...+-------------------+------------+------------------+----------+----------+------------+
</pre>


<p>corresponds to a particular hit found between a Homo sapiens protein and a
  Xenopus tropicalis protein:</p>

<pre>mysql&gt; SELECT g1.name as qgenome, m1.stable_id as qstable_id, g2.name as hgenome, m2.stable_id as hstable_id, score, evalue FROM peptide_align_feature_homo_sapiens_90 LEFT JOIN member m1 ON (qmember_id = m1.member_id) LEFT JOIN member m2 ON (hmember_id = m2.member_id) LEFT JOIN genome_db g1 ON (qgenome_db_id = g1.genome_db_id) LEFT JOIN genome_db g2 ON (hgenome_db_id = g2.genome_db_id) WHERE peptide_align_feature_id = 5003775;
+--------------+-----------------+--------------------+--------------------+-----------+--------+
| qgenome      | qstable_id      | hgenome            | hstable_id         | score     | evalue |
+--------------+-----------------+--------------------+--------------------+-----------+--------+
| homo_sapiens | ENSP00000348163 | xenopus_tropicalis | ENSXETP00000007942 | 2951.0000 |      0 |
+--------------+-----------------+--------------------+--------------------+-----------+--------+
</pre>


<!--
#####################################################################
TABLE HOMOLOGY
#####################################################################
-->
<h4 id="homology">homology</h4>


<p>
Contains all the genomic homologies found. There are two <a href="#homology_member">homology_member</a> entries
for each homology entry for now, but both the schema and the API can
handle more than just pairwise relations.
</p>


<table class="spreadsheet">
  <caption>homology table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>homology_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>stable_id</td>
      <td>varchar(40)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>stable ID of the pairwise homology relationship</td>
    </tr>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td></td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#method_link_species_set">method_link_species_set.method_link_species_set_id</a></td>
    </tr>
    <tr>
      <td>description</td>
      <td>enum('ortholog_one2one','apparent_ortholog_one2one','ortholog_one2many','ortholog_many2many','within_species_paralog','other_paralog','putative_gene_split','contiguous_gene_split','between_species_paralog','possible_ortholog','UBRH','BRH','MBRH','RHS','projection_unchanged','projection_altered')</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>describes the type of homology found</td>
    </tr>
    <tr>
      <td>subtype</td>
      <td>varchar(40)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>gives the taxonomy name of the latest common taxonomic ancestor for the considered homology e.g.
      <ul>
        <li><strong>Homo sapiens</strong></li>
        <li><strong>Amniota</strong></li>
        <li><strong>Diptera</strong></li>
        <li><strong>Etc...</strong></li>
      </ul>
      </td>
    </tr>
    <tr>
      <td>dn</td>
      <td>float(10,5)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>number of nonsynonymous substitutions per nonsynonymous site</td>
    </tr>
    <tr>
      <td>ds</td>
      <td>float(10,5)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>number of synonymous substitutions per synonymous site</td>
    </tr>
    <tr>
      <td>n</td>
      <td>float(10,1)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>number of nonsynonymous substitutions</td>
    </tr>
    <tr>
      <td>s</td>
      <td>float(10,1)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>number of synonymous substitutions</td>
    </tr>
    <tr>
      <td>lnl</td>
      <td>float(10,3)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>maximum likelihood test value</td>
    </tr>
    <tr>
      <td>threshold_on_ds</td>
      <td>float(10,5)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>used by the EnsEMBL Web Browser to decide whether or not to display dN/DS ratio</td>
    </tr>
    <tr>
      <td>ancestor_node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>external reference to protein_tree_node.node_id that represents the ancestor node between the 2 genes involved in the homology relation</td>
    </tr>
    <tr>
      <td>tree_node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to protein_tree_node.node_id that represents the root node of the tree that relates the 2 genes involved in the homology relation</td>
    </tr>
  </tbody>
</table>


<p>
<strong>dN</strong>, <strong>dS</strong>, <strong>N</strong>,
<strong>S</strong> and <strong>lnL</strong>
are
statistical values given by the <strong>codeml</strong>
program of the
<a href="http://abacus.gene.ucl.ac.uk/software/paml.html">Phylogenetic
Analysis by Maximum Likelihood (PAML)</a>
package.
</p>


<p>E.g. the row</p>


<pre>mysql&gt; SELECT * FROM homology WHERE homology_id = 4650;
+-------------+-----------+----------------------------+-------------------+----------+---------+---------+-------+------+----------+-----------------+------------------+--------------+
| homology_id | stable_id | method_link_species_set_id | description       | subtype  | dn      | ds      | n     | s    | lnl      | threshold_on_ds | ancestor_node_id | tree_node_id |
+-------------+-----------+----------------------------+-------------------+----------+---------+---------+-------+------+----------+-----------------+------------------+--------------+
|        4650 | NULL      |                      25276 | possible_ortholog | Eutheria | 0.19210 | 0.82390 | 241.1 | 82.9 | -687.349 |            NULL |          1078947 |       504362 |
+-------------+-----------+----------------------------+-------------------+----------+---------+---------+-------+------+----------+-----------------+------------------+--------------+
</pre>


<p>defines a pair of of possible orthologs between pongo_abelii and sus_scrofa. See <a href="#homology_member">homology_member</a> for more details</p>
<pre>mysql&gt;
SELECT homology_id, description, group_concat(genome_db.name) as species FROM homology LEFT JOIN method_link_species_set USING (method_link_species_set_id) LEFT JOIN species_set USING (species_set_id) LEFT JOIN genome_db USING(genome_db_id) WHERE homology_id = 4650 group by homology_id;
+-------------+-------------------+-------------------------+
| homology_id | description       | species                 |
+-------------+-------------------+-------------------------+
|        4650 | possible_ortholog | pongo_abelii,sus_scrofa |
+-------------+-------------------+-------------------------+
</pre>


<!--
#####################################################################
TABLE HOMOLOGY_MEMBER
#####################################################################
-->
<h4 id="homology_member">homology_member</h4>


<p>
Contains the sequences corresponding to every genomic homology
relationship found.
There are two homology_member entries for each pairwise <a href="#homology">homology</a> entry. As written in the
homology table section, both schema and API can deal with more than
pairwise relationships.
</p>


<p>
The original alignment is not stored but it can be retrieved using the <strong>cigar_line</strong>
field and the
original sequences. The cigar line defines the sequence of matches or
mismatches and deletions in the alignment.
</p>


<ul>
  <li>
    <pre><strong>First peptide sequence:</strong> SERCQVVVISIGPISVLSMILDFY</pre>
  </li>
  <li>
    <pre><strong>Second peptide sequence:</strong> SDRCQVLVISILSMIGLDFY</pre>
  </li>
  <li>
    <pre><strong>First corresponding cigar line:</strong> 20MD4M</pre>
  </li>
  <li>
    <pre><strong>Second corresponding cigar line:</strong> 11M5D9M</pre>
  </li>
</ul>


<p>The alignment will be:</p>


<table class="spreadsheet">
  <caption>Example of alignment reconstruction</caption>
  <tbody>
    <tr>
      <th>First peptide cigar line</th>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>D</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
    </tr>
    <tr>
      <th>First aligned peptide</th>
      <td>S</td>
      <td>E</td>
      <td>R</td>
      <td>C</td>
      <td>Q</td>
      <td>V</td>
      <td>V</td>
      <td>V</td>
      <td>I</td>
      <td>S</td>
      <td>I</td>
      <td>G</td>
      <td>P</td>
      <td>I</td>
      <td>S</td>
      <td>V</td>
      <td>L</td>
      <td>S</td>
      <td>M</td>
      <td>I</td>
      <td>-</td>
      <td>L</td>
      <td>D</td>
      <td>F</td>
      <td>Y</td>
    </tr>
    <tr>
      <th>Second aligned peptide</th>
      <td>S</td>
      <td>D</td>
      <td>R</td>
      <td>C</td>
      <td>Q</td>
      <td>V</td>
      <td>L</td>
      <td>V</td>
      <td>I</td>
      <td>S</td>
      <td>I</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>-</td>
      <td>L</td>
      <td>S</td>
      <td>M</td>
      <td>I</td>
      <td>G</td>
      <td>L</td>
      <td>D</td>
      <td>F</td>
      <td>Y</td>
    </tr>
    <tr>
      <th>Second peptide cigar line</th>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>D</td>
      <td>D</td>
      <td>D</td>
      <td>D</td>
      <td>D</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
      <td>M</td>
    </tr>
  </tbody>
</table>


<table class="spreadsheet">
  <caption>homology_member table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>homology_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#homology">homology.homology_id</a></td>
    </tr>
    <tr>
      <td>member_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#member">member.member_id</a>. It refers to the corresponding gene (ENSEMBL_GENE).</td>
    </tr>
    <tr>
      <td>peptide_member_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>external reference to <a href="#member">member.member_id</a>. It refers to the peptide/protein (ENSEMBL_PEP).</td>
    </tr>
    <tr>
      <td>peptide_align_feature_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>external reference to <a href="#peptide_align_feature">peptide_align_feature.peptide_align_feature_id</a></td>
    </tr>
    <tr>
      <td>cigar_line</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>an internal description of the alignment. It contains mathces/mismatches (M) and delations (D)and refers to the corresponding peptide_member_id sequence.</td>
    </tr>
    <tr>
      <td>cigar_start</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>defines the first aligned aminoacid</td>
    </tr>
    <tr>
      <td>cigar_end</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>defines the last aligned aminoacid</td>
    </tr>
    <tr>
      <td>perc_cov</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>defines the percentage of the peptide which has been aligned</td>
    </tr>
    <tr>
      <td>perc_id</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>defines the percentage of identity between both homologues</td>
    </tr>
    <tr>
      <td>perc_pos</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>defines the percentage of positivity (similarity) between both homologues</td>
    </tr>
  </tbody>
</table>


<p>E.g. the rows</p>


<pre>mysql&gt; SELECT * FROM homology_member WHERE homology_id = 4650;
+-------------+-----------+-------------------+--------------------------+------------+-------------+-----------+----------+---------+----------+
| homology_id | member_id | peptide_member_id | peptide_align_feature_id | cigar_line | cigar_start | cigar_end | perc_cov | perc_id | perc_pos |
+-------------+-----------+-------------------+--------------------------+------------+-------------+-----------+----------+---------+----------+
|        4650 |    423179 |            423181 |                     NULL | 108MD      |        NULL |      NULL |      100 |      71 |       81 |
|        4650 |   3704522 |           3704523 |                     NULL | 109M       |        NULL |      NULL |      100 |      71 |       80 |
+-------------+-----------+-------------------+--------------------------+------------+-------------+-----------+----------+---------+----------+
</pre>


<p>
refer to the two homologue sequences defined by the <a href="#homology">homology.homology_id</a> 4650. The
gene corresponding to the first sequence can be retrieved using the <a href="#member">member.member_id</a> 423179 and the
corresponding peptide using the <a href="#member">member.member_id</a>
423181. Gene and peptide sequence of the second homologue can retrieved in
the same way.
</p>


<!--
#####################################################################
TABLE FAMILY
#####################################################################
-->
<h4 id="family">family</h4>


<p>
Contains all the group homologies found. There are several <a href="#family_member">family_member</a> entries
for each family entry.
</p>


<table class="spreadsheet">
  <caption>family table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>family_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>stable_id</td>
      <td>varchar(40)</td>
      <td>NO</td>
      <td>UNI</td>
      <td></td>
      <td></td>
      <td>stable family ID</td>
    </tr>
    <tr>
      <td>version</td>
      <td>int(10)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>version of the stable_id (may only change when members migrate between this family and another one; stays the same otherwise)</td>
    </tr>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#method_link_species_set">method_link_species_set.method_link_species_set_id</a></td>
    </tr>
    <tr>
      <td>description</td>
      <td>varchar(255)</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>description of the family as found using the Longest Common String (LCS) of the descriptions of the member proteins.</td>
    </tr>
    <tr>
      <td>description_score</td>
      <td>double</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>Scores the accuracy of the annotation (max. 100)</td>
    </tr>
  </tbody>
</table>


<p>E.g. the row</p>


<pre>mysql&gt; SELECT * FROM family WHERE family_id = 25452;
+-----------+---------------------+---------+----------------------------+--------------+-------------------+
| family_id | stable_id           | version | method_link_species_set_id | description  | description_score |
+-----------+---------------------+---------+----------------------------+--------------+-------------------+
|     25452 | ENSFM00350000109081 |       2 |                      30035 | CATHELICIDIN |               100 |
+-----------+---------------------+---------+----------------------------+--------------+-------------------+
</pre>


<p>defines a family of "CATHELICIDIN" proteins. The score of the description is 100.</p>

<p>NOTE: stable_id are currently not stable. We are working in getting IDs stable between releases.</p>

<!--
#####################################################################
TABLE FAMILY_MEMBER
#####################################################################
-->
<h4 id="family_member">family_member</h4>


<p>
Contains the proteins corresponding to protein family relationship found. There are several family_member entries for each <a href="#family">family</a> entry.
</p>


<table class="spreadsheet">
  <caption>family_member table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>family_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#family">family.family_id</a></td>
    </tr>
    <tr>
      <td>member_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>external reference to <a href="#member">member.member_id</a></td>
    </tr>
    <tr>
      <td>cigar_line</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>internal description of the multiple alignment (see <a href="#homology_member">homology_member</a> table)</td>
    </tr>
  </tbody>
</table>


<p>E.g. the rows</p>


<pre>mysql&gt; SELECT * FROM family_member WHERE family_id = 54177;
+-----------+-----------+------------------------------+
| family_id | member_id | cigar_line                   |
+-----------+-----------+------------------------------+
|     54177 | 101618064 | 21D6M149D219M                |
|     54177 | 102232470 | M19D159M108D24M8D16M24D8M28D |
|     54177 | 102345121 | 395M                         |
|     54177 | 102454547 | 5M5D17M149D219M              |
+-----------+-----------+------------------------------+
</pre>


<p>
refer to the four members of the protein family 54177. The proteins can
be retieved using the <a href="#member">member_id</a>s. The multiple
alignment can be restored using the cigar_lines.
</p>

<!--
#####################################################################
TABLE GENE_TREE_ROOT
#####################################################################
-->
<h4 id="gene_tree_root">gene_tree_root</h4>


<p>
Header table to gene trees
</p>


<table class="spreadsheet">
  <caption>gene_tree_root table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>root_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>tree_type</td>
      <td>enum('proteinclusterset','proteinsupertree','proteintree','ncrnatree','ncrnaclusterset')</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>the type of tree</td>
    </tr>
    <tr>
      <td>clusterset_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>root_id for the set of clusters</td>
    </tr>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>links to method_link_species_set.method_link_species_set_id</td>
    </tr>
    <tr>
      <td>stable_id</td>
      <td>varchar(40)</td>
      <td>YES</td>
      <td>UNI</td>
      <td></td>
      <td></td>
      <td>Stable id for the tree</td>
    </tr>
    <tr>
      <td>version</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>version of the stable_id</td>
    </tr>
  </tbody>
</table>


<p>The database is able to contain several sets of trees computed on
  the same genes. We call these analysis "clustersets" and they can be
  distinguished with the clusterset_id field. Traditionally, the
  compara databases have contained only one clusterset
  (clusterset_id=1), but currently (starting on release 66) we have at
  least 2 (one for protein trees and one for ncRNA trees). The
  following SQL query retrieves all the node_id of the current clustersets<p>

<pre>
mysql&gt; SELECT * from gene_tree_root where tree_type like '%clusterset%';
+-----------+-------------------+---------------+----------------------------+-----------+---------+
| root_id   | tree_type         | clusterset_id | method_link_species_set_id | stable_id | version |
+-----------+-------------------+---------------+----------------------------+-----------+---------+
|         1 | proteinclusterset |             1 |                      40079 | NULL      |    NULL |
| 100000001 | ncrnaclusterset   |          NULL |                      40080 | NULL      |    NULL |
+-----------+-------------------+---------------+----------------------------+-----------+---------+
</pre>

<p> To get the number of trees of each type:</p>
<pre>mysql&gt; SELECT tree_type, count(*) FROM gene_tree_root group by
  tree_type order by count(*);
+-------------------+----------+
| tree_type         | count(*) |
+-------------------+----------+
| proteinclusterset |        1 |
| ncrnaclusterset   |        1 |
| ncrnatree         |      565 |
| proteinsupertree  |      575 |
| proteintree       |    19491 |
+-------------------+----------+
</pre>


<!--
#####################################################################
TABLE GENE_TREE_NODE
#####################################################################
-->
<h4 id="gene_tree_node">gene_tree_node</h4>


<p>
Contains the data structure of each tree.</p>


<table class="spreadsheet">
  <caption>gene_tree_node table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>parent_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>link to the parent node</td>
    </tr>
    <tr>
      <td>root_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>link to the root node</td>
    </tr>
    <tr>
      <td>left_index</td>
      <td>int(10)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>internal index. See below</td>
    </tr>
    <tr>
      <td>right_index</td>
      <td>int(10)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>internal index. See below</td>
    </tr>
    <tr>
      <td>distance_to_parent</td>
      <td>double</td>
      <td>NO</td>
      <td></td>
      <td>1</td>
      <td></td>
      <td>phylogenetic distance between this node and its parent</td>
    </tr>
  </tbody>
</table>


<p>In our data structure, all the trees of a given clusterset are arbitrarily connected to the same root. This eases to store and query in the same database the data from independant tree building analysis. Hence the "biological roots" of the trees are the children nodes of the main clusterset root. For instance the following SQL query</p>

<pre>mysql&gt; SELECT gtn.node_id FROM gene_tree_node gtn LEFT JOIN gene_tree_root gtr ON (gtn.parent_id = gtr.root_id) WHERE gtr.tree_type = 'proteinclusterset';

+---------+
| node_id |
+---------+
|       2 |
|     242 |
|     526 |
|     537 |
|     565 |
+---------+
...
+---------+
| 1007387 |
| 1007393 |
| 1007400 |
| 1007405 |
| 1007409 |
+---------+
18916 rows in set (0.34 sec)
</pre>

<p>will return the root nodes of the independant protein trees stored in the database</p>


<!--
#####################################################################
TABLE GENE_TREE_MEMBER
#####################################################################
-->
<h4 id="gene_tree_member">gene_tree_member</h4>


<p>
Contains the data about the leaf (joining the table with a member_id
from the member table, all ENSEMBLPEP members (ENSEMBLTRANS for ncRNAs)<br />
present in each tree. The method_link_species_set should link to an
entry that has a method_link.type="PROTEIN_TREES" (for protein trees)
or "NC TREES" (for ncRNA trees). For the aligment,
the cigar_* column hold the needed information to rebuild the alignment
using the Perl API, as it is done in the family/family_member tables.
As we store global multiple aligment you will notice that cigar_start
and cigar_end are always NULL. The table however is able to local
multiple alignment, then cigar_start/cigar_end should be set to their
correct value.</p>

<table class="spreadsheet">
  <caption>gene_tree_member</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>the id of node associated with this name</td>
    </tr>
    <tr>
      <td>member_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to member.member_id. &nbsp;Should always link to a protein (usually member.source_name='ENSEMBLPEP')</td>
    </tr>
    <tr>
      <td>cigar_line</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>compressed alignment information</td>
    </tr>
    <tr>
      <td>cigar_start</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>protein start (0 if the whole protein is in the alignment)</td>
    </tr>
    <tr>
      <td>cigar_end</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>protein end (0 if the whole protein is in the alignment)</td>
    </tr>
  </tbody>
</table>

<!--
#####################################################################
TABLE PROTEIN_TREE_MEMBER_SCORE
#####################################################################
-->
<h4 id="protein_tree_member_score">protein_tree_member_score</h4>


<p>
to allow certain nodes (leaves) to have aligned protein member_scores attached to them
</p>

<table class="spreadsheet">
  <caption>protein_tree_member_score table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>the id of node associated with this name</td>
    </tr>
    <tr>
      <td>root_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>the id of the tree root</td>
    </tr>
    <tr>
      <td>member_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>link to member.member_id in many-1 relation (single member per node)</td>
    </tr>
    <tr>
      <td>method_link_species_set_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>external reference to method_link_species_set.method_link_species_set_id</td>
    </tr>
    <tr>
      <td>cigar_line</td>
      <td>mediumtext</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>string with the alignment score values</td>
    </tr>
    <tr>
      <td>cigar_start</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>protein start (0 if the whole protein is in the alignment)</td>
    </tr>
    <tr>
      <td>cigar_end</td>
      <td>int(10)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>protein end (0 if the whole protein is in the alignment)</td>
    </tr>
  </tbody>
</table>


<!--
#####################################################################
TABLE GENE_TREE_NODE_TAG
#####################################################################
-->
<h4 id="gene_tree_tag">gene_tree_tag</h4>


<p>
Contains several tag/value data attached to node_ids
</p>


<table class="spreadsheet">
  <caption>gene_tree_node_tag table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>external reference to gene_tree_node.node_id</td>
    </tr>
    <tr>
      <td>tag</td>
      <td>varchar(50)</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>value</td>
      <td>mediumtext</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>

<!--
#####################################################################
TABLE GENE_TREE_NODE_ATTR
#####################################################################
-->
<h4 id="gene_tree_node_attr">gene_tree_node_attr</h4>


<p>
Contains several protein tree attributes data attached to node_ids
</p>


<table class="spreadsheet">
  <caption>gene_tree_node_attr table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>external reference to protein_tree_node.node_id</td>
    </tr>
    <tr>
      <td>node_type</td>
      <td>enum('duplication','dubious','speciation','gene_split')</td>
      <td>YES</td>
      <td></td>
      <td></td>
      <td></td>
      <td>type of homology</td>
    </tr>
    <tr>
      <td>taxon_id</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>refers to ncbi_taxa_node.node_id</td>
    </tr>
    <tr>
      <td>taxon_name</td>
      <td>varchar(255)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>refers to ncbi_taxa_name.name where ncbi_taxa_name.name_class='scientific name'</td>
    </tr>
    <tr>
      <td>bootstrap</td>
      <td>tinyint(3) unsigned</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>the bootstrap value of the node in the tree</td>
    </tr>
    <tr>
      <td>duplication_confidence_score</td>
      <td>double(4,5)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>tree_suport</td>
      <td>set('phyml_nt','nj_ds','phyml_aa','nj_dn','nj_mm','quicktree')</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>All the final trees are the result of merging different
      trees.</br>This column gives information about what trees
      support this node after the merge:
        <ul>
          <li><strong>phyml_aa</strong>: phyml tree built with the amino-acid model WAG</li>
          <li><strong>phyml_nt</strong>: phyml tree built with the nucleotide model HKY</li>
          <li><strong>nj_dn</strong>: Neighbor-joining tree built using dn as a distance (number of non-synonymous changes)</li>
          <li><strong>nj_ds</strong>: Neighbor-joining tree built using ds as a distance (number of synonymous changes)</li>
          <li><strong>nj_mm</strong>: Neighbor-joining tree built using the "p-distance"</li>
          <li><strong>quicktree</strong>: Neighbor-joining tree using QuickTree</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>



<!--
#####################################################################
TABLE GENE_TREE_ROOT_TAG
#####################################################################
-->
<h4 id="gene_tree_root_tag">gene_tree_root_tagr</h4>


<p>
Contains several tag/value data for gene_tree_roots
</p>


<table class="spreadsheet">
  <caption>gene_tree_root_tag table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>root_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>external reference to gene_tree_root.node_id</td>
    </tr>
    <tr>
      <td>tag</td>
      <td>varchar(50)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>value</td>
      <td>mediumtext</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>


<!--
#####################################################################
TABLE SITEWISE_ALN
#####################################################################
-->
<h4 id="sitewise_aln">sitewise_aln</h4>


<p>
Contains site-wise omega values found in the multiple alignments underlining the protein trees.
</p>


<table class="spreadsheet">
  <caption>sitewise_aln table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>sitewise_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>aln_position</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>the position in the whole GeneTree alignment, even if it is all_gaps in the subtree</td>
    </tr>
    <tr>
      <td>node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>MUL</td>
      <td></td>
      <td></td>
      <td>the root of the subtree for which the sitewise is calculated</td>
    </tr>
    <tr>
      <td>tree_node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>the root of the tree. it will be equal to node_id if we are calculating sitewise for the whole tree</td>
    </tr>
    <tr>
      <td>omega</td>
      <td>float(10,5)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>the estimated omega value at the position</td>
    </tr>
    <tr>
      <td>omega_lower</td>
      <td>float(10,5)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>the lower bound of the confidence interval</td>
    </tr>
    <tr>
      <td>omega_upper</td>
      <td>float(10,5)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>the upper bound of the confidence interval</td>
    </tr>
    <tr>
      <td>threshold_on_branch_ds</td>
      <td>float(10,5)</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>the used threshold to break a tree into subtrees when the dS value of a given branch is too big. This is defined in the configuration file for the genetree pipeline</td>
    </tr>
    <tr>
      <td>type</td>
      <td>enum('single_character', 'random', 'all_gaps', 'constant', 'default', 'negative1', 'negative2', 'negative3', 'negative4', 'positive1', 'positive2', 'positive3', 'positive4', 'synonymous')</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td>the predicted type for the codon/aminoacid</td>
    </tr>
  </tbody>
</table>



<!--
#####################################################################
TABLE MAPPING_SESSION
#####################################################################
-->
<h4 id="mapping_session">mapping_session</h4>


<p>
Contains one entry per stable_id mapping session (either for Families or for Protein Trees),
which contains the type, the date of the mapping, and which releases were linked together.
</p>


<table class="spreadsheet">
  <caption>mapping_session table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>mapping_session_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td>auto_increment</td>
      <td>internal unique ID</td>
    </tr>
    <tr>
      <td>type</td>
      <td>enum('family', 'tree')</td>
      <td>YES</td>
      <td>MUL</td>
      <td>NULL</td>
      <td></td>
      <td>Type of stable_ids that were mapped during this session</td>
    </tr>
    <tr>
      <td>when_mapped</td>
      <td>timestamp</td>
      <td>NO</td>
      <td></td>
      <td>CURRENT_TIMESTAMP</td>
      <td></td>
      <td>Normally, we use the date of creation of the mapping file being loaded. This prevents the date from chaging even if we accidentally remove the entry and have to re-load it.</td>
    </tr>
    <tr>
      <td>rel_from</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>rel.number from which the stable_ids were mapped during this session. rel_from &lt; rel_to </td>
    </tr>
    <tr>
      <td>rel_to</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>rel.number to which the stable_ids were mapped during this session. rel_from &lt; rel_to </td>
    </tr>
    <tr>
      <td>prefix</td>
      <td>char(4)</td>
      <td>NO</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>


<!--
#####################################################################
TABLE STABLE_ID_HISTORY
#####################################################################
-->
<h4 id="stable_id_history">stable_id_history</h4>


<p>
stable_id_history' table keeps the history of stable_id changes from one release to another.

The primary key 'object' describes a set of members migrating from stable_id_from to stable_id_to.
Their volume (related to the 'shared_size' of the new class) is reflected by the fractional 'contribution' field.

Since both stable_ids are listed in the primary key,
they are not allowed to be NULLs. We shall treat empty strings as NULLs.

If stable_id_from is empty, it means these members are newcomers into the new release.
If stable_id_to is empty, it means these previously known members are disappearing in the new release.
If both neither stable_id_from nor stable_id_to is empty, these members are truly migrating.
</p>


<table class="spreadsheet">
  <caption>stable_id_history table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>mapping_session_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>stable_id_from</td>
      <td>varchar(40)</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>version_from</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>stable_id_to</td>
      <td>varchar(40)</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>version_to</td>
      <td>int(10) unsigned</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td>contribution</td>
      <td>float</td>
      <td>YES</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>


<!--
#####################################################################
TABLE PROTEIN_TREE_STABLE_ID
#####################################################################
-->
<h4 id="protein_tree_stable_id">protein_tree_stable_id</h4>


<p>
to allow protein trees have trackable stable_ids
</p>


<table class="spreadsheet">
  <caption>protein_tree_stable_id table description</caption>
  <thead><tr>
    <th>Field</th>
    <th>Type</th>
    <th>Null</th>
    <th>Key</th>
    <th>Default</th>
    <th>Extra</th>
    <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
      <td>node_id</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td>PRI</td>
      <td></td>
      <td></td>
      <td>node_id of the root of the tree</td>
    </tr>
    <tr>
      <td>stable_id</td>
      <td>varchar(40)</td>
      <td>NO</td>
      <td>UNI</td>
      <td></td>
      <td></td>
      <td>the main part of the stable_id ( follows the pattern: label(5).release_introduced(4).unique_id(10)</td>
    </tr>
    <tr>
      <td>version</td>
      <td>int(10) unsigned</td>
      <td>NO</td>
      <td></td>
      <td>NULL</td>
      <td></td>
      <td>numeric version of the stable_id (changes only when members move to/from existing trees)</td>
    </tr>
  </tbody>
</table>


</body>
</html>
