function mCustomScrollbar(e){var t=e.$("#verticalDragger"),n=e.$("#verticalDragger .dragger"),i=e.$("#horizontalDragger"),r=e.$("#horizontalDragger .dragger");e.dom.seqwindow.data("minDraggerHeight")||e.dom.seqwindow.data("minDraggerHeight",n.height()),e.dom.seqwindow.data("minDraggerWidth")||e.dom.seqwindow.data("minDraggerWidth",r.width()),e.dom.seqwindow.data("contentHeight")||e.dom.seqwindow.data("contentHeight",e.dom.seq.height()),e.dom.seqwindow.data("contentWidth")||e.dom.seqwindow.data("contentWidth",e.dom.wrap.width());var o=function(){var t=500,n=[],i=0,o=0;return{start:function(e,t,r,s){i=e,o=t,n=[{pos:r,time:s}]},add:function(e,t){n.push({pos:e,time:t}),n.length>2&&n.shift()},end:function(s){n[1].time=s;var a=Math.abs(n[1].pos-n[0].pos),s=n[1].time-n[0].time,l=a/s,c=l>.02?Math.round(l*t):0,u=e.dom.wrap.position().left,d=n[0].pos>n[1].pos?u-c:u+c,h="easeOutCirc";d>0?(d=0,h="easeOutBack"):i>d&&(d=i,h="easeOutBack"),r.animate({left:(0-d)/o+"px"},800,h),e.dom.wrap.animate({left:d+"px"},800,h),setTimeout(function(){e.makeImage()},850)}}}(),s=function(s){function a(t,n){var i=r.position().left,o=parseInt(e.dom.wrap.css("left"));if(t){var s=o-t,a=(0-s)/m;0>a?a=0:a>f&&(a=f),a=Math.round(a),r.css("left",a)}else var s=Math.round(-i*m);s>0?s=0:Math.abs(s)>u-c&&(s=c-u),clearTimeout(C),C=setTimeout(function(){e.makeImage("x:"+s)},50),e.dom.wrap.css("left",s)}function l(t,i){var r=n.position().top,o=parseInt(e.dom.seq.css("margin-top"));if(clearTimeout(T),T=setTimeout(function(){e.makeImage()},50),t){var s=o-t,a=(0-s)/_;0>a?a=0:a>k&&(a=k),a=Math.round(a),n.css("top",a)}else var s=Math.round(-r*_);clearTimeout(T),T=setTimeout(function(){e.makeImage("y:"+s)},50),s>0?s=0:Math.abs(s)>b-v&&(s=v-b),e.dom.seq.css("margin-top",s),e.dom.treewrap.css("top",s),$.each([e.$("#namelabel"),e.$("#treemenu"),e.$("div.tooltip.leafmenu")],function(e,t){t.length&&t.css("top",t.position().top+s-o)})}var c=e.dom.seqwindow.innerWidth(),u=e.dom.seq.width();if(u>c){r.css("display","block"),"resize"!=s&&u!=e.dom.seqwindow.data("contentWidth")&&e.dom.seqwindow.data("contentWidth",u),i.css("display","block");var d=e.dom.seqwindow.data("minDraggerWidth"),h=i.width(),p=Math.round(c/u*h);d>=p&&(p=d),r.css("width",p+"px");var f=h-p;r.draggable({axis:"x",containment:[i.offset().left,0,i.offset().left+f],drag:function(){a(!1,"drag")},stop:function(){r.removeClass("pressed")}}),i.off("click").click(function(e){e.pageX<r.offset().left?a(0-c,"leftbtn"):a(c,"rightbtn")}),e.$(document).off("keydown").on("keydown",function(e){"INPUT"!=e.target.tagName&&"TEXTAREA"!=e.target.tagName&&(37==e.keyCode?(e.preventDefault(),a(0-c/2,"leftbtn")):39==e.keyCode&&(e.preventDefault(),a(c/2,"rightbtn")))});var m=(u-c)/f;r.css("left",(0-e.dom.wrap.position().left)/m);var g=e.dom.wrap.offset().left;e.dom.wrap.draggable({handle:e.dom.ruler,axis:"x",start:function(e,t){o.start(0-u+c,m,t.position.left,e.timeStamp)},drag:function(e,t){o.add(t.position.left,e.timeStamp),r.css("left",(0-t.position.left)/m)},stop:function(e,t){o.end(e.timeStamp)}})}else r.css("left",0).css("display","none"),e.dom.wrap.css("left",0),i.css("display","none");var v=e.dom.seqwindow.innerHeight()-e.dom.ruler.outerHeight()-parseInt(e.dom.seqwrap.css("margin-top")),b=e.model.visiblerows().length?e.model.visiblerows().length*e.model.boxh()+10:e.model.leafcount()*e.model.boxh()+10;if(b>v){n.css("display","block"),"resize"!=s&&b!=e.dom.seqwindow.data("contentHeight")&&e.dom.seqwindow.data("contentHeight",b),t.css("display","block");var y=e.dom.seqwindow.data("minDraggerHeight"),w=t.height(),x=Math.round(v/b*w);y>x&&(x=y),n.css("height",x+"px");var k=w-x;n.draggable({axis:"y",containment:[0,t.offset().top,0,t.offset().top+k],drag:function(){l(!1,"drag")},stop:function(){n.removeClass("pressed")}}),t.off("click").click(function(t){var i=t.pageY-e.$(this).offset().top;if(i<n.position().top||i>n.position().top+x){var r=i+x;w>r?(n.css("top",i),l(!1,"click")):(n.css("top",k),l(!1,"click"))}}),e.$("body").off("keydown").on("keydown",function(e){"TEXTAREA"!=e.target.tagName&&(38==e.keyCode?(e.preventDefault(),l(0-v/2,"upbtn")):40==e.keyCode&&(e.preventDefault(),l(v/2,"downbtn")))});var _=(b-v)/k;n.css("top",(0-parseInt(e.dom.seq.css("margin-top")))/_)}else n.css("top",0).css("display","none"),e.dom.seq.css("margin-top",0),e.dom.treewrap.css("top",0),t.css("display","none");var C,T,S=e.dom.left.add(e.dom.seqwindow);S.unmousewheel(),S.mousewheel(function(e){e.deltaX&&r.length?(r.css("left",r.position().left+e.deltaX),r.position().left<0?r.css("left",0):r.position().left>f&&r.css("left",f),a(!1,"scroll")):e.deltaY&&n.length&&(n.css("top",n.position().top-e.deltaY),n.position().top<0?n.css("top",0):n.position().top>k&&n.css("top",k),l(!1,"scroll")),e.preventDefault()});var N=function(){e.$(this).addClass("pressed")},D=function(){e.$(this).removeClass("pressed")};r.mousedown(N).mouseup(D),n.mousedown(N).mouseup(D)};s();var a;$(window).resize(function(){r.position().left>i.width()-r.width()&&r.css("left",i.width()-r.width()),n.position().top>t.height()-n.height()&&n.css("top",t.height()-n.height()),clearTimeout(a),a=setTimeout(function(){s("resize"),e.$("#borderDrag").draggable("option","containment",[e.dom.left.offset().left,0,e.dom.right.offset().left+e.dom.right.width()-17,0])},100)})}if(function(e,t){function n(e){var t=e.length,n=se.type(e);return se.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=me[e]={};return se.each(e.match(le)||[],function(e,n){t[n]=!0}),t}function r(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=se.expando+Math.random()}function o(e,n,i){var r;if(i===t&&1===e.nodeType)if(r="data-"+n.replace(ye,"-$1").toLowerCase(),i=e.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:be.test(i)?JSON.parse(i):i}catch(o){}ge.set(e,n,i)}else i=t;return i}function s(){return!0}function a(){return!1}function l(){try{return Y.activeElement}catch(e){}}function c(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e,t,n){if(se.isFunction(t))return se.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return se.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ae.test(t))return se.filter(t,e,n);t=se.filter(t,e)}return se.grep(e,function(e){return ne.call(t,e)>=0!==n})}function d(e,t){return se.nodeName(e,"table")&&se.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=He.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function f(e,t){for(var n=e.length,i=0;n>i;i++)ve.set(e[i],"globalEval",!t||ve.get(t[i],"globalEval"))}function m(e,t){var n,i,r,o,s,a,l,c;if(1===t.nodeType){if(ve.hasData(e)&&(o=ve.access(e),s=ve.set(t,o),c=o.events)){delete s.handle,s.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)se.event.add(t,r,c[r][n])}ge.hasData(e)&&(a=ge.access(e),l=se.extend({},a),ge.set(t,l))}}function g(e,n){var i=e.getElementsByTagName?e.getElementsByTagName(n||"*"):e.querySelectorAll?e.querySelectorAll(n||"*"):[];return n===t||n&&se.nodeName(e,n)?se.merge([e],i):i}function v(e,t){var n=t.nodeName.toLowerCase();"input"===n&&$e.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=et.length;r--;)if(t=et[r]+n,t in e)return t;return i}function y(e,t){return e=t||e,"none"===se.css(e,"display")||!se.contains(e.ownerDocument,e)}function w(t){return e.getComputedStyle(t,null)}function x(e,t){for(var n,i,r,o=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(o[s]=ve.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&y(i)&&(o[s]=ve.access(i,"olddisplay",T(i.nodeName)))):o[s]||(r=y(i),(n&&"none"!==n||!r)&&ve.set(i,"olddisplay",r?n:se.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function k(e,t,n){var i=Ue.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function _(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=se.css(e,n+Ze[o],!0,r)),i?("content"===n&&(s-=se.css(e,"padding"+Ze[o],!0,r)),"margin"!==n&&(s-=se.css(e,"border"+Ze[o]+"Width",!0,r))):(s+=se.css(e,"padding"+Ze[o],!0,r),"padding"!==n&&(s+=se.css(e,"border"+Ze[o]+"Width",!0,r)));return s}function C(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=w(e),s=se.support.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=We(e,t,o),(0>r||null==r)&&(r=e.style[t]),Ge.test(r))return r;i=s&&(se.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+_(e,t,n||(s?"border":"content"),i,o)+"px"}function T(e){var t=Y,n=Ke[e];return n||(n=S(e,t),"none"!==n&&n||(Be=(Be||se("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Be[0].contentWindow||Be[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=S(e,t),Be.detach()),Ke[e]=n),n}function S(e,t){var n=se(t.createElement(e)).appendTo(t.body),i=se.css(n[0],"display");return n.remove(),i}function N(e,t,n,i){var r;if(se.isArray(t))se.each(t,function(t,r){n||nt.test(e)?i(e,r):N(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==se.type(t))i(e,t);else for(r in t)N(e+"["+r+"]",t[r],n,i)}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(le)||[];if(se.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function A(e,t,n,i){function r(a){var l;return o[a]=!0,se.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var o={},s=e===yt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function E(e,n){var i,r,o=se.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&se.extend(!0,e,r),e}function M(e,n,i){for(var r,o,s,a,l=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("Content-Type"));if(r)for(o in l)if(l[o]&&l[o].test(r)){c.unshift(o);break}if(c[0]in i)s=c[0];else{for(o in i){if(!c[0]||e.converters[o+" "+c[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==c[0]&&c.unshift(s),i[s]):void 0}function I(e,t,n,i){var r,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(r in c)if(a=r.split(" "),a[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[r]:c[r]!==!0&&(o=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function P(){return setTimeout(function(){Dt=t}),Dt=se.now()}function z(e,t,n){for(var i,r=(zt[t]||[]).concat(zt["*"]),o=0,s=r.length;s>o;o++)if(i=r[o].call(n,t,e))return i}function O(e,t,n){var i,r,o=0,s=Pt.length,a=se.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=Dt||P(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,o=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(o);return a.notifyWith(e,[c,o,n]),1>o&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:se.extend({},t),opts:se.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Dt||P(),duration:n.duration,tweens:[],createTween:function(t,n){var i=se.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(q(u,c.opts.specialEasing);s>o;o++)if(i=Pt[o].call(c,e,u,c.opts))return i;return se.map(u,z,c),se.isFunction(c.opts.start)&&c.opts.start.call(e,c),se.fx.timer(se.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function q(e,t){var n,i,r,o,s;for(n in e)if(i=se.camelCase(n),r=t[i],o=e[n],se.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),s=se.cssHooks[i],s&&"expand"in s){o=s.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function L(e,n,i){var r,o,s,a,l,c,u=this,d={},h=e.style,p=e.nodeType&&y(e),f=ve.get(e,"fxshow");i.queue||(l=se._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,u.always(function(){u.always(function(){l.unqueued--,se.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in n||"width"in n)&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===se.css(e,"display")&&"none"===se.css(e,"float")&&(h.display="inline-block")),i.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]}));for(r in n)if(o=n[r],Et.exec(o)){if(delete n[r],s=s||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!f||f[r]===t)continue;p=!0}d[r]=f&&f[r]||se.style(e,r)}if(!se.isEmptyObject(d)){f?"hidden"in f&&(p=f.hidden):f=ve.access(e,"fxshow",{}),s&&(f.hidden=!p),p?se(e).show():u.done(function(){se(e).hide()}),u.done(function(){var t;ve.remove(e,"fxshow");for(t in d)se.style(e,t,d[t])});for(r in d)a=z(p?f[r]:0,r,u),r in f||(f[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function R(e,t,n,i,r){return new R.prototype.init(e,t,n,i,r)}function H(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=Ze[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function j(e){return se.isWindow(e)?e:9===e.nodeType&&e.defaultView}var F,W,B=typeof t,V=e.location,Y=e.document,U=Y.documentElement,G=e.jQuery,X=e.$,K={},J=[],Q="2.0.3",Z=J.concat,ee=J.push,te=J.slice,ne=J.indexOf,ie=K.toString,re=K.hasOwnProperty,oe=Q.trim,se=function(e,t){return new se.fn.init(e,t,F)},ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,le=/\S+/g,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ue=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^-ms-/,he=/-([\da-z])/gi,pe=function(e,t){return t.toUpperCase()},fe=function(){Y.removeEventListener("DOMContentLoaded",fe,!1),e.removeEventListener("load",fe,!1),se.ready()};se.fn=se.prototype={jquery:Q,constructor:se,init:function(e,n,i){var r,o;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:ce.exec(e),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(r[1]){if(n=n instanceof se?n[0]:n,se.merge(this,se.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:Y,!0)),ue.test(r[1])&&se.isPlainObject(n))for(r in n)se.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}return o=Y.getElementById(r[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=Y,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):se.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),se.makeArray(e,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=se.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return se.each(this,e,t)},ready:function(e){return se.ready.promise().done(e),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(se.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ee,sort:[].sort,splice:[].splice},se.fn.init.prototype=se.fn,se.extend=se.fn.extend=function(){var e,n,i,r,o,s,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||se.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(e=arguments[l]))for(n in e)i=a[n],r=e[n],a!==r&&(u&&r&&(se.isPlainObject(r)||(o=se.isArray(r)))?(o?(o=!1,s=i&&se.isArray(i)?i:[]):s=i&&se.isPlainObject(i)?i:{},a[n]=se.extend(u,s,r)):r!==t&&(a[n]=r));return a},se.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===se&&(e.$=X),t&&e.jQuery===se&&(e.jQuery=G),se},isReady:!1,readyWait:1,holdReady:function(e){e?se.readyWait++:se.ready(!0)},ready:function(e){(e===!0?--se.readyWait:se.isReady)||(se.isReady=!0,e!==!0&&--se.readyWait>0||(W.resolveWith(Y,[se]),se.fn.trigger&&se(Y).trigger("ready").off("ready")))},isFunction:function(e){return"function"===se.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?K[ie.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==se.type(e)||e.nodeType||se.isWindow(e))return!1;try{if(e.constructor&&!re.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Y;var i=ue.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=se.buildFragment([e],t,r),r&&se(r).remove(),se.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var n,i;if(!e||"string"!=typeof e)return null;try{i=new DOMParser,n=i.parseFromString(e,"text/xml")}catch(r){n=t}return(!n||n.getElementsByTagName("parsererror").length)&&se.error("Invalid XML: "+e),n},noop:function(){},globalEval:function(e){var t,n=eval;e=se.trim(e),e&&(1===e.indexOf("use strict")?(t=Y.createElement("script"),t.text=e,Y.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(de,"ms-").replace(he,pe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,s=e.length,a=n(e);if(i){if(a)for(;s>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(a)for(;s>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":oe.call(e)},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?se.merge(i,"string"==typeof e?[e]:e):ee.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:ne.call(t,e,n)},merge:function(e,n){var i=n.length,r=e.length,o=0;if("number"==typeof i)for(;i>o;o++)e[r++]=n[o];else for(;n[o]!==t;)e[r++]=n[o++];return e.length=r,e},grep:function(e,t,n){var i,r=[],o=0,s=e.length;for(n=!!n;s>o;o++)i=!!t(e[o],o),n!==i&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,s=e.length,a=n(e),l=[];if(a)for(;s>o;o++)r=t(e[o],o,i),null!=r&&(l[l.length]=r);else for(o in e)r=t(e[o],o,i),null!=r&&(l[l.length]=r);return Z.apply([],l)},guid:1,proxy:function(e,n){var i,r,o;return"string"==typeof n&&(i=e[n],n=e,e=i),se.isFunction(e)?(r=te.call(arguments,2),o=function(){return e.apply(n||this,r.concat(te.call(arguments)))},o.guid=e.guid=e.guid||se.guid++,o):t},access:function(e,n,i,r,o,s,a){var l=0,c=e.length,u=null==i;if("object"===se.type(i)){o=!0;for(l in i)se.access(e,n,l,i[l],!0,s,a)}else if(r!==t&&(o=!0,se.isFunction(r)||(a=!0),u&&(a?(n.call(e,r),n=null):(u=n,n=function(e,t,n){return u.call(se(e),n)})),n))for(;c>l;l++)n(e[l],i,a?r:r.call(e[l],l,n(e[l],i)));return o?e:u?n.call(e):c?n(e[0],i):s},now:Date.now,swap:function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=s[o];return r}}),se.ready.promise=function(t){return W||(W=se.Deferred(),"complete"===Y.readyState?setTimeout(se.ready):(Y.addEventListener("DOMContentLoaded",fe,!1),e.addEventListener("load",fe,!1))),W.promise(t)},se.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),F=se(Y),function(e,t){function n(e,t,n,i){var r,o,s,a,l,c,u,d,f,m;if((t?t.ownerDocument||t:j)!==I&&M(t),t=t||I,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(z&&!i){if(r=we.exec(e))if(s=r[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&R(t,o)&&o.id===s)return n.push(o),n}else{if(r[2])return te.apply(n,t.getElementsByTagName(e)),n;if((s=r[3])&&_.getElementsByClassName&&t.getElementsByClassName)return te.apply(n,t.getElementsByClassName(s)),n}if(_.qsa&&(!O||!O.test(e))){if(d=u=H,f=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(u=t.getAttribute("id"))?d=u.replace(_e,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+p(c[l]);f=fe.test(e)&&t.parentNode||t,m=c.join(",")}if(m)try{return te.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{u||t.removeAttribute("id")}}}return x(e.replace(de,"$1"),t,n,i)}function i(){function e(n,i){return t.push(n+=" ")>T.cacheLength&&delete e[t.shift()],e[n]=i}var t=[];return e}function r(e){return e[H]=!0,e}function o(e){var t=I.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=e.length;i--;)T.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,i){for(var r,o=e([],n.length,t),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function d(){}function h(e,t){var i,r,o,s,a,l,c,u=V[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=T.preFilter;a;){(!i||(r=he.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),i=!1,(r=pe.exec(a))&&(i=r.shift(),o.push({value:i,type:r[0].replace(de," ")}),a=a.slice(i.length));for(s in T.filter)!(r=be[s].exec(a))||c[s]&&!(r=c[s](r))||(i=r.shift(),o.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return t?a.length:a?n.error(e):V(e,l).slice(0)}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=W++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,s){var a,l,c,u=F+" "+o;if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r)if(c=t[H]||(t[H]={}),(l=c[i])&&l[0]===u){if((a=l[1])===!0||a===C)return a===!0}else if(l=c[i]=[u],l[1]=e(t,n,s)||C,l[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(o=e[a])&&(!n||n(o,i,r))&&(s.push(o),c&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[H]&&(i=v(i)),o&&!o[H]&&(o=v(o,s)),r(function(r,s,a,l){var c,u,d,h=[],p=[],f=s.length,m=r||w(t||"*",a.nodeType?[a]:a,[]),v=!e||!r&&t?m:g(m,h,e,a,l),b=n?o||(r?e:f||i)?[]:s:v;if(n&&n(v,b,a,l),i)for(c=g(b,p),i(c,[],a,l),u=c.length;u--;)(d=c[u])&&(b[p[u]]=!(v[p[u]]=d));if(r){if(o||e){if(o){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(v[u]=d);o(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=o?ie.call(r,d):h[u])>-1&&(r[c]=!(s[c]=d))}}else b=g(b===s?b.splice(f,b.length):b),o?o(null,s,b,l):te.apply(s,b)})}function b(e){for(var t,n,i,r=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,l=f(function(e){return e===t},s,!0),c=f(function(e){return ie.call(t,e)>-1},s,!0),u=[function(e,n,i){return!o&&(i||n!==A)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];r>a;a++)if(n=T.relative[e[a].type])u=[f(m(u),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[H]){for(i=++a;r>i&&!T.relative[e[i].type];i++);return v(a>1&&m(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(de,"$1"),n,i>a&&b(e.slice(a,i)),r>i&&b(e=e.slice(i)),r>i&&p(e))}u.push(n)}return m(u)}function y(e,t){var i=0,o=t.length>0,s=e.length>0,a=function(r,a,l,c,u){var d,h,p,f=[],m=0,v="0",b=r&&[],y=null!=u,w=A,x=r||s&&T.find.TAG("*",u&&a.parentNode||a),k=F+=null==w?1:Math.random()||.1;for(y&&(A=a!==I&&a,C=i);null!=(d=x[v]);v++){if(s&&d){for(h=0;p=e[h++];)if(p(d,a,l)){c.push(d);break}y&&(F=k,C=++i)}o&&((d=!p&&d)&&m--,r&&b.push(d))}if(m+=v,o&&v!==m){for(h=0;p=t[h++];)p(b,f,a,l);if(r){if(m>0)for(;v--;)b[v]||f[v]||(f[v]=Z.call(c));f=g(f)}te.apply(c,f),y&&!r&&f.length>0&&m+t.length>1&&n.uniqueSort(c)}return y&&(F=k,A=w),b};return o?r(a):a}function w(e,t,i){for(var r=0,o=t.length;o>r;r++)n(e,t[r],i);return i}function x(e,t,n,i){var r,o,s,a,l,c=h(e);if(!i&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&_.getById&&9===t.nodeType&&z&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(Ce,Te),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(r=be.needsContext.test(e)?0:o.length;r--&&(s=o[r],!T.relative[a=s.type]);)if((l=T.find[a])&&(i=l(s.matches[0].replace(Ce,Te),fe.test(o[0].type)&&t.parentNode||t))){if(o.splice(r,1),e=i.length&&p(o),!e)return te.apply(n,i),n;break}}return D(e,c)(i,t,!z,n,fe.test(e)),n}var k,_,C,T,S,N,D,A,E,M,I,P,z,O,q,L,R,H="sizzle"+-new Date,j=e.document,F=0,W=0,B=i(),V=i(),Y=i(),U=!1,G=function(e,t){return e===t?(U=!0,0):0},X=typeof t,K=1<<31,J={}.hasOwnProperty,Q=[],Z=Q.pop,ee=Q.push,te=Q.push,ne=Q.slice,ie=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},re="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",oe="[\\x20\\t\\r\\n\\f]",ae="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",le=ae.replace("w","w#"),ce="\\["+oe+"*("+ae+")"+oe+"*(?:([*^$|!~]?=)"+oe+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+le+")|)|)"+oe+"*\\]",ue=":("+ae+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ce.replace(3,8)+")*)|.*)\\)|)",de=new RegExp("^"+oe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+oe+"+$","g"),he=new RegExp("^"+oe+"*,"+oe+"*"),pe=new RegExp("^"+oe+"*([>+~]|"+oe+")"+oe+"*"),fe=new RegExp(oe+"*[+~]"),me=new RegExp("="+oe+"*([^\\]'\"]*)"+oe+"*\\]","g"),ge=new RegExp(ue),ve=new RegExp("^"+le+"$"),be={ID:new RegExp("^#("+ae+")"),CLASS:new RegExp("^\\.("+ae+")"),TAG:new RegExp("^("+ae.replace("w","w*")+")"),ATTR:new RegExp("^"+ce),PSEUDO:new RegExp("^"+ue),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+oe+"*(even|odd|(([+-]|)(\\d*)n|)"+oe+"*(?:([+-]|)"+oe+"*(\\d+)|))"+oe+"*\\)|)","i"),bool:new RegExp("^(?:"+re+")$","i"),needsContext:new RegExp("^"+oe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+oe+"*((?:-\\d)?\\d*)"+oe+"*\\)|)(?=[^-]|$)","i")},ye=/^[^{]+\{\s*\[native \w/,we=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/^(?:input|select|textarea|button)$/i,ke=/^h\d$/i,_e=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+oe+"?|("+oe+")|.)","ig"),Te=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{te.apply(Q=ne.call(j.childNodes),j.childNodes),Q[j.childNodes.length].nodeType}catch(Se){te={apply:Q.length?function(e,t){ee.apply(e,ne.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}N=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},_=n.support={},M=n.setDocument=function(e){var t=e?e.ownerDocument||e:j,n=t.defaultView;return t!==I&&9===t.nodeType&&t.documentElement?(I=t,P=t.documentElement,z=!N(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){M()}),_.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=o(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),_.getById=o(function(e){return P.appendChild(e).id=H,!t.getElementsByName||!t.getElementsByName(H).length}),_.getById?(T.find.ID=function(e,t){if(typeof t.getElementById!==X&&z){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(Ce,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(Ce,Te);return function(e){var n=typeof e.getAttributeNode!==X&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=_.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==X?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},T.find.CLASS=_.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==X&&z?t.getElementsByClassName(e):void 0},q=[],O=[],(_.qsa=ye.test(t.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||O.push("\\["+oe+"*(?:value|"+re+")"),e.querySelectorAll(":checked").length||O.push(":checked")}),o(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&O.push("[*^$]="+oe+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(_.matchesSelector=ye.test(L=P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){_.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),q.push("!=",ue)}),O=O.length&&new RegExp(O.join("|")),q=q.length&&new RegExp(q.join("|")),R=ye.test(P.contains)||P.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=P.compareDocumentPosition?function(e,n){if(e===n)return U=!0,0;var i=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);return i?1&i||!_.sortDetached&&n.compareDocumentPosition(e)===i?e===t||R(j,e)?-1:n===t||R(j,n)?1:E?ie.call(E,e)-ie.call(E,n):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var i,r=0,o=e.parentNode,s=n.parentNode,l=[e],c=[n];if(e===n)return U=!0,0;if(!o||!s)return e===t?-1:n===t?1:o?-1:s?1:E?ie.call(E,e)-ie.call(E,n):0;if(o===s)return a(e,n);for(i=e;i=i.parentNode;)l.unshift(i);for(i=n;i=i.parentNode;)c.unshift(i);for(;l[r]===c[r];)r++;return r?a(l[r],c[r]):l[r]===j?-1:c[r]===j?1:0},t):I},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==I&&M(e),t=t.replace(me,"='$1']"),_.matchesSelector&&z&&(!q||!q.test(t))&&(!O||!O.test(t)))try{var i=L.call(e,t);if(i||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return n(t,I,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==I&&M(e),R(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==I&&M(e);var i=T.attrHandle[n.toLowerCase()],r=i&&J.call(T.attrHandle,n.toLowerCase())?i(e,n,!z):t;return r===t?_.attributes||!z?e.getAttribute(n):(r=e.getAttributeNode(n))&&r.specified?r.value:null:r;
},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],i=0,r=0;if(U=!_.detectDuplicates,E=!_.sortStable&&e.slice(0),e.sort(G),U){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},S=n.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i];i++)n+=S(t);return n},T=n.selectors={cacheLength:50,createPseudo:r,match:be,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ce,Te),e[3]=(e[4]||e[5]||"").replace(Ce,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,i=!e[5]&&e[2];return be.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:i&&ge.test(i)&&(n=h(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(e[0]=e[0].slice(0,n),e[2]=i.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ce,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=B[e+" "];return t||(t=new RegExp("(^|"+oe+")"+e+"("+oe+"|$)"))&&B(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==X&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(r){var o=n.attr(r,e);return null==o?"!="===t:t?(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o+" ").indexOf(i)>-1:"|="===t?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&b){for(u=g[H]||(g[H]={}),c=u[e]||[],p=c[0]===F&&c[1],h=c[0]===F&&c[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===t){u[e]=[F,p,h];break}}else if(b&&(c=(t[H]||(t[H]={}))[e])&&c[0]===F)h=c[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(b&&((d[H]||(d[H]={}))[e]=[F,h]),d!==t)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,t){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return o[H]?o(t):o.length>1?(i=[e,e,"",t],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var i,r=o(e,t),s=r.length;s--;)i=ie.call(e,r[s]),e[i]=!(n[i]=r[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=D(e.replace(de,"$1"));return i[H]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(t){return n(e,t).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:r(function(e){return ve.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(Ce,Te).toLowerCase(),function(t){var n;do if(n=z?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return ke.test(e.nodeName)},input:function(e){return xe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},T.pseudos.nth=T.pseudos.eq;for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[k]=l(k);for(k in{submit:!0,reset:!0})T.pseudos[k]=c(k);d.prototype=T.filters=T.pseudos,T.setFilters=new d,D=n.compile=function(e,t){var n,i=[],r=[],o=Y[e+" "];if(!o){for(t||(t=h(e)),n=t.length;n--;)o=b(t[n]),o[H]?i.push(o):r.push(o);o=Y(e,y(r,i))}return o},_.sortStable=H.split("").sort(G).join("")===H,_.detectDuplicates=U,M(),_.sortDetached=o(function(e){return 1&e.compareDocumentPosition(I.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||s(re,function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&i.specified?i.value:e[t]===!0?t.toLowerCase():null}),se.find=n,se.expr=n.selectors,se.expr[":"]=se.expr.pseudos,se.unique=n.uniqueSort,se.text=n.getText,se.isXMLDoc=n.isXML,se.contains=n.contains}(e);var me={};se.Callbacks=function(e){e="string"==typeof e?me[e]||i(e):se.extend({},e);var n,r,o,s,a,l,c=[],u=!e.once&&[],d=function(t){for(n=e.memory&&t,r=!0,l=s||0,s=0,a=c.length,o=!0;c&&a>l;l++)if(c[l].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}o=!1,c&&(u?u.length&&d(u.shift()):n?c=[]:h.disable())},h={add:function(){if(c){var t=c.length;!function i(t){se.each(t,function(t,n){var r=se.type(n);"function"===r?e.unique&&h.has(n)||c.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),o?a=c.length:n&&(s=t,d(n))}return this},remove:function(){return c&&se.each(arguments,function(e,t){for(var n;(n=se.inArray(t,c,n))>-1;)c.splice(n,1),o&&(a>=n&&a--,l>=n&&l--)}),this},has:function(e){return e?se.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=u=n=t,this},disabled:function(){return!c},lock:function(){return u=t,n||h.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||r&&!u||(t=t||[],t=[e,t.slice?t.slice():t],o?u.push(t):d(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},se.extend({Deferred:function(e){var t=[["resolve","done",se.Callbacks("once memory"),"resolved"],["reject","fail",se.Callbacks("once memory"),"rejected"],["notify","progress",se.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return se.Deferred(function(n){se.each(t,function(t,o){var s=o[0],a=se.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&se.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?se.extend(e,i):i}},r={};return i.pipe=i.then,se.each(t,function(e,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t=0,n=te.call(arguments),i=n.length,r=1!==i||e&&se.isFunction(e.promise)?i:0,o=1===r?e:se.Deferred(),s=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?te.call(arguments):i,n===a?o.notifyWith(t,n):--r||o.resolveWith(t,n)}},a,l,c;if(i>1)for(a=new Array(i),l=new Array(i),c=new Array(i);i>t;t++)n[t]&&se.isFunction(n[t].promise)?n[t].promise().done(s(t,c,n)).fail(o.reject).progress(s(t,l,a)):--r;return r||o.resolveWith(c,n),o.promise()}}),se.support=function(t){var n=Y.createElement("input"),i=Y.createDocumentFragment(),r=Y.createElement("div"),o=Y.createElement("select"),s=o.appendChild(Y.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=s.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled,n=Y.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),t.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===r.style.backgroundClip,se(function(){var n,i,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=Y.getElementsByTagName("body")[0];s&&(n=Y.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(r),r.innerHTML="",r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",se.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===r.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(r,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(r,null)||{width:"4px"}).width,i=r.appendChild(Y.createElement("div")),i.style.cssText=r.style.cssText=o,i.style.marginRight=i.style.width="0",r.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),s.removeChild(n))}),t):t}({});var ge,ve,be=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ye=/([A-Z])/g;r.uid=1,r.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},r.prototype={key:function(e){if(!r.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=r.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,se.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),o=this.cache[r];if("string"==typeof t)o[t]=n;else if(se.isEmptyObject(o))se.extend(this.cache[r],t);else for(i in t)o[i]=t[i];return o},get:function(e,n){var i=this.cache[this.key(e)];return n===t?i:i[n]},access:function(e,n,i){var r;return n===t||n&&"string"==typeof n&&i===t?(r=this.get(e,n),r!==t?r:this.get(e,se.camelCase(n))):(this.set(e,n,i),i!==t?i:n)},remove:function(e,n){var i,r,o,s=this.key(e),a=this.cache[s];if(n===t)this.cache[s]={};else{se.isArray(n)?r=n.concat(n.map(se.camelCase)):(o=se.camelCase(n),n in a?r=[n,o]:(r=o,r=r in a?[r]:r.match(le)||[])),i=r.length;for(;i--;)delete a[r[i]]}},hasData:function(e){return!se.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},ge=new r,ve=new r,se.extend({acceptData:r.accepts,hasData:function(e){return ge.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ge.access(e,t,n)},removeData:function(e,t){ge.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),se.fn.extend({data:function(e,n){var i,r,s=this[0],a=0,l=null;if(e===t){if(this.length&&(l=ge.get(s),1===s.nodeType&&!ve.get(s,"hasDataAttrs"))){for(i=s.attributes;a<i.length;a++)r=i[a].name,0===r.indexOf("data-")&&(r=se.camelCase(r.slice(5)),o(s,r,l[r]));ve.set(s,"hasDataAttrs",!0)}return l}return"object"==typeof e?this.each(function(){ge.set(this,e)}):se.access(this,function(n){var i,r=se.camelCase(e);if(s&&n===t){if(i=ge.get(s,e),i!==t)return i;if(i=ge.get(s,r),i!==t)return i;if(i=o(s,r,t),i!==t)return i}else this.each(function(){var i=ge.get(this,r);ge.set(this,r,n),-1!==e.indexOf("-")&&i!==t&&ge.set(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ge.remove(this,e)})}}),se.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=ve.get(e,t),n&&(!i||se.isArray(n)?i=ve.access(e,t,se.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=se.queue(e,t),i=n.length,r=n.shift(),o=se._queueHooks(e,t),s=function(){se.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:se.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),se.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?se.queue(this[0],e):n===t?this:this.each(function(){var t=se.queue(this,e,n);se._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&se.dequeue(this,e)})},dequeue:function(e){return this.each(function(){se.dequeue(this,e)})},delay:function(e,t){return e=se.fx?se.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,r=1,o=se.Deferred(),s=this,a=this.length,l=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=ve.get(s[a],e+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),o.promise(n)}});var we,xe,ke=/[\t\r\n\f]/g,_e=/\r/g,Ce=/^(?:input|select|textarea|button)$/i;se.fn.extend({attr:function(e,t){return se.access(this,se.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){se.removeAttr(this,e)})},prop:function(e,t){return se.access(this,se.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[se.propFix[e]||e]})},addClass:function(e){var t,n,i,r,o,s=0,a=this.length,l="string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(le)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ke," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=se.trim(i)}return this},removeClass:function(e){var t,n,i,r,o,s=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(se.isFunction(e))return this.each(function(t){se(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(le)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ke," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=e?se.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):se.isFunction(e)?this.each(function(n){se(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=se(this),o=e.match(le)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===B||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ke," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,r,o=this[0];{if(arguments.length)return r=se.isFunction(e),this.each(function(i){var o;1===this.nodeType&&(o=r?e.call(this,i,se(this).val()):e,null==o?o="":"number"==typeof o?o+="":se.isArray(o)&&(o=se.map(o,function(e){return null==e?"":e+""})),n=se.valHooks[this.type]||se.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==t||(this.value=o))});if(o)return n=se.valHooks[o.type]||se.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==t?i:(i=o.value,"string"==typeof i?i.replace(_e,""):null==i?"":i)}}}),se.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],(n.selected||l===r)&&(se.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!se.nodeName(n.parentNode,"optgroup"))){if(t=se(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=se.makeArray(t),s=r.length;s--;)i=r[s],(i.selected=se.inArray(se(i).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,i){var r,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===B?se.prop(e,n,i):(1===s&&se.isXMLDoc(e)||(n=n.toLowerCase(),r=se.attrHooks[n]||(se.expr.match.bool.test(n)?xe:we)),i===t?r&&"get"in r&&null!==(o=r.get(e,n))?o:(o=se.find.attr(e,n),null==o?t:o):null!==i?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):void se.removeAttr(e,n))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(le);if(o&&1===e.nodeType)for(;n=o[r++];)i=se.propFix[n]||n,se.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!se.support.radioValue&&"radio"===t&&se.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,i){var r,o,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!se.isXMLDoc(e),s&&(n=se.propFix[n]||n,o=se.propHooks[n]),i!==t?o&&"set"in o&&(r=o.set(e,i,n))!==t?r:e[n]=i:o&&"get"in o&&null!==(r=o.get(e,n))?r:e[n]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Ce.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),xe={set:function(e,t,n){return t===!1?se.removeAttr(e,n):e.setAttribute(n,n),n}},se.each(se.expr.match.bool.source.match(/\w+/g),function(e,n){var i=se.expr.attrHandle[n]||se.find.attr;se.expr.attrHandle[n]=function(e,n,r){var o=se.expr.attrHandle[n],s=r?t:(se.expr.attrHandle[n]=t)!=i(e,n,r)?n.toLowerCase():null;return se.expr.attrHandle[n]=o,s}}),se.support.optSelected||(se.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),se.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){se.propFix[this.toLowerCase()]=this}),se.each(["radio","checkbox"],function(){se.valHooks[this]={set:function(e,t){return se.isArray(t)?e.checked=se.inArray(se(e).val(),t)>=0:void 0}},se.support.checkOn||(se.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Te=/^key/,Se=/^(?:mouse|contextmenu)|click/,Ne=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;se.event={global:{},add:function(e,n,i,r,o){var s,a,l,c,u,d,h,p,f,m,g,v=ve.get(e);if(v){for(i.handler&&(s=i,i=s.handler,o=s.selector),i.guid||(i.guid=se.guid++),(c=v.events)||(c=v.events={}),(a=v.handle)||(a=v.handle=function(e){return typeof se===B||e&&se.event.triggered===e.type?t:se.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=(n||"").match(le)||[""],u=n.length;u--;)l=De.exec(n[u])||[],f=g=l[1],m=(l[2]||"").split(".").sort(),f&&(h=se.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=se.event.special[f]||{},d=se.extend({type:f,origType:g,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&se.expr.match.needsContext.test(o),namespace:m.join(".")},s),(p=c[f])||(p=c[f]=[],p.delegateCount=0,h.setup&&h.setup.call(e,r,m,a)!==!1||e.addEventListener&&e.addEventListener(f,a,!1)),h.add&&(h.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),se.event.global[f]=!0);e=null}},remove:function(e,t,n,i,r){var o,s,a,l,c,u,d,h,p,f,m,g=ve.hasData(e)&&ve.get(e);if(g&&(l=g.events)){for(t=(t||"").match(le)||[""],c=t.length;c--;)if(a=De.exec(t[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(d=se.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,h=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=h.length;o--;)u=h[o],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(o,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||se.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)se.event.remove(e,p+t[c],n,i,!0);se.isEmptyObject(l)&&(delete g.handle,ve.remove(e,"events"))}},trigger:function(n,i,r,o){var s,a,l,c,u,d,h,p=[r||Y],f=re.call(n,"type")?n.type:n,m=re.call(n,"namespace")?n.namespace.split("."):[];if(a=l=r=r||Y,3!==r.nodeType&&8!==r.nodeType&&!Ne.test(f+se.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),u=f.indexOf(":")<0&&"on"+f,n=n[se.expando]?n:new se.Event(f,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=r),i=null==i?[n]:se.makeArray(i,[n]),h=se.event.special[f]||{},o||!h.trigger||h.trigger.apply(r,i)!==!1)){if(!o&&!h.noBubble&&!se.isWindow(r)){for(c=h.delegateType||f,Ne.test(c+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),l=a;l===(r.ownerDocument||Y)&&p.push(l.defaultView||l.parentWindow||e)}for(s=0;(a=p[s++])&&!n.isPropagationStopped();)n.type=s>1?c:h.bindType||f,d=(ve.get(a,"events")||{})[n.type]&&ve.get(a,"handle"),d&&d.apply(a,i),d=u&&a[u],d&&se.acceptData(a)&&d.apply&&d.apply(a,i)===!1&&n.preventDefault();return n.type=f,o||n.isDefaultPrevented()||h._default&&h._default.apply(p.pop(),i)!==!1||!se.acceptData(r)||u&&se.isFunction(r[f])&&!se.isWindow(r)&&(l=r[u],l&&(r[u]=null),se.event.triggered=f,r[f](),se.event.triggered=t,l&&(r[u]=l)),n.result}},dispatch:function(e){e=se.event.fix(e);var n,i,r,o,s,a=[],l=te.call(arguments),c=(ve.get(this,"events")||{})[e.type]||[],u=se.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=se.event.handlers.call(this,e,c),n=0;(o=a[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(s=o.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,r=((se.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,l),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,r,o,s,a=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==e.type){for(r=[],i=0;l>i;i++)s=n[i],o=s.selector+" ",r[o]===t&&(r[o]=s.needsContext?se(o,this).index(c)>=0:se.find(o,this,null,[c]).length),r[o]&&r.push(s);r.length&&a.push({elem:c,handlers:r})}return l<n.length&&a.push({elem:this,handlers:n.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,o,s=n.button;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||Y,r=i.documentElement,o=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[se.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Se.test(r)?this.mouseHooks:Te.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new se.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=Y),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&se.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return se.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=se.extend(new se.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?se.event.trigger(r,null,t):se.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},se.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},se.Event=function(e,t){return this instanceof se.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?s:a):this.type=e,t&&se.extend(this,t),this.timeStamp=e&&e.timeStamp||se.now(),void(this[se.expando]=!0)):new se.Event(e,t)},se.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=s,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=s,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},se.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){se.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!se.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),se.support.focusinBubbles||se.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){se.event.simulate(t,e.target,se.event.fix(e),!0)};se.event.special[t]={setup:function(){0===n++&&Y.addEventListener(e,i,!0)},teardown:function(){0===--n&&Y.removeEventListener(e,i,!0)}}}),se.fn.extend({on:function(e,n,i,r,o){var s,l;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(l in e)this.on(l,n,i,e[l],o);return this}if(null==i&&null==r?(r=n,i=n=t):null==r&&("string"==typeof n?(r=i,i=t):(r=i,i=n,n=t)),r===!1)r=a;else if(!r)return this;return 1===o&&(s=r,r=function(e){return se().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=se.guid++)),this.each(function(){se.event.add(this,e,r,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,se(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=a),this.each(function(){se.event.remove(this,e,i,n)})},trigger:function(e,t){return this.each(function(){se.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?se.event.trigger(e,t,n,!0):void 0}});var Ae=/^.[^:#\[\.,]*$/,Ee=/^(?:parents|prev(?:Until|All))/,Me=se.expr.match.needsContext,Ie={children:!0,contents:!0,next:!0,prev:!0};se.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(se(e).filter(function(){for(t=0;r>t;t++)if(se.contains(i[t],this))return!0}));for(t=0;r>t;t++)se.find(e,i[t],n);return n=this.pushStack(r>1?se.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=se(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(se.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(u(this,e||[],!0))},filter:function(e){return this.pushStack(u(this,e||[],!1))},is:function(e){return!!u(this,"string"==typeof e&&Me.test(e)?se(e):e||[],!1).length},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=Me.test(e)||"string"!=typeof e?se(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&se.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?se.unique(o):o)},index:function(e){return e?"string"==typeof e?ne.call(se(e),this[0]):ne.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?se(e,t):se.makeArray(e&&e.nodeType?[e]:e),i=se.merge(this.get(),n);return this.pushStack(se.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),se.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return se.dir(e,"parentNode")},parentsUntil:function(e,t,n){return se.dir(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return se.dir(e,"nextSibling")},prevAll:function(e){return se.dir(e,"previousSibling")},nextUntil:function(e,t,n){return se.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return se.dir(e,"previousSibling",n)},siblings:function(e){return se.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return se.sibling(e.firstChild)},contents:function(e){return e.contentDocument||se.merge([],e.childNodes)}},function(e,t){se.fn[e]=function(n,i){var r=se.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=se.filter(i,r)),this.length>1&&(Ie[e]||se.unique(r),Ee.test(e)&&r.reverse()),this.pushStack(r)}}),se.extend({filter:function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?se.find.matchesSelector(i,e)?[i]:[]:se.find.matches(e,se.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,i){for(var r=[],o=i!==t;(e=e[n])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&se(e).is(i))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,Oe=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,$e=/^(?:checkbox|radio)$/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^$|\/(?:java|ecma)script/i,He=/^true\/(.*)/,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Fe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Fe.optgroup=Fe.option,Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,se.fn.extend({text:function(e){return se.access(this,function(e){return e===t?se.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){
var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?se.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||se.cleanData(g(n)),n.parentNode&&(t&&se.contains(n.ownerDocument,n)&&f(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(se.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return se.clone(this,e,t)})},html:function(e){return se.access(this,function(e){var n=this[0]||{},i=0,r=this.length;if(e===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof e&&!qe.test(e)&&!Fe[(ze.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Pe,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(se.cleanData(g(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=se.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var i=e[t++],r=e[t++];r&&(i&&i.parentNode!==r&&(i=this.nextSibling),se(this).remove(),r.insertBefore(n,i))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=Z.apply([],e);var i,r,o,s,a,l,c=0,u=this.length,d=this,f=u-1,m=e[0],v=se.isFunction(m);if(v||!(1>=u||"string"!=typeof m||se.support.checkClone)&&Le.test(m))return this.each(function(i){var r=d.eq(i);v&&(e[0]=m.call(this,i,r.html())),r.domManip(e,t,n)});if(u&&(i=se.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=i.firstChild,1===i.childNodes.length&&(i=r),r)){for(o=se.map(g(i,"script"),h),s=o.length;u>c;c++)a=i,c!==f&&(a=se.clone(a,!0,!0),s&&se.merge(o,g(a,"script"))),t.call(this[c],a,c);if(s)for(l=o[o.length-1].ownerDocument,se.map(o,p),c=0;s>c;c++)a=o[c],Re.test(a.type||"")&&!ve.access(a,"globalEval")&&se.contains(l,a)&&(a.src?se._evalUrl(a.src):se.globalEval(a.textContent.replace(je,"")))}return this}}),se.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){se.fn[e]=function(e){for(var n,i=[],r=se(e),o=r.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),se(r[s])[t](n),ee.apply(i,n.get());return this.pushStack(i)}}),se.extend({clone:function(e,t,n){var i,r,o,s,a=e.cloneNode(!0),l=se.contains(e.ownerDocument,e);if(!(se.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||se.isXMLDoc(e)))for(s=g(a),o=g(e),i=0,r=o.length;r>i;i++)v(o[i],s[i]);if(t)if(n)for(o=o||g(e),s=s||g(a),i=0,r=o.length;r>i;i++)m(o[i],s[i]);else m(e,a);return s=g(a,"script"),s.length>0&&f(s,!l&&g(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,o,s,a,l,c,u=0,d=e.length,h=t.createDocumentFragment(),p=[];d>u;u++)if(r=e[u],r||0===r)if("object"===se.type(r))se.merge(p,r.nodeType?[r]:r);else if(Oe.test(r)){for(o=o||h.appendChild(t.createElement("div")),s=(ze.exec(r)||["",""])[1].toLowerCase(),a=Fe[s]||Fe._default,o.innerHTML=a[1]+r.replace(Pe,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;se.merge(p,o.childNodes),o=h.firstChild,o.textContent=""}else p.push(t.createTextNode(r));for(h.textContent="",u=0;r=p[u++];)if((!i||-1===se.inArray(r,i))&&(l=se.contains(r.ownerDocument,r),o=g(h.appendChild(r),"script"),l&&f(o),n))for(c=0;r=o[c++];)Re.test(r.type||"")&&n.push(r);return h},cleanData:function(e){for(var n,i,o,s,a,l,c=se.event.special,u=0;(i=e[u])!==t;u++){if(r.accepts(i)&&(a=i[ve.expando],a&&(n=ve.cache[a]))){if(o=Object.keys(n.events||{}),o.length)for(l=0;(s=o[l])!==t;l++)c[s]?se.event.remove(i,s):se.removeEvent(i,s,n.handle);ve.cache[a]&&delete ve.cache[a]}delete ge.cache[i[ge.expando]]}},_evalUrl:function(e){return se.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),se.fn.extend({wrapAll:function(e){var t;return se.isFunction(e)?this.each(function(t){se(this).wrapAll(e.call(this,t))}):(this[0]&&(t=se(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return se.isFunction(e)?this.each(function(t){se(this).wrapInner(e.call(this,t))}):this.each(function(){var t=se(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=se.isFunction(e);return this.each(function(n){se(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){se.nodeName(this,"body")||se(this).replaceWith(this.childNodes)}).end()}});var We,Be,Ve=/^(none|table(?!-c[ea]).+)/,Ye=/^margin/,Ue=new RegExp("^("+ae+")(.*)$","i"),Ge=new RegExp("^("+ae+")(?!px)[a-z%]+$","i"),Xe=new RegExp("^([+-])=("+ae+")","i"),Ke={BODY:"block"},Je={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:0,fontWeight:400},Ze=["Top","Right","Bottom","Left"],et=["Webkit","O","Moz","ms"];se.fn.extend({css:function(e,n){return se.access(this,function(e,n,i){var r,o,s={},a=0;if(se.isArray(n)){for(r=w(e),o=n.length;o>a;a++)s[n[a]]=se.css(e,n[a],!1,r);return s}return i!==t?se.style(e,n,i):se.css(e,n)},e,n,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){y(this)?se(this).show():se(this).hide()})}}),se.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,n,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,a,l=se.camelCase(n),c=e.style;return n=se.cssProps[l]||(se.cssProps[l]=b(c,l)),a=se.cssHooks[n]||se.cssHooks[l],i===t?a&&"get"in a&&(o=a.get(e,!1,r))!==t?o:c[n]:(s=typeof i,"string"===s&&(o=Xe.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(se.css(e,n)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||se.cssNumber[l]||(i+="px"),se.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(e,i,r))===t||(c[n]=i)),void 0)}},css:function(e,n,i,r){var o,s,a,l=se.camelCase(n);return n=se.cssProps[l]||(se.cssProps[l]=b(e.style,l)),a=se.cssHooks[n]||se.cssHooks[l],a&&"get"in a&&(o=a.get(e,!0,i)),o===t&&(o=We(e,n,r)),"normal"===o&&n in Qe&&(o=Qe[n]),""===i||i?(s=parseFloat(o),i===!0||se.isNumeric(s)?s||0:o):o}}),We=function(e,n,i){var r,o,s,a=i||w(e),l=a?a.getPropertyValue(n)||a[n]:t,c=e.style;return a&&(""!==l||se.contains(e.ownerDocument,e)||(l=se.style(e,n)),Ge.test(l)&&Ye.test(n)&&(r=c.width,o=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=r,c.minWidth=o,c.maxWidth=s)),l},se.each(["height","width"],function(e,t){se.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&Ve.test(se.css(e,"display"))?se.swap(e,Je,function(){return C(e,t,i)}):C(e,t,i):void 0},set:function(e,n,i){var r=i&&w(e);return k(e,n,i?_(e,t,i,se.support.boxSizing&&"border-box"===se.css(e,"boxSizing",!1,r),r):0)}}}),se(function(){se.support.reliableMarginRight||(se.cssHooks.marginRight={get:function(e,t){return t?se.swap(e,{display:"inline-block"},We,[e,"marginRight"]):void 0}}),!se.support.pixelPosition&&se.fn.position&&se.each(["top","left"],function(e,t){se.cssHooks[t]={get:function(e,n){return n?(n=We(e,t),Ge.test(n)?se(e).position()[t]+"px":n):void 0}}})}),se.expr&&se.expr.filters&&(se.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},se.expr.filters.visible=function(e){return!se.expr.filters.hidden(e)}),se.each({margin:"",padding:"",border:"Width"},function(e,t){se.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Ze[i]+t]=o[i]||o[i-2]||o[0];return r}},Ye.test(e)||(se.cssHooks[e+t].set=k)});var tt=/%20/g,nt=/\[\]$/,it=/\r?\n/g,rt=/^(?:submit|button|image|reset|file)$/i,ot=/^(?:input|select|textarea|keygen)/i;se.fn.extend({serialize:function(){return se.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=se.prop(this,"elements");return e?se.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!se(this).is(":disabled")&&ot.test(this.nodeName)&&!rt.test(e)&&(this.checked||!$e.test(e))}).map(function(e,t){var n=se(this).val();return null==n?null:se.isArray(n)?se.map(n,function(e){return{name:t.name,value:e.replace(it,"\r\n")}}):{name:t.name,value:n.replace(it,"\r\n")}}).get()}}),se.param=function(e,n){var i,r=[],o=function(e,t){t=se.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=se.ajaxSettings&&se.ajaxSettings.traditional),se.isArray(e)||e.jquery&&!se.isPlainObject(e))se.each(e,function(){o(this.name,this.value)});else for(i in e)N(i,e[i],n,o);return r.join("&").replace(tt,"+")},se.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){se.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),se.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var st,at,lt=se.now(),ct=/\?/,ut=/#.*$/,dt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ft=/^(?:GET|HEAD)$/,mt=/^\/\//,gt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,vt=se.fn.load,bt={},yt={},wt="*/".concat("*");try{at=V.href}catch(xt){at=Y.createElement("a"),at.href="",at=at.href}st=gt.exec(at.toLowerCase())||[],se.fn.load=function(e,n,i){if("string"!=typeof e&&vt)return vt.apply(this,arguments);var r,o,s,a=this,l=e.indexOf(" ");return l>=0&&(r=e.slice(l),e=e.slice(0,l)),se.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(o="POST"),a.length>0&&se.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,a.html(r?se("<div>").append(se.parseHTML(e)).find(r):e)}).complete(i&&function(e,t){a.each(i,s||[e.responseText,t,e])}),this},se.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){se.fn[t]=function(e){return this.on(t,e)}}),se.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:at,type:"GET",isLocal:pt.test(st[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":se.parseJSON,"text xml":se.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?E(E(e,se.ajaxSettings),t):E(se.ajaxSettings,e)},ajaxPrefilter:D(bt),ajaxTransport:D(yt),ajax:function(e,n){function i(e,n,i,a){var c,d,b,y,x,_=n;2!==w&&(w=2,l&&clearTimeout(l),r=t,s=a||"",k.readyState=e>0?4:0,c=e>=200&&300>e||304===e,i&&(y=M(h,k,i)),y=I(h,y,k,c),c?(h.ifModified&&(x=k.getResponseHeader("Last-Modified"),x&&(se.lastModified[o]=x),x=k.getResponseHeader("etag"),x&&(se.etag[o]=x)),204===e||"HEAD"===h.type?_="nocontent":304===e?_="notmodified":(_=y.state,d=y.data,b=y.error,c=!b)):(b=_,(e||!_)&&(_="error",0>e&&(e=0))),k.status=e,k.statusText=(n||_)+"",c?m.resolveWith(p,[d,_,k]):m.rejectWith(p,[k,_,b]),k.statusCode(v),v=t,u&&f.trigger(c?"ajaxSuccess":"ajaxError",[k,h,c?d:b]),g.fireWith(p,[k,_]),u&&(f.trigger("ajaxComplete",[k,h]),--se.active||se.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,o,s,a,l,c,u,d,h=se.ajaxSetup({},n),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?se(p):se.event,m=se.Deferred(),g=se.Callbacks("once memory"),v=h.statusCode||{},b={},y={},w=0,x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!a)for(a={};t=ht.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,b[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||x;return r&&r.abort(t),i(0,t),this}};if(m.promise(k).complete=g.add,k.success=k.done,k.error=k.fail,h.url=((e||h.url||at)+"").replace(ut,"").replace(mt,st[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=se.trim(h.dataType||"*").toLowerCase().match(le)||[""],null==h.crossDomain&&(c=gt.exec(h.url.toLowerCase()),h.crossDomain=!(!c||c[1]===st[1]&&c[2]===st[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(st[3]||("http:"===st[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=se.param(h.data,h.traditional)),A(bt,h,n,k),2===w)return k;u=h.global,u&&0===se.active++&&se.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ft.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(ct.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=dt.test(o)?o.replace(dt,"$1_="+lt++):o+(ct.test(o)?"&":"?")+"_="+lt++)),h.ifModified&&(se.lastModified[o]&&k.setRequestHeader("If-Modified-Since",se.lastModified[o]),se.etag[o]&&k.setRequestHeader("If-None-Match",se.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+wt+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)k.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(h.beforeSend.call(p,k,h)===!1||2===w))return k.abort();x="abort";for(d in{success:1,error:1,complete:1})k[d](h[d]);if(r=A(yt,h,n,k)){k.readyState=1,u&&f.trigger("ajaxSend",[k,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){k.abort("timeout")},h.timeout));try{w=1,r.send(b,i)}catch(_){if(!(2>w))throw _;i(-1,_)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return se.get(e,t,n,"json")},getScript:function(e,n){return se.get(e,t,n,"script")}}),se.each(["get","post"],function(e,n){se[n]=function(e,i,r,o){return se.isFunction(i)&&(o=o||r,r=i,i=t),se.ajax({url:e,type:n,dataType:o,data:i,success:r})}}),se.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return se.globalEval(e),e}}}),se.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),se.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=se("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),Y.head.appendChild(t[0])},abort:function(){n&&n()}}}});var kt=[],_t=/(=)\?(?=&|$)|\?\?/;se.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=kt.pop()||se.expando+"_"+lt++;return this[e]=!0,e}}),se.ajaxPrefilter("json jsonp",function(n,i,r){var o,s,a,l=n.jsonp!==!1&&(_t.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&_t.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=se.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(_t,"$1"+o):n.jsonp!==!1&&(n.url+=(ct.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||se.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=e[o],e[o]=function(){a=arguments},r.always(function(){e[o]=s,n[o]&&(n.jsonpCallback=i.jsonpCallback,kt.push(o)),a&&se.isFunction(s)&&s(a[0]),a=s=t}),"script"):void 0}),se.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ct=se.ajaxSettings.xhr(),Tt={0:200,1223:204},St=0,Nt={};e.ActiveXObject&&se(e).on("unload",function(){for(var e in Nt)Nt[e]();Nt=t}),se.support.cors=!!Ct&&"withCredentials"in Ct,se.support.ajax=Ct=!!Ct,se.ajaxTransport(function(e){var n;return se.support.cors||Ct&&!e.crossDomain?{send:function(i,r){var o,s,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)a.setRequestHeader(o,i[o]);n=function(e){return function(){n&&(delete Nt[s],n=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?r(a.status||404,a.statusText):r(Tt[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:t,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=Nt[s=St++]=n("abort"),a.send(e.hasContent&&e.data||null)},abort:function(){n&&n()}}:void 0});var Dt,At,Et=/^(?:toggle|show|hide)$/,Mt=new RegExp("^(?:([+-])=|)("+ae+")([a-z%]*)$","i"),It=/queueHooks$/,Pt=[L],zt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Mt.exec(t),o=r&&r[3]||(se.cssNumber[e]?"":"px"),s=(se.cssNumber[e]||"px"!==o&&+i)&&Mt.exec(se.css(n.elem,e)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+i||1;do a=a||".5",s/=a,se.style(n.elem,e,s+o);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=o,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};se.Animation=se.extend(O,{tweener:function(e,t){se.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],zt[n]=zt[n]||[],zt[n].unshift(t)},prefilter:function(e,t){t?Pt.unshift(e):Pt.push(e)}}),se.Tween=R,R.prototype={constructor:R,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(se.cssNumber[n]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,n=R.propHooks[this.prop];return this.options.duration?this.pos=t=se.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=se.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){se.fx.step[e.prop]?se.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[se.cssProps[e.prop]]||se.cssHooks[e.prop])?se.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},se.each(["toggle","show","hide"],function(e,t){var n=se.fn[t];se.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,i,r)}}),se.fn.extend({fadeTo:function(e,t,n,i){return this.filter(y).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=se.isEmptyObject(e),o=se.speed(t,n,i),s=function(){var t=O(this,se.extend({},e),o);(r||ve.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,n,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=se.timers,s=ve.get(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&It.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));(t||!i)&&se.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=se.timers,s=i?i.length:0;for(n.finish=!0,se.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),se.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){se.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),se.speed=function(e,t,n){var i=e&&"object"==typeof e?se.extend({},e):{complete:n||!n&&t||se.isFunction(e)&&e,duration:e,easing:n&&t||t&&!se.isFunction(t)&&t};return i.duration=se.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in se.fx.speeds?se.fx.speeds[i.duration]:se.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){se.isFunction(i.old)&&i.old.call(this),i.queue&&se.dequeue(this,i.queue)},i},se.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},se.timers=[],se.fx=R.prototype.init,se.fx.tick=function(){var e,n=se.timers,i=0;for(Dt=se.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||se.fx.stop(),Dt=t},se.fx.timer=function(e){e()&&se.timers.push(e)&&se.fx.start()},se.fx.interval=13,se.fx.start=function(){At||(At=setInterval(se.fx.tick,se.fx.interval))},se.fx.stop=function(){clearInterval(At),At=null},se.fx.speeds={slow:600,fast:200,_default:400},se.fx.step={},se.expr&&se.expr.filters&&(se.expr.filters.animated=function(e){return se.grep(se.timers,function(t){return e===t.elem}).length}),se.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){se.offset.setOffset(this,e,t)});var n,i,r=this[0],o={top:0,left:0},s=r&&r.ownerDocument;if(s)return n=s.documentElement,se.contains(n,r)?(typeof r.getBoundingClientRect!==B&&(o=r.getBoundingClientRect()),i=j(s),{top:o.top+i.pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}):o},se.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,c,u=se.css(e,"position"),d=se(e),h={};"static"===u&&(e.style.position="relative"),a=d.offset(),o=se.css(e,"top"),l=se.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(i=d.position(),s=i.top,r=i.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),se.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):d.css(h)}},se.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===se.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),se.nodeName(e[0],"html")||(i=e.offset()),i.top+=se.css(e[0],"borderTopWidth",!0),i.left+=se.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-se.css(n,"marginTop",!0),left:t.left-i.left-se.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||U;e&&!se.nodeName(e,"html")&&"static"===se.css(e,"position");)e=e.offsetParent;return e||U})}}),se.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var r="pageYOffset"===i;se.fn[n]=function(o){return se.access(this,function(n,o,s){var a=j(n);return s===t?a?a[i]:n[o]:void(a?a.scrollTo(r?e.pageXOffset:s,r?s:e.pageYOffset):n[o]=s)},n,o,arguments.length,null)}}),se.each({Height:"height",Width:"width"},function(e,n){se.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,r){se.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return se.access(this,function(n,i,r){var o;return se.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):r===t?se.css(n,i,a):se.style(n,i,r,a)},n,s?r:t,s,null)}})}),se.fn.size=function(){return this.length},se.fn.andSelf=se.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=se:"function"==typeof define&&define.amd&&define("jquery",[],function(){return se}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=se)}(window),function(e,t){function n(t,n){var r,o,s,a=t.nodeName.toLowerCase();return"area"===a?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(s=e("img[usemap=#"+o+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,r,o=e(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function r(t,n,i,r){return e.each(o,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each(function(){e(this).css(s,r(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;r.length>i;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0?!0:(t[i]=1,r=t[i]>0,t[i]=0,r)}})}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(n,i,r){var o,s,a,l,c={},u=n.split(".")[0];n=n.split(".")[1],o=u+"-"+n,r||(r=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[u]=e[u]||{},s=e[u][n],a=e[u][n]=function(e,n){return this._createWidget?(arguments.length&&this._createWidget(e,n),t):new a(e,n)},e.extend(a,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),l=new i,l.options=e.widget.extend({},l.options),e.each(r,function(n,r){return e.isFunction(r)?(c[n]=function(){var e=function(){return i.prototype[n].apply(this,arguments)},t=function(e){return i.prototype[n].apply(this,e)};return function(){var n,i=this._super,o=this._superApply;return this._super=e,this._superApply=t,n=r.apply(this,arguments),this._super=i,this._superApply=o,n}}(),t):(c[n]=r,t)}),a.prototype=e.widget.extend(l,{widgetEventPrefix:s?l.widgetEventPrefix||n:n},c,{constructor:a,namespace:u,widgetName:n,widgetFullName:o}),s?(e.each(s._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete s._childConstructors):i._childConstructors.push(a),e.widget.bridge(n,a)},e.widget.extend=function(n){for(var r,o,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==t&&(n[r]=e.isPlainObject(o)?e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,r=e.data(this,o);return r?e.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):t):e.error("no such method '"+s+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new r(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),
this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,s,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(o=a[n]=e.widget.extend({},this.options[n]),s=0;r.length-1>s;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(n=r.pop(),1===arguments.length)return o[n]===t?null:o[n];o[n]=i}else{if(1===arguments.length)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i,r){var o,s=this;"boolean"!=typeof n&&(r=i,i=n,n=!1),r?(i=o=e(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,o=this.widget()),e.each(r,function(r,a){function l(){return n||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):t}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||e.guid++);var c=r.match(/^(\w+)\s*(.*)$/),u=c[1]+s.eventNamespace,d=c[2];d?o.delegate(d,u,l):i.bind(u,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),s=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}function r(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var o,s=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var n,i,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return e("body").append(r),n=s.offsetWidth,r.css("overflow","scroll"),i=s.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),o=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,p,m,g,v,b,y=e(t.of),w=e.position.getWithinInfo(t.within),x=e.position.getScrollInfo(w),k=(t.collision||"flip").split(" "),_={};return b=r(y),y[0].preventDefault&&(t.at="left top"),p=b.width,m=b.height,g=b.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),n=d.exec(i[1]),_[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),o=n(_.at,p,m),v.left+=o[0],v.top+=o[1],this.each(function(){var r,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),C=d+f+i(this,"marginRight")+x.width,T=h+b+i(this,"marginBottom")+x.height,S=e.extend({},v),N=n(_.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?S.left-=d:"center"===t.my[0]&&(S.left-=d/2),"bottom"===t.my[1]?S.top-=h:"center"===t.my[1]&&(S.top-=h/2),S.left+=N[0],S.top+=N[1],e.support.offsetFractions||(S.left=l(S.left),S.top=l(S.top)),r={marginLeft:f,marginTop:b},e.each(["left","top"],function(n,i){e.ui.position[k[n]]&&e.ui.position[k[n]][i](S,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:h,collisionPosition:r,collisionWidth:C,collisionHeight:T,offset:[o[0]+N[0],o[1]+N[1]],my:t.my,at:t.at,within:w,elem:u})}),t.using&&(c=function(e){var n=g.left-S.left,i=n+p-d,r=g.top-S.top,o=r+m-h,l={target:{element:y,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:S.left,top:S.top,width:d,height:h},horizontal:0>i?"left":n>0?"right":"center",vertical:0>o?"top":r>0?"bottom":"middle"};d>p&&p>a(n+i)&&(l.horizontal="center"),h>m&&m>a(r+o)&&(l.vertical="middle"),l.important=s(a(n),a(i))>s(a(r),a(o))?"horizontal":"vertical",t.using.call(this,e,l)}),u.offset(e.extend(S,{using:c}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,c=a+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&0>=c?(n=e.left+l+t.collisionWidth-o-r,e.left+=l-n):e.left=c>0&&0>=l?r:l>c?r+o-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-a,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,c=a+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&0>=c?(n=e.top+l+t.collisionHeight-o-r,e.top+=l-n):e.top=c>0&&0>=l?r:l>c?r+o-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-s-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(n=e.left+h+p+f+t.collisionWidth-s-o,(0>n||a(u)>n)&&(e.left+=h+p+f)):d>0&&(i=e.left-t.collisionPosition.marginLeft+h+p+f-l,(i>0||d>a(i))&&(e.left+=h+p+f))},top:function(e,t){var n,i,r=t.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-s-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(i=e.top+p+f+m+t.collisionHeight-s-o,e.top+p+f+m>u&&(0>i||a(u)>i)&&(e.top+=p+f+m)):d>0&&(n=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(n>0||d>a(n))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,r,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)t.style[o]=i[o];t.appendChild(a),n=s||document.documentElement,n.insertBefore(t,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=e(a).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;return r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=e(r.containment),i=n[0],void(i&&(t="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(t){var n,i,r,o,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("ui-draggable"),r=i.options,o=e.extend({},n,{item:i.element});i.sortables=[],e(r.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,o))})},stop:function(t,n){var i=e(this).data("ui-draggable"),r=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))})},drag:function(t,n){var i=e(this).data("ui-draggable"),r=this;e.each(i.sortables,function(){var o=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),i=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(t,n){var i,r,o,s,a,l,c,u,d,h,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=n.offset.left,v=g+p.helperProportions.width,b=n.offset.top,y=b+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)a=p.snapElements[d].left,l=a+p.snapElements[d].width,c=p.snapElements[d].top,u=c+p.snapElements[d].height,a-m>v||g>l+m||c-m>y||b>u+m||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(i=m>=Math.abs(c-y),r=m>=Math.abs(u-b),o=m>=Math.abs(a-v),s=m>=Math.abs(l-g),i&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=i||r||o||s,"outer"!==f.snapMode&&(i=m>=Math.abs(c-b),r=m>=Math.abs(u-y),o=m>=Math.abs(a-g),s=m>=Math.abs(l-v),i&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(i||r||o||s||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=i||r||o||s||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,i=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});i.length&&(t=parseInt(e(i[0]).css("zIndex"),10)||0,e(i).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+i.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),r=e(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},e.ui.ddmanager.droppables[n.scope]=e.ui.ddmanager.droppables[n.scope]||[],e.ui.ddmanager.droppables[n.scope].push(this),n.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,n=e.ui.ddmanager.droppables[this.options.scope];n.length>t;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"===t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),
this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current,r=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,n,i){if(!n.offset)return!1;var r,o,s=(e.positionAbs||e.position.absolute).left,a=(e.positionAbs||e.position.absolute).top,l=s+e.helperProportions.width,c=a+e.helperProportions.height,u=n.offset.left,d=n.offset.top,h=u+n.proportions().width,p=d+n.proportions().height;switch(i){case"fit":return s>=u&&h>=l&&a>=d&&p>=c;case"intersect":return s+e.helperProportions.width/2>u&&h>l-e.helperProportions.width/2&&a+e.helperProportions.height/2>d&&p>c-e.helperProportions.height/2;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,o=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(o,d,n.proportions().height)&&t(r,u,n.proportions().width);case"touch":return(a>=d&&p>=a||c>=d&&p>=c||d>a&&c>p)&&(s>=u&&h>=s||l>=u&&h>=l||u>s&&l>h);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],s=n?n.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;o.length>i;i++)if(!(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))){for(r=0;a.length>r;r++)if(a[r]===o[i].element[0]){o[i].proportions().height=0;continue e}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===s&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(t,n){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,o,s=e.ui.intersect(t,this,this.options.tolerance),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===r}),o.length&&(i=e.data(o[0],"ui-droppable"),i.greedyChild="isover"===a)),i&&"isover"===a&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,n),i&&"isout"===a&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function n(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,i,r,o,s=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)i=e.trim(t[n]),o="ui-resizable-"+i,r=e("<div class='ui-resizable-handle "+o+"'></div>"),r.css({zIndex:a.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(t){var n,i,r,o;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,o),this._proportionallyResize()),e(this.handles[n]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")}),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(e(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(n){var i,r,o,s=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),i=t(this.helper.css("left")),r=t(this.helper.css("top")),s.containment&&(i+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(t){var n,i=this.helper,r={},o=this.originalMousePosition,s=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,d=t.pageX-o.left||0,h=t.pageY-o.top||0,p=this._change[s];return p?(n=p.apply(this,[t,d,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==a&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==c&&(r.width=this.size.width+"px"),this.size.height!==u&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,i,r,o,s,a,l,c=this.options,u=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&e.ui.hasScroll(n[0],"left")?0:u.sizeDiff.height,o=i?0:u.sizeDiff.width,s={width:u.helper.width()-o,height:u.helper.height()-r},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,o,s,a=this.options;s={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),s.maxWidth>i&&(s.maxWidth=i),s.maxHeight>o&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=n(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=n(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=n(e.width)&&t.minWidth&&t.minWidth>e.width,a=n(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),a&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),s&&u&&(e.left=l-t.minWidth),r&&u&&(e.left=l-t.maxWidth),a&&d&&(e.top=c-t.minHeight),o&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,n,i,r,o=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;n.length>t;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(i[t],10)||0);r.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n,i,r,o,s,a,l,c=e(this).data("ui-resizable"),u=c.options,d=c.element,h=u.containment,p=h instanceof e?h.get(0):/parent/.test(h)?d.parent().get(0):h;p&&(c.containerElement=e(p),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(n=e(p),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){i[e]=t(n.css("padding"+r))}),c.containerOffset=n.offset(),c.containerPosition=n.position(),c.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},r=c.containerOffset,o=c.containerSize.height,s=c.containerSize.width,a=e.ui.hasScroll(p,"left")?p.scrollWidth:s,l=e.ui.hasScroll(p)?p.scrollHeight:o,c.parentData={element:p,left:r.left,top:r.top,width:a,height:l}))},resize:function(t){var n,i,r,o,s=e(this).data("ui-resizable"),a=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||t.shiftKey,d={top:0,left:0},h=s.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-d.left),u&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=a.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,n=Math.abs((s._helper?s.offset.left-d.left:s.offset.left-d.left)+s.sizeDiff.width),i=Math.abs((s._helper?s.offset.top-d.top:s.offset.top-l.top)+s.sizeDiff.height),r=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),r&&o&&(n-=Math.abs(s.parentData.left)),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,u&&(s.size.height=s.size.width/s.aspectRatio)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,u&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.containerOffset,r=t.containerPosition,o=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-r.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-r.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).data("ui-resizable"),r=i.options,o=i.originalSize,s=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},l=function(t,i){e(t).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),o={},s=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(a[t]||0);n&&n>=0&&(o[t]=n||null)}),t.css(o)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,i=t.size,r=t.originalSize,o=t.originalPosition,s=t.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,c=a[1]||1,u=Math.round((i.width-r.width)/l)*l,d=Math.round((i.height-r.height)/c)*c,h=r.width+u,p=r.height+d,f=n.maxWidth&&h>n.maxWidth,m=n.maxHeight&&p>n.maxHeight,g=n.minWidth&&n.minWidth>h,v=n.minHeight&&n.minHeight>p;n.grid=a,g&&(h+=l),v&&(p+=c),f&&(h-=l),m&&(p-=c),/^(se|s|e)$/.test(s)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(s)?(t.size.width=h,t.size.height=p,t.position.top=o.top-d):/^(sw)$/.test(s)?(t.size.width=h,t.size.height=p,t.position.left=o.left-u):(p-c>0?(t.size.height=p,t.position.top=o.top-d):(t.size.height=c,t.position.top=o.top+r.height-c),h-l>0?(t.size.width=h,t.position.left=o.left-u):(t.size.width=l,t.position.left=o.left+r.width-l))}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().addBack().each(function(){var i,r=e.data(this,"selectable-item");return r?(i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,i=this,r=this.options,o=this.opos[0],s=this.opos[1],a=t.pageX,l=t.pageY;return o>a&&(n=a,a=o,o=n),s>l&&(n=l,l=s,s=n),this.helper.css({left:o,top:s,width:a-o,height:l-s}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),c=!1;n&&n.element!==i.element[0]&&("touch"===r.tolerance?c=!(n.left>a||o>n.right||n.top>l||s>n.bottom):"fit"===r.tolerance&&(c=n.left>o&&a>n.right&&n.top>s&&l>n.bottom),c?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,i._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),i._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(i=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target)),i&&(!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=!0)}),r))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,n,i){var r,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,r,o,s=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),
this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,s=o+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||i+c>a&&l>i+c,h="y"===this.options.axis||t+u>o&&s>t+u,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>o&&s>n-this.helperProportions.width/2&&i+this.helperProportions.height/2>a&&l>r-this.helperProportions.height/2},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=n&&i,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:r&&("down"===r&&n||"up"===r&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){a.push(this)}var i,r,o,s,a=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(o=e(c[i]),r=o.length-1;r>=0;r--)s=e.data(o[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,r,o,s,a,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(r=e(h[n]),i=r.length-1;i>=0;i--)o=e.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=d.length-1;n>=0;n--)for(s=d[n][1],a=d[n][0],i=0,c=a.length;c>i;i++)l=e(a[i]),l.data(this.widgetName+"-item",s),u.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)}):"img"===i&&r.attr("src",t.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var r,o,s,a,l,c,u,d,h,p,f=null,m=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(f&&e.contains(this.containers[r].element[0],f.element[0]))continue;f=this.containers[r],m=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",i,this._uiHash(this)),this.containers[r].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(s=1e4,a=null,p=f.floating||n(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(d=this.items[o].item.offset()[l],h=!1,Math.abs(d-u)>Math.abs(d+this.items[o][c]-u)&&(h=!0,d+=this.items[o][c]),s>Math.abs(d-u)&&(s=Math.abs(d-u),a=this.items[o],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(i,a,null,!0):this._rearrange(i,null,this.containers[m].element,!0),this._trigger("change",i,this._uiHash()),this.containers[m]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",i,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],n=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,s=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/r.grid[1])*r.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;r.length>i;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;r.length>i;i++)r[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(o.inline?t.parent()[0]:o.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function r(t,n){e.extend(t,n);for(var i in n)null==n[i]&&(t[i]=n[i]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var o,s="datepicker";e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,r,o;i=t.nodeName.toLowerCase(),r="div"===i||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),o=this._newInst(e(t),r),o.settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,o):r&&this._inlineDatepicker(t,o)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,s,n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,r,o,s=this._get(n,"appendText"),a=this._get(n,"isRTL");n.append&&n.append.remove(),s&&(n.append=e("<span class='"+this._appendClass+"'>"+s+"</span>"),t[a?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),i=this._get(n,"showOn"),("focus"===i||"both"===i)&&t.focus(this._showDatepicker),("button"===i||"both"===i)&&(r=this._get(n,"buttonText"),o=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:r,title:r}):r)),t[a?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,o=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(n=0,i=0,r=0;e.length>r;r++)e[r].length>n&&(n=e[r].length,i=r);return i},o.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,s,n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,o,a){var l,c,u,d,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],s,p)),r(p.settings,o||{}),n=n&&n.constructor===Date?this._formatDate(p,n):n,this._dialogInput.val(n),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,u/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],s,p),this},_destroyDatepicker:function(t){var n,i=e(t),r=e.data(t,s);i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,s),"input"===n?(r.append.remove(),r.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,s);r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,s);r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(i=r.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,s)}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,i,o){var s,a,l,c,u=this._getInst(n);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):u?"all"===i?e.extend({},u.settings):this._get(u,i):null:(s=i||{},"string"==typeof i&&(s={},s[i]=o),u&&(this._curInst===u&&this._hideDatepicker(),a=this._getDateDatepicker(n,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),r(u.settings,s),null!==l&&s.dateFormat!==t&&s.minDate===t&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&s.dateFormat!==t&&s.maxDate===t&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),u),this._autoSize(u),this._setDate(u,a),this._updateAlternate(u),this._updateDatepicker(u)),t)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,r,o=e.datepicker._getInst(t.target),s=!0,a=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),s=!1;break;case 13:return r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv),r[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0]),n=e.datepicker._get(o,"onSelect"),n?(i=e.datepicker._formatDate(o),n.apply(o.input?o.input[0]:null,[i,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(n){var i,r,o=e.datepicker._getInst(n.target);return e.datepicker._get(o,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),r=String.fromCharCode(null==n.charCode?n.keyCode:n.charCode),n.ctrlKey||n.metaKey||" ">r||!i||i.indexOf(r)>-1):t},_doKeyUp:function(t){var n,i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i)),n&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(r){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,i,o,s,a,l,c;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(n,"beforeShow"),o=i?i.apply(t,[t,n]):{},o!==!1&&(r(n.settings,o),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|="fixed"===e(this).css("position"),!s}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),a=e.datepicker._checkOffset(n,a,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),n.inline||(l=e.datepicker._get(n,"showAnim"),c=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?n.dpDiv.show(l,e.datepicker._get(n,"showOptions"),c):n.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,o=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,i=this._getNumberOfMonths(t),r=i[1],s=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",s*r+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){
return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?r-s:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+a?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+o>c&&c>o?Math.abs(o+a):0),n},_findPos:function(t){for(var n,i=this._getInst(t),r=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,i,r,o,a=this._curInst;!a||t&&a!==e.data(t,s)||this._datepickerShowing&&(n=this._get(a,"showAnim"),i=this._get(a,"duration"),r=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[n]||e.effects[n])?a.dpDiv.hide(n,e.datepicker._get(a,"showOptions"),i,r):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var r=e(t),o=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(o,n+("M"===i?this._get(o,"showCurrentAtPos"):0),i),this._updateDatepicker(o))},_gotoToday:function(t){var n,i=e(t),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var r=e(t),o=this._getInst(r[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(r)},_selectDay:function(t,n,i,r){var o,s=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||(o=this._getInst(s[0]),o.selectedDay=o.currentDay=e("a",r).html(),o.selectedMonth=o.currentMonth=n,o.selectedYear=o.currentYear=i,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,r=e(t),o=this._getInst(r[0]);n=null!=n?n:this._formatDate(o),o.input&&o.input.val(n),this._updateAlternate(o),i=this._get(o,"onSelect"),i?i.apply(o.input?o.input[0]:null,[n,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,i,r,o=this._get(t,"altField");o&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),r=this.formatDate(n,i,this._getFormatConfig(t)),e(o).each(function(){e(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(n,i,r){if(null==n||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var o,s,a,l,c=0,u=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),h=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,p=(r?r.dayNames:null)||this._defaults.dayNames,f=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,m=(r?r.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,b=-1,y=-1,w=!1,x=function(e){var t=n.length>o+1&&n.charAt(o+1)===e;return t&&o++,t},k=function(e){var t=x(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=RegExp("^\\d{1,"+n+"}"),o=i.substring(c).match(r);if(!o)throw"Missing number at position "+c;return c+=o[0].length,parseInt(o[0],10)},_=function(n,r,o){var s=-1,a=e.map(x(n)?o:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,n){var r=n[1];return i.substr(c,r.length).toLowerCase()===r.toLowerCase()?(s=n[0],c+=r.length,!1):t}),-1!==s)return s+1;throw"Unknown name at position "+c},C=function(){if(i.charAt(c)!==n.charAt(o))throw"Unexpected literal at position "+c;c++};for(o=0;n.length>o;o++)if(w)"'"!==n.charAt(o)||x("'")?C():w=!1;else switch(n.charAt(o)){case"d":b=k("d");break;case"D":_("D",h,p);break;case"o":y=k("o");break;case"m":v=k("m");break;case"M":v=_("M",f,m);break;case"y":g=k("y");break;case"@":l=new Date(k("@")),g=l.getFullYear(),v=l.getMonth()+1,b=l.getDate();break;case"!":l=new Date((k("!")-this._ticksTo1970)/1e4),g=l.getFullYear(),v=l.getMonth()+1,b=l.getDate();break;case"'":x("'")?C():w=!0;break;default:C()}if(i.length>c&&(a=i.substr(c),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=g?0:-100)),y>-1)for(v=1,b=y;s=this._getDaysInMonth(g,v-1),!(s>=b);)v++,b-=s;if(l=this._daylightSavingAdjust(new Date(g,v-1,b)),l.getFullYear()!==g||l.getMonth()+1!==v||l.getDate()!==b)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,a=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=e.length>i+1&&e.charAt(i+1)===t;return n&&i++,n},c=function(e,t,n){var i=""+t;if(l(e))for(;n>i.length;)i="0"+i;return i},u=function(e,t,n,i){return l(e)?i[t]:n[t]},d="",h=!1;if(t)for(i=0;e.length>i;i++)if(h)"'"!==e.charAt(i)||l("'")?d+=e.charAt(i):h=!1;else switch(e.charAt(i)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),r,o);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),s,a);break;case"y":d+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=e.charAt(i)}return d},_possibleChars:function(e){var t,n="",i=!1,r=function(n){var i=e.length>t+1&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;e.length>t;t++)if(i)"'"!==e.charAt(t)||r("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,s=this._getFormatConfig(e);try{o=this.parseDate(n,i,s)||r}catch(a){i=t?"":i}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=i?o.getDate():0,e.currentMonth=i?o.getMonth():0,e.currentYear=i?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(i){}for(var r=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=r.getFullYear(),s=r.getMonth(),a=r.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(n);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":s+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,s));break;case"y":case"Y":o+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(o,s))}c=l.exec(n)}return new Date(o,s,a)},s=null==n||""===n?i:"string"==typeof n?o(n):"number"==typeof n?isNaN(n)?i:r(n):new Date(n.getTime());return s=s&&"Invalid Date"==""+s?i:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,o=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),r===e.selectedMonth&&o===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,r,o,s,a,l,c,u,d,h,p,f,m,g,v,b,y,w,x,k,_,C,T,S,N,D,A,E,M,I,P,z,O,q,L,R,H,j=new Date,F=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),W=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),V=this._get(e,"hideIfNoPrevNext"),Y=this._get(e,"navigationAsDateFormat"),U=this._getNumberOfMonths(e),G=this._get(e,"showCurrentAtPos"),X=this._get(e,"stepMonths"),K=1!==U[0]||1!==U[1],J=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),$=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),Z=e.drawMonth-G,ee=e.drawYear;if(0>Z&&(Z+=12,ee--),Q)for(t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-U[0]*U[1]+1,Q.getDate())),t=$&&$>t?$:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)Z--,0>Z&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,n=this._get(e,"prevText"),n=Y?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z-X,1)),this._getFormatConfig(e)):n,i=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"e":"w")+"'>"+n+"</span></a>",r=this._get(e,"nextText"),r=Y?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,Z+X,1)),this._getFormatConfig(e)):r,o=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+r+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(W?"w":"e")+"'>"+r+"</span></a>",s=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?J:F,s=Y?this.formatDate(s,a,this._getFormatConfig(e)):s,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(W?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(W?"":l)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),w="",k=0;U[0]>k;k++){for(_="",this.maxRows=4,C=0;U[1]>C;C++){if(T=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),S=" ui-corner-all",N="",K){if(N+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:N+=" ui-datepicker-group-first",S=" ui-corner-"+(W?"right":"left");break;case U[1]-1:N+=" ui-datepicker-group-last",S=" ui-corner-"+(W?"left":"right");break;default:N+=" ui-datepicker-group-middle",S=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===k?W?o:i:"")+(/all|right/.test(S)&&0===k?W?i:o:"")+this._generateMonthYearHeader(e,Z,ee,$,Q,k>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",D=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)A=(x+u)%7,D+="<th"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[A]+"'>"+p[A]+"</span></th>";for(N+=D+"</tr></thead><tbody>",E=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,E)),M=(this._getFirstDayOfMonth(ee,Z)-u+7)%7,I=Math.ceil((M+E)/7),P=K&&this.maxRows>I?this.maxRows:I,this.maxRows=P,z=this._daylightSavingAdjust(new Date(ee,Z,1-M)),O=0;P>O;O++){for(N+="<tr>",q=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)L=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],R=z.getMonth()!==Z,H=R&&!b||!L[0]||$&&$>z||Q&&z>Q,q+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(R?" ui-datepicker-other-month":"")+(z.getTime()===T.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===z.getTime()&&y.getTime()===T.getTime()?" "+this._dayOverClass:"")+(H?" "+this._unselectableClass+" ui-state-disabled":"")+(R&&!v?"":" "+L[1]+(z.getTime()===J.getTime()?" "+this._currentClass:"")+(z.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+(R&&!v||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(H?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(R&&!v?"&#xa0;":H?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===F.getTime()?" ui-state-highlight":"")+(z.getTime()===J.getTime()?" ui-state-active":"")+(R?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);N+=q+"</tr>"}Z++,Z>11&&(Z=0,ee++),N+="</tbody></table>"+(K?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),_+=N}w+=_}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,i,r,o,s,a){var l,c,u,d,h,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=i&&i.getFullYear()===n,c=r&&r.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=i.getMonth())&&(!c||r.getMonth()>=u)&&(w+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+a[u]+"</option>");w+="</select>"}if(b||(y+=w+(!o&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(d=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=i?Math.max(f,i.getFullYear()):f,m=r?Math.min(m,r.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!o&&g&&v?"":"&#xa0;")+w),y+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"===n?t:0),r=e.drawMonth+("M"===n?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,o)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&n>t?n:t;return i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(n,i+(0>t?t:r[0]*r[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),s=null,a=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),a=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(a+=i)),(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!s||t.getFullYear()>=s)&&(!a||a>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,i,r){return jQuery.easing[jQuery.easing.def](e,t,n,i,r)},easeInQuad:function(e,t,n,i,r){return i*(t/=r)*t+n},easeOutQuad:function(e,t,n,i,r){return-i*(t/=r)*(t-2)+n},easeInOutQuad:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,i,r){return i*(t/=r)*t*t+n},easeOutCubic:function(e,t,n,i,r){return i*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t+n:i/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,i,r){return i*(t/=r)*t*t*t+n},easeOutQuart:function(e,t,n,i,r){return-i*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t+n:-i/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,i,r){return i*(t/=r)*t*t*t*t+n},easeOutQuint:function(e,t,n,i,r){return i*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+n},easeOutSine:function(e,t,n,i,r){return i*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(e,t,n,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(e,t,n,i,r){return 0==t?n:i*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(e,t,n,i,r){return t==r?n+i:i*(-Math.pow(2,-10*t/r)+1)+n},easeInOutExpo:function(e,t,n,i,r){return 0==t?n:t==r?n+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+n:i/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(e,t,n,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(e,t,n,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+n:i/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,i,r){var o=1.70158,s=0,a=i;if(0==t)return n;if(1==(t/=r))return n+i;if(s||(s=.3*r),a<Math.abs(i)){a=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s))+n},easeOutElastic:function(e,t,n,i,r){var o=1.70158,s=0,a=i;if(0==t)return n;if(1==(t/=r))return n+i;if(s||(s=.3*r),a<Math.abs(i)){a=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/a);return a*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/s)+i+n},easeInOutElastic:function(e,t,n,i,r){var o=1.70158,s=0,a=i;if(0==t)return n;if(2==(t/=r/2))return n+i;if(s||(s=r*(.3*1.5)),a<Math.abs(i)){a=i;var o=s/4}else var o=s/(2*Math.PI)*Math.asin(i/a);return 1>t?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s))+n:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*.5+i+n},easeInBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),i*(t/=r)*t*((o+1)*t-o)+n},easeOutBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),i*((t=t/r-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),(t/=r/2)<1?i/2*(t*t*(((o*=1.525)+1)*t-o))+n:i/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+n},easeInBounce:function(e,t,n,i,r){return i-jQuery.easing.easeOutBounce(e,r-t,0,i,r)+n},easeOutBounce:function(e,t,n,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+n:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+n:i*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,i,r){return r/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,i,r)+n:.5*jQuery.easing.easeOutBounce(e,2*t-r,0,i,r)+.5*i+n}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,a=l.call(arguments,1),c=0,d=0,h=0,p=0,f=0,m=0;if(t=e.event.fix(s),t.type="mousewheel","detail"in s&&(h=-1*s.detail),"wheelDelta"in s&&(h=s.wheelDelta),"wheelDeltaY"in s&&(h=s.wheelDeltaY),"wheelDeltaX"in s&&(d=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(d=-1*h,h=0),c=0===h?d:h,"deltaY"in s&&(h=-1*s.deltaY,c=h),"deltaX"in s&&(d=s.deltaX,0===h&&(c=-1*d)),0!==h||0!==d){if(1===s.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,h*=g,d*=g}else if(2===s.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,h*=v,d*=v}if(p=Math.max(Math.abs(h),Math.abs(d)),(!o||o>p)&&(o=p,i(s,p)&&(o/=40)),i(s,p)&&(c/=40,d/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/o),d=Math[d>=1?"floor":"ceil"](d/o),h=Math[h>=1?"floor":"ceil"](h/o),u.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();f=t.clientX-b.left,m=t.clientY-b.top}return t.deltaX=d,t.deltaY=h,t.deltaFactor=o,t.offsetX=f,t.offsetY=m,t.deltaMode=0,a.unshift(t,c,d,h),r&&clearTimeout(r),r=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){o=null}function i(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var r,o,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=s.length;c;)e.event.fixHooks[s[--c]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(){!function(e){var t=this||(0,eval)("this"),n=t.document,i=t.navigator,r=t.jQuery,o=t.JSON;!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(module.exports||exports,require):"function"==typeof define&&define.amd?define(["exports","require"],e):e(t.ko={})}(function(s,a){function l(e,t){return null===e||typeof e in p?e===t:!1}function c(t,n){var i;return function(){i||(i=setTimeout(function(){i=e,t()},n))}}function u(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function d(e,t,n,i){h.d[e]={init:function(e,r,o,s,a){var l,c;return h.s(function(){var o=h.a.c(r()),s=!n!=!o,u=!c;(u||t||s!==l)&&(u&&h.Y.la()&&(c=h.a.ia(h.f.childNodes(e),!0)),s?(u||h.f.T(e,h.a.ia(c)),h.Ca(i?i(a,o):a,e)):h.f.ja(e),l=s)},null,{o:e}),{controlsDescendantBindings:!0}}},h.h.ha[e]=!1,h.f.Q[e]=!0}var h="undefined"!=typeof s?s:{};h.b=function(e,t){for(var n=e.split("."),i=h,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=t},h.A=function(e,t,n){e[t]=n},h.version="3.2.0",h.b("version",h.version),h.a=function(){function s(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function a(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function l(e,t){return e.__proto__=t,e}var c={__proto__:[]}instanceof Array,u={},d={};u[i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],u.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),s(u,function(e,t){if(t.length)for(var n=0,i=t.length;i>n;n++)d[t[n]]=e});var p={propertychange:!0},f=n&&function(){for(var t=3,i=n.createElement("div"),r=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0];);return t>4?t:e}();return{vb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],u:function(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)},m:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},qb:function(e,t,n){for(var i=0,r=e.length;r>i;i++)if(t.call(n,e[i],i))return e[i];return null},ua:function(e,t){var n=h.a.m(e,t);n>0?e.splice(n,1):0===n&&e.shift()},rb:function(e){e=e||[];for(var t=[],n=0,i=e.length;i>n;n++)0>h.a.m(t,e[n])&&t.push(e[n]);return t},Da:function(e,t){e=e||[];for(var n=[],i=0,r=e.length;r>i;i++)n.push(t(e[i],i));return n},ta:function(e,t){e=e||[];for(var n=[],i=0,r=e.length;r>i;i++)t(e[i],i)&&n.push(e[i]);return n},ga:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,i=t.length;i>n;n++)e.push(t[n]);return e},ea:function(e,t,n){var i=h.a.m(h.a.Xa(e),t);0>i?n&&e.push(t):n||e.splice(i,1)},xa:c,extend:a,za:l,Aa:c?l:a,G:s,na:function(e,t){if(!e)return e;var n={},i;for(i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i],i,e));return n},Ka:function(e){for(;e.firstChild;)h.removeNode(e.firstChild)},oc:function(e){e=h.a.S(e);for(var t=n.createElement("div"),i=0,r=e.length;r>i;i++)t.appendChild(h.R(e[i]));return t},ia:function(e,t){for(var n=0,i=e.length,r=[];i>n;n++){var o=e[n].cloneNode(!0);r.push(t?h.R(o):o)}return r},T:function(e,t){if(h.a.Ka(e),t)for(var n=0,i=t.length;i>n;n++)e.appendChild(t[n])},Lb:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var i=n[0],r=i.parentNode,o=0,s=t.length;s>o;o++)r.insertBefore(t[o],i);for(o=0,s=n.length;s>o;o++)h.removeNode(n[o])}},ka:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.shift();if(1<e.length){var n=e[0],i=e[e.length-1];for(e.length=0;n!==i;)if(e.push(n),n=n.nextSibling,!n)return;e.push(i)}}return e},Nb:function(e,t){7>f?e.setAttribute("selected",t):e.selected=t},cb:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},vc:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},cc:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Ja:function(e){return h.a.cc(e,e.ownerDocument.documentElement)},ob:function(e){return!!h.a.qb(e,h.a.Ja)},t:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},n:function(e,t,n){var i=f&&p[t];if(!i&&r)r(e).bind(t,n);else if(i||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var o=function(t){n.call(e,t)},s="on"+t;e.attachEvent(s,o),h.a.w.da(e,function(){e.detachEvent(s,o)})}else e.addEventListener(t,n,!1)},oa:function(e,i){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var o;if("input"===h.a.t(e)&&e.type&&"click"==i.toLowerCase()?(o=e.type,o="checkbox"==o||"radio"==o):o=!1,r&&!o)r(e).trigger(i);else if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");o=n.createEvent(d[i]||"HTMLEvents"),o.initEvent(i,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(o)}else if(o&&e.click)e.click();else{
if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+i)}},c:function(e){return h.C(e)?e():e},Xa:function(e){return h.C(e)?e.v():e},Ba:function(e,t,n){if(t){var i=/\S+/g,r=e.className.match(i)||[];h.a.u(t.match(i),function(e){h.a.ea(r,e,n)}),e.className=r.join(" ")}},bb:function(t,n){var i=h.a.c(n);(null===i||i===e)&&(i="");var r=h.f.firstChild(t);!r||3!=r.nodeType||h.f.nextSibling(r)?h.f.T(t,[t.ownerDocument.createTextNode(i)]):r.data=i,h.a.fc(t)},Mb:function(e,t){if(e.name=t,7>=f)try{e.mergeAttributes(n.createElement("<input name='"+e.name+"'/>"),!1)}catch(i){}},fc:function(e){f>=9&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},dc:function(e){if(f){var t=e.style.width;e.style.width=0,e.style.width=t}},sc:function(e,t){e=h.a.c(e),t=h.a.c(t);for(var n=[],i=e;t>=i;i++)n.push(i);return n},S:function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(e[n]);return t},yc:6===f,zc:7===f,L:f,xb:function(e,t){for(var n=h.a.S(e.getElementsByTagName("input")).concat(h.a.S(e.getElementsByTagName("textarea"))),i="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},r=[],o=n.length-1;o>=0;o--)i(n[o])&&r.push(n[o]);return r},pc:function(e){return"string"==typeof e&&(e=h.a.cb(e))?o&&o.parse?o.parse(e):new Function("return "+e)():null},eb:function(e,t,n){if(!o||!o.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return o.stringify(h.a.c(e),t,n)},qc:function(e,t,i){i=i||{};var r=i.params||{},o=i.includeFields||this.vb,a=e;if("object"==typeof e&&"form"===h.a.t(e))for(var a=e.action,l=o.length-1;l>=0;l--)for(var c=h.a.xb(e,o[l]),u=c.length-1;u>=0;u--)r[c[u].name]=c[u].value;t=h.a.c(t);var d=n.createElement("form");d.style.display="none",d.action=a,d.method="post";for(var p in t)e=n.createElement("input"),e.type="hidden",e.name=p,e.value=h.a.eb(h.a.c(t[p])),d.appendChild(e);s(r,function(e,t){var i=n.createElement("input");i.type="hidden",i.name=e,i.value=t,d.appendChild(i)}),n.body.appendChild(d),i.submitter?i.submitter(d):d.submit(),setTimeout(function(){d.parentNode.removeChild(d)},0)}}}(),h.b("utils",h.a),h.b("utils.arrayForEach",h.a.u),h.b("utils.arrayFirst",h.a.qb),h.b("utils.arrayFilter",h.a.ta),h.b("utils.arrayGetDistinctValues",h.a.rb),h.b("utils.arrayIndexOf",h.a.m),h.b("utils.arrayMap",h.a.Da),h.b("utils.arrayPushAll",h.a.ga),h.b("utils.arrayRemoveItem",h.a.ua),h.b("utils.extend",h.a.extend),h.b("utils.fieldsIncludedWithJsonPost",h.a.vb),h.b("utils.getFormFields",h.a.xb),h.b("utils.peekObservable",h.a.Xa),h.b("utils.postJson",h.a.qc),h.b("utils.parseJson",h.a.pc),h.b("utils.registerEventHandler",h.a.n),h.b("utils.stringifyJson",h.a.eb),h.b("utils.range",h.a.sc),h.b("utils.toggleDomNodeCssClass",h.a.Ba),h.b("utils.triggerEvent",h.a.oa),h.b("utils.unwrapObservable",h.a.c),h.b("utils.objectForEach",h.a.G),h.b("utils.addOrRemoveItem",h.a.ea),h.b("unwrap",h.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments);return e=n.shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),h.a.e=new function(){function t(t,o){var s=t[i];if(!s||"null"===s||!r[s]){if(!o)return e;s=t[i]="ko"+n++,r[s]={}}return r[s]}var n=0,i="__ko__"+(new Date).getTime(),r={};return{get:function(n,i){var r=t(n,!1);return r===e?e:r[i]},set:function(n,i,r){(r!==e||t(n,!1)!==e)&&(t(n,!0)[i]=r)},clear:function(e){var t=e[i];return t?(delete r[t],e[i]=null,!0):!1},F:function(){return n++ +i}}},h.b("utils.domData",h.a.e),h.b("utils.domData.clear",h.a.e.clear),h.a.w=new function(){function t(t,n){var r=h.a.e.get(t,i);return r===e&&n&&(r=[],h.a.e.set(t,i,r)),r}function n(e){var i=t(e,!1);if(i)for(var i=i.slice(0),r=0;r<i.length;r++)i[r](e);if(h.a.e.clear(e),h.a.w.cleanExternalData(e),s[e.nodeType])for(i=e.firstChild;e=i;)i=e.nextSibling,8===e.nodeType&&n(e)}var i=h.a.e.F(),o={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{da:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},Kb:function(n,r){var o=t(n,!1);o&&(h.a.ua(o,r),0==o.length&&h.a.e.set(n,i,e))},R:function(e){if(o[e.nodeType]&&(n(e),s[e.nodeType])){var t=[];h.a.ga(t,e.getElementsByTagName("*"));for(var i=0,r=t.length;r>i;i++)n(t[i])}return e},removeNode:function(e){h.R(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){r&&"function"==typeof r.cleanData&&r.cleanData([e])}}},h.R=h.a.w.R,h.removeNode=h.a.w.removeNode,h.b("cleanNode",h.R),h.b("removeNode",h.removeNode),h.b("utils.domNodeDisposal",h.a.w),h.b("utils.domNodeDisposal.addDisposeCallback",h.a.w.da),h.b("utils.domNodeDisposal.removeDisposeCallback",h.a.w.Kb),function(){h.a.ba=function(e){var i;if(r){if(r.parseHTML)i=r.parseHTML(e)||[];else if((i=r.clean([e]))&&i[0]){for(e=i[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var o=h.a.cb(e).toLowerCase();for(i=n.createElement("div"),o=o.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!o.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!o.indexOf("<td")||!o.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],e="ignored<div>"+o[1]+e+o[2]+"</div>","function"==typeof t.innerShiv?i.appendChild(t.innerShiv(e)):i.innerHTML=e;o[0]--;)i=i.lastChild;i=h.a.S(i.lastChild.childNodes)}return i},h.a.$a=function(t,n){if(h.a.Ka(t),n=h.a.c(n),null!==n&&n!==e)if("string"!=typeof n&&(n=n.toString()),r)r(t).html(n);else for(var i=h.a.ba(n),o=0;o<i.length;o++)t.appendChild(i[o])}}(),h.b("utils.parseHtmlFragment",h.a.ba),h.b("utils.setHtml",h.a.$a),h.D=function(){function t(e,n){if(e)if(8==e.nodeType){var i=h.D.Gb(e.nodeValue);null!=i&&n.push({bc:e,mc:i})}else if(1==e.nodeType)for(var i=0,r=e.childNodes,o=r.length;o>i;i++)t(r[i],n)}var n={};return{Ua:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[t]=e,"<!--[ko_memo:"+t+"]-->"},Rb:function(t,i){var r=n[t];if(r===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return r.apply(null,i||[]),!0}finally{delete n[t]}},Sb:function(e,n){var i=[];t(e,i);for(var r=0,o=i.length;o>r;r++){var s=i[r].bc,a=[s];n&&h.a.ga(a,n),h.D.Rb(i[r].mc,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},Gb:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),h.b("memoization",h.D),h.b("memoization.memoize",h.D.Ua),h.b("memoization.unmemoize",h.D.Rb),h.b("memoization.parseMemoText",h.D.Gb),h.b("memoization.unmemoizeDomNodeAndDescendants",h.D.Sb),h.La={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return h.j({read:e,write:function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)}})},rateLimit:function(e,t){var n,i,r;"number"==typeof t?n=t:(n=t.timeout,i=t.method),r="notifyWhenChangesStop"==i?u:c,e.Ta(function(e){return r(e,n)})},notify:function(e,t){e.equalityComparer="always"==t?null:l}};var p={undefined:1,"boolean":1,number:1,string:1};h.b("extenders",h.La),h.Pb=function(e,t,n){this.target=e,this.wa=t,this.ac=n,this.Cb=!1,h.A(this,"dispose",this.K)},h.Pb.prototype.K=function(){this.Cb=!0,this.ac()},h.P=function(){h.a.Aa(this,h.P.fn),this.M={}};var f="change",m={U:function(e,t,n){var i=this;n=n||f;var r=new h.Pb(i,t?e.bind(t):e,function(){h.a.ua(i.M[n],r),i.nb&&i.nb()});return i.va&&i.va(n),i.M[n]||(i.M[n]=[]),i.M[n].push(r),r},notifySubscribers:function(e,t){if(t=t||f,this.Ab(t))try{h.k.Ea();for(var n=this.M[t].slice(0),i=0,r;r=n[i];++i)r.Cb||r.wa(e)}finally{h.k.end()}},Ta:function(e){var t=this,n=h.C(t),i,r,o;t.qa||(t.qa=t.notifySubscribers,t.notifySubscribers=function(e,n){n&&n!==f?"beforeChange"===n?t.kb(e):t.qa(e,n):t.lb(e)});var s=e(function(){n&&o===t&&(o=t()),i=!1,t.Pa(r,o)&&t.qa(r=o)});t.lb=function(e){i=!0,o=e,s()},t.kb=function(e){i||(r=e,t.qa(e,"beforeChange"))}},Ab:function(e){return this.M[e]&&this.M[e].length},yb:function(){var e=0;return h.a.G(this.M,function(t,n){e+=n.length}),e},Pa:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&h.a.G(e,function(e,n){var i=h.La[e];"function"==typeof i&&(t=i(t,n)||t)}),t}};h.A(m,"subscribe",m.U),h.A(m,"extend",m.extend),h.A(m,"getSubscriptionsCount",m.yb),h.a.xa&&h.a.za(m,Function.prototype),h.P.fn=m,h.Db=function(e){return null!=e&&"function"==typeof e.U&&"function"==typeof e.notifySubscribers},h.b("subscribable",h.P),h.b("isSubscribable",h.Db),h.Y=h.k=function(){function e(e){n.push(i),i=e}function t(){i=n.pop()}var n=[],i,r=0;return{Ea:e,end:t,Jb:function(e){if(i){if(!h.Db(e))throw Error("Only subscribable things can act as dependencies");i.wa(e,e.Vb||(e.Vb=++r))}},B:function(n,i,r){try{return e(),n.apply(i,r||[])}finally{t()}},la:function(){return i?i.s.la():void 0},ma:function(){return i?i.ma:void 0}}}(),h.b("computedContext",h.Y),h.b("computedContext.getDependenciesCount",h.Y.la),h.b("computedContext.isInitial",h.Y.ma),h.b("computedContext.isSleeping",h.Y.Ac),h.p=function(e){function t(){return 0<arguments.length?(t.Pa(n,arguments[0])&&(t.X(),n=arguments[0],t.W()),this):(h.k.Jb(t),n)}var n=e;return h.P.call(t),h.a.Aa(t,h.p.fn),t.v=function(){return n},t.W=function(){t.notifySubscribers(n)},t.X=function(){t.notifySubscribers(n,"beforeChange")},h.A(t,"peek",t.v),h.A(t,"valueHasMutated",t.W),h.A(t,"valueWillMutate",t.X),t},h.p.fn={equalityComparer:l};var g=h.p.rc="__ko_proto__";h.p.fn[g]=h.p,h.a.xa&&h.a.za(h.p.fn,h.P.fn),h.Ma=function(t,n){return null===t||t===e||t[g]===e?!1:t[g]===n?!0:h.Ma(t[g],n)},h.C=function(e){return h.Ma(e,h.p)},h.Ra=function(e){return"function"==typeof e&&e[g]===h.p||"function"==typeof e&&e[g]===h.j&&e.hc?!0:!1},h.b("observable",h.p),h.b("isObservable",h.C),h.b("isWriteableObservable",h.Ra),h.b("isWritableObservable",h.Ra),h.aa=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=h.p(e),h.a.Aa(e,h.aa.fn),e.extend({trackArrayChanges:!0})},h.aa.fn={remove:function(e){for(var t=this.v(),n=[],i="function"!=typeof e||h.C(e)?function(t){return t===e}:e,r=0;r<t.length;r++){var o=t[r];i(o)&&(0===n.length&&this.X(),n.push(o),t.splice(r,1),r--)}return n.length&&this.W(),n},removeAll:function(t){if(t===e){var n=this.v(),i=n.slice(0);return this.X(),n.splice(0,n.length),this.W(),i}return t?this.remove(function(e){return 0<=h.a.m(t,e)}):[]},destroy:function(e){var t=this.v(),n="function"!=typeof e||h.C(e)?function(t){return t===e}:e;this.X();for(var i=t.length-1;i>=0;i--)n(t[i])&&(t[i]._destroy=!0);this.W()},destroyAll:function(t){return t===e?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=h.a.m(t,e)}):[]},indexOf:function(e){var t=this();return h.a.m(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.X(),this.v()[n]=t,this.W())}},h.a.u("pop push reverse shift sort splice unshift".split(" "),function(e){h.aa.fn[e]=function(){var t=this.v();return this.X(),this.sb(t,e,arguments),t=t[e].apply(t,arguments),this.W(),t}}),h.a.u(["slice"],function(e){h.aa.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),h.a.xa&&h.a.za(h.aa.fn,h.p.fn),h.b("observableArray",h.aa);var v="arrayChange";h.La.trackArrayChanges=function(e){function t(){if(!n){n=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==f||++r,t.apply(this,arguments)};var o=[].concat(e.v()||[]);i=null,e.U(function(t){if(t=[].concat(t||[]),e.Ab(v)){var n;(!i||r>1)&&(i=h.a.Fa(o,t,{sparse:!0})),n=i,n.length&&e.notifySubscribers(n,v)}o=t,i=null,r=0})}}if(!e.sb){var n=!1,i=null,r=0,o=e.U;e.U=e.subscribe=function(e,n,i){return i===v&&t(),o.apply(this,arguments)},e.sb=function(e,t,o){function s(e,t,n){return a[a.length]={status:e,value:t,index:n}}if(n&&!r){var a=[],l=e.length,c=o.length,u=0;switch(t){case"push":u=l;case"unshift":for(t=0;c>t;t++)s("added",o[t],u+t);break;case"pop":u=l-1;case"shift":l&&s("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>o[0]?l+o[0]:o[0]),l);for(var l=1===c?l:Math.min(t+(o[1]||0),l),c=t+c-2,u=Math.max(l,c),d=[],p=[],f=2;u>t;++t,++f)l>t&&p.push(s("deleted",e[t],t)),c>t&&d.push(s("added",o[f],t));h.a.wb(p,d);break;default:return}i=a}}}},h.s=h.j=function(t,n,i){function r(){h.a.G(T,function(e,t){t.K()}),T={}}function o(){r(),S=0,g=!0,p=!1}function s(){var e=l.throttleEvaluation;e&&e>=0?(clearTimeout(N),N=setTimeout(a,e)):l.ib?l.ib():a()}function a(t){if(f){if(b)throw Error("A 'pure' computed must not be called recursively")}else if(!g){if(_&&_()){if(!m)return void C()}else m=!1;if(f=!0,y)try{var i={};h.k.Ea({wa:function(e,t){i[t]||(i[t]=1,++S)},s:l,ma:e}),S=0,d=v.call(n)}finally{h.k.end(),f=!1}else try{var r=T,o=S;h.k.Ea({wa:function(e,t){g||(o&&r[t]?(T[t]=r[t],++S,delete r[t],--o):T[t]||(T[t]=e.U(s),++S))},s:l,ma:b?e:!S}),T={},S=0;try{var a=n?v.call(n):v()}finally{h.k.end(),o&&h.a.G(r,function(e,t){t.K()}),p=!1}l.Pa(d,a)&&(l.notifySubscribers(d,"beforeChange"),d=a,!0!==t&&l.notifySubscribers(d))}finally{f=!1}S||C()}}function l(){if(0<arguments.length){if("function"!=typeof w)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return w.apply(n,arguments),this}return h.k.Jb(l),p&&a(!0),d}function c(){return p&&!S&&a(!0),d}function u(){return p||S>0}var d,p=!0,f=!1,m=!1,g=!1,v=t,b=!1,y=!1;if(v&&"object"==typeof v?(i=v,v=i.read):(i=i||{},v||(v=i.read)),"function"!=typeof v)throw Error("Pass a function that returns the value of the ko.computed");var w=i.write,x=i.disposeWhenNodeIsRemoved||i.o||null,k=i.disposeWhen||i.Ia,_=k,C=o,T={},S=0,N=null;n||(n=i.owner),h.P.call(l),h.a.Aa(l,h.j.fn),l.v=c,l.la=function(){return S},l.hc="function"==typeof i.write,l.K=function(){C()},l.Z=u;var D=l.Ta;return l.Ta=function(e){D.call(l,e),l.ib=function(){l.kb(d),p=!0,l.lb(l)}},i.pure?(y=b=!0,l.va=function(){y&&(y=!1,a(!0))},l.nb=function(){l.yb()||(r(),y=p=!0)}):i.deferEvaluation&&(l.va=function(){c(),delete l.va}),h.A(l,"peek",l.v),h.A(l,"dispose",l.K),h.A(l,"isActive",l.Z),h.A(l,"getDependenciesCount",l.la),x&&(m=!0,x.nodeType&&(_=function(){return!h.a.Ja(x)||k&&k()})),y||i.deferEvaluation||a(),x&&u()&&x.nodeType&&(C=function(){h.a.w.Kb(x,C),o()},h.a.w.da(x,C)),l},h.jc=function(e){return h.Ma(e,h.j)},m=h.p.rc,h.j[m]=h.p,h.j.fn={equalityComparer:l},h.j.fn[m]=h.j,h.a.xa&&h.a.za(h.j.fn,h.P.fn),h.b("dependentObservable",h.j),h.b("computed",h.j),h.b("isComputed",h.jc),h.Ib=function(e,t){return"function"==typeof e?h.s(e,t,{pure:!0}):(e=h.a.extend({},e),e.pure=!0,h.s(e,t))},h.b("pureComputed",h.Ib),function(){function t(r,o,s){if(s=s||new i,r=o(r),"object"!=typeof r||null===r||r===e||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var a=r instanceof Array?[]:{};return s.save(r,a),n(r,function(n){var i=o(r[n]);switch(typeof i){case"boolean":case"number":case"string":case"function":a[n]=i;break;case"object":case"undefined":var l=s.get(i);a[n]=l!==e?l:t(i,o,s)}}),a}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function i(){this.keys=[],this.hb=[]}h.Qb=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(e){for(var t=0;h.C(e)&&10>t;t++)e=e();return e})},h.toJSON=function(e,t,n){return e=h.Qb(e),h.a.eb(e,t,n)},i.prototype={save:function(e,t){var n=h.a.m(this.keys,e);n>=0?this.hb[n]=t:(this.keys.push(e),this.hb.push(t))},get:function(t){return t=h.a.m(this.keys,t),t>=0?this.hb[t]:e}}}(),h.b("toJS",h.Qb),h.b("toJSON",h.toJSON),function(){h.i={q:function(t){switch(h.a.t(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?h.a.e.get(t,h.d.options.Va):7>=h.a.L?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?h.i.q(t.options[t.selectedIndex]):e;default:return t.value}},ca:function(t,n,i){switch(h.a.t(t)){case"option":switch(typeof n){case"string":h.a.e.set(t,h.d.options.Va,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n;break;default:h.a.e.set(t,h.d.options.Va,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof n?n:""}break;case"select":(""===n||null===n)&&(n=e);for(var r=-1,o=0,s=t.options.length,a;s>o;++o)if(a=h.i.q(t.options[o]),a==n||""==a&&n===e){r=o;break}(i||r>=0||n===e&&1<t.size)&&(t.selectedIndex=r);break;default:(null===n||n===e)&&(n=""),t.value=n}}}}(),h.b("selectExtensions",h.i),h.b("selectExtensions.readValue",h.i.q),h.b("selectExtensions.writeValue",h.i.ca),h.h=function(){function e(e){e=h.a.cb(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t=[],n=e.match(i),s,a,l=0;if(n){n.push(",");for(var c=0,u;u=n[c];++c){var d=u.charCodeAt(0);if(44===d){if(0>=l){s&&t.push(a?{key:s,value:a.join("")}:{unknown:s}),s=a=l=0;continue}}else if(58===d){if(!a)continue}else if(47===d&&c&&1<u.length)(d=n[c-1].match(r))&&!o[d[0]]&&(e=e.substr(e.indexOf(u)+1),n=e.match(i),n.push(","),c=-1,u="/");else if(40===d||123===d||91===d)++l;else if(41===d||125===d||93===d)--l;else if(!s&&!a){s=34===d||39===d?u.slice(1,-1):u;continue}a?a.push(u):a=[u]}}return t}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),r=/[\])"'A-Za-z0-9_$]+$/,o={"in":1,"return":1,"typeof":1},s={};return{ha:[],V:s,Wa:e,ya:function(i,r){function o(e,i){var r;if(!u){var d=h.getBindingHandler(e);if(d&&d.preprocess&&!(i=d.preprocess(i,e,o)))return;(d=s[e])&&(r=i,0<=h.a.m(t,r)?r=!1:(d=r.match(n),r=null===d?!1:d[1]?"Object("+d[1]+")"+d[2]:r),d=r),d&&l.push("'"+e+"':function(_z){"+r+"=_z}")}c&&(i="function(){return "+i+" }"),a.push("'"+e+"':"+i)}r=r||{};var a=[],l=[],c=r.valueAccessors,u=r.bindingParams,d="string"==typeof i?e(i):i;return h.a.u(d,function(e){o(e.key||e.unknown,e.value)}),l.length&&o("_ko_property_writers","{"+l.join(",")+" }"),a.join(",")},lc:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},pa:function(e,t,n,i,r){e&&h.C(e)?!h.Ra(e)||r&&e.v()===i||e(i):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](i)}}}(),h.b("expressionRewriting",h.h),h.b("expressionRewriting.bindingRewriteValidators",h.h.ha),h.b("expressionRewriting.parseObjectLiteral",h.h.Wa),h.b("expressionRewriting.preProcessBindings",h.h.ya),h.b("expressionRewriting._twoWayBindings",h.h.V),h.b("jsonExpressionRewriting",h.h),h.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",h.h.ya),function(){function e(e){return 8==e.nodeType&&s.test(o?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&a.test(o?e.text:e.nodeValue)}function i(n,i){for(var r=n,o=1,s=[];r=r.nextSibling;){if(t(r)&&(o--,0===o))return s;s.push(r),e(r)&&o++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var o=n&&"<!--test-->"===n.createComment("test").text,s=o?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,a=o?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};h.f={Q:{},childNodes:function(t){return e(t)?i(t):t.childNodes},ja:function(t){if(e(t)){t=h.f.childNodes(t);for(var n=0,i=t.length;i>n;n++)h.removeNode(t[n])}else h.a.Ka(t)},T:function(t,n){if(e(t)){h.f.ja(t);for(var i=t.nextSibling,r=0,o=n.length;o>r;r++)i.parentNode.insertBefore(n[r],i)}else h.a.T(t,n)},Hb:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},Bb:function(t,n,i){i?e(t)?t.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?t.insertBefore(n,i.nextSibling):t.appendChild(n):h.f.Hb(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=r(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},gc:e,xc:function(e){return(e=(o?e.text:e.nodeValue).match(s))?e[1]:null},Fb:function(n){if(l[h.a.t(n)]){var i=n.firstChild;if(i)do if(1===i.nodeType){var o;o=i.firstChild;var s=null;if(o)do if(s)s.push(o);else if(e(o)){var a=r(o,!0);a?o=a:s=[o]}else t(o)&&(s=[o]);while(o=o.nextSibling);if(o=s)for(s=i.nextSibling,a=0;a<o.length;a++)s?n.insertBefore(o[a],s):n.appendChild(o[a])}while(i=i.nextSibling)}}}}(),h.b("virtualElements",h.f),h.b("virtualElements.allowedBindings",h.f.Q),h.b("virtualElements.emptyNode",h.f.ja),h.b("virtualElements.insertAfter",h.f.Bb),h.b("virtualElements.prepend",h.f.Hb),h.b("virtualElements.setDomNodeChildren",h.f.T),function(){h.J=function(){this.Yb={}},h.a.extend(h.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||h.g.getComponentNameForNode(e);case 8:return h.f.gc(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),n=n?this.parseBindingsString(n,t,e):null;return h.g.mb(n,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),n=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return h.g.mb(n,e,t,!0)},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return h.f.xc(e);default:return null}},parseBindingsString:function(e,t,n,i){try{var r=this.Yb,o=e+(i&&i.valueAccessors||""),s;if(!(s=r[o])){var a,l="with($context){with($data||{}){return{"+h.h.ya(e,i)+"}}}";a=new Function("$context","$element",l),s=r[o]=a}return s(t,n)}catch(c){throw c.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+c.message,c}}}),h.J.instance=new h.J}(),h.b("bindingProvider",h.J),function(){function n(e){return function(){return e}}function i(e){return e()}function o(e){return h.a.na(h.k.B(e),function(t,n){return function(){return e()[n]}})}function s(e,t){return o(this.getBindings.bind(this,e,t))}function a(e,t,n){var i,r=h.f.firstChild(t),o=h.J.instance,s=o.preprocessNode;if(s){for(;i=r;)r=h.f.nextSibling(i),s.call(o,i);r=h.f.firstChild(t)}for(;i=r;)r=h.f.nextSibling(i),l(e,i,n)}function l(e,t,n){var i=!0,r=1===t.nodeType;r&&h.f.Fb(t),(r&&n||h.J.instance.nodeHasBindings(t))&&(i=u(t,null,e,n).shouldBindDescendants),i&&!p[h.a.t(t)]&&a(e,t,!r)}function c(e){var t=[],n={},i=[];return h.a.G(e,function r(o){if(!n[o]){var s=h.getBindingHandler(o);s&&(s.after&&(i.push(o),h.a.u(s.after,function(t){if(e[t]){if(-1!==h.a.m(i,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));r(t)}}),i.length--),t.push({key:o,zb:s})),n[o]=!0}}),t}function u(t,n,r,o){var a=h.a.e.get(t,f);if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");h.a.e.set(t,f,!0)}!a&&o&&h.Ob(t,r);var l;if(n&&"function"!=typeof n)l=n;else{var u=h.J.instance,d=u.getBindingAccessors||s,p=h.j(function(){return(l=n?n(r,t):d.call(u,t,r))&&r.I&&r.I(),l},null,{o:t});l&&p.Z()||(p=null)}var m;if(l){var g=p?function(e){return function(){return i(p()[e])}}:function(e){return l[e]},v=function(){return h.a.na(p?p():l,i)};v.get=function(e){return l[e]&&i(g(e))},v.has=function(e){return e in l},o=c(l),h.a.u(o,function(n){var i=n.zb.init,o=n.zb.update,s=n.key;if(8===t.nodeType&&!h.f.Q[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof i&&h.k.B(function(){var n=i(t,g(s),v,r.$data,r);if(n&&n.controlsDescendantBindings){if(m!==e)throw Error("Multiple bindings ("+m+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");m=s}}),"function"==typeof o&&h.j(function(){o(t,g(s),v,r.$data,r)},null,{o:t})}catch(a){throw a.message='Unable to process binding "'+s+": "+l[s]+'"\nMessage: '+a.message,a}})}return{shouldBindDescendants:m===e}}function d(e){return e&&e instanceof h.N?e:new h.N(e)}h.d={};var p={script:!0};h.getBindingHandler=function(e){return h.d[e]},h.N=function(t,n,i,r){var o=this,s="function"==typeof t&&!h.C(t),a,l=h.j(function(){var e=s?t():t,a=h.a.c(e);return n?(n.I&&n.I(),h.a.extend(o,n),l&&(o.I=l)):(o.$parents=[],o.$root=a,o.ko=h),o.$rawData=e,o.$data=a,i&&(o[i]=a),r&&r(o,n,a),o.$data},null,{Ia:function(){return a&&!h.a.ob(a)},o:!0});l.Z()&&(o.I=l,l.equalityComparer=null,a=[],l.Tb=function(t){a.push(t),h.a.w.da(t,function(t){h.a.ua(a,t),a.length||(l.K(),o.I=l=e)})})},h.N.prototype.createChildContext=function(e,t,n){return new h.N(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},h.N.prototype.extend=function(e){return new h.N(this.I||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,h.a.extend(t,"function"==typeof e?e():e)})};var f=h.a.e.F(),m=h.a.e.F();h.Ob=function(e,t){return 2!=arguments.length?h.a.e.get(e,m):(h.a.e.set(e,m,t),void(t.I&&t.I.Tb(e)))},h.ra=function(e,t,n){return 1===e.nodeType&&h.f.Fb(e),u(e,t,d(n),!0)},h.Wb=function(e,t,i){return i=d(i),h.ra(e,"function"==typeof t?o(t.bind(null,i,e)):h.a.na(t,n),i)},h.Ca=function(e,t){1!==t.nodeType&&8!==t.nodeType||a(d(e),t,!0)},h.pb=function(e,n){if(!r&&t.jQuery&&(r=t.jQuery),n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||t.document.body,l(d(e),n,!0)},h.Ha=function(t){switch(t.nodeType){case 1:case 8:var n=h.Ob(t);if(n)return n;if(t.parentNode)return h.Ha(t.parentNode)}return e},h.$b=function(t){return(t=h.Ha(t))?t.$data:e},h.b("bindingHandlers",h.d),h.b("applyBindings",h.pb),h.b("applyBindingsToDescendants",h.Ca),h.b("applyBindingAccessorsToNode",h.ra),h.b("applyBindingsToNode",h.Wb),h.b("contextFor",h.Ha),h.b("dataFor",h.$b)}(),function(e){function t(t,i){var s=r.hasOwnProperty(t)?r[t]:e,a;s||(s=r[t]=new h.P,n(t,function(e){o[t]=e,delete r[t],a?s.notifySubscribers(e):setTimeout(function(){s.notifySubscribers(e)},0)}),a=!0),s.U(i)}function n(e,t){i("getConfig",[e],function(n){n?i("loadComponent",[e,n],function(e){t(e)}):t(null)})}function i(t,n,r,o){o||(o=h.g.loaders.slice(0));var s=o.shift();if(s){var a=s[t];if(a){var l=!1;if(a.apply(s,n.concat(function(e){l?r(null):null!==e?r(e):i(t,n,r,o)}))!==e&&(l=!0,!s.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(t,n,r,o)}else r(null)}var r={},o={};h.g={get:function(n,i){var r=o.hasOwnProperty(n)?o[n]:e;r?setTimeout(function(){i(r)},0):t(n,i)},tb:function(e){delete o[e]},jb:i},h.g.loaders=[],h.b("components",h.g),h.b("components.get",h.g.get),h.b("components.clearCachedDefinition",h.g.tb)}(),function(){function e(e,t,n,i){function r(){0===--a&&i(o)}var o={},a=2,l=n.template;n=n.viewModel,l?s(t,l,function(t){h.g.jb("loadTemplate",[e,t],function(e){o.template=e,r()})}):r(),n?s(t,n,function(t){h.g.jb("loadViewModel",[e,t],function(e){o[u]=e,r()})}):r()}function i(e,t,n){if("function"==typeof t)n(function(e){return new t(e)});else if("function"==typeof t[u])n(t[u]);else if("instance"in t){var r=t.instance;n(function(){return r})}else"viewModel"in t?i(e,t.viewModel,n):e("Unknown viewModel value: "+t)}function r(e){switch(h.a.t(e)){case"script":return h.a.ba(e.text);case"textarea":return h.a.ba(e.value);case"template":if(o(e.content))return h.a.ia(e.content.childNodes)}return h.a.ia(e.childNodes)}function o(e){return t.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function s(e,n,i){"string"==typeof n.require?a||t.require?(a||t.require)([n.require],i):e("Uses require, but no AMD loader is present"):i(n)}function l(e){return function(t){throw Error("Component '"+e+"': "+t)}}var c={};h.g.tc=function(e,t){if(!t)throw Error("Invalid configuration for "+e);if(h.g.Qa(e))throw Error("Component "+e+" is already registered");c[e]=t},h.g.Qa=function(e){return e in c},h.g.wc=function(e){delete c[e],h.g.tb(e)},h.g.ub={getConfig:function(e,t){t(c.hasOwnProperty(e)?c[e]:null)},loadComponent:function(t,n,i){var r=l(t);s(r,n,function(n){e(t,r,n,i)})},loadTemplate:function(e,i,s){if(e=l(e),"string"==typeof i)s(h.a.ba(i));else if(i instanceof Array)s(i);else if(o(i))s(h.a.S(i.childNodes));else if(i.element)if(i=i.element,t.HTMLElement?i instanceof HTMLElement:i&&i.tagName&&1===i.nodeType)s(r(i));else if("string"==typeof i){var a=n.getElementById(i);a?s(r(a)):e("Cannot find element with ID "+i)}else e("Unknown element type: "+i);else e("Unknown template value: "+i)},loadViewModel:function(e,t,n){i(l(e),t,n)}};var u="createViewModel";h.b("components.register",h.g.tc),h.b("components.isRegistered",h.g.Qa),h.b("components.unregister",h.g.wc),h.b("components.defaultLoader",h.g.ub),h.g.loaders.push(h.g.ub),h.g.Ub=c}(),function(){function e(e,n){var i=e.getAttribute("params");if(i){var i=t.parseBindingsString(i,n,e,{valueAccessors:!0,bindingParams:!0}),i=h.a.na(i,function(t){return h.s(t,null,{o:e})}),r=h.a.na(i,function(t){return t.Z()?h.s(function(){return h.a.c(t())},null,{o:e}):t.v()});return r.hasOwnProperty("$raw")||(r.$raw=i),r}return{$raw:{}}}h.g.getComponentNameForNode=function(e){return e=h.a.t(e),h.g.Qa(e)&&e},h.g.mb=function(t,n,i,r){if(1===n.nodeType){var o=h.g.getComponentNameForNode(n);if(o){if(t=t||{},t.component)throw Error('Cannot use the "component" binding on a custom element matching a component');var s={name:o,params:e(n,i)};t.component=r?function(){return s}:s}}return t};var t=new h.J;9>h.a.L&&(h.g.register=function(e){return function(t){return n.createElement(t),e.apply(this,arguments)}}(h.g.register),n.createDocumentFragment=function(e){return function(){var t=e(),n=h.g.Ub,i;for(i in n)n.hasOwnProperty(i)&&t.createElement(i);return t}}(n.createDocumentFragment))}(),function(){var e=0;h.d.component={init:function(t,n,i,r,o){function s(){var e=a&&a.dispose;"function"==typeof e&&e.call(a),l=null}var a,l;return h.a.w.da(t,s),h.s(function(){var i=h.a.c(n()),r,c;if("string"==typeof i?r=i:(r=h.a.c(i.name),c=h.a.c(i.params)),!r)throw Error("No component name specified");var u=l=++e;h.g.get(r,function(e){if(l===u){if(s(),!e)throw Error("Unknown component '"+r+"'");var n=e.template;if(!n)throw Error("Component '"+r+"' has no template");n=h.a.ia(n),h.f.T(t,n);var n=c,i=e.createViewModel;e=i?i.call(e,n,{element:t}):n,n=o.createChildContext(e),a=e,h.Ca(n,t)}})},null,{o:t}),{controlsDescendantBindings:!0}}},h.f.Q.component=!0}();var b={"class":"className","for":"htmlFor"};h.d.attr={update:function(t,n){var i=h.a.c(n())||{};h.a.G(i,function(n,i){i=h.a.c(i);var r=!1===i||null===i||i===e;r&&t.removeAttribute(n),8>=h.a.L&&n in b?(n=b[n],r?t.removeAttribute(n):t[n]=i):r||t.setAttribute(n,i.toString()),"name"===n&&h.a.Mb(t,r?"":i.toString())})}},function(){h.d.checked={after:["value","attr"],init:function(t,n,i){function r(){var e=t.checked,r=d?s():e;if(!h.Y.ma()&&(!l||e)){var o=h.k.B(n);c?u!==r?(e&&(h.a.ea(o,r,!0),h.a.ea(o,u,!1)),u=r):h.a.ea(o,r,e):h.h.pa(o,i,"checked",r,!0)}}function o(){var e=h.a.c(n());t.checked=c?0<=h.a.m(e,s()):a?e:s()===e}var s=h.Ib(function(){return i.has("checkedValue")?h.a.c(i.get("checkedValue")):i.has("value")?h.a.c(i.get("value")):t.value}),a="checkbox"==t.type,l="radio"==t.type;if(a||l){var c=a&&h.a.c(n())instanceof Array,u=c?s():e,d=l||c;l&&!t.name&&h.d.uniqueName.init(t,function(){return!0}),h.s(r,null,{o:t}),h.a.n(t,"click",r),h.s(o,null,{o:t})}}},h.h.V.checked=!0,h.d.checkedValue={update:function(e,t){e.value=h.a.c(t())}}}(),h.d.css={update:function(e,t){var n=h.a.c(t());"object"==typeof n?h.a.G(n,function(t,n){n=h.a.c(n),h.a.Ba(e,t,n)}):(n=String(n||""),h.a.Ba(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,h.a.Ba(e,n,!0))}},h.d.enable={update:function(e,t){var n=h.a.c(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0);
}},h.d.disable={update:function(e,t){h.d.enable.update(e,function(){return!h.a.c(t())})}},h.d.event={init:function(e,t,n,i,r){var o=t()||{};h.a.G(o,function(o){"string"==typeof o&&h.a.n(e,o,function(e){var s,a=t()[o];if(a){try{var l=h.a.S(arguments);i=r.$data,l.unshift(i),s=a.apply(i,l)}finally{!0!==s&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(o+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},h.d.foreach={Eb:function(e){return function(){var t=e(),n=h.a.Xa(t);return n&&"number"!=typeof n.length?(h.a.c(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:h.O.Oa}):{foreach:t,templateEngine:h.O.Oa}}},init:function(e,t){return h.d.template.init(e,h.d.foreach.Eb(t))},update:function(e,t,n,i,r){return h.d.template.update(e,h.d.foreach.Eb(t),n,i,r)}},h.h.ha.foreach=!1,h.f.Q.foreach=!0,h.d.hasfocus={init:function(e,t,n){function i(i){e.__ko_hasfocusUpdating=!0;var r=e.ownerDocument;if("activeElement"in r){var o;try{o=r.activeElement}catch(s){o=r.body}i=o===e}r=t(),h.h.pa(r,n,"hasfocus",i,!0),e.__ko_hasfocusLastValue=i,e.__ko_hasfocusUpdating=!1}var r=i.bind(null,!0),o=i.bind(null,!1);h.a.n(e,"focus",r),h.a.n(e,"focusin",r),h.a.n(e,"blur",o),h.a.n(e,"focusout",o)},update:function(e,t){var n=!!h.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),h.k.B(h.a.oa,null,[e,n?"focusin":"focusout"]))}},h.h.V.hasfocus=!0,h.d.hasFocus=h.d.hasfocus,h.h.V.hasFocus=!0,h.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){h.a.$a(e,t())}},d("if"),d("ifnot",!1,!0),d("with",!0,!1,function(e,t){return e.createChildContext(t)});var y={};h.d.options={init:function(e){if("select"!==h.a.t(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,i){function r(){return h.a.ta(t.options,function(e){return e.selected})}function o(e,t,n){var i=typeof t;return"function"==i?t(e):"string"==i?e[t]:n}function s(e,n){if(d.length){var i=0<=h.a.m(d,h.i.q(n[0]));h.a.Nb(n[0],i),p&&!i&&h.k.B(h.a.oa,null,[t,"change"])}}var a=0!=t.length&&t.multiple?t.scrollTop:null,l=h.a.c(n()),c=i.get("optionsIncludeDestroyed");n={};var u,d;d=t.multiple?h.a.Da(r(),h.i.q):0<=t.selectedIndex?[h.i.q(t.options[t.selectedIndex])]:[],l&&("undefined"==typeof l.length&&(l=[l]),u=h.a.ta(l,function(t){return c||t===e||null===t||!h.a.c(t._destroy)}),i.has("optionsCaption")&&(l=h.a.c(i.get("optionsCaption")),null!==l&&l!==e&&u.unshift(y)));var p=!1;n.beforeRemove=function(e){t.removeChild(e)},l=s,i.has("optionsAfterRender")&&(l=function(t,n){s(0,n),h.k.B(i.get("optionsAfterRender"),null,[n[0],t!==y?t:e])}),h.a.Za(t,u,function(n,r,s){return s.length&&(d=s[0].selected?[h.i.q(s[0])]:[],p=!0),r=t.ownerDocument.createElement("option"),n===y?(h.a.bb(r,i.get("optionsCaption")),h.i.ca(r,e)):(s=o(n,i.get("optionsValue"),n),h.i.ca(r,h.a.c(s)),n=o(n,i.get("optionsText"),s),h.a.bb(r,n)),[r]},n,l),h.k.B(function(){i.get("valueAllowUnset")&&i.has("value")?h.i.ca(t,h.a.c(i.get("value")),!0):(t.multiple?d.length&&r().length<d.length:d.length&&0<=t.selectedIndex?h.i.q(t.options[t.selectedIndex])!==d[0]:d.length||0<=t.selectedIndex)&&h.a.oa(t,"change")}),h.a.dc(t),a&&20<Math.abs(a-t.scrollTop)&&(t.scrollTop=a)}},h.d.options.Va=h.a.e.F(),h.d.selectedOptions={after:["options","foreach"],init:function(e,t,n){h.a.n(e,"change",function(){var i=t(),r=[];h.a.u(e.getElementsByTagName("option"),function(e){e.selected&&r.push(h.i.q(e))}),h.h.pa(i,n,"selectedOptions",r)})},update:function(e,t){if("select"!=h.a.t(e))throw Error("values binding applies only to SELECT elements");var n=h.a.c(t());n&&"number"==typeof n.length&&h.a.u(e.getElementsByTagName("option"),function(e){var t=0<=h.a.m(n,h.i.q(e));h.a.Nb(e,t)})}},h.h.V.selectedOptions=!0,h.d.style={update:function(t,n){var i=h.a.c(n()||{});h.a.G(i,function(n,i){i=h.a.c(i),(null===i||i===e||!1===i)&&(i=""),t.style[n]=i})}},h.d.submit={init:function(e,t,n,i,r){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");h.a.n(e,"submit",function(n){var i,o=t();try{i=o.call(r.$data,e)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},h.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){h.a.bb(e,t())}},h.f.Q.text=!0,function(){if(t&&t.navigator)var n=function(e){return e?parseFloat(e[1]):void 0},i=t.opera&&t.opera.version&&parseInt(t.opera.version()),r=t.navigator.userAgent,o=n(r.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),s=n(r.match(/Firefox\/([^ ]*)/));if(10>h.a.L)var a=h.a.e.F(),l=h.a.e.F(),c=function(e){var t=this.activeElement;(t=t&&h.a.e.get(t,l))&&t(e)},u=function(e,t){var n=e.ownerDocument;h.a.e.get(n,a)||(h.a.e.set(n,a,!0),h.a.n(n,"selectionchange",c)),h.a.e.set(e,l,t)};h.d.textInput={init:function(t,n,r){function a(e,n){h.a.n(t,e,n)}function l(){var i=h.a.c(n());(null===i||i===e)&&(i=""),m!==e&&i===m?setTimeout(l,4):t.value!==i&&(p=i,t.value=i)}function c(){f||(m=t.value,f=setTimeout(d,4))}function d(){clearTimeout(f),m=f=e;var i=t.value;p!==i&&(p=i,h.h.pa(n(),r,"textInput",i))}var p=t.value,f,m;10>h.a.L?(a("propertychange",function(e){"value"===e.propertyName&&d()}),8==h.a.L&&(a("keyup",d),a("keydown",d)),8<=h.a.L&&(u(t,d),a("dragend",c))):(a("input",d),5>o&&"textarea"===h.a.t(t)?(a("keydown",c),a("paste",c),a("cut",c)):11>i?a("keydown",c):4>s&&(a("DOMAutoComplete",d),a("dragdrop",d),a("drop",d))),a("change",d),h.s(l,null,{o:t})}},h.h.V.textInput=!0,h.d.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),h.d.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++h.d.uniqueName.Zb;h.a.Mb(e,n)}}},h.d.uniqueName.Zb=0,h.d.value={after:["options","foreach"],init:function(e,t,n){if("input"!=e.tagName.toLowerCase()||"checkbox"!=e.type&&"radio"!=e.type){var i=["change"],r=n.get("valueUpdate"),o=!1,s=null;r&&("string"==typeof r&&(r=[r]),h.a.ga(i,r),i=h.a.rb(i));var a=function(){s=null,o=!1;var i=t(),r=h.i.q(e);h.h.pa(i,n,"value",r)};!h.a.L||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=h.a.m(i,"propertychange")||(h.a.n(e,"propertychange",function(){o=!0}),h.a.n(e,"focus",function(){o=!1}),h.a.n(e,"blur",function(){o&&a()})),h.a.u(i,function(t){var n=a;h.a.vc(t,"after")&&(n=function(){s=h.i.q(e),setTimeout(a,0)},t=t.substring(5)),h.a.n(e,t,n)});var l=function(){var i=h.a.c(t()),r=h.i.q(e);if(null!==s&&i===s)setTimeout(l,0);else if(i!==r)if("select"===h.a.t(e)){var o=n.get("valueAllowUnset"),r=function(){h.i.ca(e,i,o)};r(),o||i===h.i.q(e)?setTimeout(r,0):h.k.B(h.a.oa,null,[e,"change"])}else h.i.ca(e,i)};h.s(l,null,{o:e})}else h.ra(e,{checkedValue:t})},update:function(){}},h.h.V.value=!0,h.d.visible={update:function(e,t){var n=h.a.c(t()),i="none"!=e.style.display;n&&!i?e.style.display="":!n&&i&&(e.style.display="none")}},function(e){h.d[e]={init:function(t,n,i,r,o){return h.d.event.init.call(this,t,function(){var t={};return t[e]=n(),t},i,r,o)}}}("click"),h.H=function(){},h.H.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},h.H.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},h.H.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||n;var i=t.getElementById(e);if(!i)throw Error("Cannot find template with ID "+e);return new h.r.l(i)}if(1==e.nodeType||8==e.nodeType)return new h.r.fa(e);throw Error("Unknown template type: "+e)},h.H.prototype.renderTemplate=function(e,t,n,i){return e=this.makeTemplateSource(e,i),this.renderTemplateSource(e,t,n)},h.H.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(e,t).data("isRewritten")},h.H.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},h.b("templateEngine",h.H),h.fb=function(){function e(e,t,n,i){e=h.h.Wa(e);for(var r=h.h.ha,o=0;o<e.length;o++){var s=e[o].key;if(r.hasOwnProperty(s)){var a=r[s];if("function"==typeof a){if(s=a(e[o].value))throw Error(s)}else if(!a)throw Error("This template engine does not support the '"+s+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+h.h.ya(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{ec:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return h.fb.nc(e,t)},n)},nc:function(i,r){return i.replace(t,function(t,n,i,o,s){return e(s,n,i,r)}).replace(n,function(t,n){return e(n,"<!-- ko -->","#comment",r)})},Xb:function(e,t){return h.D.Ua(function(n,i){var r=n.nextSibling;r&&r.nodeName.toLowerCase()===t&&h.ra(r,e,i)})}}}(),h.b("__tr_ambtns",h.fb.Xb),function(){h.r={},h.r.l=function(e){this.l=e},h.r.l.prototype.text=function(){var e=h.a.t(this.l),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.l[e];var t=arguments[0];"innerHTML"===e?h.a.$a(this.l,t):this.l[e]=t};var t=h.a.e.F()+"_";h.r.l.prototype.data=function(e){return 1===arguments.length?h.a.e.get(this.l,t+e):void h.a.e.set(this.l,t+e,arguments[1])};var n=h.a.e.F();h.r.fa=function(e){this.l=e},h.r.fa.prototype=new h.r.l,h.r.fa.prototype.text=function(){if(0==arguments.length){var t=h.a.e.get(this.l,n)||{};return t.gb===e&&t.Ga&&(t.gb=t.Ga.innerHTML),t.gb}h.a.e.set(this.l,n,{gb:arguments[0]})},h.r.l.prototype.nodes=function(){return 0==arguments.length?(h.a.e.get(this.l,n)||{}).Ga:void h.a.e.set(this.l,n,{Ga:arguments[0]})},h.b("templateSources",h.r),h.b("templateSources.domElement",h.r.l),h.b("templateSources.anonymousTemplate",h.r.fa)}(),function(){function t(e,t,n){var i;for(t=h.f.nextSibling(t);e&&(i=e)!==t;)e=h.f.nextSibling(i),n(i,e)}function n(e,n){if(e.length){var i=e[0],r=e[e.length-1],o=i.parentNode,s=h.J.instance,a=s.preprocessNode;if(a){if(t(i,r,function(e,t){var n=e.previousSibling,o=a.call(s,e);o&&(e===i&&(i=o[0]||t),e===r&&(r=o[o.length-1]||n))}),e.length=0,!i)return;i===r?e.push(i):(e.push(i,r),h.a.ka(e,o))}t(i,r,function(e){1!==e.nodeType&&8!==e.nodeType||h.pb(n,e)}),t(i,r,function(e){1!==e.nodeType&&8!==e.nodeType||h.D.Sb(e,[n])}),h.a.ka(e,o)}}function i(e){return e.nodeType?e:0<e.length?e[0]:null}function r(e,t,r,s,a){a=a||{};var l=e&&i(e),l=l&&l.ownerDocument,c=a.templateEngine||o;if(h.fb.ec(r,c,l),r=c.renderTemplate(r,s,a,l),"number"!=typeof r.length||0<r.length&&"number"!=typeof r[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,t){case"replaceChildren":h.f.T(e,r),l=!0;break;case"replaceNode":h.a.Lb(e,r),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return l&&(n(r,s),a.afterRender&&h.k.B(a.afterRender,null,[r,s.$data])),r}var o;h.ab=function(t){if(t!=e&&!(t instanceof h.H))throw Error("templateEngine must inherit from ko.templateEngine");o=t},h.Ya=function(t,n,s,a,l){if(s=s||{},(s.templateEngine||o)==e)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",a){var c=i(a);return h.j(function(){var e=n&&n instanceof h.N?n:new h.N(h.a.c(n)),o=h.C(t)?t():"function"==typeof t?t(e.$data,e):t,e=r(a,l,o,e,s);"replaceNode"==l&&(a=e,c=i(a))},null,{Ia:function(){return!c||!h.a.Ja(c)},o:c&&"replaceNode"==l?c.parentNode:c})}return h.D.Ua(function(e){h.Ya(t,n,s,e,"replaceNode")})},h.uc=function(t,i,o,s,a){function l(e,t){n(t,u),o.afterRender&&o.afterRender(t,e)}function c(e,n){u=a.createChildContext(e,o.as,function(e){e.$index=n});var i=h.C(t)?t():"function"==typeof t?t(e,u):t;return r(null,"ignoreTargetNode",i,u,o)}var u;return h.j(function(){var t=h.a.c(i)||[];"undefined"==typeof t.length&&(t=[t]),t=h.a.ta(t,function(t){return o.includeDestroyed||t===e||null===t||!h.a.c(t._destroy)}),h.k.B(h.a.Za,null,[s,t,c,o,l])},null,{o:s})};var s=h.a.e.F();h.d.template={init:function(e,t){var n=h.a.c(t());return"string"==typeof n||n.name?h.f.ja(e):(n=h.f.childNodes(e),n=h.a.oc(n),new h.r.fa(e).nodes(n)),{controlsDescendantBindings:!0}},update:function(t,n,i,r,o){var a=n(),l;n=h.a.c(a),i=!0,r=null,"string"==typeof n?n={}:(a=n.name,"if"in n&&(i=h.a.c(n["if"])),i&&"ifnot"in n&&(i=!h.a.c(n.ifnot)),l=h.a.c(n.data)),"foreach"in n?r=h.uc(a||t,i&&n.foreach||[],n,t,o):i?(o="data"in n?o.createChildContext(l,n.as):o,r=h.Ya(a||t,o,n,t)):h.f.ja(t),o=r,(l=h.a.e.get(t,s))&&"function"==typeof l.K&&l.K(),h.a.e.set(t,s,o&&o.Z()?o:e)}},h.h.ha.template=function(e){return e=h.h.Wa(e),1==e.length&&e[0].unknown||h.h.lc(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},h.f.Q.template=!0}(),h.b("setTemplateEngine",h.ab),h.b("renderTemplate",h.Ya),h.a.wb=function(e,t,n){if(e.length&&t.length){var i,r,o,s,a;for(i=r=0;(!n||n>i)&&(s=e[r]);++r){for(o=0;a=t[o];++o)if(s.value===a.value){s.moved=a.index,a.moved=s.index,t.splice(o,1),i=o=0;break}i+=o}}},h.a.Fa=function(){function e(e,t,n,i,r){var o=Math.min,s=Math.max,a=[],l,c=e.length,u,d=t.length,p=d-c||1,f=c+d+1,m,g,v;for(l=0;c>=l;l++)for(g=m,a.push(m=[]),v=o(d,l+p),u=s(0,l-1);v>=u;u++)m[u]=u?l?e[l-1]===t[u-1]?g[u-1]:o(g[u]||f,m[u-1]||f)+1:u+1:l+1;for(o=[],s=[],p=[],l=c,u=d;l||u;)d=a[l][u]-1,u&&d===a[l][u-1]?s.push(o[o.length]={status:n,value:t[--u],index:u}):l&&d===a[l-1][u]?p.push(o[o.length]={status:i,value:e[--l],index:l}):(--u,--l,r.sparse||o.push({status:"retained",value:t[u]}));return h.a.wb(s,p,10*c),o.reverse()}return function(t,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},t=t||[],n=n||[],t.length<=n.length?e(t,n,"added","deleted",i):e(n,t,"deleted","added",i)}}(),h.b("utils.compareArrays",h.a.Fa),function(){function t(t,n,i,r,o){var s=[],a=h.j(function(){var e=n(i,o,h.a.ka(s,t))||[];0<s.length&&(h.a.Lb(s,e),r&&h.k.B(r,null,[i,e,o])),s.length=0,h.a.ga(s,e)},null,{o:t,Ia:function(){return!h.a.ob(s)}});return{$:s,j:a.Z()?a:e}}var n=h.a.e.F();h.a.Za=function(i,r,o,s,a){function l(e,t){x=d[t],v!==t&&(w[e]=x),x.Na(v++),h.a.ka(x.$,i),m.push(x),y.push(x)}function c(e,t){if(e)for(var n=0,i=t.length;i>n;n++)t[n]&&h.a.u(t[n].$,function(i){e(i,n,t[n].sa)})}r=r||[],s=s||{};var u=h.a.e.get(i,n)===e,d=h.a.e.get(i,n)||[],p=h.a.Da(d,function(e){return e.sa}),f=h.a.Fa(p,r,s.dontLimitMoves),m=[],g=0,v=0,b=[],y=[];r=[];for(var w=[],p=[],x,k=0,_,C;_=f[k];k++)switch(C=_.moved,_.status){case"deleted":C===e&&(x=d[g],x.j&&x.j.K(),b.push.apply(b,h.a.ka(x.$,i)),s.beforeRemove&&(r[k]=x,y.push(x))),g++;break;case"retained":l(k,g++);break;case"added":C!==e?l(k,C):(x={sa:_.value,Na:h.p(v++)},m.push(x),y.push(x),u||(p[k]=x))}c(s.beforeMove,w),h.a.u(b,s.beforeRemove?h.R:h.removeNode);for(var k=0,u=h.f.firstChild(i),T;x=y[k];k++){for(x.$||h.a.extend(x,t(i,o,x.sa,a,x.Na)),g=0;f=x.$[g];u=f.nextSibling,T=f,g++)f!==u&&h.f.Bb(i,f,T);!x.ic&&a&&(a(x.sa,x.$,x.Na),x.ic=!0)}c(s.beforeRemove,r),c(s.afterMove,w),c(s.afterAdd,p),h.a.e.set(i,n,m)}}(),h.b("utils.setDomNodeChildrenFromArrayMapping",h.a.Za),h.O=function(){this.allowTemplateRewriting=!1},h.O.prototype=new h.H,h.O.prototype.renderTemplateSource=function(e){var t=(9>h.a.L?0:e.nodes)?e.nodes():null;return t?h.a.S(t.cloneNode(!0).childNodes):(e=e.text(),h.a.ba(e))},h.O.Oa=new h.O,h.ab(h.O.Oa),h.b("nativeTemplateEngine",h.O),function(){h.Sa=function(){var e=this.kc=function(){if(!r||!r.tmpl)return 0;try{if(0<=r.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,i,o){if(o=o||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=t.data("precompiled");return s||(s=t.text()||"",s=r.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),t.data("precompiled",s)),t=[i.$data],i=r.extend({koBindingContext:i},o.templateOptions),i=r.tmpl(s,t,i),i.appendTo(n.createElement("div")),r.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},e>0&&(r.tmpl.tag.ko_code={open:"__.push($1 || '');"},r.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},h.Sa.prototype=new h.H;var e=new h.Sa;0<e.kc&&h.ab(e),h.b("jqueryTmplTemplateEngine",h.Sa)}()})}()}(),function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.mapping={})}(function(e,t){function n(e,t){for(var n={},i=e.length-1;i>=0;--i)n[e[i]]=e[i];for(var i=t.length-1;i>=0;--i)n[t[i]]=t[i];var r=[];for(var o in n)r.push(n[o]);return r}function i(e,r){var o;for(var s in r)if(r.hasOwnProperty(s)&&r[s])if(o=t.getType(e[s]),s&&e[s]&&"array"!==o&&"string"!==o)i(e[s],r[s]);else{var a="array"===t.getType(e[s])&&"array"===t.getType(r[s]);a?e[s]=n(e[s],r[s]):e[s]=r[s]}}function r(e,t){var n={};return i(n,e),i(n,t),n}function o(e,t){for(var n=r({},e),i=C.length-1;i>=0;i--){var o=C[i];n[o]&&(n[""]instanceof Object||(n[""]={}),n[""][o]=n[o],delete n[o])}return t&&(n.ignore=s(t.ignore,n.ignore),n.include=s(t.include,n.include),n.copy=s(t.copy,n.copy),n.observe=s(t.observe,n.observe)),n.ignore=s(n.ignore,N.ignore),n.include=s(n.include,N.include),n.copy=s(n.copy,N.copy),n.observe=s(n.observe,N.observe),n.mappedProperties=n.mappedProperties||{},n.copiedProperties=n.copiedProperties||{},n}function s(n,i){return"array"!==t.getType(n)&&(n="undefined"===t.getType(n)?[]:[n]),"array"!==t.getType(i)&&(i="undefined"===t.getType(i)?[]:[i]),e.utils.arrayGetDistinctValues(n.concat(i))}function a(t,n){var i=e.dependentObservable;e.dependentObservable=function(n,i,r){r=r||{},n&&"object"==typeof n&&(r=n);var o=r.deferEvaluation,s=!1,a=function(n){var i=e.dependentObservable;e.dependentObservable=w;var r=e.isWriteableObservable(n);e.dependentObservable=i;var o=w({read:function(){return s||(e.utils.arrayRemoveItem(t,n),s=!0),n.apply(n,arguments)},write:r&&function(e){return n(e)},deferEvaluation:!0});return b&&(o._wrapper=!0),o.__DO=n,o};r.deferEvaluation=!0;var l=new w(n,i,r);return o||(l=a(l),t.push(l)),l},e.dependentObservable.fn=w.fn,e.computed=e.dependentObservable;var r=n();return e.dependentObservable=i,e.computed=e.dependentObservable,r}function l(n,i,o,s,u,m,g){var v="array"===t.getType(e.utils.unwrapObservable(i));if(m=m||"",t.isMapped(n)){var b=e.utils.unwrapObservable(n)[y];o=r(b,o)}var w={data:i,parent:g||u},x=function(){return o[s]&&o[s].create instanceof Function},C=function(t){return a(k,function(){return e.utils.unwrapObservable(u)instanceof Array?o[s].create({data:t||w.data,parent:w.parent,skip:T}):o[s].create({data:t||w.data,parent:w.parent})})},S=function(){return o[s]&&o[s].update instanceof Function},N=function(t,n){var i={data:n||w.data,parent:w.parent,target:e.utils.unwrapObservable(t)};return e.isWriteableObservable(t)&&(i.observable=t),o[s].update(i)},D=_.get(i);if(D)return D;if(s=s||"",v){var A=[],E=!1,M=function(e){return e};o[s]&&o[s].key&&(M=o[s].key,E=!0),e.isObservable(n)||(n=e.observableArray([]),n.mappedRemove=function(e){var t="function"==typeof e?e:function(t){return t===M(e)};return n.remove(function(e){return t(M(e))})},n.mappedRemoveAll=function(t){var i=h(t,M);return n.remove(function(t){return-1!=e.utils.arrayIndexOf(i,M(t))})},n.mappedDestroy=function(e){var t="function"==typeof e?e:function(t){return t===M(e)};return n.destroy(function(e){return t(M(e))})},n.mappedDestroyAll=function(t){var i=h(t,M);return n.destroy(function(t){return-1!=e.utils.arrayIndexOf(i,M(t))})},n.mappedIndexOf=function(t){var i=h(n(),M),r=M(t);return e.utils.arrayIndexOf(i,r)},n.mappedGet=function(e){return n()[n.mappedIndexOf(e)]},n.mappedCreate=function(t){if(-1!==n.mappedIndexOf(t))throw new Error("There already is an object with the key that you specified.");var i=x()?C(t):t;if(S()){var r=N(i,t);e.isWriteableObservable(i)?i(r):i=r}return n.push(i),i});var I=h(e.utils.unwrapObservable(n),M).sort(),P=h(i,M);E&&P.sort();var z=e.utils.compareArrays(I,P),O={},q,L,R=e.utils.unwrapObservable(i),H={},j=!0;for(q=0,L=R.length;L>q;q++){var F=M(R[q]);if(void 0===F||F instanceof Object){j=!1;break}H[F]=R[q]}var W=[],B=0;for(q=0,L=z.length;L>q;q++){var F=z[q],V,Y=m+"["+q+"]";switch(F.status){case"added":var U=j?H[F.value]:d(e.utils.unwrapObservable(i),F.value,M);V=l(void 0,U,o,s,n,Y,u),x()||(V=e.utils.unwrapObservable(V));var G=c(e.utils.unwrapObservable(i),U,O);V===T?B++:W[G-B]=V,O[G]=!0;break;case"retained":var U=j?H[F.value]:d(e.utils.unwrapObservable(i),F.value,M);V=d(n,F.value,M),l(V,U,o,s,n,Y,u);var G=c(e.utils.unwrapObservable(i),U,O);W[G]=V,O[G]=!0;break;case"deleted":V=d(n,F.value,M)}A.push({event:F.status,item:V})}n(W),o[s]&&o[s].arrayChanged&&e.utils.arrayForEach(A,function(e){o[s].arrayChanged(e.event,e.item)})}else if(f(i)){if(n=e.utils.unwrapObservable(n),!n){if(x()){var X=C();return S()&&(X=N(X)),X}if(S())return N(X);n={}}if(S()&&(n=N(n)),_.save(i,n),S())return n;p(i,function(t){var r=t;if(-1==e.utils.arrayIndexOf(o.ignore,r)){if(-1!=e.utils.arrayIndexOf(o.copy,r))return void(n[t]=i[t]);if("object"!=typeof i[t]&&"array"!=typeof i[t]&&o.observe.length>0&&-1==e.utils.arrayIndexOf(o.observe,r))return n[t]=i[t],void(o.copiedProperties[r]=!0);var s=_.get(i[t]),a=l(n[t],i[t],o,t,n,r,n),c=s||a;if(o.observe.length>0&&-1==e.utils.arrayIndexOf(o.observe,r))return n[t]=c(),void(o.copiedProperties[r]=!0);e.isWriteableObservable(n[t])?(c=e.utils.unwrapObservable(c),n[t]()!==c&&n[t](c)):(c=void 0===n[t]?c:e.utils.unwrapObservable(c),n[t]=c),o.mappedProperties[r]=!0}})}else switch(t.getType(i)){case"function":S()?e.isWriteableObservable(i)?(i(N(i)),n=i):n=N(i):n=i;break;default:if(e.isWriteableObservable(n)){if(S()){var K=N(n);return n(K),K}var K=e.utils.unwrapObservable(i);return n(K),K}var J=x()||S();if(n=x()?C():e.observable(e.utils.unwrapObservable(i)),S()&&n(N(n)),J)return n}return n}function c(e,t,n){for(var i=0,r=e.length;r>i;i++)if(n[i]!==!0&&e[i]===t)return i;return null}function u(n,i){var r;return i&&(r=i(n)),"undefined"===t.getType(r)&&(r=n),e.utils.unwrapObservable(r)}function d(t,n,i){t=e.utils.unwrapObservable(t);for(var r=0,o=t.length;o>r;r++){var s=t[r];if(u(s,i)===n)return s}throw new Error("When calling ko.update*, the key '"+n+"' was not found!")}function h(t,n){return e.utils.arrayMap(e.utils.unwrapObservable(t),function(e){return n?u(e,n):e})}function p(e,n){if("array"===t.getType(e))for(var i=0;i<e.length;i++)n(i);else for(var r in e)n(r)}function f(e){var n=t.getType(e);return("object"===n||"array"===n)&&null!==e}function m(e,n,i){var r=e||"";return"array"===t.getType(n)?e&&(r+="["+i+"]"):(e&&(r+="."),r+=i),r}function g(){var t=[],n=[];this.save=function(i,r){var o=e.utils.arrayIndexOf(t,i);o>=0?n[o]=r:(t.push(i),n.push(r))},this.get=function(i){var r=e.utils.arrayIndexOf(t,i),o=r>=0?n[r]:void 0;return o}}function v(){var e={},t=function(t){var n;try{n=t}catch(i){n="$$$"}var r=e[n];return void 0===r&&(r=new g,e[n]=r),r};this.save=function(e,n){t(e).save(e,n)},this.get=function(e){return t(e).get(e)}}var b=!0,y="__ko_mapping__",w=e.dependentObservable,x=0,k,_,C=["create","update","key","arrayChanged"],T={},S={include:["_destroy"],ignore:[],copy:[],observe:[]},N=S;t.isMapped=function(t){var n=e.utils.unwrapObservable(t);return n&&n[y]},t.fromJS=function(e){if(0==arguments.length)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{x++||(k=[],_=new v);var t,n;2==arguments.length&&(arguments[1][y]?n=arguments[1]:t=arguments[1]),3==arguments.length&&(t=arguments[1],n=arguments[2]),n&&(t=r(t,n[y])),t=o(t);var i=l(n,e,t);if(n&&(i=n),!--x)for(;k.length;){var s=k.pop();s&&(s(),s.__DO.throttleEvaluation=s.throttleEvaluation)}return i[y]=r(i[y],t),i}catch(a){throw x=0,a}},t.fromJSON=function(n){var i=e.utils.parseJson(n);return arguments[0]=i,t.fromJS.apply(this,arguments)},t.updateFromJS=function(e){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},t.updateFromJSON=function(e){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},t.toJS=function(n,i){if(N||t.resetDefaultOptions(),0==arguments.length)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==t.getType(N.ignore))throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==t.getType(N.include))throw new Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==t.getType(N.copy))throw new Error("ko.mapping.defaultOptions().copy should be an array.");return i=o(i,n[y]),t.visitModel(n,function(t){return e.utils.unwrapObservable(t)},i)},t.toJSON=function(n,i){var r=t.toJS(n,i);return e.utils.stringifyJson(r)},t.defaultOptions=function(){return arguments.length>0?void(N=arguments[0]):N},t.resetDefaultOptions=function(){N={include:S.include.slice(0),ignore:S.ignore.slice(0),copy:S.copy.slice(0)}},t.getType=function(e){if(e&&"object"==typeof e){if(e.constructor===Date)return"date";if(e.constructor===Array)return"array"}return typeof e},t.visitModel=function(n,i,r){r=r||{},r.visitedObjects=r.visitedObjects||new v;var s,a=e.utils.unwrapObservable(n);if(!f(a))return i(n,r.parentName);r=o(r,a[y]),i(n,r.parentName),s="array"===t.getType(a)?[]:{},r.visitedObjects.save(n,s);var l=r.parentName;return p(a,function(n){if(!r.ignore||-1==e.utils.arrayIndexOf(r.ignore,n)){var o=a[n];if(r.parentName=m(l,a,n),-1!==e.utils.arrayIndexOf(r.copy,n)||-1!==e.utils.arrayIndexOf(r.include,n)||!a[y]||!a[y].mappedProperties||a[y].mappedProperties[n]||!a[y].copiedProperties||a[y].copiedProperties[n]||"array"===t.getType(a)){var c;switch(t.getType(e.utils.unwrapObservable(o))){case"object":case"array":case"undefined":var u=r.visitedObjects.get(o);s[n]="undefined"!==t.getType(u)?u:t.visitModel(o,i,r);break;default:s[n]=i(o,r.parentName)}}}}),s}}),function(e){var t="0.4.0",n="hasOwnProperty",i=/[\.\/]/,r="*",o=function(){},s=function(e,t){return e-t},a,l,c={n:{}},u=function(e,t){var n=c,i=l,r=Array.prototype.slice.call(arguments,2),o=u.listeners(e),d=0,h=!1,p,f=[],m={},g=[],v=[];a=e,l=0;for(var b=0,y=o.length;y>b;b++)"zIndex"in o[b]&&(f.push(o[b].zIndex),o[b].zIndex<0&&(m[o[b].zIndex]=o[b]));for(f.sort(s);f[d]<0;)if(p=m[f[d++]],g.push(p.apply(t,r)),l)return l=i,g;for(b=0;y>b;b++)if(p=o[b],"zIndex"in p)if(p.zIndex==f[d]){if(g.push(p.apply(t,r)),l)return l=i,g;do if(d++,p=m[f[d]],p&&g.push(p.apply(t,r)),l)return l=i,g;while(p)}else m[p.zIndex]=p;else if(g.push(p.apply(t,r)),l)return l=i,g;return l=i,g.length?g:null};u.listeners=function(e){var t=e.split(i),n=c,o,s,a,l,u,d,h,p,f=[n],m=[];for(l=0,u=t.length;u>l;l++){for(p=[],d=0,h=f.length;h>d;d++)for(n=f[d].n,s=[n[t[l]],n[r]],a=2;a--;)o=s[a],o&&(p.push(o),m=m.concat(o.f||[]));f=p}return m},u.on=function(e,t){for(var n=e.split(i),r=c,s=0,a=n.length;a>s;s++)r=r.n,!r[n[s]]&&(r[n[s]]={n:{}}),r=r[n[s]];for(r.f=r.f||[],s=0,a=r.f.length;a>s;s++)if(r.f[s]==t)return o;return r.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},u.stop=function(){l=1},u.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(a):a},u.unbind=function(e,t){var o=e.split(i),s,a,l,u,d,h,p,f=[c];for(u=0,d=o.length;d>u;u++)for(h=0;h<f.length;h+=l.length-2){if(l=[h,1],s=f[h].n,o[u]!=r)s[o[u]]&&l.push(s[o[u]]);else for(a in s)s[n](a)&&l.push(s[a]);f.splice.apply(f,l)}for(u=0,d=f.length;d>u;u++)for(s=f[u];s.n;){if(t){if(s.f){for(h=0,p=s.f.length;p>h;h++)if(s.f[h]==t){s.f.splice(h,1);break}!s.f.length&&delete s.f}for(a in s.n)if(s.n[n](a)&&s.n[a].f){var m=s.n[a].f;for(h=0,p=m.length;p>h;h++)if(m[h]==t){m.splice(h,1);break}!m.length&&delete s.n[a].f}}else{delete s.f;for(a in s.n)s.n[n](a)&&s.n[a].f&&delete s.n[a].f}s=s.n}},u.once=function(e,t){var n=function(){t.apply(this,arguments),u.unbind(e,n)};return u.on(e,n)},u.version=t,u.toString=function(){return"You are running Eve "+t},"undefined"!=typeof module&&module.exports?module.exports=u:e.eve=u}(this),function(){function e(t){if(e.is(t,"function"))return d?t():eve.on("DOMload",t);if(e.is(t,j))return e._engine.create[k](e,t.splice(0,3+e.is(t[0],R))).add(t);var n=Array.prototype.slice.call(arguments,0);if(e.is(n[n.length-1],"function")){var i=n.pop();return d?i.call(e._engine.create[k](e,n)):eve.on("DOMload",function(){i.call(e._engine.create[k](e,n))})}return e._engine.create[k](e,arguments)}function t(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function n(e,n,i){function r(){var o=Array.prototype.slice.call(arguments,0),s=o.join(""),a=r.cache=r.cache||{},l=r.count=r.count||[];return a[g](s)?(t(l,s),i?i(a[s]):a[s]):(l.length>=1e3&&delete a[l.shift()],l.push(s),a[s]=e[k](n,o),i?i(a[s]):a[s])}return r}function i(){return this.hex}function r(e){for(var t=[],n=0,i=e.length;i-2>n;n+=2){var r=[{x:+e[n],y:+e[n+1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];i-4==n?(r[0]={x:+e[n-2],y:+e[n-1]},r[3]=r[2]):n&&(r[0]={x:+e[n-2],y:+e[n-1]}),t.push(["C",(-r[0].x+6*r[1].x+r[2].x)/6,(-r[0].y+6*r[1].y+r[2].y)/6,(r[1].x+6*r[2].x-r[3].x)/6,(r[1].y+6*r[2].y-r[3].y)/6,r[2].x,r[2].y])}return t}function o(e,t,n,i,r,o){null!=e?(this.a=+e,this.b=+t,this.c=+n,this.d=+i,this.e=+r,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function s(){return this.x+S+this.y}function a(){return this.x+S+this.y+S+this.width+"  "+this.height}function l(e,t,n,i,r,o){function s(e){return((d*e+u)*e+c)*e}function a(e,t){var n=l(e,t);return((f*n+p)*n+h)*n}function l(e,t){var n,i,r,o,a,l;for(r=e,l=0;8>l;l++){if(o=s(r)-e,O(o)<t)return r;if(a=(3*d*r+2*u)*r+c,O(a)<1e-6)break;r-=o/a}if(n=0,i=1,r=e,n>r)return n;if(r>i)return i;for(;i>n;){if(o=s(r),O(o-e)<t)return r;e>o?n=r:i=r,r=(i-n)/2+n}return r}var c=3*t,u=3*(i-t)-c,d=1-c-u,h=3*n,p=3*(r-n)-h,f=1-h-p;return a(e,1/(200*o))}function c(e,t){var n=[],i={};if(this.ms=t,this.times=1,e){for(var r in e)e[g](r)&&(i[Z(r)]=e[r],n.push(Z(r)));n.sort(pe)}this.anim=i,this.top=n[n.length-1],this.percents=n}function u(t,n,i,r,s,a){i=Z(i);var c,u,d,p=[],f,m,v,b=t.ms,y={},w={},x={};if(r)for(C=0,T=mt.length;T>C;C++){var k=mt[C];if(k.el.id==n.id&&k.anim==t){k.percent!=i?(mt.splice(C,1),d=1):u=k,n.attr(k.totalOrigin);break}}else r=+w;for(var C=0,T=t.percents.length;T>C;C++){if(t.percents[C]==i||t.percents[C]>r*t.top){i=t.percents[C],m=t.percents[C-1]||0,b=b/t.top*(i-m),f=t.percents[C+1],c=t.anim[i];break}r&&n.attr(t.anim[t.percents[C]])}if(c){if(u)u.initstatus=r,u.start=new Date-u.ms*r;else{for(var S in c)if(c[g](S)&&(ie[g](S)||n.paper.customAttributes[g](S)))switch(y[S]=n.attr(S),null==y[S]&&(y[S]=ne[S]),w[S]=c[S],ie[S]){case R:x[S]=(w[S]-y[S])/b;break;case"colour":y[S]=e.getRGB(y[S]);var A=e.getRGB(w[S]);x[S]={r:(A.r-y[S].r)/b,g:(A.g-y[S].g)/b,b:(A.b-y[S].b)/b};break;case"path":var E=Re(y[S],w[S]),M=E[1];for(y[S]=E[0],x[S]=[],C=0,T=y[S].length;T>C;C++){x[S][C]=[0];for(var I=1,P=y[S][C].length;P>I;I++)x[S][C][I]=(M[C][I]-y[S][C][I])/b}break;case"transform":var z=n._,O=Ge(z[S],w[S]);if(O)for(y[S]=O.from,w[S]=O.to,x[S]=[],x[S].real=!0,C=0,T=y[S].length;T>C;C++)for(x[S][C]=[y[S][C][0]],I=1,P=y[S][C].length;P>I;I++)x[S][C][I]=(w[S][C][I]-y[S][C][I])/b;else{var q=n.matrix||new o,L={_:{transform:z.transform},getBBox:function(){return n.getBBox(1)}};y[S]=[q.a,q.b,q.c,q.d,q.e,q.f],Ye(L,w[S]),w[S]=L._.transform,x[S]=[(L.matrix.a-q.a)/b,(L.matrix.b-q.b)/b,(L.matrix.c-q.c)/b,(L.matrix.d-q.d)/b,(L.matrix.e-q.e)/b,(L.matrix.e-q.f)/b]}break;case"csv":var H=N(c[S])[D](h),j=N(y[S])[D](h);if("clip-rect"==S)for(y[S]=j,x[S]=[],C=j.length;C--;)x[S][C]=(H[C]-y[S][C])/b;w[S]=H;break;default:for(H=[][_](c[S]),j=[][_](y[S]),x[S]=[],C=n.paper.customAttributes[S].length;C--;)x[S][C]=((H[C]||0)-(j[C]||0))/b}var F=c.easing,W=e.easing_formulas[F];
if(!W)if(W=N(F).match(K),W&&5==W.length){var B=W;W=function(e){return l(e,+B[1],+B[2],+B[3],+B[4],b)}}else W=me;if(v=c.start||t.start||+new Date,k={anim:t,percent:i,timestamp:v,start:v+(t.del||0),status:0,initstatus:r||0,stop:!1,ms:b,easing:W,from:y,diff:x,to:w,el:n,callback:c.callback,prev:m,next:f,repeat:a||t.times,origin:n.attr(),totalOrigin:s},mt.push(k),r&&!u&&!d&&(k.stop=!0,k.start=new Date-b*r,1==mt.length))return vt();d&&(k.start=new Date-k.ms*r),1==mt.length&&gt(vt)}eve("anim.start."+n.id,n,t)}}e.version="2.0.1",e.eve=eve;var d,h=/[, ]+/,p={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},f=/\{(\d+)\}/g,m="prototype",g="hasOwnProperty",v={doc:document,win:window},b={was:Object.prototype[g].call(v.win,"Raphael"),is:v.win.Raphael},y=function(){this.ca=this.customAttributes={}},w,x="appendChild",k="apply",_="concat",C="createTouch"in v.doc,T="",S=" ",N=String,D="split",A="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[D](S),E={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},M=N.prototype.toLowerCase,I=Math,P=I.max,z=I.min,O=I.abs,q=I.pow,L=I.PI,R="number",H="string",j="array",F="toString",W="fill",B=Object.prototype.toString,V={},Y="push",U=e._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,G=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,X={NaN:1,Infinity:1,"-Infinity":1},K=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,J=I.round,Q="setAttribute",Z=parseFloat,ee=parseInt,te=N.prototype.toUpperCase,ne=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"class":"","clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:"","font-family":"","font-size":"","font-style":"","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ie=e._availableAnimAttrs={blur:R,"clip-rect":"csv",cx:R,cy:R,fill:"colour","fill-opacity":R,"font-size":R,height:R,opacity:R,path:"path",r:R,rx:R,ry:R,stroke:"colour","stroke-opacity":R,"stroke-width":R,transform:"transform",width:R,x:R,y:R},re=/\s*,\s*/,oe={hs:1,rg:1},se=/,?([achlmqrstvxz]),?/gi,ae=/([achlmrqstvz])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/gi,le=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/gi,ce=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)\s*,?\s*/gi,ue=e._radial_gradient=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,de={},he=function(e,t){return e.key-t.key},pe=function(e,t){return Z(e)-Z(t)},fe=function(){},me=function(e){return e},ge=e._rectPath=function(e,t,n,i,r){return r?[["M",e+r,t],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]]:[["M",e,t],["l",n,0],["l",0,i],["l",-n,0],["z"]]},ve=function(e,t,n,i){return null==i&&(i=n),[["M",e,t],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]]},be=e._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return ve(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return ve(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return ge(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return ge(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return ge(t.x,t.y,t.width,t.height)}},ye=e.mapPath=function(e,t){if(!t)return e;var n,i,r,o,s,a,l;for(e=Re(e),r=0,s=e.length;s>r;r++)for(l=e[r],o=1,a=l.length;a>o;o+=2)n=t.x(l[o],l[o+1]),i=t.y(l[o],l[o+1]),l[o]=n,l[o+1]=i;return e};if(e._g=v,e.type=v.win.SVGAngle||v.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==e.type){var we=v.doc.createElement("div"),xe;if(we.innerHTML='<v:shape adj="1"/>',xe=we.firstChild,xe.style.behavior="url(#default#VML)",!xe||"object"!=typeof xe.adj)return e.type=T;we=null}e.svg=!(e.vml="VML"==e.type),e._Paper=y,e.fn=w=y.prototype=e.prototype,e._id=0,e._oid=0,e.is=function(e,t){return t=M.call(t),"finite"==t?!X[g](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||B.call(e).slice(8,-1).toLowerCase()==t},e.angle=function(t,n,i,r,o,s){if(null==o){var a=t-i,l=n-r;return a||l?(180+180*I.atan2(-l,-a)/L+360)%360:0}return e.angle(t,n,o,s)-e.angle(i,r,o,s)},e.rad=function(e){return e%360*L/180},e.deg=function(e){return 180*e/L%360},e.snapTo=function(t,n,i){if(i=e.is(i,"finite")?i:10,e.is(t,j)){for(var r=t.length;r--;)if(O(t[r]-n)<=i)return t[r]}else{t=+t;var o=n%t;if(i>o)return n-o;if(o>t-i)return n-o+t}return n};var ke=e.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=16*I.random()|0,n="x"==e?t:3&t|8;return n.toString(16)});e.setWindow=function(t){eve("setWindow",e,v.win,t),v.win=t,v.doc=v.win.document,e._engine.initWin&&e._engine.initWin(v.win)};var _e=function(t){if(e.vml){var i=/^\s+|\s+$/g,r;try{var o=new ActiveXObject("htmlfile");o.write("<body>"),o.close(),r=o.body}catch(s){r=createPopup().document.body}var a=r.createTextRange();_e=n(function(e){try{r.style.color=N(e).replace(i,T);var t=a.queryCommandValue("ForeColor");return t=(255&t)<<16|65280&t|(16711680&t)>>>16,"#"+("000000"+t.toString(16)).slice(-6)}catch(n){return"none"}})}else{var l=v.doc.createElement("i");l.title="Raphal Colour Picker",l.style.display="none",v.doc.body.appendChild(l),_e=n(function(e){return l.style.color=e,v.doc.defaultView.getComputedStyle(l,T).getPropertyValue("color")})}return _e(t)},Ce=function(){return"hsb("+[this.h,this.s,this.b]+")"},Te=function(){return"hsl("+[this.h,this.s,this.l]+")"},Se=function(){return this.hex},Ne=function(t,n,i){if(null==n&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,n=t.g,t=t.r),null==n&&e.is(t,H)){var r=e.getRGB(t);t=r.r,n=r.g,i=r.b}return(t>1||n>1||i>1)&&(t/=255,n/=255,i/=255),[t,n,i]},De=function(t,n,i,r){t*=255,n*=255,i*=255;var o={r:t,g:n,b:i,hex:e.rgb(t,n,i),toString:Se};return e.is(r,"finite")&&(o.opacity=r),o};e.color=function(t){var n;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(n=e.hsb2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.hex=n.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(n=e.hsl2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.hex=n.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(n=e.rgb2hsl(t),t.h=n.h,t.s=n.s,t.l=n.l,n=e.rgb2hsb(t),t.v=n.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=Se,t},e.hsb2rgb=function(e,t,n,i){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,e=e.h,i=e.o),e*=360;var r,o,s,a,l;return e=e%360/60,l=n*t,a=l*(1-O(e%2-1)),r=o=s=n-l,e=~~e,r+=[l,a,0,0,a,l][e],o+=[a,l,l,a,0,0][e],s+=[0,0,a,l,l,a][e],De(r,o,s,i)},e.hsl2rgb=function(e,t,n,i){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h),(e>1||t>1||n>1)&&(e/=360,t/=100,n/=100),e*=360;var r,o,s,a,l;return e=e%360/60,l=2*t*(.5>n?n:1-n),a=l*(1-O(e%2-1)),r=o=s=n-l/2,e=~~e,r+=[l,a,0,0,a,l][e],o+=[a,l,l,a,0,0][e],s+=[0,0,a,l,l,a][e],De(r,o,s,i)},e.rgb2hsb=function(e,t,n){n=Ne(e,t,n),e=n[0],t=n[1],n=n[2];var i,r,o,s;return o=P(e,t,n),s=o-z(e,t,n),i=0==s?null:o==e?(t-n)/s:o==t?(n-e)/s+2:(e-t)/s+4,i=(i+360)%6*60/360,r=0==s?0:s/o,{h:i,s:r,b:o,toString:Ce}},e.rgb2hsl=function(e,t,n){n=Ne(e,t,n),e=n[0],t=n[1],n=n[2];var i,r,o,s,a,l;return s=P(e,t,n),a=z(e,t,n),l=s-a,i=0==l?null:s==e?(t-n)/l:s==t?(n-e)/l+2:(e-t)/l+4,i=(i+360)%6*60/360,o=(s+a)/2,r=0==l?0:.5>o?l/(2*o):l/(2-2*o),{h:i,s:r,l:o,toString:Te}},e._path2string=function(){return this.join(",").replace(se,"$1")};var Ae=e._preload=function(e,t){var n=v.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,v.doc.body.removeChild(this)},n.onerror=function(){v.doc.body.removeChild(this)},v.doc.body.appendChild(n),n.src=e};e.getRGB=n(function(t){if(!t||(t=N(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:i};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:i};!(oe[g](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=_e(t));var n,r,o,s,a,l,c,u=t.match(G);return u?(u[2]&&(s=ee(u[2].substring(5),16),o=ee(u[2].substring(3,5),16),r=ee(u[2].substring(1,3),16)),u[3]&&(s=ee((l=u[3].charAt(3))+l,16),o=ee((l=u[3].charAt(2))+l,16),r=ee((l=u[3].charAt(1))+l,16)),u[4]&&(c=u[4][D](re),r=Z(c[0]),"%"==c[0].slice(-1)&&(r*=2.55),o=Z(c[1]),"%"==c[1].slice(-1)&&(o*=2.55),s=Z(c[2]),"%"==c[2].slice(-1)&&(s*=2.55),"rgba"==u[1].toLowerCase().slice(0,4)&&(a=Z(c[3])),c[3]&&"%"==c[3].slice(-1)&&(a/=100)),u[5]?(c=u[5][D](re),r=Z(c[0]),"%"==c[0].slice(-1)&&(r*=2.55),o=Z(c[1]),"%"==c[1].slice(-1)&&(o*=2.55),s=Z(c[2]),"%"==c[2].slice(-1)&&(s*=2.55),("deg"==c[0].slice(-3)||""==c[0].slice(-1))&&(r/=360),"hsba"==u[1].toLowerCase().slice(0,4)&&(a=Z(c[3])),c[3]&&"%"==c[3].slice(-1)&&(a/=100),e.hsb2rgb(r,o,s,a)):u[6]?(c=u[6][D](re),r=Z(c[0]),"%"==c[0].slice(-1)&&(r*=2.55),o=Z(c[1]),"%"==c[1].slice(-1)&&(o*=2.55),s=Z(c[2]),"%"==c[2].slice(-1)&&(s*=2.55),("deg"==c[0].slice(-3)||""==c[0].slice(-1))&&(r/=360),"hsla"==u[1].toLowerCase().slice(0,4)&&(a=Z(c[3])),c[3]&&"%"==c[3].slice(-1)&&(a/=100),e.hsl2rgb(r,o,s,a)):(u={r:r,g:o,b:s,toString:i},u.hex="#"+(16777216|s|o<<8|r<<16).toString(16).slice(1),e.is(a,"finite")&&(u.opacity=a),u)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:i}},e),e.hsb=n(function(t,n,i){return e.hsb2rgb(t,n,i).hex}),e.hsl=n(function(t,n,i){return e.hsl2rgb(t,n,i).hex}),e.rgb=n(function(e,t,n){return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)}),e.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=n(function(t){if(!t)return null;var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return e.is(t,j)&&e.is(t[0],j)&&(i=Me(t)),i.length||N(t).replace(ae,function(e,t,r){var o=[],s=t.toLowerCase();if(r.replace(ce,function(e,t){t&&o.push(+t)}),"m"==s&&o.length>2&&(i.push([t][_](o.splice(0,2))),s="l",t="m"==t?"l":"L"),"r"==s)i.push([t][_](o));else for(;o.length>=n[s]&&(i.push([t][_](o.splice(0,n[s]))),n[s]););}),i.toString=e._path2string,i}),e.parseTransformString=n(function(t){if(!t)return null;var n={r:3,s:4,t:2,m:6},i=[];return e.is(t,j)&&e.is(t[0],j)&&(i=Me(t)),i.length||N(t).replace(le,function(e,t,n){var r=[],o=M.call(t);n.replace(ce,function(e,t){t&&r.push(+t)}),i.push([t][_](r))}),i.toString=e._path2string,i}),e.findDotsAtSegment=function(e,t,n,i,r,o,s,a,l){var c=1-l,u=q(c,3),d=q(c,2),h=l*l,p=h*l,f=u*e+3*d*l*n+3*c*l*l*r+p*s,m=u*t+3*d*l*i+3*c*l*l*o+p*a,g=e+2*l*(n-e)+h*(r-2*n+e),v=t+2*l*(i-t)+h*(o-2*i+t),b=n+2*l*(r-n)+h*(s-2*r+n),y=i+2*l*(o-i)+h*(a-2*o+i),w=c*e+l*n,x=c*t+l*i,k=c*r+l*s,_=c*o+l*a,C=90-180*I.atan2(g-b,v-y)/L;return(g>b||y>v)&&(C+=180),{x:f,y:m,m:{x:g,y:v},n:{x:b,y:y},start:{x:w,y:x},end:{x:k,y:_},alpha:C}},e._removedFactory=function(e){return function(){throw new Error("Raphal: you are calling to method "+e+" of removed object")}};var Ee=n(function(e){if(!e)return{x:0,y:0,width:0,height:0};e=Re(e);for(var t=0,n=0,i=[],r=[],o,s=0,a=e.length;a>s;s++)if(o=e[s],"M"==o[0])t=o[1],n=o[2],i.push(t),r.push(n);else{var l=Le(t,n,o[1],o[2],o[3],o[4],o[5],o[6]);i=i[_](l.min.x,l.max.x),r=r[_](l.min.y,l.max.y),t=o[5],n=o[6]}var c=z[k](0,i),u=z[k](0,r);return{x:c,y:u,width:P[k](0,i)-c,height:P[k](0,r)-u}},null,function(e){return{x:e.x,y:e.y,width:e.width,height:e.height}}),Me=function(t){var n=[];e.is(t,j)&&e.is(t&&t[0],j)||(t=e.parsePathString(t));for(var i=0,r=t.length;r>i;i++){n[i]=[];for(var o=0,s=t[i].length;s>o;o++)n[i][o]=t[i][o]}return n.toString=e._path2string,n},Ie=e._pathToRelative=n(function(t){e.is(t,j)&&e.is(t&&t[0],j)||(t=e.parsePathString(t));var n=[],i=0,r=0,o=0,s=0,a=0;"M"==t[0][0]&&(i=t[0][1],r=t[0][2],o=i,s=r,a++,n.push(["M",i,r]));for(var l=a,c=t.length;c>l;l++){var u=n[l]=[],d=t[l];if(d[0]!=M.call(d[0]))switch(u[0]=M.call(d[0]),u[0]){case"a":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+(d[6]-i).toFixed(3),u[7]=+(d[7]-r).toFixed(3);break;case"v":u[1]=+(d[1]-r).toFixed(3);break;case"m":o=d[1],s=d[2];default:for(var h=1,p=d.length;p>h;h++)u[h]=+(d[h]-(h%2?i:r)).toFixed(3)}else{u=n[l]=[],"m"==d[0]&&(o=d[1]+i,s=d[2]+r);for(var f=0,m=d.length;m>f;f++)n[l][f]=d[f]}var g=n[l].length;switch(n[l][0]){case"z":i=o,r=s;break;case"h":i+=+n[l][g-1];break;case"v":r+=+n[l][g-1];break;default:i+=+n[l][g-2],r+=+n[l][g-1]}}return n.toString=e._path2string,n},0,Me),Pe=e._pathToAbsolute=n(function(t){if(e.is(t,j)&&e.is(t&&t[0],j)||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],i=0,o=0,s=0,a=0,l=0;"M"==t[0][0]&&(i=+t[0][1],o=+t[0][2],s=i,a=o,l++,n[0]=["M",i,o]);for(var c,u,d=l,h=t.length;h>d;d++){if(n.push(c=[]),u=t[d],u[0]!=te.call(u[0]))switch(c[0]=te.call(u[0]),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]+i),c[7]=+(u[7]+o);break;case"V":c[1]=+u[1]+o;break;case"H":c[1]=+u[1]+i;break;case"R":for(var p=[i,o][_](u.slice(1)),f=2,m=p.length;m>f;f++)p[f]=+p[f]+i,p[++f]=+p[f]+o;n.pop(),n=n[_](r(p));break;case"M":s=+u[1]+i,a=+u[2]+o;default:for(f=1,m=u.length;m>f;f++)c[f]=+u[f]+(f%2?i:o)}else if("R"==u[0])p=[i,o][_](u.slice(1)),n.pop(),n=n[_](r(p)),c=["R"][_](u.slice(-2));else for(var g=0,v=u.length;v>g;g++)c[g]=u[g];switch(c[0]){case"Z":i=s,o=a;break;case"H":i=c[1];break;case"V":o=c[1];break;case"M":s=c[c.length-2],a=c[c.length-1];default:i=c[c.length-2],o=c[c.length-1]}}return n.toString=e._path2string,n},null,Me),ze=function(e,t,n,i){return[e,t,n,i,n,i]},Oe=function(e,t,n,i,r,o){var s=1/3,a=2/3;return[s*e+a*n,s*t+a*i,s*r+a*n,s*o+a*i,r,o]},qe=function(e,t,i,r,o,s,a,l,c,u){var d=120*L/180,h=L/180*(+o||0),p=[],f,m=n(function(e,t,n){var i=e*I.cos(n)-t*I.sin(n),r=e*I.sin(n)+t*I.cos(n);return{x:i,y:r}});if(u)N=u[0],A=u[1],T=u[2],S=u[3];else{f=m(e,t,-h),e=f.x,t=f.y,f=m(l,c,-h),l=f.x,c=f.y;var g=I.cos(L/180*o),v=I.sin(L/180*o),b=(e-l)/2,y=(t-c)/2,w=b*b/(i*i)+y*y/(r*r);w>1&&(w=I.sqrt(w),i=w*i,r=w*r);var x=i*i,k=r*r,C=(s==a?-1:1)*I.sqrt(O((x*k-x*y*y-k*b*b)/(x*y*y+k*b*b))),T=C*i*y/r+(e+l)/2,S=C*-r*b/i+(t+c)/2,N=I.asin(((t-S)/r).toFixed(9)),A=I.asin(((c-S)/r).toFixed(9));N=T>e?L-N:N,A=T>l?L-A:A,0>N&&(N=2*L+N),0>A&&(A=2*L+A),a&&N>A&&(N-=2*L),!a&&A>N&&(A-=2*L)}var E=A-N;if(O(E)>d){var M=A,P=l,z=c;A=N+d*(a&&A>N?1:-1),l=T+i*I.cos(A),c=S+r*I.sin(A),p=qe(l,c,i,r,o,0,a,P,z,[A,M,T,S])}E=A-N;var q=I.cos(N),R=I.sin(N),H=I.cos(A),j=I.sin(A),F=I.tan(E/4),W=4/3*i*F,B=4/3*r*F,V=[e,t],Y=[e+W*R,t-B*q],U=[l+W*j,c-B*H],G=[l,c];if(Y[0]=2*V[0]-Y[0],Y[1]=2*V[1]-Y[1],u)return[Y,U,G][_](p);p=[Y,U,G][_](p).join()[D](",");for(var X=[],K=0,J=p.length;J>K;K++)X[K]=K%2?m(p[K-1],p[K],h).y:m(p[K],p[K+1],h).x;return X},$e=function(e,t,n,i,r,o,s,a,l){var c=1-l;return{x:q(c,3)*e+3*q(c,2)*l*n+3*c*l*l*r+q(l,3)*s,y:q(c,3)*t+3*q(c,2)*l*i+3*c*l*l*o+q(l,3)*a}},Le=n(function(e,t,n,i,r,o,s,a){var l=r-2*n+e-(s-2*r+n),c=2*(n-e)-2*(r-n),u=e-n,d=(-c+I.sqrt(c*c-4*l*u))/2/l,h=(-c-I.sqrt(c*c-4*l*u))/2/l,p=[t,a],f=[e,s],m;return O(d)>"1e12"&&(d=.5),O(h)>"1e12"&&(h=.5),d>0&&1>d&&(m=$e(e,t,n,i,r,o,s,a,d),f.push(m.x),p.push(m.y)),h>0&&1>h&&(m=$e(e,t,n,i,r,o,s,a,h),f.push(m.x),p.push(m.y)),l=o-2*i+t-(a-2*o+i),c=2*(i-t)-2*(o-i),u=t-i,d=(-c+I.sqrt(c*c-4*l*u))/2/l,h=(-c-I.sqrt(c*c-4*l*u))/2/l,O(d)>"1e12"&&(d=.5),O(h)>"1e12"&&(h=.5),d>0&&1>d&&(m=$e(e,t,n,i,r,o,s,a,d),f.push(m.x),p.push(m.y)),h>0&&1>h&&(m=$e(e,t,n,i,r,o,s,a,h),f.push(m.x),p.push(m.y)),{min:{x:z[k](0,f),y:z[k](0,p)},max:{x:P[k](0,f),y:P[k](0,p)}}}),Re=e._path2curve=n(function(e,t){for(var n=Pe(e),i=t&&Pe(t),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(e,t){var n,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][_](qe[k](0,[t.x,t.y][_](e.slice(1))));break;case"S":n=t.x+(t.x-(t.bx||t.x)),i=t.y+(t.y-(t.by||t.y)),e=["C",n,i][_](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][_](Oe(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][_](Oe(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][_](ze(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][_](ze(t.x,t.y,e[1],t.y));break;case"V":e=["C"][_](ze(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][_](ze(t.x,t.y,t.X,t.Y))}return e}),a=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)e.splice(t++,0,["C"][_](r.splice(0,6)));e.splice(t,1),u=P(n.length,i&&i.length||0)}},l=function(e,t,r,o,s){e&&t&&"M"==e[s][0]&&"M"!=t[s][0]&&(t.splice(s,0,["M",o.x,o.y]),r.bx=0,r.by=0,r.x=e[s][1],r.y=e[s][2],u=P(n.length,i&&i.length||0))},c=0,u=P(n.length,i&&i.length||0);u>c;c++){n[c]=s(n[c],r),a(n,c),i&&(i[c]=s(i[c],o)),i&&a(i,c),l(n,i,r,o,c),l(i,n,o,r,c);var d=n[c],h=i&&i[c],p=d.length,f=i&&h.length;r.x=d[p-2],r.y=d[p-1],r.bx=Z(d[p-4])||r.x,r.by=Z(d[p-3])||r.y,o.bx=i&&(Z(h[f-4])||o.x),o.by=i&&(Z(h[f-3])||o.y),o.x=i&&h[f-2],o.y=i&&h[f-1]}return i?[n,i]:n},null,Me),He=e._parseDots=n(function(t){for(var n=[],i=0,r=t.length;r>i;i++){var o={},s=t[i].match(/^([^:]*):?([\d\.]*)/);if(o.color=e.getRGB(s[1]),o.color.error)return null;o.color=o.color.hex,s[2]&&(o.offset=s[2]+"%"),n.push(o)}for(i=1,r=n.length-1;r>i;i++)if(!n[i].offset){for(var a=Z(n[i-1].offset||0),l=0,c=i+1;r>c;c++)if(n[c].offset){l=n[c].offset;break}l||(l=100,c=r),l=Z(l);for(var u=(l-a)/(c-i+1);c>i;i++)a+=u,n[i].offset=a+"%"}return n}),je=e._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},Fe=e._tofront=function(e,t){t.top!==e&&(je(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},We=e._toback=function(e,t){t.bottom!==e&&(je(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},Be=e._insertafter=function(e,t,n){je(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},Ve=e._insertbefore=function(e,t,n){je(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},Ye=e._extractTransform=function(t,n){if(null==n)return t._.transform;n=N(n).replace(/\.{3}|\u2026/g,t._.transform||T);var i=e.parseTransformString(n),r=0,s=0,a=0,l=1,c=1,u=t._,d=new o;if(u.transform=i||[],i)for(var h=0,p=i.length;p>h;h++){var f=i[h],m=f.length,g=N(f[0]).toLowerCase(),v=f[0]!=g,b=v?d.invert():0,y,w,x,k,_;"t"==g&&3==m?v?(y=b.x(0,0),w=b.y(0,0),x=b.x(f[1],f[2]),k=b.y(f[1],f[2]),d.translate(x-y,k-w)):d.translate(f[1],f[2]):"r"==g?2==m?(_=_||t.getBBox(1),d.rotate(f[1],_.x+_.width/2,_.y+_.height/2),r+=f[1]):4==m&&(v?(x=b.x(f[2],f[3]),k=b.y(f[2],f[3]),d.rotate(f[1],x,k)):d.rotate(f[1],f[2],f[3]),r+=f[1]):"s"==g?2==m||3==m?(_=_||t.getBBox(1),d.scale(f[1],f[m-1],_.x+_.width/2,_.y+_.height/2),l*=f[1],c*=f[m-1]):5==m&&(v?(x=b.x(f[3],f[4]),k=b.y(f[3],f[4]),d.scale(f[1],f[2],x,k)):d.scale(f[1],f[2],f[3],f[4]),l*=f[1],c*=f[2]):"m"==g&&7==m&&d.add(f[1],f[2],f[3],f[4],f[5],f[6]),u.dirtyT=1,t.matrix=d}t.matrix=d,u.sx=l,u.sy=c,u.deg=r,u.dx=s=d.e,u.dy=a=d.f,1==l&&1==c&&!r&&u.bbox?(u.bbox.x+=+s,u.bbox.y+=+a):u.dirtyT=1},Ue=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Ge=e._equaliseTransform=function(t,n){n=N(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];for(var i=P(t.length,n.length),r=[],o=[],s=0,a,l,c,u;i>s;s++){if(c=t[s]||Ue(n[s]),u=n[s]||Ue(c),c[0]!=u[0]||"r"==c[0].toLowerCase()&&(c[2]!=u[2]||c[3]!=u[3])||"s"==c[0].toLowerCase()&&(c[3]!=u[3]||c[4]!=u[4]))return;for(r[s]=[],o[s]=[],a=0,l=P(c.length,u.length);l>a;a++)a in c&&(r[s][a]=c[a]),a in u&&(o[s][a]=u[a])}return{from:r,to:o}};e._getContainer=function(t,n,i,r){var o;return o=null!=r||e.is(t,"object")?t:v.doc.getElementById(t),null!=o?o.tagName?null==n?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:n,height:i}:{container:1,x:t,y:n,width:i,height:r}:void 0},e.pathToRelative=Ie,e._engine={},e.path2curve=Re,e.matrix=function(e,t,n,i,r,s){return new o(e,t,n,i,r,s)},function(t){function n(e){return e[0]*e[0]+e[1]*e[1]}function i(e){var t=I.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,n,i,r,s){var a=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],c=[[e,n,r],[t,i,s],[0,0,1]],u,d,h,p;for(e&&e instanceof o&&(c=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),u=0;3>u;u++)for(d=0;3>d;d++){for(p=0,h=0;3>h;h++)p+=l[u][h]*c[h][d];a[u][d]=p}this.a=a[0][0],this.b=a[1][0],this.c=a[0][1],this.d=a[1][1],this.e=a[0][2],this.f=a[1][2]},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new o(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){this.add(1,0,0,1,e,t)},t.scale=function(e,t,n,i){null==t&&(t=e),(n||i)&&this.add(1,0,0,1,n,i),this.add(e,0,0,t,0,0),(n||i)&&this.add(1,0,0,1,-n,-i)},t.rotate=function(t,n,i){t=e.rad(t),n=n||0,i=i||0;var r=+I.cos(t).toFixed(9),o=+I.sin(t).toFixed(9);this.add(r,o,-o,r,n,i),this.add(1,0,0,1,-n,-i)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[N.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var r=[[this.a,this.c],[this.b,this.d]];t.scalex=I.sqrt(n(r[0])),i(r[0]),t.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*t.shear,r[1][1]-r[0][1]*t.shear],t.scaley=I.sqrt(n(r[1])),i(r[1]),t.shear/=t.scaley;var o=-r[0][1],s=r[1][1];return 0>s?(t.rotate=e.deg(I.acos(s)),0>o&&(t.rotate=360-t.rotate)):t.rotate=e.deg(I.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this[D]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx&&t.dy?"t"+[t.dx,t.dy]:T)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:T)+(t.rotate?"r"+[t.rotate,0,0]:T)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(o.prototype);var Xe=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(Xe&&Xe[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Xe&&Xe[1]<8?w.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:w.safari=fe;for(var Ke=function(){this.returnValue=!1},Je=function(){return this.originalEvent.preventDefault()},Qe=function(){this.cancelBubble=!0},Ze=function(){return this.originalEvent.stopPropagation()},et=function(){return v.doc.addEventListener?function(e,t,n,i){var r=C&&E[t]?E[t]:t,o=function(r){var o=v.doc.documentElement.scrollTop||v.doc.body.scrollTop,s=v.doc.documentElement.scrollLeft||v.doc.body.scrollLeft,a=r.clientX+s,l=r.clientY+o;if(C&&E[g](t))for(var c=0,u=r.targetTouches&&r.targetTouches.length;u>c;c++)if(r.targetTouches[c].target==e){var d=r;r=r.targetTouches[c],r.originalEvent=d,r.preventDefault=Je,r.stopPropagation=Ze;break}return n.call(i,r,a,l)};return e.addEventListener(r,o,!1),function(){return e.removeEventListener(r,o,!1),!0}}:v.doc.attachEvent?function(e,t,n,i){var r=function(e){e=e||v.win.event;var t=v.doc.documentElement.scrollTop||v.doc.body.scrollTop,r=v.doc.documentElement.scrollLeft||v.doc.body.scrollLeft,o=e.clientX+r,s=e.clientY+t;return e.preventDefault=e.preventDefault||Ke,e.stopPropagation=e.stopPropagation||Qe,n.call(i,e,o,s)};e.attachEvent("on"+t,r);var o=function(){return e.detachEvent("on"+t,r),!0};return o}:void 0}(),tt=[],nt=function(e){for(var t=e.clientX,n=e.clientY,i=v.doc.documentElement.scrollTop||v.doc.body.scrollTop,r=v.doc.documentElement.scrollLeft||v.doc.body.scrollLeft,o,s=tt.length;s--;){if(o=tt[s],C){for(var a=e.touches.length,l;a--;)if(l=e.touches[a],l.identifier==o.el._drag.id){t=l.clientX,n=l.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var c=o.el.node,u,d=c.nextSibling,h=c.parentNode,p=c.style.display;v.win.opera&&h.removeChild(c),c.style.display="none",u=o.el.paper.getElementByPoint(t,n),c.style.display=p,v.win.opera&&(d?h.insertBefore(c,d):h.appendChild(c)),u&&eve("drag.over."+o.el.id,o.el,u),t+=r,n+=i,eve("drag.move."+o.el.id,o.move_scope||o.el,t-o.el._drag.x,n-o.el._drag.y,t,n,e)}},it=function(t){e.unmousemove(nt).unmouseup(it);for(var n=tt.length,i;n--;)i=tt[n],i.el._drag={},eve("drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);tt=[]},rt=e.el={},ot=A.length;ot--;)!function(t){e[t]=rt[t]=function(n,i){return e.is(n,"function")&&(this.events=this.events||[],this.events.push({name:t,f:n,unbind:et(this.shape||this.node||v.doc,t,n,i||this)})),this},e["un"+t]=rt["un"+t]=function(e){for(var n=this.events,i=n.length;i--;)if(n[i].name==t&&n[i].f==e)return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}}(A[ot]);rt.data=function(t,n){var i=de[this.id]=de[this.id]||{};if(1==arguments.length){if(e.is(t,"object")){for(var r in t)t[g](r)&&this.data(r,t[r]);return this}return eve("data.get."+this.id,this,i[t],t),i[t]}return i[t]=n,eve("data.set."+this.id,this,n,t),this},rt.removeData=function(e){return null==e?de[this.id]={}:de[this.id]&&delete de[this.id][e],this},rt.hover=function(e,t,n,i){return this.mouseover(e,n).mouseout(t,i||n)},rt.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var st=[];rt.drag=function(t,n,i,r,o,s){function a(a){(a.originalEvent||a).preventDefault();var l=v.doc.documentElement.scrollTop||v.doc.body.scrollTop,c=v.doc.documentElement.scrollLeft||v.doc.body.scrollLeft;this._drag.x=a.clientX+c,this._drag.y=a.clientY+l,this._drag.id=a.identifier,!tt.length&&e.mousemove(nt).mouseup(it),tt.push({el:this,move_scope:r,start_scope:o,end_scope:s}),n&&eve.on("drag.start."+this.id,n),t&&eve.on("drag.move."+this.id,t),i&&eve.on("drag.end."+this.id,i),eve("drag.start."+this.id,o||r||this,a.clientX+c,a.clientY+l,a)}return this._drag={},st.push({el:this,start:a}),this.mousedown(a),this},rt.onDragOver=function(e){e?eve.on("drag.over."+this.id,e):eve.unbind("drag.over."+this.id)},rt.undrag=function(){for(var t=st.length;t--;)st[t].el==this&&(this.unmousedown(st[t].start),st.splice(t,1),eve.unbind("drag.*."+this.id));!st.length&&e.unmousemove(nt).unmouseup(it)},w.circle=function(t,n,i){var r=e._engine.circle(this,t||0,n||0,i||0);return this.__set__&&this.__set__.push(r),r},w.rect=function(t,n,i,r,o){var s=e._engine.rect(this,t||0,n||0,i||0,r||0,o||0);return this.__set__&&this.__set__.push(s),s},w.ellipse=function(t,n,i,r){var o=e._engine.ellipse(this,t||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(o),o},w.path=function(t){t&&!e.is(t,H)&&!e.is(t[0],j)&&(t+=T);var n=e._engine.path(e.format[k](e,arguments),this);return this.__set__&&this.__set__.push(n),n},w.line=function(t,n,i,r){var o=e._engine.line(this,t||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(o),o},w.image=function(t,n,i,r,o){var s=e._engine.image(this,t||"about:blank",n||0,i||0,r||0,o||0);return this.__set__&&this.__set__.push(s),s},w.text=function(t,n,i){var r=e._engine.text(this,t||0,n||0,N(i));return this.__set__&&this.__set__.push(r),r},w.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var n=new yt(t);return this.__set__&&this.__set__.push(n),n},w.setStart=function(e){this.__set__=e||this.set()},w.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},w.setSize=function(t,n){return e._engine.setSize.call(this,t,n)},w.setViewBox=function(t,n,i,r,o){return e._engine.setViewBox.call(this,t,n,i,r,o)},w.top=w.bottom=null,w.raphael=e;var at=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,i=n.body,r=n.documentElement,o=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,a=t.top+(v.win.pageYOffset||r.scrollTop||i.scrollTop)-o,l=t.left+(v.win.pageXOffset||r.scrollLeft||i.scrollLeft)-s;return{y:a,x:l}};w.getElementByPoint=function(e,t){var n=this,i=n.canvas,r=v.doc.elementFromPoint(e,t);if(v.win.opera&&"svg"==r.tagName){var o=at(i),s=i.createSVGRect();s.x=e-o.x,s.y=t-o.y,s.width=s.height=1;var a=i.getIntersectionList(s,null);a.length&&(r=a[a.length-1])}if(!r)return null;for(;r.parentNode&&r!=i.parentNode&&!r.raphael;)r=r.parentNode;return r==n.canvas.parentNode&&(r=i),r=r&&r.raphael?n.getById(r.raphaelid):null},w.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},w.forEach=function(e,t){for(var n=this.bottom;n;){if(e.call(t,n)===!1)return this;n=n.next}return this},rt.getBBox=function(e){if(this.removed)return{};var t=this._;return e?((t.dirty||!t.bboxwt)&&(this.realPath=be[this.type](this),t.bboxwt=Ee(this.realPath),t.bboxwt.toString=a,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&((t.dirty||!this.realPath)&&(t.bboxwt=0,this.realPath=be[this.type](this)),t.bbox=Ee(ye(this.realPath,this.matrix)),t.bbox.toString=a,t.dirty=t.dirtyT=0),t.bbox)},rt.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},rt.glow=function(e){if("text"==this.type)return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,i=this.paper,r=i.set(),o=this.realPath||be[this.type](this);o=this.matrix?ye(o,this.matrix):o;for(var s=1;n+1>s;s++)r.push(i.path(o).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*s).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return r.insertBefore(this).translate(t.offsetx,t.offsety)};var lt={},ct=function(t,n,i,r,o,s,a,l,c){var u=0,d=100,h=[t,n,i,r,o,s,a,l].join(),p=lt[h],f,m;if(!p&&(lt[h]=p={data:[]}),p.timer&&clearTimeout(p.timer),p.timer=setTimeout(function(){delete lt[h]},2e3),null!=c&&!p.precision){var g=ct(t,n,i,r,o,s,a,l);p.precision=10*~~g,p.data=[]}d=p.precision||d;for(var v=0;d+1>v;v++){if(p.data[v*d]?m=p.data[v*d]:(m=e.findDotsAtSegment(t,n,i,r,o,s,a,l,v/d),p.data[v*d]=m),v&&(u+=q(q(f.x-m.x,2)+q(f.y-m.y,2),.5)),null!=c&&u>=c)return m;f=m}return null==c?u:void 0},ut=function(t,n){return function(i,r,o){i=Re(i);for(var s,a,l,c,u="",d={},h,p=0,f=0,m=i.length;m>f;f++){if(l=i[f],"M"==l[0])s=+l[1],a=+l[2];else{if(c=ct(s,a,l[1],l[2],l[3],l[4],l[5],l[6]),p+c>r){if(n&&!d.start){if(h=ct(s,a,l[1],l[2],l[3],l[4],l[5],l[6],r-p),u+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y],o)return u;d.start=u,u=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,l[5],l[6]].join(),p+=c,s=+l[5],a=+l[6];continue}if(!t&&!n)return h=ct(s,a,l[1],l[2],l[3],l[4],l[5],l[6],r-p),{x:h.x,y:h.y,alpha:h.alpha}}p+=c,s=+l[5],a=+l[6]}u+=l.shift()+l}return d.end=u,h=t?p:n?d:e.findDotsAtSegment(s,a,l[0],l[1],l[2],l[3],l[4],l[5],1),
h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},dt=ut(1),ht=ut(),pt=ut(0,1);e.getTotalLength=dt,e.getPointAtLength=ht,e.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return pt(e,t).end;var i=pt(e,n,1);return t?pt(i,t).end:i},rt.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():dt(this.attrs.path):void 0},rt.getPointAtLength=function(e){return"path"==this.type?ht(this.attrs.path,e):void 0},rt.getSubpath=function(t,n){return"path"==this.type?e.getSubpath(this.attrs.path,t,n):void 0};var ft=e.easing_formulas={linear:function(e){return e},"<":function(e){return q(e,1.7)},">":function(e){return q(e,.48)},"<>":function(e){var t=.48-e/1.04,n=I.sqrt(.1734+t*t),i=n-t,r=q(O(i),1/3)*(0>i?-1:1),o=-n-t,s=q(O(o),1/3)*(0>o?-1:1),a=r+s+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:q(2,-10*e)*I.sin((e-.075)*(2*L)/.3)+1},bounce:function(e){var t=7.5625,n=2.75,i;return 1/n>e?i=t*e*e:2/n>e?(e-=1.5/n,i=t*e*e+.75):2.5/n>e?(e-=2.25/n,i=t*e*e+.9375):(e-=2.625/n,i=t*e*e+.984375),i}};ft.easeIn=ft["ease-in"]=ft["<"],ft.easeOut=ft["ease-out"]=ft[">"],ft.easeInOut=ft["ease-in-out"]=ft["<>"],ft["back-in"]=ft.backIn,ft["back-out"]=ft.backOut;var mt=[],gt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},vt=function(){for(var t=+new Date,n=0;n<mt.length;n++){var i=mt[n];if(!i.el.removed&&!i.paused){var r=t-i.start,o=i.ms,s=i.easing,a=i.from,l=i.diff,c=i.to,d=i.t,h=i.el,p={},f,m={},v;if(i.initstatus?(r=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*o,i.status=i.initstatus,delete i.initstatus,i.stop&&mt.splice(n--,1)):i.status=(i.prev+(i.percent-i.prev)*(r/o))/i.anim.top,!(0>r))if(o>r){var b=s(r/o);for(var y in a)if(a[g](y)){switch(ie[y]){case R:f=+a[y]+b*o*l[y];break;case"colour":f="rgb("+[bt(J(a[y].r+b*o*l[y].r)),bt(J(a[y].g+b*o*l[y].g)),bt(J(a[y].b+b*o*l[y].b))].join(",")+")";break;case"path":f=[];for(var w=0,x=a[y].length;x>w;w++){f[w]=[a[y][w][0]];for(var k=1,C=a[y][w].length;C>k;k++)f[w][k]=+a[y][w][k]+b*o*l[y][w][k];f[w]=f[w].join(S)}f=f.join(S);break;case"transform":if(l[y].real)for(f=[],w=0,x=a[y].length;x>w;w++)for(f[w]=[a[y][w][0]],k=1,C=a[y][w].length;C>k;k++)f[w][k]=a[y][w][k]+b*o*l[y][w][k];else{var T=function(e){return+a[y][e]+b*o*l[y][e]};f=[["m",T(0),T(1),T(2),T(3),T(4),T(5)]]}break;case"csv":if("clip-rect"==y)for(f=[],w=4;w--;)f[w]=+a[y][w]+b*o*l[y][w];break;default:var N=[][_](a[y]);for(f=[],w=h.paper.customAttributes[y].length;w--;)f[w]=+N[w]+b*o*l[y][w]}p[y]=f}h.attr(p),function(e,t,n){setTimeout(function(){eve("anim.frame."+e,t,n)})}(h.id,h,i.anim)}else{if(function(t,n,i){setTimeout(function(){eve("anim.frame."+n.id,n,i),eve("anim.finish."+n.id,n,i),e.is(t,"function")&&t.call(n)})}(i.callback,h,i.anim),h.attr(c),mt.splice(n--,1),i.repeat>1&&!i.next){for(v in c)c[g](v)&&(m[v]=i.totalOrigin[v]);i.el.attr(m),u(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&u(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}e.svg&&h&&h.paper&&h.paper.safari(),mt.length&&gt(vt)},bt=function(e){return e>255?255:0>e?0:e};rt.animateWith=function(t,n,i,r,o,s){var a=i?e.animation(i,r,o,s):n,l=t.status(n);return this.animate(a).status(a,l*n.ms/a.ms)},rt.onAnimation=function(e){return e?eve.on("anim.frame."+this.id,e):eve.unbind("anim.frame."+this.id),this},c.prototype.delay=function(e){var t=new c(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},c.prototype.repeat=function(e){var t=new c(this.anim,this.ms);return t.del=this.del,t.times=I.floor(P(e,0))||1,t},e.animation=function(t,n,i,r){if(t instanceof c)return t;(e.is(i,"function")||!i)&&(r=r||i||null,i=null),t=Object(t),n=+n||0;var o={},s,a;for(a in t)t[g](a)&&Z(a)!=a&&Z(a)+"%"!=a&&(s=!0,o[a]=t[a]);return s?(i&&(o.easing=i),r&&(o.callback=r),new c({100:o},n)):new c(t,n)},rt.animate=function(t,n,i,r){var o=this;if(o.removed)return r&&r.call(o),o;var s=t instanceof c?t:e.animation(t,n,i,r);return u(s,o,s.percents[0],null,o.attr()),o},rt.setTime=function(e,t){return e&&null!=t&&this.status(e,z(t,e.ms)/e.ms),this},rt.status=function(e,t){var n=[],i=0,r,o;if(null!=t)return u(e,this,-1,z(t,1)),this;for(r=mt.length;r>i;i++)if(o=mt[i],o.el.id==this.id&&(!e||o.anim==e)){if(e)return o.status;n.push({anim:o.anim,status:o.status})}return e?0:n},rt.pause=function(e){for(var t=0;t<mt.length;t++)mt[t].el.id!=this.id||e&&mt[t].anim!=e||eve("anim.pause."+this.id,this,mt[t].anim)!==!1&&(mt[t].paused=!0);return this},rt.resume=function(e){for(var t=0;t<mt.length;t++)if(mt[t].el.id==this.id&&(!e||mt[t].anim==e)){var n=mt[t];eve("anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},rt.stop=function(e){for(var t=0;t<mt.length;t++)mt[t].el.id!=this.id||e&&mt[t].anim!=e||eve("anim.stop."+this.id,this,mt[t].anim)!==!1&&mt.splice(t--,1);return this},rt.toString=function(){return"Raphals object"};var yt=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,n=e.length;n>t;t++)!e[t]||e[t].constructor!=rt.constructor&&e[t].constructor!=yt||(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},wt=yt.prototype;wt.push=function(){for(var e,t,n=0,i=arguments.length;i>n;n++)e=arguments[n],!e||e.constructor!=rt.constructor&&e.constructor!=yt||(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},wt.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},wt.forEach=function(e,t){for(var n=0,i=this.items.length;i>n;n++)if(e.call(t,this.items[n],n)===!1)return this;return this};for(var xt in rt)rt[g](xt)&&(wt[xt]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][k](n,t)})}}(xt));wt.attr=function(t,n){if(t&&e.is(t,j)&&e.is(t[0],"object"))for(var i=0,r=t.length;r>i;i++)this.items[i].attr(t[i]);else for(var o=0,s=this.items.length;s>o;o++)this.items[o].attr(t,n);return this},wt.clear=function(){for(;this.length;)this.pop()},wt.splice=function(e,t,n){e=0>e?P(this.length+e,0):e,t=P(0,z(this.length-e,t));var i=[],r=[],o=[],s;for(s=2;s<arguments.length;s++)o.push(arguments[s]);for(s=0;t>s;s++)r.push(this[e+s]);for(;s<this.length-e;s++)i.push(this[e+s]);var a=o.length;for(s=0;s<a+i.length;s++)this.items[e+s]=this[e+s]=a>s?o[s]:i[s-a];for(s=this.items.length=this.length-=t-a;this[s];)delete this[s++];return new yt(r)},wt.exclude=function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]==e)return this.splice(t,1),!0},wt.animate=function(t,n,i,r){(e.is(i,"function")||!i)&&(r=i||null);var o=this.items.length,s=o,a,l=this,c;if(!o)return this;r&&(c=function(){!--o&&r.call(l)}),i=e.is(i,H)?i:c;var u=e.animation(t,n,i,c);for(a=this.items[--s].animate(u);s--;)this.items[s]&&!this.items[s].removed&&this.items[s].animateWith(a,u);return this},wt.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},wt.getBBox=function(){for(var e=[],t=[],n=[],i=[],r=this.items.length;r--;)if(!this.items[r].removed){var o=this.items[r].getBBox();e.push(o.x),t.push(o.y),n.push(o.x+o.width),i.push(o.y+o.height)}return e=z[k](0,e),t=z[k](0,t),{x:e,y:t,width:P[k](0,n)-e,height:P[k](0,i)-t}},wt.clone=function(e){e=new yt;for(var t=0,n=this.items.length;n>t;t++)e.push(this.items[t].clone());return e},wt.toString=function(){return"Raphals set"},e.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var i in e.face)e.face[g](i)&&(t.face[i]=e.face[i]);if(this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t],!e.svg){t.face["units-per-em"]=ee(e.face["units-per-em"],10);for(var r in e.glyphs)if(e.glyphs[g](r)){var o=e.glyphs[r];if(t.glyphs[r]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"},o.k)for(var s in o.k)o[g](s)&&(t.glyphs[r].k[s]=o.k[s])}}return e},w.getFont=function(t,n,i,r){if(r=r||"normal",i=i||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400,e.fonts){var o=e.fonts[t];if(!o){var s=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,T)+"(\\s|$)","i");for(var a in e.fonts)if(e.fonts[g](a)&&s.test(a)){o=e.fonts[a];break}}var l;if(o)for(var c=0,u=o.length;u>c&&(l=o[c],l.face["font-weight"]!=n||l.face["font-style"]!=i&&l.face["font-style"]||l.face["font-stretch"]!=r);c++);return l}},w.print=function(t,n,i,r,o,s,a){s=s||"middle",a=P(z(a||0,1),-1);var l=this.set(),c=N(i)[D](T),u=0,d=T,p;if(e.is(r,i)&&(r=this.getFont(r)),r){p=(o||16)/r.face["units-per-em"];for(var f=r.face.bbox[D](h),m=+f[0],g=+f[1]+("baseline"==s?f[3]-f[1]+ +r.face.descent:(f[3]-f[1])/2),v=0,b=c.length;b>v;v++){var y=v&&r.glyphs[c[v-1]]||{},w=r.glyphs[c[v]];u+=v?(y.w||r.w)+(y.k&&y.k[c[v]]||0)+r.w*a:0,w&&w.d&&l.push(this.path(w.d).attr({fill:"#000",stroke:"none",transform:[["t",u*p,0]]}))}l.transform(["...s",p,p,m,g,"t",(t-m)/p,(n-g)/p])}return l},w.add=function(t){if(e.is(t,"array"))for(var n=this.set(),i=0,r=t.length,o;r>i;i++)o=t[i]||{},p[g](o.type)&&n.push(this[o.type]().attr(o));return n},e.format=function(t,n){var i=e.is(n,j)?[0][_](n):arguments;return t&&e.is(t,H)&&i.length-1&&(t=t.replace(f,function(e,t){return null==i[++t]?T:i[t]})),t||T},e.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,i){var r=i;return n.replace(t,function(e,t,n,i,o){t=t||i,r&&(t in r&&(r=r[t]),"function"==typeof r&&o&&(r=r()))}),r=(null==r||r==i?e:r)+""};return function(t,i){return String(t).replace(e,function(e,t){return n(e,t,i)})}}(),e.ninja=function(){return b.was?v.win.Raphael=b.is:delete Raphael,e},e.st=wt,function(t,n,i){function r(){/in/.test(t.readyState)?setTimeout(r,9):e.eve("DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(n,i=function(){t.removeEventListener(n,i,!1),t.readyState="complete"},!1),t.readyState="loading"),r()}(document,"DOMContentLoaded"),b.was?v.win.Raphael=e:Raphael=e,eve.on("DOMload",function(){d=!0})}(),window.Raphael.svg&&function(e){var t="hasOwnProperty",n=String,i=parseFloat,r=parseInt,o=Math,s=o.max,a=o.abs,l=o.pow,c=/[, ]+/,u=e.eve,d="",h=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};var $=function(i,r){if(r){"string"==typeof i&&(i=$(i));for(var o in r)r[t](o)&&("xlink:"==o.substring(0,6)?i.setAttributeNS(p,o.substring(6),n(r[o])):i.setAttribute(o,n(r[o])))}else i=e._g.doc.createElementNS("http://www.w3.org/2000/svg",i),i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},g=function(t,r){var c="linear",u=t.id+r,h=.5,p=.5,f=t.node,m=t.paper,g=f.style,v=e._g.doc.getElementById(u);if(!v){if(r=n(r).replace(e._radial_gradient,function(e,t,n){if(c="radial",t&&n){h=i(t),p=i(n);var r=2*(p>.5)-1;l(h-.5,2)+l(p-.5,2)>.25&&(p=o.sqrt(.25-l(h-.5,2))*r+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*r)}return d}),r=r.split(/\s*\-\s*/),"linear"==c){var b=r.shift();if(b=-i(b),isNaN(b))return null;var y=[0,0,o.cos(e.rad(b)),o.sin(e.rad(b))],w=1/(s(a(y[2]),a(y[3]))||1);y[2]*=w,y[3]*=w,y[2]<0&&(y[0]=-y[2],y[2]=0),y[3]<0&&(y[1]=-y[3],y[3]=0)}var x=e._parseDots(r);if(!x)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&u!=t.gradient.id&&(m.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){v=$(c+"Gradient",{id:u}),t.gradient=v,$(v,"radial"==c?{fx:h,fy:p}:{x1:y[0],y1:y[1],x2:y[2],y2:y[3],gradientTransform:t.matrix.invert()}),m.defs.appendChild(v);for(var k=0,_=x.length;_>k;k++)v.appendChild($("stop",{offset:x[k].offset?x[k].offset:k?"100%":"0%","stop-color":x[k].color||"#fff"}))}}return $(f,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),g.fill=d,g.opacity=1,g.fillOpacity=1,1},v=function(e){var t=e.getBBox(1);$(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},b=function(i,r,o){if("path"==i.type){for(var s=n(r).toLowerCase().split("-"),a=i.paper,l=o?"end":"start",c=i.node,u=i.attrs,d=u["stroke-width"],p=s.length,g="classic",v,b,y,w,x,k=3,_=3,C=5;p--;)switch(s[p]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":g=s[p];break;case"wide":_=5;break;case"narrow":_=2;break;case"long":k=5;break;case"short":k=2}if("open"==g?(k+=2,_+=2,C+=2,y=1,w=o?4:1,x={fill:"none",stroke:u.stroke}):(w=y=k/2,x={fill:u.stroke,stroke:"none"}),i._.arrows?o?(i._.arrows.endPath&&m[i._.arrows.endPath]--,i._.arrows.endMarker&&m[i._.arrows.endMarker]--):(i._.arrows.startPath&&m[i._.arrows.startPath]--,i._.arrows.startMarker&&m[i._.arrows.startMarker]--):i._.arrows={},"none"!=g){var T="raphael-marker-"+g,S="raphael-marker-"+l+g+k+_;e._g.doc.getElementById(T)?m[T]++:(a.defs.appendChild($($("path"),{"stroke-linecap":"round",d:f[g],id:T})),m[T]=1);var N=e._g.doc.getElementById(S),D;N?(m[S]++,D=N.getElementsByTagName("use")[0]):(N=$($("marker"),{id:S,markerHeight:_,markerWidth:k,orient:"auto",refX:w,refY:_/2}),D=$($("use"),{"xlink:href":"#"+T,transform:(o?" rotate(180 "+k/2+" "+_/2+") ":h)+"scale("+k/C+","+_/C+")","stroke-width":1/((k/C+_/C)/2)}),N.appendChild(D),a.defs.appendChild(N),m[S]=1),$(D,x);var A=y*("diamond"!=g&&"oval"!=g);o?(v=i._.arrows.startdx*d||0,b=e.getTotalLength(u.path)-A*d):(v=A*d,b=e.getTotalLength(u.path)-(i._.arrows.enddx*d||0)),x={},x["marker-"+l]="url(#"+S+")",(b||v)&&(x.d=Raphael.getSubpath(u.path,v,b)),$(c,x),i._.arrows[l+"Path"]=T,i._.arrows[l+"Marker"]=S,i._.arrows[l+"dx"]=A,i._.arrows[l+"Type"]=g,i._.arrows[l+"String"]=r}else o?(v=i._.arrows.startdx*d||0,b=e.getTotalLength(u.path)-v):(v=0,b=e.getTotalLength(u.path)-(i._.arrows.enddx*d||0)),i._.arrows[l+"Path"]&&$(c,{d:Raphael.getSubpath(u.path,v,b)}),delete i._.arrows[l+"Path"],delete i._.arrows[l+"Marker"],delete i._.arrows[l+"dx"],delete i._.arrows[l+"Type"],delete i._.arrows[l+"String"];for(x in m)if(m[t](x)&&!m[x]){var E=e._g.doc.getElementById(x);E&&E.parentNode.removeChild(E)}}},y={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(e,t,n){$(e.node,{"stroke-dasharray":t})},x=function(i,o){var l=i.node,u=i.attrs,h=l.style.visibility;l.style.visibility="hidden";for(var f in o)if(o[t](f)){if(!e._availableAttrs[t](f))continue;var m=o[f];switch(u[f]=m,f){case"blur":i.blur(m);break;case"href":case"title":case"target":var y=l.parentNode;if("a"!=y.tagName.toLowerCase()){var x=$("a");y.insertBefore(x,l),x.appendChild(l),y=x}"target"==f&&"blank"==m?y.setAttributeNS(p,"show","new"):y.setAttributeNS(p,f,m);break;case"cursor":l.style.cursor=m;break;case"transform":i.transform(m);break;case"arrow-start":b(i,m);break;case"arrow-end":b(i,m,1);break;case"clip-rect":var k=n(m).split(c);if(4==k.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var C=$("clipPath"),T=$("rect");C.id=e.createUUID(),$(T,{x:k[0],y:k[1],width:k[2],height:k[3]}),C.appendChild(T),i.paper.defs.appendChild(C),$(l,{"clip-path":"url(#"+C.id+")"}),i.clip=T}if(!m){var S=l.getAttribute("clip-path");if(S){var N=e._g.doc.getElementById(S.replace(/(^url\(#|\)$)/g,d));N&&N.parentNode.removeChild(N),$(l,{"clip-path":d}),delete i.clip}}break;case"path":"path"==i.type&&($(l,{d:m?u.path=e._pathToAbsolute(m):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(f,m),i._.dirty=1,!u.fx)break;f="x",m=u.x;case"x":u.fx&&(m=-u.x-(u.width||0));case"rx":if("rx"==f&&"rect"==i.type)break;case"cx":l.setAttribute(f,m),i.pattern&&v(i),i._.dirty=1;break;case"height":if(l.setAttribute(f,m),i._.dirty=1,!u.fy)break;f="y",m=u.y;case"y":u.fy&&(m=-u.y-(u.height||0));case"ry":if("ry"==f&&"rect"==i.type)break;case"cy":l.setAttribute(f,m),i.pattern&&v(i),i._.dirty=1;break;case"r":"rect"==i.type?$(l,{rx:m,ry:m}):l.setAttribute(f,m),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(p,"href",m);break;case"stroke-width":(1!=i._.sx||1!=i._.sy)&&(m/=s(a(i._.sx),a(i._.sy))||1),i.paper._vbSize&&(m*=i.paper._vbSize),l.setAttribute(f,m),u["stroke-dasharray"]&&w(i,u["stroke-dasharray"],o),i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1));break;case"stroke-dasharray":w(i,m,o);break;case"fill":var D=n(m).match(e._ISURL);if(D){C=$("pattern");var A=$("image");C.id=e.createUUID(),$(C,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),$(A,{x:0,y:0,"xlink:href":D[1]}),C.appendChild(A),function(t){e._preload(D[1],function(){var e=this.offsetWidth,n=this.offsetHeight;$(t,{width:e,height:n}),$(A,{width:e,height:n}),i.paper.safari()})}(C),i.paper.defs.appendChild(C),l.style.fill="url(#"+C.id+")",$(l,{fill:"url(#"+C.id+")"}),i.pattern=C,i.pattern&&v(i);break}var E=e.getRGB(m);if(E.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=n(m).charAt())&&g(i,m)){if("opacity"in u||"fill-opacity"in u){var M=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d));if(M){var I=M.getElementsByTagName("stop");$(I[I.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=m,u.fill="none";break}}else delete o.gradient,delete u.gradient,!e.is(u.opacity,"undefined")&&e.is(o.opacity,"undefined")&&$(l,{opacity:u.opacity}),!e.is(u["fill-opacity"],"undefined")&&e.is(o["fill-opacity"],"undefined")&&$(l,{"fill-opacity":u["fill-opacity"]});E[t]("opacity")&&$(l,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});case"stroke":E=e.getRGB(m),l.setAttribute(f,E.hex),"stroke"==f&&E[t]("opacity")&&$(l,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity}),"stroke"==f&&i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=n(m).charAt())&&g(i,m);break;case"opacity":u.gradient&&!u[t]("stroke-opacity")&&$(l,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(u.gradient){M=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d)),M&&(I=M.getElementsByTagName("stop"),$(I[I.length-1],{"stop-opacity":m}));break}default:"font-size"==f&&(m=r(m,10)+"px");var P=f.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});l.style[P]=m,i._.dirty=1,l.setAttribute(f,m)}}_(i,o),l.style.visibility=h},k=1.2,_=function(i,o){if("text"==i.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var s=i.attrs,a=i.node,l=a.firstChild?r(e._g.doc.defaultView.getComputedStyle(a.firstChild,d).getPropertyValue("font-size"),10):10;if(o[t]("text")){for(s.text=o.text;a.firstChild;)a.removeChild(a.firstChild);for(var c=n(o.text).split("\n"),u=[],h,p=0,f=c.length;f>p;p++)h=$("tspan"),p&&$(h,{dy:l*k,x:s.x}),h.appendChild(e._g.doc.createTextNode(c[p])),a.appendChild(h),u[p]=h}else for(u=a.getElementsByTagName("tspan"),p=0,f=u.length;f>p;p++)p?$(u[p],{dy:l*k,x:s.x}):$(u[0],{dy:0});$(a,{x:s.x,y:s.y}),i._.dirty=1;var m=i._getBBox(),g=s.y-(m.y+m.height/2);g&&e.is(g,"finite")&&$(u[0],{dy:g})}},C=function(t,n){var i=0,r=0;this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},T=e.el;C.prototype=T,T.constructor=C,e._engine.path=function(e,t){var n=$("path");t.canvas&&t.canvas.appendChild(n);var i=new C(n,t);return i.type="path",x(i,{fill:"none",stroke:"#000",path:e}),i},T.rotate=function(e,t,r){if(this.removed)return this;if(e=n(e).split(c),e.length-1&&(t=i(e[1]),r=i(e[2])),e=i(e[0]),null==r&&(t=r),null==t||null==r){var o=this.getBBox(1);t=o.x+o.width/2,r=o.y+o.height/2}return this.transform(this._.transform.concat([["r",e,t,r]])),this},T.scale=function(e,t,r,o){if(this.removed)return this;if(e=n(e).split(c),e.length-1&&(t=i(e[1]),r=i(e[2]),o=i(e[3])),e=i(e[0]),null==t&&(t=e),null==o&&(r=o),null==r||null==o)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",e,t,r,o]])),this},T.translate=function(e,t){return this.removed?this:(e=n(e).split(c),e.length-1&&(t=i(e[1])),e=i(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},T.transform=function(n){var i=this._;if(null==n)return i.transform;if(e._extractTransform(this,n),this.clip&&$(this.clip,{transform:this.matrix.invert()}),this.pattern&&v(this),this.node&&$(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var r=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},T.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},T.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},T.remove=function(){if(!this.removed){var t=this.paper;t.__set__&&t.__set__.exclude(this),u.unbind("*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),e._tear(this,t),this.node.parentNode.removeChild(this.node);for(var n in this)this[n]="function"==typeof this[n]?e._removedFactory(n):null;this.removed=!0}},T._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(n){}finally{t=t||{}}return e&&this.hide(),t},T.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var o in this.attrs)this.attrs[t](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&e.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var s=n.split(c),a={},l=0,d=s.length;d>l;l++)n=s[l],n in this.attrs?a[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?a[n]=this.paper.customAttributes[n].def:a[n]=e._availableAttrs[n];return d-1?a:a[s[0]]}if(null==i&&e.is(n,"array")){for(a={},l=0,d=n.length;d>l;l++)a[n[l]]=this.attr(n[l]);return a}if(null!=i){var h={};h[n]=i}else null!=n&&e.is(n,"object")&&(h=n);for(var p in h)u("attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var m in f)f[t](m)&&(h[m]=f[m])}return x(this,h),this},T.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&e._tofront(this,t),this},T.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper);var n=this.paper;return this},T.insertAfter=function(t){if(this.removed)return this;var n=t.node||t[t.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this},T.insertBefore=function(t){if(this.removed)return this;var n=t.node||t[0].node;return n.parentNode.insertBefore(this.node,n),e._insertbefore(this,t,this.paper),this},T.blur=function(t){var n=this;if(0!==+t){var i=$("filter"),r=$("feGaussianBlur");n.attrs.blur=t,i.id=e.createUUID(),$(r,{stdDeviation:+t||1.5}),i.appendChild(r),n.paper.defs.appendChild(i),n._blur=i,$(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},e._engine.circle=function(e,t,n,i){var r=$("circle");e.canvas&&e.canvas.appendChild(r);var o=new C(r,e);return o.attrs={cx:t,cy:n,r:i,fill:"none",stroke:"#000"},o.type="circle",$(r,o.attrs),o},e._engine.rect=function(e,t,n,i,r,o){var s=$("rect");e.canvas&&e.canvas.appendChild(s);var a=new C(s,e);return a.attrs={x:t,y:n,width:i,height:r,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},a.type="rect",$(s,a.attrs),a},e._engine.line=function(e,t,n,i,r){var o=$("line");e.canvas&&e.canvas.appendChild(o);var s=new C(o,e);return s.attrs={x1:t,y1:n,x2:i,y2:r},s.type="line",$(o,s.attrs),s},e._engine.ellipse=function(e,t,n,i,r){var o=$("ellipse");e.canvas&&e.canvas.appendChild(o);var s=new C(o,e);return s.attrs={cx:t,cy:n,rx:i,ry:r,fill:"none",stroke:"#000"},s.type="ellipse",$(o,s.attrs),s},e._engine.image=function(e,t,n,i,r,o){var s=$("image");$(s,{x:n,y:i,width:r,height:o,preserveAspectRatio:"none"}),s.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(s);var a=new C(s,e);return a.attrs={x:n,y:i,width:r,height:o,src:t},a.type="image",a},e._engine.text=function(t,n,i,r){var o=$("text");t.canvas&&t.canvas.appendChild(o);var s=new C(o,t);return s.attrs={x:n,y:i,"text-anchor":"middle",text:r,font:e._availableAttrs.font,stroke:"none",fill:"#000"},s.type="text",x(s,s.attrs),s},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container,i=t.x,r=t.y,o=t.width,s=t.height;if(!n)throw new Error("SVG container not found.");var a=$("svg"),l="overflow:hidden;",c;return i=i||0,r=r||0,o=o||512,s=s||342,$(a,{height:s,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==n?(a.style.cssText=l+"position:absolute;left:"+i+"px;top:"+r+"px",e._g.doc.body.appendChild(a),c=1):(a.style.cssText=l+"position:relative",n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a)),n=new e._Paper,n.width=o,n.height=s,n.canvas=a,n.clear(),n._left=n._top=0,c&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,i,r){u("setViewBox",this,this._viewBox,[e,t,n,i,r]);var o=s(n/this.width,i/this.height),a=this.top,l=r?"xMinYMin slice":"none",c,d;for(null==e?(this._vbSize&&(o=1),delete this._vbSize,c="0 0 "+this.width+h+this.height):(this._vbSize=o,c=e+h+t+h+n+h+i),$(this.canvas,{viewBox:c,preserveAspectRatio:l});o&&a;)d="stroke-width"in a.attrs?a.attrs["stroke-width"]:1,a.attr({"stroke-width":d}),a._.dirty=1,a._.dirtyT=1,a=a.prev;return this._viewBox=[e,t,n,i,!!r],this},e.prototype.renderfix=function(){var e=this.canvas,t=e.style,n=e.getScreenCTM()||e.createSVGMatrix(),i=-n.e%1,r=-n.f%1;(i||r)&&(i&&(this._left=(this._left+i)%1,t.left=this._left+"px"),r&&(this._top=(this._top+r)%1,t.top=this._top+"px"))},e.prototype.clear=function(){e.eve("clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=$("desc")).appendChild(e._g.doc.createTextNode("Created with Raphal "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=$("defs"))},e.prototype.remove=function(){u("remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var S=e.st;for(var N in T)T[t](N)&&!S[t](N)&&(S[N]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(N))}(window.Raphael),window.Raphael.vml&&function(e){var t="hasOwnProperty",n=String,i=parseFloat,r=Math,o=r.round,s=r.max,a=r.min,l=r.abs,c="fill",u=/[, ]+/,d=e.eve,h=" progid:DXImageTransform.Microsoft",p=" ",f="",m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,b=/-?[^,\s-]+/g,y="position:absolute;left:0;top:0;width:1px;height:1px",w=21600,x={path:1,rect:1,image:1},k={circle:1,ellipse:1},_=function(t){var i=/[ahqstv]/gi,r=e._pathToAbsolute;if(n(t).match(i)&&(r=e._path2curve),i=/[clmz]/g,r==e._pathToAbsolute&&!n(t).match(i)){var s=n(t).replace(g,function(e,t,n){var i=[],r="m"==t.toLowerCase(),s=m[t];return n.replace(b,function(e){r&&2==i.length&&(s+=i+m["m"==t?"l":"L"],i=[]),i.push(o(e*w))}),s+i});return s}var a=r(t),l,c;s=[];for(var u=0,d=a.length;d>u;u++){l=a[u],c=a[u][0].toLowerCase(),"z"==c&&(c="x");for(var h=1,v=l.length;v>h;h++)c+=o(l[h]*w)+(h!=v-1?",":f);s.push(c)}return s.join(p)},C=function(t,n,i){var r=e.matrix();return r.rotate(-t,.5,.5),{dx:r.x(n,i),dy:r.y(n,i)}},T=function(e,t,n,i,r,o){var s=e._,a=e.matrix,u=s.fillpos,d=e.node,h=d.style,f=1,m="",g,v=w/t,b=w/n;if(h.visibility="hidden",t&&n){if(d.coordsize=l(v)+p+l(b),h.rotation=o*(0>t*n?-1:1),o){var y=C(o,i,r);i=y.dx,r=y.dy}if(0>t&&(m+="x"),0>n&&(m+=" y")&&(f=-1),h.flip=m,d.coordorigin=i*-v+p+r*-b,u||s.fillsize){var x=d.getElementsByTagName(c);x=x&&x[0],d.removeChild(x),u&&(y=C(o,a.x(u[0],u[1]),a.y(u[0],u[1])),x.position=y.dx*f+p+y.dy*f),s.fillsize&&(x.size=s.fillsize[0]*l(t)+p+s.fillsize[1]*l(n)),d.appendChild(x)}h.visibility="visible"}};e.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var S=function(e,t,i){for(var r=n(t).toLowerCase().split("-"),o=i?"end":"start",s=r.length,a="classic",l="medium",c="medium";s--;)switch(r[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=r[s];break;case"wide":case"narrow":c=r[s];break;case"long":case"short":l=r[s]}var u=e.node.getElementsByTagName("stroke")[0];u[o+"arrow"]=a,u[o+"arrowlength"]=l,u[o+"arrowwidth"]=c},N=function(r,l){r.attrs=r.attrs||{};var d=r.node,h=r.attrs,m=d.style,g,v=x[r.type]&&(l.x!=h.x||l.y!=h.y||l.width!=h.width||l.height!=h.height||l.cx!=h.cx||l.cy!=h.cy||l.rx!=h.rx||l.ry!=h.ry||l.r!=h.r),b=k[r.type]&&(h.cx!=l.cx||h.cy!=l.cy||h.r!=l.r||h.rx!=l.rx||h.ry!=l.ry),y=r;for(var C in l)l[t](C)&&(h[C]=l[C]);if(v&&(h.path=e._getPath[r.type](r),r._.dirty=1),l.href&&(d.href=l.href),l.title&&(d.title=l.title),l.target&&(d.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||v)&&(d.path=_(~n(h.path).toLowerCase().indexOf("r")?e._pathToAbsolute(h.path):h.path),"image"==r.type&&(r._.fillpos=[h.x,h.y],r._.fillsize=[h.width,h.height],T(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),b){var N=+h.cx,A=+h.cy,E=+h.rx||+h.r||0,I=+h.ry||+h.r||0;d.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((N-E)*w),o((A-I)*w),o((N+E)*w),o((A+I)*w),o(N*w))}if("clip-rect"in l){var P=n(l["clip-rect"]).split(u);if(4==P.length){P[2]=+P[2]+ +P[0],P[3]=+P[3]+ +P[1];var z=d.clipRect||e._g.doc.createElement("div"),O=z.style;O.clip=e.format("rect({1}px {2}px {3}px {0}px)",P),d.clipRect||(O.position="absolute",O.top=0,O.left=0,O.width=r.paper.width+"px",O.height=r.paper.height+"px",d.parentNode.insertBefore(z,d),z.appendChild(d),d.clipRect=z)}l["clip-rect"]||d.clipRect&&(d.clipRect.style.clip="auto")}if(r.textpath){var q=r.textpath.style;l.font&&(q.font=l.font),l["font-family"]&&(q.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),l["font-size"]&&(q.fontSize=l["font-size"]),l["font-weight"]&&(q.fontWeight=l["font-weight"]),l["font-style"]&&(q.fontStyle=l["font-style"])}if("arrow-start"in l&&S(y,l["arrow-start"]),"arrow-end"in l&&S(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var L=d.getElementsByTagName(c),R=!1;if(L=L&&L[0],!L&&(R=L=M(c)),"image"==r.type&&l.src&&(L.src=l.src),l.fill&&(L.on=!0),(null==L.on||"none"==l.fill||null===l.fill)&&(L.on=!1),L.on&&l.fill){var H=n(l.fill).match(e._ISURL);
if(H){L.parentNode==d&&d.removeChild(L),L.rotate=!0,L.src=H[1],L.type="tile";var j=r.getBBox(1);L.position=j.x+p+j.y,r._.fillpos=[j.x,j.y],e._preload(H[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else L.color=e.getRGB(l.fill).hex,L.src=f,L.type="solid",e.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=n(l.fill).charAt())&&D(y,l.fill,L)&&(h.fill="none",h.gradient=l.fill,L.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var F=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+e.getRGB(l.fill).o+1||2)-1);F=a(s(F,0),1),L.opacity=F,L.src&&(L.color="none")}d.appendChild(L);var W=d.getElementsByTagName("stroke")&&d.getElementsByTagName("stroke")[0],B=!1;!W&&(B=W=M("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(W.on=!0),("none"==l.stroke||null===l.stroke||null==W.on||0==l.stroke||0==l["stroke-width"])&&(W.on=!1);var V=e.getRGB(l.stroke);W.on&&l.stroke&&(W.color=V.hex),F=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+V.o+1||2)-1);var Y=.75*(i(l["stroke-width"])||1);if(F=a(s(F,0),1),null==l["stroke-width"]&&(Y=h["stroke-width"]),l["stroke-width"]&&(W.weight=Y),Y&&1>Y&&(F*=Y)&&(W.weight=1),W.opacity=F,l["stroke-linejoin"]&&(W.joinstyle=l["stroke-linejoin"]||"miter"),W.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(W.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var U={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};W.dashstyle=U[t](l["stroke-dasharray"])?U[l["stroke-dasharray"]]:f}B&&d.appendChild(W)}if("text"==y.type){y.paper.canvas.style.display=f;var G=y.paper.span,X=100,K=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);m=G.style,h.font&&(m.font=h.font),h["font-family"]&&(m.fontFamily=h["font-family"]),h["font-weight"]&&(m.fontWeight=h["font-weight"]),h["font-style"]&&(m.fontStyle=h["font-style"]),K=i(h["font-size"]||K&&K[0])||10,m.fontSize=K*X+"px",y.textpath.string&&(G.innerHTML=n(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var J=G.getBoundingClientRect();y.W=h.w=(J.right-J.left)/X,y.H=h.h=(J.bottom-J.top)/X,y.X=h.x,y.Y=h.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=e.format("m{0},{1}l{2},{1}",o(h.x*w),o(h.y*w),o(h.x*w)+1));for(var Q=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,ee=Q.length;ee>Z;Z++)if(Q[Z]in l){y._.dirty=1;break}switch(h["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},D=function(t,o,s){t.attrs=t.attrs||{};var a=t.attrs,l=Math.pow,c,u,d="linear",h=".5 .5";if(t.attrs.gradient=o,o=n(o).replace(e._radial_gradient,function(e,t,n){return d="radial",t&&n&&(t=i(t),n=i(n),l(t-.5,2)+l(n-.5,2)>.25&&(n=r.sqrt(.25-l(t-.5,2))*(2*(n>.5)-1)+.5),h=t+p+n),f}),o=o.split(/\s*\-\s*/),"linear"==d){var m=o.shift();if(m=-i(m),isNaN(m))return null}var g=e._parseDots(o);if(!g)return null;if(t=t.shape||t.node,g.length){t.removeChild(s),s.on=!0,s.method="none",s.color=g[0].color,s.color2=g[g.length-1].color;for(var v=[],b=0,y=g.length;y>b;b++)g[b].offset&&v.push(g[b].offset+p+g[b].color);s.colors=v.length?v.join():"0% "+s.color,"radial"==d?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=h,s.angle=0):(s.type="gradient",s.angle=(270-m)%360),t.appendChild(s)}return 1},A=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},E=e.el;A.prototype=E,E.constructor=A,E.transform=function(t){if(null==t)return this._.transform;var i=this.paper._viewBoxShift,r=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:f,o;i&&(o=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||f)),e._extractTransform(this,r+t);var s=this.matrix.clone(),a=this.skew,l=this.node,c,u=~n(this.attrs.fill).indexOf("-"),d=!n(this.attrs.fill).indexOf("url(");if(s.translate(-.5,-.5),d||u||"image"==this.type)if(a.matrix="1 0 0 1",a.offset="0 0",c=s.split(),u&&c.noRotation||!c.isSimple){l.style.filter=s.toFilter();var h=this.getBBox(),m=this.getBBox(1),g=h.x-m.x,v=h.y-m.y;l.coordorigin=g*-w+p+v*-w,T(this,1,1,g,v,0)}else l.style.filter=f,T(this,c.scalex,c.scaley,c.dx,c.dy,c.rotate);else l.style.filter=f,a.matrix=n(s),a.offset=s.offset();return o&&(this._.transform=o),this},E.rotate=function(e,t,r){if(this.removed)return this;if(null!=e){if(e=n(e).split(u),e.length-1&&(t=i(e[1]),r=i(e[2])),e=i(e[0]),null==r&&(t=r),null==t||null==r){var o=this.getBBox(1);t=o.x+o.width/2,r=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,r]])),this}},E.translate=function(e,t){return this.removed?this:(e=n(e).split(u),e.length-1&&(t=i(e[1])),e=i(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},E.scale=function(e,t,r,o){if(this.removed)return this;if(e=n(e).split(u),e.length-1&&(t=i(e[1]),r=i(e[2]),o=i(e[3]),isNaN(r)&&(r=null),isNaN(o)&&(o=null)),e=i(e[0]),null==t&&(t=e),null==o&&(r=o),null==r||null==o)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",e,t,r,o]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=f),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed){this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},E.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var o in this.attrs)this.attrs[t](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&e.is(n,"string")){if(n==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=n.split(u),a={},l=0,h=s.length;h>l;l++)n=s[l],n in this.attrs?a[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?a[n]=this.paper.customAttributes[n].def:a[n]=e._availableAttrs[n];return h-1?a:a[s[0]]}if(this.attrs&&null==i&&e.is(n,"array")){for(a={},l=0,h=n.length;h>l;l++)a[n[l]]=this.attr(n[l]);return a}var p;null!=i&&(p={},p[n]=i),null==i&&e.is(n,"object")&&(p=n);for(var f in p)d("attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&p[t](f)&&e.is(this.paper.customAttributes[f],"function")){var m=this.paper.customAttributes[f].apply(this,[].concat(p[f]));this.attrs[f]=p[f];for(var g in m)m[t](g)&&(p[g]=m[g])}p.text&&"text"==this.type&&(this.textpath.string=p.text),N(this,p)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this)},E.insertAfter=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this)},E.insertBefore=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper),this)},E.blur=function(t){var n=this.node.runtimeStyle,i=n.filter;i=i.replace(v,f),0!==+t?(this.attrs.blur=t,n.filter=i+p+h+".Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(n.filter=i,n.margin=0,delete this.attrs.blur)},e._engine.path=function(e,t){var n=M("shape");n.style.cssText=y,n.coordsize=w+p+w,n.coordorigin=t.coordorigin;var i=new A(n,t),r={fill:"none",stroke:"#000"};e&&(r.path=e),i.type="path",i.path=[],i.Path=f,N(i,r),t.canvas.appendChild(n);var o=M("skew");return o.on=!0,n.appendChild(o),i.skew=o,i.transform(f),i},e._engine.rect=function(t,n,i,r,o,s){var a=e._rectPath(n,i,r,o,s),l=t.path(a),c=l.attrs;return l.X=c.x=n,l.Y=c.y=i,l.W=c.width=r,l.H=c.height=o,c.r=s,c.path=a,l.type="rect",l},e._engine.ellipse=function(e,t,n,i,r){var o=e.path(),s=o.attrs;return o.X=t-i,o.Y=n-r,o.W=2*i,o.H=2*r,o.type="ellipse",N(o,{cx:t,cy:n,rx:i,ry:r}),o},e._engine.circle=function(e,t,n,i){var r=e.path(),o=r.attrs;return r.X=t-i,r.Y=n-i,r.W=r.H=2*i,r.type="circle",N(r,{cx:t,cy:n,r:i}),r},e._engine.image=function(t,n,i,r,o,s){var a=e._rectPath(i,r,o,s),l=t.path(a).attr({stroke:"none"}),u=l.attrs,d=l.node,h=d.getElementsByTagName(c)[0];return u.src=n,l.X=u.x=i,l.Y=u.y=r,l.W=u.width=o,l.H=u.height=s,u.path=a,l.type="image",h.parentNode==d&&d.removeChild(h),h.rotate=!0,h.src=n,h.type="tile",l._.fillpos=[i,r],l._.fillsize=[o,s],d.appendChild(h),T(l,1,1,0,0,0),l},e._engine.text=function(t,i,r,s){var a=M("shape"),l=M("path"),c=M("textpath");i=i||0,r=r||0,s=s||"",l.v=e.format("m{0},{1}l{2},{1}",o(i*w),o(r*w),o(i*w)+1),l.textpathok=!0,c.string=n(s),c.on=!0,a.style.cssText=y,a.coordsize=w+p+w,a.coordorigin="0 0";var u=new A(a,t),d={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:s};u.shape=a,u.path=l,u.textpath=c,u.type="text",u.attrs.text=n(s),u.attrs.x=i,u.attrs.y=r,u.attrs.w=1,u.attrs.h=1,N(u,d),a.appendChild(c),a.appendChild(l),t.canvas.appendChild(a);var h=M("skew");return h.on=!0,a.appendChild(h),u.skew=h,u.transform(f),u},e._engine.setSize=function(t,n){var i=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),i.width=t,i.height=n,i.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,i,r,o){e.eve("setViewBox",this,this._viewBox,[t,n,i,r,o]);var a=this.width,l=this.height,c=1/s(i/a,r/l),u,d;return o&&(u=l/r,d=a/i,a>i*u&&(t-=(a-i*u)/2/u),l>r*d&&(n-=(l-r*d)/2/d)),this._viewBox=[t,n,i,r,!!o],this._viewBoxShift={dx:-t,dy:-n,scale:c},this.forEach(function(e){e.transform("...")}),this};var M;e._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),M=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(n){M=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,i=t.height,r,o=t.width,s=t.x,a=t.y;if(!n)throw new Error("VML container not found.");var l=new e._Paper,c=l.canvas=e._g.doc.createElement("div"),u=c.style;return s=s||0,a=a||0,o=o||512,i=i||342,l.width=o,l.height=i,o==+o&&(o+="px"),i==+i&&(i+="px"),l.coordsize=1e3*w+p+1e3*w,l.coordorigin="0 0",l.span=e._g.doc.createElement("span"),l.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",c.appendChild(l.span),u.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",o,i),1==n?(e._g.doc.body.appendChild(c),u.left=s+"px",u.top=a+"px",u.position="absolute"):n.firstChild?n.insertBefore(c,n.firstChild):n.appendChild(c),l.renderfix=function(){},l},e.prototype.clear=function(){e.eve("clear",this),this.canvas.innerHTML=f,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){e.eve("remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var I=e.st;for(var P in E)E[t](P)&&!I[t](P)&&(I[P]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(P))}(window.Raphael),/*!
 * Piwik - free/libre analytics platform
 *
 * JavaScript tracking client
 *
 * @link http://piwik.org
 * @source https://github.com/piwik/piwik/blob/master/js/piwik.js
 * @license http://piwik.org/free-software/bsd/ BSD-3 Clause (also in js/LICENSE.txt)
 * @license magnet:?xt=urn:btih:c80d50af7d3db9be66a4d0a86db0286e4fd33292&dn=bsd-3-clause.txt BSD-3-Clause
 */
"object"!=typeof JSON2&&(JSON2=window.JSON||{}),function(){function d(e){return 10>e?"0"+e:e}function l(e,t){var n=Object.prototype.toString.apply(e);return"[object Date]"===n?isFinite(e.valueOf())?e.getUTCFullYear()+"-"+d(e.getUTCMonth()+1)+"-"+d(e.getUTCDate())+"T"+d(e.getUTCHours())+":"+d(e.getUTCMinutes())+":"+d(e.getUTCSeconds())+"Z":null:"[object String]"===n||"[object Number]"===n||"[object Boolean]"===n?e.valueOf():"[object Array]"!==n&&"function"==typeof e.toJSON?e.toJSON(t):e}function a(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=k[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function g(e,t){var n,i,r,o,s=j,c,u=t[e];switch(u&&"object"==typeof u&&(u=l(u,e)),"function"==typeof h&&(u=h.call(t,e,u)),typeof u){case"string":return a(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(j+=b,c=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)c[n]=g(n,u)||"null";return r=0===c.length?"[]":j?"[\n"+j+c.join(",\n"+j)+"\n"+s+"]":"["+c.join(",")+"]",j=s,r}if(h&&"object"==typeof h)for(o=h.length,n=0;o>n;n+=1)"string"==typeof h[n]&&(i=h[n],r=g(i,u),r&&c.push(a(i)+(j?": ":":")+r));else for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(r=g(i,u),r&&c.push(a(i)+(j?": ":":")+r));return r=0===c.length?"{}":j?"{\n"+j+c.join(",\n"+j)+"\n"+s+"}":"{"+c.join(",")+"}",j=s,r}}var c=new RegExp("[\x00--\u2028--\ufeff-]","g"),e='\\\\\\"\x00----\u2028--\ufeff-]',i=new RegExp("["+e,"g"),j,b,k={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!=typeof JSON2.stringify&&(JSON2.stringify=function(e,t,n){var i;if(j="",b="","number"==typeof n)for(i=0;n>i;i+=1)b+=" ";else"string"==typeof n&&(b=n);if(h=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON2.stringify");return g("",{"":e})}),"function"!=typeof JSON2.parse&&(JSON2.parse=function(o,f){function m(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=m(r,n),void 0!==i?r[n]=i:delete r[n]);return f.call(e,t,r)}var n;if(o=String(o),c.lastIndex=0,c.test(o)&&(o=o.replace(c,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),new RegExp("^[\\],:{}\\s]*$").test(o.replace(new RegExp('\\\\(?:["\\\\/bfnrt]|u[0-9a-fA-F]{4})',"g"),"@").replace(new RegExp('"[^"\\\\\n\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?',"g"),"]").replace(new RegExp("(?:^|:|,)(?:\\s*\\[)+","g"),"")))return n=eval("("+o+")"),"function"==typeof f?m({"":n},""):n;throw new SyntaxError("JSON2.parse")})}(),"object"!=typeof _paq&&(_paq=[]),"object"!=typeof Piwik&&(Piwik=function(){function e(e){var t=typeof e;return"undefined"!==t}function t(e){return"function"==typeof e}function n(e){return"object"==typeof e}function i(e){return"string"==typeof e||e instanceof String}function r(){var e,t,n;for(e=0;e<arguments.length;e+=1)n=arguments[e],t=n.shift(),i(t)?W[t].apply(W,n):t.apply(W,n)}function o(e,t,n,i){return e.addEventListener?(e.addEventListener(t,n,i),!0):e.attachEvent?e.attachEvent("on"+t,n):void(e["on"+t]=n)}function s(e,n){var i="",r,o;for(r in M)Object.prototype.hasOwnProperty.call(M,r)&&(o=M[r][e],t(o)&&(i+=o(n)));return i}function a(){var e;if(s("unload"),E)do e=new Date;while(e.getTimeAlias()<E)}function l(){var e;if(!L)for(L=!0,s("load"),e=0;e<R.length;e++)R[e]();return!0}function c(){var e;I.addEventListener?o(I,"DOMContentLoaded",function t(){I.removeEventListener("DOMContentLoaded",t,!1),l()}):I.attachEvent&&(I.attachEvent("onreadystatechange",function n(){"complete"===I.readyState&&(I.detachEvent("onreadystatechange",n),l())}),I.documentElement.doScroll&&O===O.top&&!function i(){if(!L){try{I.documentElement.doScroll("left")}catch(e){return void setTimeout(i,0)}l()}}()),new RegExp("WebKit").test(P.userAgent)&&(e=setInterval(function(){(L||/loaded|complete/.test(I.readyState))&&(clearInterval(e),l())},10)),o(O,"load",l,!1)}function u(e,t){var n=I.createElement("script");n.type="text/javascript",n.src=e,n.readyState?n.onreadystatechange=function(){var e=this.readyState;("loaded"===e||"complete"===e)&&(n.onreadystatechange=null,t())}:n.onload=t,I.getElementsByTagName("head")[0].appendChild(n)}function d(){var e="";try{e=O.top.document.referrer}catch(t){if(O.parent)try{e=O.parent.document.referrer}catch(n){e=""}}return""===e&&(e=I.referrer),e}function h(e){var t=new RegExp("^([a-z]+):"),n=t.exec(e);return n?n[1]:null}function p(e){var t=new RegExp("^(?:(?:https?|ftp):)/*(?:[^@]+@)?([^:/#]+)"),n=t.exec(e);return n?n[1]:e}function f(e,t){var n="[\\?&#]"+t+"=([^&#]*)",i=new RegExp(n),r=i.exec(e);return r?j(r[1]):""}function m(e){return unescape(H(e))}function g(e){var t=function(e,t){return e<<t|e>>>32-t},n=function(e){var t="",n,i;for(n=7;n>=0;n--)i=e>>>4*n&15,t+=i.toString(16);return t},i,r,o,s=[],a=1732584193,l=4023233417,c=2562383102,u=271733878,d=3285377520,h,p,f,g,v,b,y,w=[];for(e=m(e),y=e.length,r=0;y-3>r;r+=4)o=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),w.push(o);switch(3&y){case 0:r=2147483648;break;case 1:r=e.charCodeAt(y-1)<<24|8388608;break;case 2:r=e.charCodeAt(y-2)<<24|e.charCodeAt(y-1)<<16|32768;break;case 3:r=e.charCodeAt(y-3)<<24|e.charCodeAt(y-2)<<16|e.charCodeAt(y-1)<<8|128}for(w.push(r);14!==(15&w.length);)w.push(0);for(w.push(y>>>29),w.push(y<<3&4294967295),i=0;i<w.length;i+=16){for(r=0;16>r;r++)s[r]=w[i+r];for(r=16;79>=r;r++)s[r]=t(s[r-3]^s[r-8]^s[r-14]^s[r-16],1);for(h=a,p=l,f=c,g=u,v=d,r=0;19>=r;r++)b=t(h,5)+(p&f|~p&g)+v+s[r]+1518500249&4294967295,v=g,g=f,f=t(p,30),p=h,h=b;for(r=20;39>=r;r++)b=t(h,5)+(p^f^g)+v+s[r]+1859775393&4294967295,v=g,g=f,f=t(p,30),p=h,h=b;for(r=40;59>=r;r++)b=t(h,5)+(p&f|p&g|f&g)+v+s[r]+2400959708&4294967295,v=g,g=f,f=t(p,30),p=h,h=b;for(r=60;79>=r;r++)b=t(h,5)+(p^f^g)+v+s[r]+3395469782&4294967295,v=g,g=f,f=t(p,30),p=h,h=b;a=a+h&4294967295,l=l+p&4294967295,c=c+f&4294967295,u=u+g&4294967295,d=d+v&4294967295}return b=n(a)+n(l)+n(c)+n(u)+n(d),b.toLowerCase()}function v(e,t,n){return"translate.googleusercontent.com"===e?(""===n&&(n=t),t=f(t,"u"),e=p(t)):("cc.bingj.com"===e||"webcache.googleusercontent.com"===e||"74.6."===e.slice(0,5))&&(t=I.links[0].href,e=p(t)),[e,t,n]}function b(e){var t=e.length;return"."===e.charAt(--t)&&(e=e.slice(0,t)),"*."===e.slice(0,2)&&(e=e.slice(1)),e}function y(t){if(t=t&&t.text?t.text:t,!i(t)){var n=I.getElementsByTagName("title");n&&e(n[0])&&(t=n[0].text)}return t}function w(t){return t?!e(t.children)&&e(t.childNodes)?t.children:e(t.children)?t.children:[]:[]}function x(e,t){return e&&t?e.contains?e.contains(t):e===t?!0:e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}function k(t,n){if(t&&t.indexOf)return t.indexOf(n);if(!e(t)||null===t)return-1;if(!t.length)return-1;var i=t.length;if(0===i)return-1;for(var r=0;i>r;){if(t[r]===n)return r;r++}return-1}function _(t){function n(e,t){return O.getComputedStyle?I.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:void 0}function i(e){for(e=e.parentNode;e;){if(e===I)return!0;e=e.parentNode}return!1}function r(o,s,a,l,c,u,d){var h=o.parentNode,p=1;return i(o)?9===h.nodeType?!0:"0"===n(o,"opacity")||"none"===n(o,"display")||"hidden"===n(o,"visibility")?!1:(e(s)&&e(a)&&e(l)&&e(c)&&e(u)&&e(d)||(s=o.offsetTop,c=o.offsetLeft,l=s+o.offsetHeight,a=c+o.offsetWidth,u=o.offsetWidth,d=o.offsetHeight),t!==o||0!==d&&0!==u||"hidden"!==n(o,"overflow")?h?"hidden"!==n(h,"overflow")&&"scroll"!==n(h,"overflow")||!(c+p>h.offsetWidth+h.scrollLeft||c+u-p<h.scrollLeft||s+p>h.offsetHeight+h.scrollTop||s+d-p<h.scrollTop)?(o.offsetParent===h&&(c+=h.offsetLeft,s+=h.offsetTop),r(h,s,a,l,c,u,d)):!1:!0:!1):!1}return t?r(t):!1}function C(e,t){return t?t:("piwik.php"===e.slice(-9)&&(e=e.slice(0,e.length-9)),e)}function T(e){var t="Piwik_Overlay",n=new RegExp("index\\.php\\?module=Overlay&action=startOverlaySession&idSite=([0-9]+)&period=([^&]+)&date=([^&]+)$"),i=n.exec(I.referrer);if(i){var r=i[1];if(r!==String(e))return!1;var o=i[2],s=i[3];O.name=t+"###"+o+"###"+s}var a=O.name.split("###");return 3===a.length&&a[0]===t}function S(e,t,n){var i=O.name.split("###"),r=i[1],o=i[2],s=C(e,t);u(s+"plugins/Overlay/client/client.js?v=1",function(){Piwik_Overlay_Client.initialize(s,n,r,o)})}function N(r,a){function l(e,t,n,i,r,o){if(!$t){var s;n&&(s=new Date,s.setTime(s.getTime()+n)),I.cookie=e+"="+H(t)+(n?";expires="+s.toGMTString():"")+";path="+(i||"/")+(r?";domain="+r:"")+(o?";secure":"")}}function c(e){if($t)return 0;var t=new RegExp("(^|;)[ ]*"+e+"=([^;]*)"),n=t.exec(I.cookie);return n?j(n[2]):0}function u(e){var t;return Et?(t=new RegExp("#.*"),e.replace(t,"")):e}function m(e,t){var n=h(t),i;return n?t:"/"===t.slice(0,1)?h(e)+"://"+p(e)+t:(e=u(e),i=e.indexOf("?"),i>=0&&(e=e.slice(0,i)),i=e.lastIndexOf("/"),i!==e.length-1&&(e=e.slice(0,i+1)),e+t)}function w(e){var t,n,i;for(t=0;t<kt.length;t++){if(n=b(kt[t].toLowerCase()),e===n)return!0;if("."===n.slice(0,1)){if(e===n.slice(1))return!0;if(i=e.length-n.length,i>0&&e.slice(i)===n)return!0}}return!1}function _(e,t){var n=new Image(1,1);n.onload=function(){B=0,"function"==typeof t&&t()},n.src=pt+(pt.indexOf("?")<0?"?":"&")+e}function C(t,n,i){e(i)&&null!==i||(i=!0);try{var r=O.XMLHttpRequest?new O.XMLHttpRequest:O.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null;r.open("POST",pt,!0),r.onreadystatechange=function(){4!==this.readyState||this.status>=200&&this.status<300||!i?"function"==typeof n&&n():_(t,n)},r.setRequestHeader("Content-Type",ht),r.send(t)}catch(o){i&&_(t,n)}}function N(e){var t=new Date,n=t.getTime()+e;(!E||n>E)&&(E=n)}function D(e){!ln&&Dt&&(ln=setTimeout(function t(){if(ln=null,!At()){var e=new Date,t=Dt-(e.getTime()-an);t=Math.min(Dt,t),D(t)}},e||Dt))}function A(){ln&&(clearTimeout(ln),ln=null)}function F(){At()||D()}function W(){A()}function V(){!sn&&Dt&&(sn=!0,o(O,"focus",F),o(O,"blur",W),D())}function G(e){var t=new Date,n=t.getTime();if(an=n,nn&&nn>n){var i=nn-n;return setTimeout(e,i),N(i+50),void(nn+=50)}if(nn===!1){var r=800;nn=n+r}e()}function X(e,t,n){!Lt&&e&&G(function(){"POST"===ut?C(e,n):_(e,n),N(t)}),sn?D():V()}function K(e){return Lt?!1:e&&e.length}function J(e,t){if(K(e)){var n='{"requests":["?'+e.join('","?')+'"]}';G(function(){C(n,null,!1),N(t)})}}function Q(e){return zt+e+"."+gt+"."+hn}function Z(){if($t)return"0";if(!e(P.cookieEnabled)){var t=Q("testcookie");return l(t,"1"),"1"===c(t)?"1":"0"}return P.cookieEnabled?"1":"0"}function ee(){hn=dn((Ot||ot)+(qt||"/")).slice(0,4)}function te(){var e=Q("cvar"),t=c(e);return t.length&&(t=JSON2.parse(t),n(t))?t:{}}function ne(){Ut===!1&&(Ut=te())}function ie(){return dn((P.userAgent||"")+(P.platform||"")+JSON2.stringify(Zt)+(new Date).getTime()+Math.random()).slice(0,16)}function re(){var e=new Date,t=Math.round(e.getTime()/1e3),n=Q("id"),i=c(n),r,o;return i?(r=i.split("."),r.unshift("0"),bt.length&&(r[1]=bt),r):(o=bt.length?bt:"0"===Z()?"":ie(),r=["1",o,t,0,t,"",""])}function oe(){var t=re(),n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5];e(t[6])||(t[6]="");var l=t[6];return{newVisitor:n,uuid:i,createTs:r,visitCount:o,currentVisitTs:s,lastVisitTs:a,lastEcommerceOrderTs:l}}function se(){var e=new Date,t=e.getTime(),n=oe().createTs,i=parseInt(n,10),r=1e3*i+jt-t;return r}function ae(t){if(gt){var n=new Date,i=Math.round(n.getTime()/1e3);e(t)||(t=oe());var r=t.uuid+"."+t.createTs+"."+t.visitCount+"."+i+"."+t.lastVisitTs+"."+t.lastEcommerceOrderTs;l(Q("id"),r,se(),qt,Ot)}}function le(){var e=c(Q("ref"));if(e.length)try{if(e=JSON2.parse(e),n(e))return e}catch(t){}return["","",0,""]}function ce(e,t,n){l(e,"",-86400,t,n)}function ue(e){var t="testvalue";return l("test",t,1e4,null,e),c("test")===t?(ce("test",null,e),!0):!1}function de(){var e=$t;$t=!1;var t=["id","ses","cvar","ref"],n,i;for(n=0;n<t.length;n++)i=Q(t[n]),0!==c(i)&&ce(i,qt,Ot);$t=e}function he(e){gt=e,ae()}function pe(e){if(e&&n(e)){var t=[],i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);var r={};t.sort();var o=t.length,s;for(s=0;o>s;s++)r[t[s]]=e[t[s]];return r}}function fe(){l(Q("ses"),"*",Ft,qt,Ot)}function me(n,i,r,o){function a(e,t){var n=JSON2.stringify(e);return n.length>2?"&"+t+"="+H(n):""}var d,h=new Date,m=Math.round(h.getTime()/1e3),g,v,b=1024,y,x,k=Ut,_=Q("ses"),C=Q("ref"),T=Q("cvar"),S=c(_),N=le(),D=yt||st,A,E;if($t&&de(),Lt)return"";var M=oe();e(o)||(o="");var P=I.characterSet||I.charset;if(P&&"utf-8"!==P.toLowerCase()||(P=null),A=N[0],E=N[1],g=N[2],v=N[3],!S){var z=Ft/1e3;if((!M.lastVisitTs||m-M.lastVisitTs>z)&&(M.visitCount++,M.lastVisitTs=M.currentVisitTs),!Ht||!A.length){for(d in It)if(Object.prototype.hasOwnProperty.call(It,d)&&(A=f(D,It[d]),A.length))break;for(d in Pt)if(Object.prototype.hasOwnProperty.call(Pt,d)&&(E=f(D,Pt[d]),E.length))break}y=p(at),x=v.length?p(v):"",!y.length||w(y)||Ht&&x.length&&!w(x)||(v=at),(v.length||A.length)&&(g=m,N=[A,E,g,u(v.slice(0,b))],l(C,JSON2.stringify(N),Wt,qt,Ot))}n+="&idsite="+gt+"&rec=1&r="+String(Math.random()).slice(2,8)+"&h="+h.getHours()+"&m="+h.getMinutes()+"&s="+h.getSeconds()+"&url="+H(u(D))+(at.length?"&urlref="+H(u(at)):"")+(vt&&vt.length?"&uid="+H(vt):"")+"&_id="+M.uuid+"&_idts="+M.createTs+"&_idvc="+M.visitCount+"&_idn="+M.newVisitor+(A.length?"&_rcn="+H(A):"")+(E.length?"&_rck="+H(E):"")+"&_refts="+g+"&_viewts="+M.lastVisitTs+(String(M.lastEcommerceOrderTs).length?"&_ects="+M.lastEcommerceOrderTs:"")+(String(v).length?"&_ref="+H(u(v.slice(0,b))):"")+(P?"&cs="+H(P):"")+"&send_image=0";for(d in Zt)Object.prototype.hasOwnProperty.call(Zt,d)&&(n+="&"+d+"="+Zt[d]);i?n+="&data="+H(JSON2.stringify(i)):Mt&&(n+="&data="+H(JSON2.stringify(Mt)));var O=pe(Xt),L=pe(Kt);if(n+=a(O,"cvar"),n+=a(L,"e_cvar"),Ut){n+=a(Ut,"_cvar");for(d in k)Object.prototype.hasOwnProperty.call(k,d)&&(""===Ut[d][0]||""===Ut[d][1])&&delete Ut[d];Yt&&l(T,JSON2.stringify(Ut),Ft,qt,Ot)}return Bt&&(Vt?n+="&gt_ms="+Vt:q&&q.timing&&q.timing.requestStart&&q.timing.responseEnd&&(n+="&gt_ms="+(q.timing.responseEnd-q.timing.requestStart))),M.lastEcommerceOrderTs=e(o)&&String(o).length?o:M.lastEcommerceOrderTs,ae(M),fe(),n+=s(r),mt.length&&(n+="&"+mt),t(Gt)&&(n=Gt(n)),n}function ge(t,n,i,r,o,s){var a="idgoal=0",l,c=new Date,u=[],d;if(String(t).length&&(a+="&ec_id="+H(t),l=Math.round(c.getTime()/1e3)),a+="&revenue="+n,String(i).length&&(a+="&ec_st="+i),String(r).length&&(a+="&ec_tx="+r),String(o).length&&(a+="&ec_sh="+o),String(s).length&&(a+="&ec_dt="+s),Qt){for(d in Qt)Object.prototype.hasOwnProperty.call(Qt,d)&&(e(Qt[d][1])||(Qt[d][1]=""),e(Qt[d][2])||(Qt[d][2]=""),e(Qt[d][3])&&0!==String(Qt[d][3]).length||(Qt[d][3]=0),e(Qt[d][4])&&0!==String(Qt[d][4]).length||(Qt[d][4]=1),u.push(Qt[d]));a+="&ec_items="+H(JSON2.stringify(u))}a=me(a,Mt,"ecommerce",l),X(a,St)}function ve(t,n,i,r,o,s){String(t).length&&e(n)&&ge(t,n,i,r,o,s)}function be(t){e(t)&&ge("",t,"","","","")}function ye(e,t){var n=new Date,i=me("action_name="+H(y(e||wt)),t,"log");X(i,St)}function we(e,t){var n,i="(^| )(piwik[_-]"+t;if(e)for(n=0;n<e.length;n++)i+="|"+e[n];return i+=")( |$)",new RegExp(i)}function xe(e){return pt&&e&&0===String(e).indexOf(pt)}function ke(e,t,n,i){if(xe(t))return 0;var r=we(Ct,"download"),o=we(Tt,"link"),s=new RegExp("\\.("+xt.join("|")+")([?&#]|$)","i");return o.test(e)?"link":i||r.test(e)||s.test(t)?"download":n?0:"link"}function _e(t){var n;for(n=t.parentNode;null!==n&&e(n)&&!Y.isLinkElement(t);)t=n,n=t.parentNode;return t}function Ce(t){if(t=_e(t),Y.hasNodeAttribute(t,"href")&&e(t.href)){var n=Y.getAttributeValueFromNode(t,"href");if(!xe(n)){var i=t.hostname||p(t.href),r=i.toLowerCase(),o=t.href.replace(i,r),s=new RegExp("^(javascript|vbscript|jscript|mocha|livescript|ecmascript|mailto):","i");if(!s.test(o)){var a=ke(t.className,o,w(r),Y.hasNodeAttribute(t,"download"));if(a)return{type:a,href:o}}}}}function Te(e,t,n,i){var r=U.buildInteractionRequestParams(e,t,n,i);if(r)return me(r,null,"contentInteraction")}function Se(t,n,i,r,o){if(e(t)){if(xe(t))return t;var s=U.toAbsoluteUrl(t),a="redirecturl="+H(s)+"&";a+=Te(n,i,r,o||t);var l="&";return pt.indexOf("?")<0&&(l="?"),pt+l+a}}function Ne(e,t){if(!e||!t)return!1;var n=U.findTargetNode(e);return U.shouldIgnoreInteraction(n)?!1:(n=U.findTargetNodeNoDefault(e),n&&!x(n,t)?!1:!0)}function De(e,t,n){if(e){var i=U.findParentContentNode(e);if(i&&Ne(i,e)){var r=U.buildContentBlock(i);if(r)return!r.target&&n&&(r.target=n),U.buildInteractionRequestParams(t,r.name,r.piece,r.target)}}}function Ae(e){if(!en||!en.length)return!1;var t,n;for(t=0;t<en.length;t++)if(n=en[t],n&&n.name===e.name&&n.piece===e.piece&&n.target===e.target)return!0;return!1}function Ee(e){if(!e)return!1;var t=U.findTargetNode(e);if(!t||U.shouldIgnoreInteraction(t))return!1;var n=Ce(t);if(on&&n&&n.type)return!1;if(Y.isLinkElement(t)&&Y.hasNodeAttributeWithValue(t,"href")){var i=String(Y.getAttributeValueFromNode(t,"href"));if(0===i.indexOf("#"))return!1;if(xe(i))return!0;if(!U.isUrlToCurrentDomain(i))return!1;var r=U.buildContentBlock(e);if(!r)return;var o=r.name,s=r.piece,a=r.target;(!Y.hasNodeAttributeWithValue(t,U.CONTENT_TARGET_ATTR)||t.wasContentTargetAttrReplaced)&&(t.wasContentTargetAttrReplaced=!0,a=U.toAbsoluteUrl(i),Y.setAnyAttribute(t,U.CONTENT_TARGET_ATTR,a));var l=Se(i,"click",o,s,a);return U.setHrefAttribute(t,l),!0}return!1}function Me(e){if(e&&e.length){var t;for(t=0;t<e.length;t++)Ee(e[t])}}function Ie(e){return function(t){if(e){var n=U.findParentContentNode(e),i;if(t&&(i=t.target||t.srcElement),i||(i=e),Ne(n,i)){if(N(St),Y.isLinkElement(e)&&Y.hasNodeAttributeWithValue(e,"href")&&Y.hasNodeAttributeWithValue(e,U.CONTENT_TARGET_ATTR)){var r=Y.getAttributeValueFromNode(e,"href");!xe(r)&&e.wasContentTargetAttrReplaced&&Y.setAnyAttribute(e,U.CONTENT_TARGET_ATTR,"")}var o=Ce(e);if(rn&&o&&o.type)return o.type;if(Ee(n))return"href";var s=U.buildContentBlock(n);if(s){var a=s.name,l=s.piece,c=s.target,u=Te("click",a,l,c);return X(u,St),u}}}}}function Pe(e){if(e&&e.length){var t,n;for(t=0;t<e.length;t++)n=U.findTargetNode(e[t]),n&&!n.contentInteractionTrackingSetupDone&&(n.contentInteractionTrackingSetupDone=!0,o(n,"click",Ie(n)))}}function ze(e,t){if(!e||!e.length)return[];var n,i;for(n=0;n<e.length;n++)Ae(e[n])?(e.splice(n,1),n--):en.push(e[n]);if(!e||!e.length)return[];Me(t),Pe(t);var r=[];for(n=0;n<e.length;n++)i=me(U.buildImpressionRequestParams(e[n].name,e[n].piece,e[n].target),void 0,"contentImpressions"),r.push(i);return r}function Oe(e){var t=U.collectContent(e);return ze(t,e)}function qe(e){if(!e||!e.length)return[];var t;for(t=0;t<e.length;t++)U.isNodeVisible(e[t])||(e.splice(t,1),t--);return e&&e.length?Oe(e):[]}function $e(e,t,n){var i=U.buildImpressionRequestParams(e,t,n);return me(i,null,"contentImpression")}function Le(e,t){if(e){var n=U.findParentContentNode(e),i=U.buildContentBlock(n);if(i)return t||(t="Unknown"),Te(t,i.name,i.piece,i.target)}}function Re(t,n,i,r){return"e_c="+H(t)+"&e_a="+H(n)+(e(i)?"&e_n="+H(i):"")+(e(r)?"&e_v="+H(r):"")}function He(e,t,n,i,r){if(0===String(e).length||0===String(t).length)return!1;var o=me(Re(e,t,n,i),r,"event");X(o,St)}function je(t,n,i,r){var o=me("search="+H(t)+(n?"&search_cat="+H(n):"")+(e(i)?"&search_count="+i:""),r,"sitesearch");X(o,St)}function Fe(e,t,n){var i=me("idgoal="+e+(t?"&revenue="+t:""),n,"goal");X(i,St)}function We(e,t,n,i,r){var o=t+"="+H(u(e)),s=De(r,"click",e);s&&(o+="&"+s);var a=me(o,n,"link");X(a,i?0:St,i)}function Be(e,t){return""!==e?e+t.charAt(0).toUpperCase()+t.slice(1):t}function Ve(e){var t,n,i=["","webkit","ms","moz"],r;if(!Rt)for(n=0;n<i.length;n++)if(r=i[n],Object.prototype.hasOwnProperty.call(I,Be(r,"hidden"))){"prerender"===I[Be(r,"visibilityState")]&&(t=!0);break}return t?void o(I,r+"visibilitychange",function s(){I.removeEventListener(r+"visibilitychange",s,!1),e()}):void e()}function Ye(e){"complete"===I.readyState?e():O.addEventListener?O.addEventListener("load",e):O.attachEvent&&O.attachEvent("onLoad",e)}function Ue(e){var t=!1;t=I.attachEvent?"complete"===I.readyState:"loading"!==I.readyState,t?e():I.addEventListener?I.addEventListener("DOMContentLoaded",e):I.attachEvent&&I.attachEvent("onreadystatechange",e)}function Ge(e){var t=Ce(e);t&&t.type&&(t.href=j(t.href),We(t.href,t.type,void 0,null,e))}function Xe(){return I.all&&!I.addEventListener}function Ke(e){var t=e.which,n=typeof e.button;return t||"undefined"===n||(Xe()?1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2):0===e.button||"0"===e.button?t=1:1&e.button?t=2:2&e.button&&(t=3)),t}function Je(e){switch(Ke(e)){case 1:return"left";case 2:return"middle";case 3:return"right"}}function Qe(e){return e.target||e.srcElement}function Ze(e){return function(t){t=t||O.event;var n=Je(t),i=Qe(t);if("click"===t.type){var r=!1;e&&"middle"===n&&(r=!0),i&&!r&&Ge(i)}else"mousedown"===t.type?"middle"===n&&i?(cn=n,un=i):cn=un=null:"mouseup"===t.type?(n===cn&&i===un&&Ge(i),cn=un=null):"contextmenu"===t.type&&Ge(i)}}function et(e,t){o(e,"click",Ze(t),!1),t&&(o(e,"mouseup",Ze(t),!1),o(e,"mousedown",Ze(t),!1),o(e,"contextmenu",Ze(t),!1))}function tt(e){if(!rn){rn=!0;var t,n=we(_t,"ignore"),i=I.links;if(i)for(t=0;t<i.length;t++)n.test(i[t].className)||et(i[t],e)}}function nt(e,t,n){function i(){r=!0}if(tn)return!0;tn=!0;var r=!1,o,s;Ye(function(){function a(e){setTimeout(function(){tn&&(r=!1,n.trackVisibleContentImpressions(),a(e))},e)}function l(e){setTimeout(function(){tn&&(r&&(r=!1,n.trackVisibleContentImpressions()),l(e))},e)}if(e){for(o=["scroll","resize"],s=0;s<o.length;s++)I.addEventListener?I.addEventListener(o[s],i):O.attachEvent("on"+o[s],i);l(100)}t&&t>0&&(t=parseInt(t,10),a(t))})}function it(){var n,i,r={pdf:"application/pdf",qt:"video/quicktime",realp:"audio/x-pn-realaudio-plugin",wma:"application/x-mplayer2",dir:"application/x-director",fla:"application/x-shockwave-flash",java:"application/x-java-vm",gears:"application/x-googlegears",ag:"application/x-silverlight"},o=O.devicePixelRatio||1;if(!new RegExp("MSIE").test(P.userAgent)){if(P.mimeTypes&&P.mimeTypes.length)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=P.mimeTypes[r[n]],Zt[n]=i&&i.enabledPlugin?"1":"0");"unknown"!=typeof navigator.javaEnabled&&e(P.javaEnabled)&&P.javaEnabled()&&(Zt.java="1"),t(O.GearsFactory)&&(Zt.gears="1"),Zt.cookie=Z()}Zt.res=z.width*o+"x"+z.height*o}var rt=v(I.domain,O.location.href,d()),ot=b(rt[0]),st=j(rt[1]),at=j(rt[2]),lt=!1,ct="GET",ut=ct,dt="application/x-www-form-urlencoded; charset=UTF-8",ht=dt,pt=r||"",ft="",mt="",gt=a||"",vt="",bt="",yt,wt=I.title,xt=["7z","aac","apk","arc","arj","asf","asx","avi","azw3","bin","csv","deb","dmg","doc","docx","epub","exe","flv","gif","gz","gzip","hqx","ibooks","jar","jpg","jpeg","js","mobi","mp2","mp3","mp4","mpg","mpeg","mov","movie","msi","msp","odb","odf","odg","ods","odt","ogg","ogv","pdf","phps","png","ppt","pptx","qt","qtm","ra","ram","rar","rpm","sea","sit","tar","tbz","tbz2","bz","bz2","tgz","torrent","txt","wav","wma","wmv","wpd","xls","xlsx","xml","z","zip"],kt=[ot],_t=[],Ct=[],Tt=[],St=500,Nt,Dt,At,Et,Mt,It=["pk_campaign","piwik_campaign","utm_campaign","utm_source","utm_medium"],Pt=["pk_kwd","piwik_kwd","utm_term"],zt="_pk_",Ot,qt,$t=!1,Lt,Rt,Ht,jt=339552e5,Ft=18e5,Wt=15768e6,Bt=!0,Vt=0,Yt=!1,Ut=!1,Gt,Xt={},Kt={},Jt=200,Qt={},Zt={},en=[],tn=!1,nn=!1,rn=!1,on=!1,sn=!1,an=null,ln,cn,un,dn=g,hn;return At=function pn(){var e=new Date;if(an+Dt<=e.getTime()){var t=me("ping=1",null,"ping");return X(t,St),!0}return!1},it(),ee(),ae(),{getVisitorId:function(){return oe().uuid},getVisitorInfo:function(){return re()},getAttributionInfo:function(){return le()},getAttributionCampaignName:function(){return le()[0]},getAttributionCampaignKeyword:function(){return le()[1]},getAttributionReferrerTimestamp:function(){return le()[2]},getAttributionReferrerUrl:function(){return le()[3]},setTrackerUrl:function(e){pt=e},getTrackerUrl:function(){return pt},getSiteId:function(){return gt},setSiteId:function(e){he(e)},setUserId:function(t){e(t)&&t.length&&(vt=t,bt=dn(vt).substr(0,16))},getUserId:function(){return vt},setCustomData:function(e,t){n(e)?Mt=e:(Mt||(Mt={}),Mt[e]=t)},getCustomData:function(){return Mt},setCustomRequestProcessing:function(e){Gt=e},appendToTrackingUrl:function(e){mt=e},getRequest:function(e){return me(e)},addPlugin:function(e,t){M[e]=t},setCustomVariable:function(t,n,r,o){var s;e(o)||(o="visit"),e(n)&&(e(r)||(r=""),t>0&&(n=i(n)?n:String(n),r=i(r)?r:String(r),s=[n.slice(0,Jt),r.slice(0,Jt)],"visit"===o||2===o?(ne(),Ut[t]=s):"page"===o||3===o?Xt[t]=s:"event"===o&&(Kt[t]=s)))},getCustomVariable:function(t,n){var i;return e(n)||(n="visit"),"page"===n||3===n?i=Xt[t]:"event"===n?i=Kt[t]:("visit"===n||2===n)&&(ne(),i=Ut[t]),!e(i)||i&&""===i[0]?!1:i},deleteCustomVariable:function(e,t){this.getCustomVariable(e,t)&&this.setCustomVariable(e,"","",t)},storeCustomVariablesInCookie:function(){Yt=!0},setLinkTrackingTimer:function(e){St=e},setDownloadExtensions:function(e){i(e)&&(e=e.split("|")),xt=e},addDownloadExtensions:function(e){var t;for(i(e)&&(e=e.split("|")),t=0;t<e.length;t++)xt.push(e[t])},removeDownloadExtensions:function(e){var t,n=[];for(i(e)&&(e=e.split("|")),t=0;t<xt.length;t++)-1===k(e,xt[t])&&n.push(xt[t]);xt=n},setDomains:function(e){kt=i(e)?[e]:e,kt.push(ot)},setIgnoreClasses:function(e){_t=i(e)?[e]:e},setRequestMethod:function(e){ut=e||ct},setRequestContentType:function(e){ht=e||dt},setReferrerUrl:function(e){at=e},setCustomUrl:function(e){yt=m(st,e)},setDocumentTitle:function(e){wt=e},setAPIUrl:function(e){ft=e},setDownloadClasses:function(e){Ct=i(e)?[e]:e},setLinkClasses:function(e){Tt=i(e)?[e]:e},setCampaignNameKey:function(e){It=i(e)?[e]:e},setCampaignKeywordKey:function(e){Pt=i(e)?[e]:e},discardHashTag:function(e){Et=e},setCookieNamePrefix:function(e){zt=e,Ut=te()},setCookieDomain:function(e){var t=b(e);ue(t)&&(Ot=t,ee())},setCookiePath:function(e){qt=e,ee()},setVisitorCookieTimeout:function(e){jt=1e3*e},setSessionCookieTimeout:function(e){Ft=1e3*e},setReferralCookieTimeout:function(e){Wt=1e3*e},setConversionAttributionFirstReferrer:function(e){Ht=e},disableCookies:function(){$t=!0,Zt.cookie="0",gt&&de()},deleteCookies:function(){de()},setDoNotTrack:function(e){var t=P.doNotTrack||P.msDoNotTrack;Lt=e&&("yes"===t||"1"===t),Lt&&this.disableCookies()},addListener:function(e,t){et(e,t)},enableLinkTracking:function(e){on=!0,L?tt(e):R.push(function(){tt(e)})},enableJSErrorTracking:function(){if(!lt){lt=!0;var e=O.onerror;O.onerror=function(t,n,i,r,o){return Ve(function(){var e="JavaScript Errors",o=n+":"+i;r&&(o+=":"+r),He(e,o,t)}),e?e(t,n,i,r,o):!1}}},disablePerformanceTracking:function(){Bt=!1},setGenerationTimeMs:function(e){Vt=parseInt(e,10)},enableHeartBeatTimer:function(e){e=Math.max(e,1),Dt=1e3*(e||15),null!==an&&V()},killFrame:function(){O.location!==O.top.location&&(O.top.location=O.location)},redirectFile:function(e){"file:"===O.location.protocol&&(O.location=e)},setCountPreRendered:function(e){Rt=e},trackGoal:function(e,t,n){Ve(function(){Fe(e,t,n)})},trackLink:function(e,t,n,i){Ve(function(){We(e,t,n,i)})},trackPageView:function(e,t){en=[],Ve(T(gt)?function(){S(pt,ft,gt)}:function(){ye(e,t)})},trackAllContentImpressions:function(){T(gt)||Ve(function(){Ue(function(){var e=U.findContentNodes(),t=Oe(e);J(t,St)})})},trackVisibleContentImpressions:function(t,n){T(gt)||(e(t)||(t=!0),e(n)||(n=750),nt(t,n,this),Ve(function(){Ye(function(){var e=U.findContentNodes(),t=qe(e);J(t,St)})}))},trackContentImpression:function(e,t,n){T(gt)||e&&(t=t||"Unknown",Ve(function(){var i=$e(e,t,n);X(i,St)}))},trackContentImpressionsWithinNode:function(e){!T(gt)&&e&&Ve(function(){tn?Ye(function(){var t=U.findContentNodesWithinNode(e),n=qe(t);J(n,St)}):Ue(function(){var t=U.findContentNodesWithinNode(e),n=Oe(t);J(n,St)})})},trackContentInteraction:function(e,t,n,i){T(gt)||e&&t&&(n=n||"Unknown",Ve(function(){var r=Te(e,t,n,i);X(r,St)}))},trackContentInteractionNode:function(e,t){!T(gt)&&e&&Ve(function(){var n=Le(e,t);X(n,St)})},trackEvent:function(e,t,n,i){Ve(function(){He(e,t,n,i)})},trackSiteSearch:function(e,t,n){Ve(function(){je(e,t,n)})},setEcommerceView:function(t,n,i,r){e(i)&&i.length?i instanceof Array&&(i=JSON2.stringify(i)):i="",Xt[5]=["_pkc",i],e(r)&&String(r).length&&(Xt[2]=["_pkp",r]),(e(t)&&t.length||e(n)&&n.length)&&(e(t)&&t.length&&(Xt[3]=["_pks",t]),e(n)&&n.length||(n=""),Xt[4]=["_pkn",n])},addEcommerceItem:function(e,t,n,i,r){e.length&&(Qt[e]=[e,t,n,i,r])},trackEcommerceOrder:function(e,t,n,i,r,o){ve(e,t,n,i,r,o)},trackEcommerceCartUpdate:function(e){be(e)}}}function D(){return{push:r}}function A(e,t){var n={},i,o;for(i=0;i<t.length;i++){var s=t[i];for(n[s]=1,o=0;o<e.length;o++)if(e[o]&&e[o][0]){var a=e[o][0];s===a&&(r(e[o]),delete e[o],n[a]>1&&void 0!==console&&console&&console.error&&console.error("The method "+a+' is registered more than once in "paq" variable. Only the last call has an effect. Please have a look at the multiple Piwik trackers documentation: http://developer.piwik.org/guides/tracking-javascript-guide#multiple-piwik-trackers'),n[a]++)}}return e}var E,M={},I=document,P=navigator,z=screen,O=window,q=O.performance||O.mozPerformance||O.msPerformance||O.webkitPerformance,L=!1,R=[],H=O.encodeURIComponent,j=O.decodeURIComponent,F=unescape,W,B,V,Y={htmlCollectionToArray:function(e){var t=[],n;if(!e||!e.length)return t;for(n=0;n<e.length;n++)t.push(e[n]);return t},find:function(e){if(!document.querySelectorAll||!e)return[];var t=document.querySelectorAll(e);return this.htmlCollectionToArray(t)},findMultiple:function(e){if(!e||!e.length)return[];var t,n,i=[];for(t=0;t<e.length;t++)n=this.find(e[t]),i=i.concat(n);return i=this.makeNodesUnique(i)},findNodesByTagName:function(e,t){if(!e||!t||!e.getElementsByTagName)return[];var n=e.getElementsByTagName(t);return this.htmlCollectionToArray(n)},makeNodesUnique:function(e){var t=[].concat(e);if(e.sort(function(e,n){if(e===n)return 0;var i=k(t,e),r=k(t,n);return i===r?0:i>r?-1:1}),e.length<=1)return e;var n=0,i=0,r=[],o;for(o=e[n++];o;)o===e[n]&&(i=r.push(n)),o=e[n++]||null;for(;i--;)e.splice(r[i],1);return e},getAttributeValueFromNode:function(e,t){if(this.hasNodeAttribute(e,t)){if(e&&e.getAttribute)return e.getAttribute(t);if(e&&e.attributes){var n=typeof e.attributes[t];if("undefined"!==n){if(e.attributes[t].value)return e.attributes[t].value;if(e.attributes[t].nodeValue)return e.attributes[t].nodeValue;var i,r=e.attributes;if(r){for(i=0;i<r.length;i++)if(r[i].nodeName===t)return r[i].nodeValue;return null}}}}},hasNodeAttributeWithValue:function(e,t){var n=this.getAttributeValueFromNode(e,t);return!!n},hasNodeAttribute:function(e,t){if(e&&e.hasAttribute)return e.hasAttribute(t);if(e&&e.attributes){var n=typeof e.attributes[t];return"undefined"!==n}return!1},hasNodeCssClass:function(e,t){if(e&&t&&e.className){var n="string"==typeof e.className?e.className.split(" "):[];if(-1!==k(n,t))return!0}return!1},findNodesHavingAttribute:function(e,t,n){if(n||(n=[]),!e||!t)return n;var i=w(e);if(!i||!i.length)return n;var r,o;for(r=0;r<i.length;r++)o=i[r],this.hasNodeAttribute(o,t)&&n.push(o),n=this.findNodesHavingAttribute(o,t,n);return n},findFirstNodeHavingAttribute:function(e,t){if(e&&t){if(this.hasNodeAttribute(e,t))return e;var n=this.findNodesHavingAttribute(e,t);return n&&n.length?n[0]:void 0}},findFirstNodeHavingAttributeWithValue:function(e,t){if(e&&t){if(this.hasNodeAttributeWithValue(e,t))return e;var n=this.findNodesHavingAttribute(e,t);if(n&&n.length){var i;for(i=0;i<n.length;i++)if(this.getAttributeValueFromNode(n[i],t))return n[i]}}},findNodesHavingCssClass:function(e,t,n){if(n||(n=[]),!e||!t)return n;if(e.getElementsByClassName){var i=e.getElementsByClassName(t);return this.htmlCollectionToArray(i)}var r=w(e);if(!r||!r.length)return[];var o,s;for(o=0;o<r.length;o++)s=r[o],this.hasNodeCssClass(s,t)&&n.push(s),n=this.findNodesHavingCssClass(s,t,n);return n},findFirstNodeHavingClass:function(e,t){if(e&&t){if(this.hasNodeCssClass(e,t))return e;var n=this.findNodesHavingCssClass(e,t);return n&&n.length?n[0]:void 0}},isLinkElement:function(e){if(!e)return!1;var t=String(e.nodeName).toLowerCase(),n=["a","area"],i=k(n,t);
return-1!==i},setAnyAttribute:function(e,t,n){e&&t&&(e.setAttribute?e.setAttribute(t,n):e[t]=n)}},U={CONTENT_ATTR:"data-track-content",CONTENT_CLASS:"piwikTrackContent",CONTENT_NAME_ATTR:"data-content-name",CONTENT_PIECE_ATTR:"data-content-piece",CONTENT_PIECE_CLASS:"piwikContentPiece",CONTENT_TARGET_ATTR:"data-content-target",CONTENT_TARGET_CLASS:"piwikContentTarget",CONTENT_IGNOREINTERACTION_ATTR:"data-content-ignoreinteraction",CONTENT_IGNOREINTERACTION_CLASS:"piwikContentIgnoreInteraction",location:void 0,findContentNodes:function(){var e="."+this.CONTENT_CLASS,t="["+this.CONTENT_ATTR+"]",n=Y.findMultiple([e,t]);return n},findContentNodesWithinNode:function(e){if(!e)return[];var t=Y.findNodesHavingCssClass(e,this.CONTENT_CLASS),n=Y.findNodesHavingAttribute(e,this.CONTENT_ATTR);if(n&&n.length){var i;for(i=0;i<n.length;i++)t.push(n[i])}return Y.hasNodeAttribute(e,this.CONTENT_ATTR)?t.push(e):Y.hasNodeCssClass(e,this.CONTENT_CLASS)&&t.push(e),t=Y.makeNodesUnique(t)},findParentContentNode:function(e){if(e)for(var t=e,n=0;t&&t!==I&&t.parentNode;){if(Y.hasNodeAttribute(t,this.CONTENT_ATTR))return t;if(Y.hasNodeCssClass(t,this.CONTENT_CLASS))return t;if(t=t.parentNode,n>1e3)break;n++}},findPieceNode:function(e){var t;return t=Y.findFirstNodeHavingAttribute(e,this.CONTENT_PIECE_ATTR),t||(t=Y.findFirstNodeHavingClass(e,this.CONTENT_PIECE_CLASS)),t?t:e},findTargetNodeNoDefault:function(e){if(e){var t=Y.findFirstNodeHavingAttributeWithValue(e,this.CONTENT_TARGET_ATTR);return t?t:(t=Y.findFirstNodeHavingAttribute(e,this.CONTENT_TARGET_ATTR))?t:(t=Y.findFirstNodeHavingClass(e,this.CONTENT_TARGET_CLASS),t?t:void 0)}},findTargetNode:function(e){var t=this.findTargetNodeNoDefault(e);return t?t:e},findContentName:function(e){if(e){var t=Y.findFirstNodeHavingAttributeWithValue(e,this.CONTENT_NAME_ATTR);if(t)return Y.getAttributeValueFromNode(t,this.CONTENT_NAME_ATTR);var n=this.findContentPiece(e);if(n)return this.removeDomainIfIsInLink(n);if(Y.hasNodeAttributeWithValue(e,"title"))return Y.getAttributeValueFromNode(e,"title");var i=this.findPieceNode(e);if(Y.hasNodeAttributeWithValue(i,"title"))return Y.getAttributeValueFromNode(i,"title");var r=this.findTargetNode(e);return Y.hasNodeAttributeWithValue(r,"title")?Y.getAttributeValueFromNode(r,"title"):void 0}},findContentPiece:function(e){if(e){var t=Y.findFirstNodeHavingAttributeWithValue(e,this.CONTENT_PIECE_ATTR);if(t)return Y.getAttributeValueFromNode(t,this.CONTENT_PIECE_ATTR);var n=this.findPieceNode(e),i=this.findMediaUrlInNode(n);return i?this.toAbsoluteUrl(i):void 0}},findContentTarget:function(e){if(e){var t=this.findTargetNode(e);if(Y.hasNodeAttributeWithValue(t,this.CONTENT_TARGET_ATTR))return Y.getAttributeValueFromNode(t,this.CONTENT_TARGET_ATTR);var n;if(Y.hasNodeAttributeWithValue(t,"href"))return n=Y.getAttributeValueFromNode(t,"href"),this.toAbsoluteUrl(n);var i=this.findPieceNode(e);return Y.hasNodeAttributeWithValue(i,"href")?(n=Y.getAttributeValueFromNode(i,"href"),this.toAbsoluteUrl(n)):void 0}},isSameDomain:function(e){if(!e||!e.indexOf)return!1;if(0===e.indexOf(this.getLocation().origin))return!0;var t=e.indexOf(this.getLocation().host);return 8>=t&&t>=0?!0:!1},removeDomainIfIsInLink:function(e){var t="^https?://[^/]+",n="^.*//[^/]+";return e&&e.search&&-1!==e.search(new RegExp(t))&&this.isSameDomain(e)&&(e=e.replace(new RegExp(n),""),e||(e="/")),e},findMediaUrlInNode:function(e){if(e){var t=["img","embed","video","audio"],n=e.nodeName.toLowerCase();if(-1!==k(t,n)&&Y.findFirstNodeHavingAttributeWithValue(e,"src")){var i=Y.findFirstNodeHavingAttributeWithValue(e,"src");return Y.getAttributeValueFromNode(i,"src")}if("object"===n&&Y.hasNodeAttributeWithValue(e,"data"))return Y.getAttributeValueFromNode(e,"data");if("object"===n){var r=Y.findNodesByTagName(e,"param");if(r&&r.length){var o;for(o=0;o<r.length;o++)if("movie"===Y.getAttributeValueFromNode(r[o],"name")&&Y.hasNodeAttributeWithValue(r[o],"value"))return Y.getAttributeValueFromNode(r[o],"value")}var s=Y.findNodesByTagName(e,"embed");if(s&&s.length)return this.findMediaUrlInNode(s[0])}}},trim:function(e){return e&&String(e)===e?e.replace(/^\s+|\s+$/g,""):e},isOrWasNodeInViewport:function(e){if(!e||!e.getBoundingClientRect||1!==e.nodeType)return!0;var t=e.getBoundingClientRect(),n=I.documentElement||{},i=t.top<0;i&&e.offsetTop&&(i=e.offsetTop+t.height>0);var r=n.clientWidth;O.innerWidth&&r>O.innerWidth&&(r=O.innerWidth);var o=n.clientHeight;return O.innerHeight&&o>O.innerHeight&&(o=O.innerHeight),(t.bottom>0||i)&&t.right>0&&t.left<r&&(t.top<o||i)},isNodeVisible:function(e){var t=_(e),n=this.isOrWasNodeInViewport(e);return t&&n},buildInteractionRequestParams:function(e,t,n,i){var r="";return e&&(r+="c_i="+H(e)),t&&(r&&(r+="&"),r+="c_n="+H(t)),n&&(r&&(r+="&"),r+="c_p="+H(n)),i&&(r&&(r+="&"),r+="c_t="+H(i)),r},buildImpressionRequestParams:function(e,t,n){var i="c_n="+H(e)+"&c_p="+H(t);return n&&(i+="&c_t="+H(n)),i},buildContentBlock:function(e){if(e){var t=this.findContentName(e),n=this.findContentPiece(e),i=this.findContentTarget(e);return t=this.trim(t),n=this.trim(n),i=this.trim(i),{name:t||"Unknown",piece:n||"Unknown",target:i||""}}},collectContent:function(t){if(!t||!t.length)return[];var n=[],i,r;for(i=0;i<t.length;i++)r=this.buildContentBlock(t[i]),e(r)&&n.push(r);return n},setLocation:function(e){this.location=e},getLocation:function(){var e=this.location||O.location;return e.origin||(e.origin=e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")),e},toAbsoluteUrl:function(e){if((!e||String(e)!==e)&&""!==e)return e;if(""===e)return this.getLocation().href;if(-1!==e.search(/^\/\//))return this.getLocation().protocol+e;if(-1!==e.search(/:\/\//))return e;if(0===e.indexOf("#"))return this.getLocation().origin+this.getLocation().pathname+e;if(0===e.indexOf("?"))return this.getLocation().origin+this.getLocation().pathname+e;if(0===e.search("^[a-zA-Z]{2,11}:"))return e;if(-1!==e.search(/^\//))return this.getLocation().origin+e;var t="(.*/)",n=this.getLocation().origin+this.getLocation().pathname.match(new RegExp(t))[0];return n+e},isUrlToCurrentDomain:function(e){var t=this.toAbsoluteUrl(e);if(!t)return!1;var n=this.getLocation().origin;return n===t?!0:0===String(t).indexOf(n)?":"===String(t).substr(n.length,1)?!1:!0:!1},setHrefAttribute:function(e,t){e&&t&&Y.setAnyAttribute(e,"href",t)},shouldIgnoreInteraction:function(e){var t=Y.hasNodeAttribute(e,this.CONTENT_IGNOREINTERACTION_ATTR),n=Y.hasNodeCssClass(e,this.CONTENT_IGNOREINTERACTION_CLASS);return t||n}};o(O,"beforeunload",a,!1),c(),Date.prototype.getTimeAlias=Date.prototype.getTime,W=new N;var G=["disableCookies","setTrackerUrl","setAPIUrl","setCookiePath","setCookieDomain","setUserId","setSiteId","enableLinkTracking"];for(_paq=A(_paq,G),B=0;B<_paq.length;B++)_paq[B]&&r(_paq[B]);return _paq=new D,V={addPlugin:function(e,t){M[e]=t},getTracker:function(t,n){return e(n)||(n=this.getAsyncTracker().getSiteId()),e(t)||(t=this.getAsyncTracker().getTrackerUrl()),new N(t,n)},getAsyncTracker:function(){return W}},"function"==typeof define&&define.amd&&define("piwik",[],function(){return V}),V}()),window&&window.piwikAsyncInit&&window.piwikAsyncInit(),function(){var e=typeof AnalyticsTracker;"undefined"===e&&(AnalyticsTracker=Piwik)}(),"function"!=typeof piwik_log&&(piwik_log=function(b,f,d,g){function a(h){try{return eval("piwik_"+h)}catch(i){}}var c,e=Piwik.getTracker(d,f);e.setDocumentTitle(b),e.setCustomData(g),c=a("tracker_pause"),c&&e.setLinkTrackingTimer(c),c=a("download_extensions"),c&&e.setDownloadExtensions(c),c=a("hosts_alias"),c&&e.setDomains(c),c=a("ignore_classes"),c&&e.setIgnoreClasses(c),e.trackPageView(),a("install_tracker")&&(piwik_track=function(t,n,i,r){e.setSiteId(n),e.setTrackerUrl(i),e.trackLink(t,r)},e.enableLinkTracking())}),Smits={Common:{roundFloat:function(e,t){t||(t=4);var n=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return isNaN(n)?1e-4:n},apply:function(e,t){if(e&&"object"==typeof t)for(var n in t)e[n]=t[n];return e},addRaphEventHandler:function(e,t,n,i){try{e[t](function(e,t){return function(n,i){var r=t;r.e=n,e(r)}}(n,i))}catch(r){console.log("PhyloSVG eventHandler error: "+r)}}}},Smits.PhyloCanvas=function(e,t){this.w=t,this.scale=function(e){this.svg.svg1.scale(e)},this.getSvgSource=function(){if(Raphael.svg&&"function"==typeof XMLSerializer){var e=new XMLSerializer;return e.serializeToString(this.svg.svg1.canvas)}return!1},this.refresh=function(e){e||(e={}),this.svg||(this.svg=new Smits.PhyloCanvas.Render.SVG(this.w)),this.renderTree(),this.w.model.leafcount(this.data.root.visibleLeafCount),this.w.model.nodecount(this.data.root.nodeCount),e.treeonly||this.w.redraw(e)},this.loaddata=function(e){this.data&&(this.data.nodeIdIncrement=0,this.data.selectedNodeId=0),"object"!=typeof e&&(e={newick:e}),"object"!=typeof e.sequences&&(e.sequences=this.w.sequences),"object"!=typeof e.idnames&&(e.idnames={}),e.phyloxml?this.data=new Smits.PhyloCanvas.PhyloxmlParse(e,this.w):e.newick?this.data=new Smits.PhyloCanvas.NewickParse(e,this.w):e.json?this.data=new Smits.PhyloCanvas.JSONParse(e,this.w):this.w.dialog("error","No data given for tree import."),e.skiprender||this.refresh(e)},this.loaddata(e)},Smits.PhyloCanvas.Node=function(e,t,n){this.source="object"==typeof t?t:e?e.source:!1,this.w="object"==typeof n?n:e?e.w:!1,this.source&&this.w||console.log("Parse error: Tree node has a missing environment reference!"),this.id=++this.source.nodeIdIncrement,this.nwlevel=0,this.len=1e-4,this.lenFromRoot=0,this.name="",this.active=!1,this.color="black",this.type="",this.hidden=!1,this.canvx=0,this.canvy=0,this.miny=0,this.maxy=0,this.children=[],this.parent=t?e:!1,this.level=this.parent?this.parent.level+1:0,this.leafCount=0,this.nodeCount=0,this.visibleLeafCount=0,this.visibleChildCount=0,this.midBranchPosition=0},Smits.PhyloCanvas.Node.prototype={getNode:function(e,t){if("undefined"==typeof t&&(t=e,e="id"),this[e]==t)return this;for(var n in this.children){var i=this.children[n].getNode(e,t);if(i)return i}},countChildren:function(e){this.leafCount=0,this.visibleLeafCount=0,this.visibleChildCount=0,this.nodeCount=this.children.length?1:0;for(var t in this.children){var n=this.children[t];n.hidden||this.visibleChildCount++,n.children.length?(n.countChildren(e||n.hidden),this.nodeCount+=n.nodeCount,this.leafCount+=n.leafCount,e||(this.visibleLeafCount+=n.visibleLeafCount)):(n.hidden?"ancestral"!=n.type&&this.leafCount++:(this.leafCount++,e||this.visibleLeafCount++),n.edgeCircleHighlight=!1)}},getVisibleParentBranch:function(){return this.parent.visibleChildCount>1?this:this.parent.getVisibleParentBranch()},hideToggle:function(e){if(this.parent){var t=e?"hide"==e?!1:!0:this.hidden;t?this.hidden=!1:this.parent.visibleChildCount<2?this.getVisibleParentBranch().hidden=!0:this.hidden=!0,this.source.root.countChildren()}},showSubtree:function(e,t){for(var n in this.children){var i=this.children[n];i.children&&i.children.length?i.showSubtree(e,t):(e&&"ancestral"==i.type||!e&&"ancestral"!=i.type)&&(i.hidden=t?!0:!1)}this.hidden=!1,this.source.root.countChildren()},getMidbranchPosition:function(e){return this.midBranchPosition=e?this.children[0].visibleLeafCount-.5:this.children[0].visibleLeafCount+.5,0==this.children[0].visibleLeafCount&&(this.midBranchPosition+=1),this.children[1]&&"ancestral"==this.children[1].type&&!this.children[1].hidden?(this.midBranchPosition+=.5,(this.children[0].hidden&&!this.children[2].hidden||1==this.visibleChildCount)&&(this.midBranchPosition-=1)):1==this.visibleChildCount&&(this.midBranchPosition-=.5),this.midBranchPosition},highlight:function(e){var t=this;if(t.active="undefined"!=typeof e?e:!t.active,t.active)var n="orange",i=1,r="orange";else var n="red",i=0,r="";"stem"==t.type?t.svgEl.attr({fill:n,"fill-opacity":i}):(t.svgEl.attr({fill:"black"}),$(t.svgEl.node.firstChild).attr("fill",r))},removeAnc:function(){var e=this.children,t;for(var n in e)e[n].children.length?e[n].removeAnc():"ancestral"==e[n].type&&(e[n].hidden||(this.showanc=!0),t=n);return t&&e.splice(t,1),this},restoreAnc:function(){var e=this;for(var t in e.children)e.children[t].children.length&&e.children[t].restoreAnc();if(e.children.length>1&&"ancestral"!=e.children[1].type&&e.name&&this.w.sequences[e.name]){var n=e.children.shift(),i=new Smits.PhyloCanvas.Node(e,!0);i.lenFromRoot=e.lenFromRoot,i.type="ancestral",i.name=e.name,e.showanc?(i.hidden=!1,delete e.showanc):i.hidden=!0,e.children.unshift(n,i)}},nodeArray:function(){var e=this.removeAnc(),t=[],n=[];for(n.push({node:e,i:0});;){for(;n[n.length-1].i!=n[n.length-1].node.children.length;){var i=n[n.length-1];n.push({node:i.node.children[i.i],i:0})}if(t.push(n.pop().node),!n.length)break;n[n.length-1].i++}return this.restoreAnc(),t},flagPath:function(){var e=this;if(e!==e.source.root){for(;e.parent;)e=e.parent,e.altered=!0;this.w.model.treealtered(!0)}},setRoot:function(e,t){return e.parent.children=[],e.parent=!1,e.id=1,e.name||(e.name="Root"),e.len=1e-4,e.level=1,e.lenFromRoot=0,t||(e.altered=!0,this.w.model.treealtered()||this.w.model.treealtered(!0)),e.countChildren(),this.source.root=e,this.source.mLevel=this.source.mLenFromRoot=0,this.source.processNodes(),this.source.root},reRoot:function(e){var t,n,i,r,o,s,a,l,c=this,u=c.source.root.removeAnc();if("ancestral"==c.type&&(c=c.parent),c===u)return u;for((isNaN(e)||0>e||e>c.len)&&(e=c.len/2),i=c.len,c.flagPath(),o=l=new Smits.PhyloCanvas.Node(this),o.children[0]=c,o.children[0].len=e,r=c.parent,o.children[0].parent=o,t=0;t<r.children.length&&r.children[t]!=c;++t);for(o.children[1]=r,n=r.len,r.len=i-e,s=r.parent,r.parent=o;s;){for(a=s.parent,r.children[t]=s,t=0;t<s.children.length&&s.children[t]!=r;++t);s.parent=r,i=s.len,s.len=n,n=i,o=r,r=s,s=a}if(2==r.children.length){var d=r.children[1-t];for(t=0;t<o.children.length&&o.children[t]!=r;t++);d.len+=r.len||0,d.parent=o,o.children[t]=d}else r.children.splice(t,1);c.setRoot(l),this.w.model.addundo({name:"Reroot",type:"tree",data:c.source.root.write("undo"),info:"Tree rerooted."})},ladderize:function(e){if(this.children.length){var t=this;t.children[0].visibleLeafCount<t.children[t.children.length-1].visibleLeafCount&&t.swap("skipundo");for(var n in t.children)t.children[n].visibleLeafCount>2&&t.children[n].ladderize("skipundo");e||t.w.model.addundo({name:"Ladderise",type:"tree",data:t.source.root.write("undo"),info:"The subtree of '"+t.name+"' was reordered."})}},swap:function(e){var t=this.children[0];this.children[0]=this.children[this.children.length-1],this.children[this.children.length-1]=t,e||this.w.model.addundo({name:"Swap nodes",type:"tree",data:this.source.root.write("undo"),info:"Tree node '"+t.name+"' swapped places with its sibling."})},move:function(e){var t=this.source.root.removeAnc(),n=this;if(n===t||n.parent===t)return!1;for(var i=e;i.parent;i=i.parent)if(i===n)return!1;if(e.parent===n.parent)return n.parent.swap(),!1;if(e===n.parent)return!1;n.remove("skipundo");var r=new Smits.PhyloCanvas.Node(this);r.children.push(t),t.parent=r;var o,s=e.parent;for(o in s.children)if(s.children[o]===e)break;var a=new Smits.PhyloCanvas.Node(this);a.parent=s,s.children[o]=a,s.altered=!0,e.len>0&&(a.len=e.len/2,e.len/=2),a.children.push(n),n.parent=a,a.children.push(e),e.parent=a,n.setRoot(r.children[0]),n.flagPath(),this.w.model.addundo({name:"Move node",type:"tree",data:n.source.root.write("undo"),info:"Tree node '"+this.name+"' was attached to node \""+e.name+'".'})},remove:function(e,t){var n=this,i=n.source.root.removeAnc(),r=n.parent;if(n!=i){if(r!=i){n.flagPath();var o=new Smits.PhyloCanvas.Node(this);o.children.push(i),i.parent=o}if(2==r.children.length){var s,a=r.parent,l=r.children[0]==n?0:1;if(s=r.children[1-l],r==i)return void(s.children.length>1&&s.prune());s.len=Smits.Common.roundFloat(s.len+r.len),s.parent=a;for(l in a.children)if(a.children[l]==r)break;a.children[l]=s}else{for(l in r.children)if(r.children[l]==n)break;r.children.splice(l,1)}r.parent=!1,r.children=[],n.parent=!1,i.parent=!1,t||i.countChildren(),e||(delete this.w.leafnodes[n.name],this.w.model.nodecount(i.nodeCount),this.w.model.leafcount(i.leafCount),this.w.model.addundo({name:"Remove node",type:"tree",data:i.write("undo"),info:"Node '"+n.name+"' was removed from the tree."}))}},prune:function(){var e=this,t=e.name,n=e.source.root.removeAnc();e.setRoot(e,"norealign"),this.w.model.addundo({name:"Prune subtree",type:"tree",data:e.source.root.write("undo"),info:"Subtree of node '"+t+"' was pruned from main tree."})},write:function(e,t,n){if("undo"==e&&!this.w.model.settings.undo())return"";var n=n||{},i=this.nodeArray();i[i.length-1].nwlevel=0;for(var r=i.length-2;r>=0;r--){var o=i[r];o.nwlevel=o.parent.nwlevel+1}var s="",a="",l=0,c=!0;for(var r in i){var o=i[r],u=o.nwlevel-l;if(u>0){c?c=!1:s+=",";for(var d=0;u>d;++d)s+="("}else s+=0>u?")":",";t&&"stem"==o.type||(a=n[o.name]||o.name,s+="undo"==e?'"'+a+'"':a.replace(/ /g,"_")),o.len>=0&&o.nwlevel>0&&(s+=":"+o.len),e&&(o.meta=(o.bootstrap?":B="+o.bootstrap:"")+(o.hidden?":Co=Y":"")+("stem"!=o.type||"ancestral"!=o.children[1].type||o.children[1].hidden?"":":Vis=Y")+(o.altered?":XN=realign":"")+(o.species?":S="+o.species:"")+(o.duplications||o.speciations?":Ev="+(o.duplications||"0")+">"+(o.speciations||"0"):"")+(o.nodeid?":ND="+o.nodeid:"")+(o.EC?":E="+o.EC:"")+(o.accession?":AC="+o.accession:"")+(o.gene?":GN="+o.gene:"")+(o.taxon_id?":T="+o.taxon_id:""),o.meta&&(s+="[&&NHX"+o.meta.replace(/[\s\(\)\[\]&;,]/g,"_")+"]")),l=o.nwlevel}return s+=";\n"},calcxy:function(){for(var e,t,n=this.nodeArray(),i=this.leafCount-1,e=0,t=0;e<n.length;e++){var r=n[e];r.canvy=r.children.length?(r.children[0].canvy+r.children[r.children.length-1].canvy)/2:t++/i,0==r.children.length?r.miny=r.maxy=r.canvy:(r.miny=r.children[0].miny,r.maxy=r.children[r.children.length-1].maxy)}for(n[n.length-1].canvx=0,i=0,e=n.length-2;e>=0;e--){var r=n[e];r.canvx=r.parent.canvx+r.len,r.canvx>i&&(i=r.canvx)}for(e=0;e<n.length;e++)n[e].canvx/=i;return n},makeCanvas:function(){var e=this.calcxy(),t={width:100,height:150,xmargin:4,ymargin:2,fontsize:5,c_line:"rgb(60,60,60)"};e.length<10&&(t.width=t.height=8*e.length);var n=document.createElement("canvas");n.width=t.width,n.height=t.height;var i=n.getContext("2d");i.strokeStyle=i.fillStyle="white",i.fillRect(0,0,t.width,t.height);var r=t.width-2*t.xmargin,o=t.height-2*t.ymargin-t.fontsize,s=t.xmargin,a=t.ymargin+t.fontsize/2,l;i.strokeStyle=t.c_line,i.beginPath(),l=e[e.length-1].canvy*o+a,i.moveTo(s,l),i.lineTo(e[e.length-1].canvx*r+s,l);for(var c=0;c<e.length-1;c++){var u=e[c];l=u.canvy*o+a,i.moveTo(u.parent.canvx*r+s,l),i.lineTo(u.canvx*r+s,l)}for(var d,c=0;c<e.length;c++){var u=e[c];0!=u.children.length&&(d=u.canvx*r+s,i.moveTo(d,u.children[0].canvy*o+a),i.lineTo(d,u.children[u.children.length-1].canvy*o+a))}return i.stroke(),i.closePath(),n.style.borderRadius="2px",n}},Smits.PhyloCanvas.NewickParse=function(e,t){var n=e.newick,i="",r=0,o=!1,s=this;this.nodeIdIncrement=0,this.selectedNodeId=0;var a=function(n,r){for(r||(r=new Smits.PhyloCanvas.Node(n,s,t));i&&")"!==i&&","!==i;)if("["===i){var a=u("]");if(~a.indexOf(":Co=Y")&&(r.hidden=!0),~a.indexOf(":C=")&&(r.color=a.match(/:C=([^:\]]+)/)[1].split(".").join(","),~r.color.indexOf(",")&&(r.color="rgb("+r.color+")")),~a.indexOf(":Vis=Y")&&(r.showanc=!0),~a.indexOf(":XN=realign")&&(r.altered=!0,o=!0),~a.indexOf(":B=")&&(r.bootstrap=a.match(/:B=(\w+)/)[1]),~a.indexOf(":Ev=")){var l=a.match(/:Ev=(\d+)>(\d+)/);r.duplications=parseInt(l[1]),r.speciations=parseInt(l[2])}else if(~a.indexOf(":D=")){var h=a.match(/:D=(\w)/)[1];r[["Y","T","N","F"].indexOf(h)<2?"duplications":"speciations"]=1}~a.indexOf(":S=")&&(r.species=a.match(/:S=(\w+)/)[1].replace(/_/g," ")),~a.indexOf(":T=")&&(r.taxon_id=a.match(/:T=(\w+)/)[1]),~a.indexOf(":E=")&&(r.ec=a.match(/:E=(\w+)/)[1]),~a.indexOf(":GN=")&&(r.gene=a.match(/:GN=(\w+)/)[1]),~a.indexOf(":ND=")&&(r.nodeid=r.gene_id=a.match(/:ND=(\w+)/)[1]),~a.indexOf(":AC=")&&(r.accession=a.match(/:AC=(\w+)/)[1])}else":"===i?(d(),r.len=Smits.Common.roundFloat(c(),4),0==r.len&&(r.len=1e-4)):"'"===i||'"'===i?r.name=u(i):r.name=c();return r.name&&(e.idnames[r.name]&&(r.name=e.idnames[r.name]),r.name=r.name.trim().replace(/_/g," ")),r.children.length?r.type="stem":r.type="label",r},l=function(e){for(;i&&"("!==i;)d();for(var n=new Smits.PhyloCanvas.Node(e,s,t);i&&")"!==i;)d(),"("===i?n.children.push(l(n)):n.children.push(a(n));return d(),a(e,n),n},c=function(){for(var e="";i&&":"!==i&&")"!==i&&","!==i&&"["!==i;)e+=i,d();return e},u=function(e){var t="";for(d();i&&i!==e;)t+=i,d();return d(),t},d=function(){return i=n.charAt(r),";"===i&&(i=""),r++,i};this.mLevel=0,this.mLenFromRoot=1e-4,d(),this.root=l(),this.treealtered=o,this.root.len=1e-4,this.root.countChildren(),this.nodeinfo=e.nodeinfo||{},this.processNodes()},Smits.PhyloCanvas.PhyloxmlParse=function(e,t){var n=this;this.nodeIdIncrement=0,this.selectedNodeId=0;var i=function(r,o){var s=new Smits.PhyloCanvas.Node(o,n,t);r.children("clade").each(function(){s.children.push(i($(this),s))});var a=r.attr("branch_length")||r.children("branch_length").text()||0;if(s.len=Smits.Common.roundFloat(a,4),0==s.len&&(s.len=1e-4),s.name=r.children("name").text(),r.children("confidence").each(function(){s[$(this).attr("type")]=parseFloat($(this).text())}),r.attr("color"))s.color=r.attr("color");else if(r.children("color").length){var l=r.children("color");s.color="rgb("+l.children("red").text()+","+l.children("green").text()+","+l.children("blue").text()+")"}var c=r.children("taxonomy");c.length&&(s.species=c.children("scientific_name").text()||c.children("common_name").text()||"",s.species=s.species.replace(/_/g," "),s.taxon_id=c.children("id").text(),s.taxon_id&&(s.taxon_id_provider=c.children("id").attr("provider")||""));var u=r.children("sequence");u.length&&(s.gene=u.children("name").text(),u.children("mol_seq").length&&s.name&&(e.sequences[s.name]=u.children("mol_seq").text().split("")),s.accession=u.children("accession").text(),s.accession_source=u.children("accession").attr("source")||"",(s.accession_source="Ensembl")&&(s.gene_id=r.children("name").text())),s.name||(s.name=s.species||(s.children.length?"Node "+s.id:"Sequence "+s.id)),s.name=s.name.trim(s.name);var d=r.children("events");return d.length&&(s.duplications=d.children("duplications").text(),s.speciations=d.children("speciations").text()),s.children.length?s.type="stem":s.type="label",s};this.mLevel=0,this.mLenFromRoot=1e-4,xmldata=$($.parseXML(e.phyloxml)).find("phylogeny>clade"),xmldata.length&&(this.root=i(xmldata),this.root.len=1e-4,this.root.countChildren(),this.nodeinfo=e.nodeinfo||{},this.processNodes())},Smits.PhyloCanvas.JSONParse=function(e,t){var n=this;this.nodeIdIncrement=0,this.selectedNodeId=0;var i=function(r,o){var s=new Smits.PhyloCanvas.Node(o,n,t);if(r.children&&$.each(r.children,function(e,t){s.children.push(i(t,s))}),s.len=Smits.Common.roundFloat(r.branch_length||1e-4,4),r.confidence&&$.each(r.confidence,function(e,t){s[e]=t}),s.species=r.taxonomy.scientific_name||"",s.species=s.species.replace(/_/g," "),r.taxonomy.id&&(s.taxon_id=r.taxonomy.id),r.id&&r.id.accession&&(s.gene_id=r.id.accession),s.name=s.gene_id||s.species||(s.children.length?"Node "+s.id:"Sequence "+s.id),s.name=s.name.trim(s.name),r.sequence){if(s.gene=r.sequence.name,r.sequence.mol_seq&&r.sequence.mol_seq.seq){for(;e.sequences[s.name];)s.name=s.name+"1";e.sequences[s.name]=r.sequence.mol_seq.seq.split("")}r.sequence.id.length&&(s.accession=s.protein_id=r.sequence.id[0].accession,s.accession_source=r.sequence.id[0].source||""),s.seq_location=r.sequence.location||""}return r.events&&r.events.type&&(s[r.events.type+"s"]=1),s.children.length?s.type="stem":s.type="label",s};this.mLevel=0,this.mLenFromRoot=1e-4,this.root=i(e.json),this.root.countChildren(),this.nodeinfo=e.nodeinfo||{},this.processNodes()},Smits.PhyloCanvas.NewickParse.prototype.processNodes=Smits.PhyloCanvas.PhyloxmlParse.prototype.processNodes=Smits.PhyloCanvas.JSONParse.prototype.processNodes=function(e){if(e||(e=this.root),e){var t=e.w.model.settings.dendogram();for(var n in e.children){var i=e.children[n];t&&(i.len=1),i.lenFromRoot=Smits.Common.roundFloat(e.lenFromRoot+i.len),i.level=e.level+1,i.level>this.mLevel&&(this.mLevel=i.level),i.lenFromRoot>this.mLenFromRoot&&(this.mLenFromRoot=i.lenFromRoot),i.children.length?this.processNodes(i):this.nodeinfo&&this.nodeinfo[i.name]&&(i.nodeinfo=this.nodeinfo[i.name],$.each(this.nodeinfo[i.name],function(e,t){i[e]=t}))}return e}},Smits.PhyloCanvas.Render={Style:{line:{},stemline:{},text:{"font-family":"Verdana","text-anchor":"start"},path:{stroke:"rgb(0,0,0)","stroke-width":1},connectedDash:{"stroke-dasharray":"1,4"},textSecantBg:{fill:"#EEE",stroke:"#DDD"},highlightedEdgeCircle:{stroke:"red",fill:"none"},nodeCircle:{fill:"red","fill-opacity":0,stroke:"red","stroke-opacity":0,"z-index":"10"},getStyle:function(e,t){return this[e]?this[e]:this[t]?this[t]:{}}},Parameters:{Rectangular:{bufferX:5,paddingX:10,bufferInnerLabels:2,minHeightBetweenLeaves:3,alignRight:!0,showScaleBar:!1},mouseRollOver:function(e){var t=e.node,n=t.w;if(t.edgeCircleHighlight)t.active||t.edgeCircleHighlight.show();else{var i=e.svg.draw(new Smits.PhyloCanvas.Render.Circle(e.x,e.y,5,{attr:Smits.PhyloCanvas.Render.Style.highlightedEdgeCircle}));t.edgeCircleHighlight=i}if(e.textEl){t.active||e.textEl.setAttribute("fill","red");var r=parseInt($(e.textEl).offset().top),o=r-n.dom.seq.offset().top,s=n.model.boxh();o=Math.round(o/s)*s,n.rowBorder({y:o},"keep"),t.rolltimer=setTimeout(function(){n.$("#namelabel").css({"font-size":n.model.fontsize()+"px",display:"block",opacity:0}),n.$("#namelabel").offset({left:n.dom.right.offset().left-16,top:r+1}),n.$("#namelabel span").css("margin-left",0-n.$("#names").innerWidth()+6+"px"),n.$("#namelabel span").text(t.species||t.name),r&&n.$("#namelabel").fadeTo(100,1)},300)}},mouseRollOut:function(e){var t=e.node,n=e.node.w;t.edgeCircleHighlight&&t.edgeCircleHighlight.hide(),e.textEl&&(clearTimeout(t.rolltimer),n.$("#namelabel").fadeOut(100),t.active||e.textEl.setAttribute("fill",e.node.color))},onClickAction:function(e){var t=e.node,n=t.w;if(t.edgeCircleHighlight&&t.edgeCircleHighlight.hide(),e.textEl){if(n.model.tools.prunemode)return void t.highlight();e.textEl.setAttribute("fill","red"),t.active=!0;var i={},r={" ":""},o="Metadata";r['<span class="note">Branch length</span> '+Math.round(1e3*t.len)/1e3]="";var s=["species","taxon","gene","bootstrap","duplications","speciations","accession","EC","EC_class"];t.nodeinfo&&(s=Object.keys(t.nodeinfo)),$.isEmptyObject(n.model.ensinfo())||(o="Ensembl",t.species&&(r['<span class="note">Species</span> '+t.species]="",t.gene_id&&(r['<span class="note">Gene</span> <a href="http://www.ensembl.org/'+t.species.replace(" ","_")+"/Gene/Summary?g="+t.gene_id+'" target="_blank" title="View in Ensembl">'+(t.gene||t.gene_id)+"</a>"]=""),t.accession&&(r['<span class="note">Protein</span> <a href="http://www.ensembl.org/'+t.species.replace(" ","_")+"/Transcript/ProteinSummary?p="+t.accession+'" target="_blank" title="View in Ensembl">'+t.accession+"</a>"]="")),s=s.filter(function(e){return"species"!=e||"gene"!=e||"accession"!=e})),$.each(s,function(e,n){t[n]&&(r['<span class="note">'+n.capitalize().replace("_"," ")+"</span> "+t[n]]="")}),i['<span class="svgicon" title="View metadata">'+n.svgicon("info")+"</span>"+o]={submenu:r},i['<span class="svgicon" title="Hide node and its sequence">'+n.svgicon("hide")+"</span>Hide leaf"]=function(){t.hideToggle(),refresh()},i['<span class="svgicon" title="Graft this node to another branch in the tree">'+n.svgicon("move")+"</span>Move leaf"]=function(){setTimeout(function(){t.highlight(!0)},50),n.movenode("",t,"tspan")},i['<span class="svgicon" title="Place this node as the tree outgroup">'+n.svgicon("root")+"</span>Place root here"]=function(){t.reRoot(),refresh()},i['<span class="svgicon" title="Remove this node from the tree">'+n.svgicon("trash")+"</span>Remove leaf"]=function(){t.remove(),refresh()},setTimeout(function(){n.tooltip("","",{clear:!0,arrow:"top",data:i,style:"none",nodeid:t.id,style:"leafmenu",target:{x:n.$("#names").offset().left,y:$(e.textEl).offset().top,height:n.model.boxh(),width:n.$("#names").width()}})},100)}},set:function(e,t,n){n?this.Rectangular[e]=parseFloat(t):this[e]=parseFloat(t)}}},Smits.PhyloCanvas.Render.Line=function(e,t,n,i,r){this.type="line",this.attr=Smits.PhyloCanvas.Render.Style.line,this.x1=e,this.x2=n,this.y1=t,this.y2=i,r&&(Smits.Common.apply(this,r),r.attr&&(this.attr=r.attr))},Smits.PhyloCanvas.Render.Text=function(e,t,n,i){this.type="text",this.attr=Smits.PhyloCanvas.Render.Style.text,this.x=e,this.y=t,this.text=n,i&&(Smits.Common.apply(this,i),i.attr&&(this.attr=i.attr))},Smits.PhyloCanvas.Render.Path=function(e,t){this.type="path",this.attr=Smits.PhyloCanvas.Render.Style.path,this.path=e,t&&(Smits.Common.apply(this,t),t.attr&&(this.attr=t.attr))},Smits.PhyloCanvas.Render.Circle=function(e,t,n,i){this.type="circle",this.x=e,this.y=t,this.radius=n,i&&(Smits.Common.apply(this,i),i.attr&&(this.attr=i.attr))},Smits.PhyloCanvas.Render.SVG=function(e){this.canvasSize=[50,100],this.svg1=Raphael(e.$("#tree")[0],"100%","100%"),this.svg2=Raphael(e.$("#names")[0],"100%","100%"),$(this.svg2.canvas).css("font-size",e.model.fontsize()+"px"),this.percX=function(e){return(e/this.canvasSize[0]*100).toFixed(4)+"%"},this.percY=function(e){return(e/this.canvasSize[1]*100).toFixed(4)+"%"}},Smits.PhyloCanvas.Render.SVG.prototype={draw:function(e){var t={};return"line"==e.type?t=this.svg1.line(this.percX(e.x1),this.percY(e.y1),this.percX(e.x2),this.percY(e.y2)).attr(e.attr):"path"==e.type?t=this.svg1.path(e.path).attr(e.attr):"circle"==e.type?t=this.svg1.circle(this.percX(e.x),this.percY(e.y),e.radius).attr(e.attr):"text"==e.type&&(t="svg1"==e.attr.svg?this.svg1.text(e.x,this.percY(e.y),e.text).attr(Smits.PhyloCanvas.Render.Style.text):this.svg2.text(e.x,this.percY(e.y),e.text).attr(Smits.PhyloCanvas.Render.Style.text),e.attr&&t.attr(e.attr)),t}},Smits.PhyloCanvas.prototype.renderTree=function(){var e=Smits.PhyloCanvas.Render.Parameters.Rectangular,t,n,i,r,o,s,a=!0,l=0,c,u,d,h,p,f=[],m,g,v=0,b=this,y=function(t,n){if(!t.len||a||t.visibleChildCount||t.hidden||(l+=r),t.children.length){var s=[],c,u,d;if(t.restoreAnc(),t.hidden||!t.len)return[];c=n,u=n+=i*t.len,d=l+t.getMidbranchPosition(a)*r;var h=Smits.PhyloCanvas.Render.Style.getStyle("stemline","line");h.svg="svg1",h["class"]="horizontal";var p=Smits.PhyloCanvas.Render.Style.nodeCircle,m=b.svg.draw(new Smits.PhyloCanvas.Render.Line(c,d,u,d,{attr:h}));if(m.node.setAttribute("title","Branch length: "+t.len),m.node.setAttribute("nodeid",t.id),t.visibleChildCount>0){for(var g=0;g<t.children.length;g++){var w=t.children[g];w.hidden||s.push(y(w,n))}if(s.push(d),t.visibleLeafCount>1){var x=Math.min.apply(null,s),k=Math.max.apply(null,s),_=b.svg.draw(new Smits.PhyloCanvas.Render.Line(n,x,n,k,{attr:Smits.PhyloCanvas.Render.Style.line}));_.toBack()}}var C="",T=2,S={fill:"black",stroke:"black"};"ancestral"==t.children[1].type&&(S.fill="white");var N=t.children[0].hidden,D=t.children[t.children.length-1].hidden;if(N||D){S.fill="white";var A=N&&"label"!=t.children[0].type||D&&"label"!=t.children[t.children.length-1].type;N&&D?(S.stroke="orange",C="Only node seq. shown"):C=A?"Subtree hidden":"One leaf hidden",T=A?4:3}t.altered&&(S.fill="red",C="Needs realignment"),t.duplications&&(S.fill="lightblue",S.stroke="blue",C||(C="Duplication node")),b.svg.draw(new Smits.PhyloCanvas.Render.Circle(u||n,d,T,{attr:S}));var E=b.svg.draw(new Smits.PhyloCanvas.Render.Circle(u||n,d,5,{attr:p}));t.edgeCircleHighlight=t.svgEl=E,E.node.setAttribute("nodeid",t.id),C=b.w.$("#right").hasClass("dragmode")?"":(t.name.length>5?"<br>":" ")+'<span class="note">'+(C||"Click or drag")+"</span>";var M=t.name||"no name";E.mouseover(function(e){b.w.$("#treemenu .tooltipcontent").text()||(E.attr({"fill-opacity":"1"}),b.w.tooltip(e,M+C,{target:"circle",id:"treemenu",arrow:"left",style:"black",nodeid:t.id,nohide:!0}))}),E.mouseout(function(){b.w.$("#treemenu .tooltipcontent").text()||b.w.hideTooltip("#treemenu");
}),E.click(function(e){b.w.$("#treemenu .tooltipcontent").text()||(e.stopPropagation(),b.w.tooltip(e,M,{clear:!0,target:"circle",id:"treemenu",style:"black",data:{},nodeid:t.id,nomove:!0}),e.stopPropagation())})}else{if(t.hidden)return"ancestral"!=t.type&&(b.w.leafnodes[t.name]=t),[];b.w.leafnodes[t.name]=t,c=n,u=n+i*t.len,u>o&&(u=o),d=l;var I=b.svg.draw(new Smits.PhyloCanvas.Render.Line(c,d,u,d));if(I[0].setAttribute("class","horizontal"),I[0].setAttribute("nodeid",t.id),I[0].setAttribute("title","Branch length: "+t.len),e.alignRight&&o>u+5){var P=b.svg.draw(new Smits.PhyloCanvas.Render.Line(u,d,o,d,{attr:Smits.PhyloCanvas.Render.Style.connectedDash}));P[0].setAttribute("class","horizontal"),P[0].setAttribute("nodeid",t.id)}if(t.name){f.push(t.name);var z={},O=d+.3*r;t.style&&(z=Smits.PhyloCanvas.Render.Style.getStyle(t.style,"text")),z.fill=t.color,z["text-anchor"]="start",t.description&&(z.title=t.description),t.count=v;var q=b.svg.draw(new Smits.PhyloCanvas.Render.Text(e.bufferInnerLabels,O,t.species||t.name,{attr:z}));q[0].childNodes[0].setAttribute("nodeid",t.id),t.svgEl=q,Smits.PhyloCanvas.Render.Parameters.mouseRollOver&&Smits.Common.addRaphEventHandler(q,"mouseover",Smits.PhyloCanvas.Render.Parameters.mouseRollOver,{svg:b.svg,node:t,x:u,y:d,textEl:q[0]}),Smits.PhyloCanvas.Render.Parameters.mouseRollOut&&Smits.Common.addRaphEventHandler(q,"mouseout",Smits.PhyloCanvas.Render.Parameters.mouseRollOut,{node:t,x:u,y:d,textEl:q[0],w:t.w}),Smits.PhyloCanvas.Render.Parameters.onClickAction&&Smits.Common.addRaphEventHandler(q,"click",Smits.PhyloCanvas.Render.Parameters.onClickAction,{svg:b.svg,node:t,x:u,y:d,textEl:q[0],data:b.data,w:t.w})}a&&(a=!1),v++}return d},w=function(){d=20,c=10,u=c+e.showScaleBar*i,b.svg.draw(new Smits.PhyloCanvas.Render.Line(c,d,u,d)),b.svg.draw(new Smits.PhyloCanvas.Render.Text((c+u)/2,d-8,e.showScaleBar))};b.w.$("#treewrap").css("display","none"),b.svg.svg1.clear(),b.svg.svg2.clear(),b.w.model.visiblerows.removeAll(),f=[],b.w.leafnodes={},b.data.root.countChildren();var x=b.data.root.visibleLeafCount;return x?(t=b.w.$("#treewrap").width(),n=x*b.w.model.boxh(),b.svg.canvasSize=[t,n],m=e.bufferX,g=e.paddingX,i=Math.round((t-m-g)/b.data.mLenFromRoot),o=Math.round(t-m),r=b.w.model.boxh(),s=e.minHeightBetweenLeaves,s>r&&(r=s),l=.6*r,a=!0,y(b.data.root,g),b.w.model.visiblerows(f),b.w.$("#treewrap").css("display","block"),void(e.showScaleBar&&w())):void b.w.dialog("error","Found no leafs to show when rendering the tree canvas.<br>Probably a self.data parsing error.")},!requestAnimationFrame)var requestAnimationFrame=document.webkitRequestAnimationFrame||document.mozRequestAnimationFrame;if(!cancelAnimationFrame)var cancelAnimationFrame=document.webkitCancelAnimationFrame||document.mozCancelAnimationFrame;!function($){function e(){t&&(requestAnimationFrame(e),jQuery.fx.tick())}var t;requestAnimationFrame?(jQuery.fx.timer=function(n){n()&&jQuery.timers.push(n)&&!t&&(t=!0,e())},jQuery.fx.stop=function(){t=!1}):(requestAnimationFrame=function(e){return window.setTimeout(e,1e3/60)},cancelAnimationFrame=function(e){window.clearTimeout(e)})}(jQuery),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.capitalize||(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),ko.extenders.format=function(e,t){var n=ko.pureComputed({read:e,write:function(n){if(e(n),"trim"==t&&"string"==typeof n)n=n.trim();else if("nospace"==t)n=n.replace(/\s/g,"_");else if("alphanum"==t)n=n.replace(/\s/g,"_").replace(/[^\w\.]/g,"");else if(~["number","float","int","posit"].indexOf(t)){if(""==n)return;var i=typeof n;n="int"==t?parseInt(n):parseFloat(n),(isNaN(n)||"posit"==t&&0>n)&&(n=0),"string"==i&&(n=n.toString())}e(n)}});return n(e()),n},ko.extenders.enable=function(e,t){var n=ko.computed({read:e,write:function(n){t&&e(n)}});return n(e()),n},ko.bindingHandlers.fadevisible={init:function(e){$(e).css("display","none")},update:function(e,t){w.unwrap(t)?$(e).fadeIn():$(e).hide()}},ko.bindingHandlers.tempfade={init:ko.bindingHandlers.fadevisible.init,update:function(e,t){var n=w.unwrap(t);n?$(e).fadeIn():$(e).hide(),setTimeout(function(){t("")},3e3)}},ko.bindingHandlers.slidevisible={init:function(e){$(e).css("display","none")},update:function(e,t){var n=w.unwrap(t);n?$(e).slideDown():$(e).slideUp()}},ko.bindingHandlers.fadeText={update:function(e,t){$(e).hide(),ko.bindingHandlers.text.update(e,t),$(e).fadeIn(200)}},ko.bindingHandlers.dragdrop={init:function(e,t,n,i,r){var o=$(e),s=w.unwrap(t),a=r.$root.library;o.draggable({handle:"div.draghandle",opacity:.9,helper:"original",revert:"invalid",revertDuration:300,addClasses:!1,zIndex:50}),o.droppable({accept:function(e){return e.attr("itemid")&&s&&!w.unwrap(a.getitem(s).shared)},activeClass:"",addClasses:!1,hoverClass:"draghover",tolerance:"pointer",drop:function(e,t){var n=t.draggable.attr("itemid");a.moveitem(n,s),t.draggable.remove()}})}},ko.bindingHandlers["default"]={update:function(e,t,n,i,r){var o=w.unwrap(t),s=w.unwrap(n.get("name"));s&&o&&("text"==e.type?(e.setAttribute("placeholder",o),w.unwrap(n.get("required"))&&!w.unwrap(n.get("value")).length&&(e.value=o)):r.$data[s](o))}},ko.bindingHandlers.bindHTML={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,r){var o=w.unwrap(t());ko.applyBindingsToNode(e,{html:w.unwrap(t())}),ko.applyBindingsToDescendants(r,e)}},ko.bindingHandlers.log={update:function(e,t){console.log(w.unwrap(t))}};var Wasabi=function(e,t,n){"string"==typeof e&&(e=[e]),t||(t=jQuery(".wasabi").length?".wasabi":"body"),n||(n={});var i=this;if(!(i instanceof Wasabi))return new Wasabi(t,e,n);i.sequences={},i.treesvg={},i.leafnodes={},i.letters="--..??**AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz".split(""),i.alphabet={protein:["A","R","N","D","C","Q","E","G","H","I","L","K","M","F","P","S","T","W","Y","V","B","Z","X"],DNA:["A","T","G","C","N","X"],RNA:["A","G","C","U","N","X"],gaps:["-",".","?","*"],codons:{TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"*",TAG:"*",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"*",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G",NNN:"?",ANN:"?",TNN:"?",GNN:"?",CNN:"?",AAN:"?",ATN:"?",AGN:"?",ACN:"?",TAN:"?",TTN:"?",TGN:"?",TCN:"?",GAN:"?",GTN:"?",GGN:"?",GCN:"?",CAN:"?",CTN:"?",CGN:"?",CCN:"?"}},i.colors={},i.symbols={},i.canvassymbols={".":"+"},i.canvaslabels={"-":"gap",".":"ins.","?":"unkn.","*":"stop"},i.canvaslist=[],i.colflags=[],i.rowflags=[],i.selections=[],i.maskedcols=[],i.importedFiles=ko.observableArray([]),i.importedFiles.get=function(e){return ko.utils.arrayFirst(i.importedFiles(),function(t){return t.name==e})},i.serverdata={},i.dom={wasabi:jQuery(t).first()},i.fullpage=i.dom.wasabi,i.$=function(e,t){return jQuery(e,t||i.dom.wasabi)},n.notrack?i.piwik={trackEvent:function(){return!1}}:(i.piwik=Piwik.getTracker("http://wasabiapp.org/analytics/piwik.php",2),i.piwik.trackPageView(),i.piwik.enableLinkTracking());var r=function(){var e=this;e.toggle=function(e){"function"==typeof e&&e(!e())},e.btntxt=function(e){return e()?"ON":"OFF"},e.preflist={tooltipclass:"",undolength:"",autosaveint:"autosave",onlaunch:"",userid:"keepuser",zoomlevel:"keepzoom",colorscheme:"",maskcolor:"",maskletter:"",anccolor:"",ancletter:"",boxborder:"",font:"",windowanim:"",allanim:"",collapsebar:"",hidebar:"",minlib:"",ladderlib:"",skipversion:"",checkupdates:"local",bundlestart:"local"},e.saveprefs=function(){$.each(e.preflist,function(t,n){!n||i.unwrap(e[n])?"undefined"!=typeof e[t]&&(localStorage[t]=JSON.stringify(i.unwrap(e[t]))):n&&localStorage.removeItem(t)})},e.loadprefs=function(){$.each(e.preflist,function(t,n){if(localStorage[t]){if(n&&localStorage[n]&&!JSON.parse(localStorage[n]))return!0;try{var i=JSON.parse(localStorage[t])}catch(r){var i=localStorage[t]}"function"==typeof e[t]?e[t](i):e[t]=i}})},e.useraccounts=ko.observable(!1),e.userid=ko.observable(""),e.urlid="",e.urlvars="",e.keepuser=ko.observable(!0),e.keepuser.subscribe(function(t){var n=e.userid();t&&n?(localStorage.userid=JSON.stringify(n),e.urlid&&(e.urlid="")):t||e.urlid||localStorage.removeItem("userid")}),e.tmpuser=ko.observable(!1),e.username=ko.observable(""),e.usermail=ko.observable(""),e.datause=ko.observable(0),e.dataperc=ko.computed(function(){return parseInt(e.datause()/(e.datalimit/100))+"%"}),e.jobtimelimit=0,e.datalimit=0,e.local=!1,e.syncsetting=function(e,t,n,i){n.sync&&communicate("settings",{setting:t,value:e},i||{})},e.bundlestart=ko.observable(!0),e.bundlestart.subscribe(function(t){e.syncsetting(t,"OutputType",this.target)}),e.browsers=[{n:"Chrome",v:"chrome"},{n:"Firefox",v:"firefox"},{n:"Safari",v:"safari"},{n:"Opera",v:"opera"},{n:"default",v:"default"},{n:"none",v:"NO"}],e.openbrowser=ko.observable("default"),e.openbrowser.subscribe(function(t){e.syncsetting(t,"browser",this.target)}),e.datadir=ko.observable("wasabi/Wasabi data"),e.datadir.subscribe(function(t){var n=i.$("#datadir");e.syncsetting(t,"datadir",this.target,{success:function(){n.css("border","1px solid green")},error:function(){n.css("border","1px solid red")},after:function(e){n.attr("title",e)}})}),e.linuxdesktop=ko.observable(!0),e.linuxdesktop.subscribe(function(t){e.syncsetting(t,"linuxdesktop",this.target)}),e.email=!1,e.joblimit=0,e.checkupdates=ko.observable(!0),e.skipversion=ko.observable(0),e.undo=ko.observable(!0),e.undolength=ko.observable(5),e.storeundo=!1,e.autosave=ko.observable(!1),e.autosaveopt=["modification","minute","5 minutes","15 minutes","30 minutes"],e.autosaveint=ko.observable(),e.intervalid=0,e.autosave.subscribe(function(t){if(clearInterval(e.intervalid),t&&e.autosaveint()&&!i.model.library.openitem().shared)if("Untitled analysis"==i.model["export"].savename()&&i.model["export"].savename("Autosaved session"),~e.autosaveint().indexOf("minute")){var n=parseInt(e.autosaveint());isNaN(n)&&(n=1),e.intervalid=setInterval(i.savefile,6e4*n)}else i.savefile(),e.storeundo=!0;else e.storeundo=!1}),e.keepid=ko.observable(!1),e.keepid.subscribe(function(t){var n=i.model.library.openitem(),r=e.keepuser();t&&n&&r&&(localStorage.openid=n.id,localStorage.openfile=i.unwrap(n.outfile))}),e.keepzoom=ko.observable(!0),e.zoomlevel=function(e){return isNaN(e=parseInt(e))||(1>e?e=1:e>i.model.zlevels.length&&(e=i.model.zlevels.length),i.model.zoomlevel(e-1)),i.model.zoomlevel()},e.tooltipclasses=["white","black","beige"],e.tooltipclass=ko.observable("white"),e.colorsets={nuc:["nucleotides","rainbow","greyscale"],aa:["Taylor","Clustal","Zappo","hydrophobicity","rainbow","greyscale"]},e.cs={nuc:ko.observable(0),aa:ko.observable(0)},e.ctype=ko.observable("aa"),e.dendogram=ko.observable(!1),e.coloropt=ko.computed(function(){return e.colorsets[e.ctype()]}),e.colorscheme=ko.computed({read:function(){return e.coloropt()[e.cs[e.ctype()]()]},write:function(t){var n=e.coloropt().indexOf(t);~n&&e.cs[e.ctype()](n)}}),e.colordesc={rainbow:"Generates even-spaced vibrant colours.",greyscale:"Generates even-spaced greyscale tones.",custom:"Customize the tones of current colourscheme.",nucleotides:"Default colouring."},e.colordesc.Taylor=e.colordesc.Clustal=e.colordesc.Zappo=e.colordesc.hydrophobicity="One of commonly used colour schemes.",e.maskcolors=["dark","light","white"],e.maskcolor=ko.observable("dark"),e.cases=["lowercase","uppercase"],e.maskletter=ko.observable("lowercase"),e.anccolors=ko.computed(function(){var t=["colorscheme","dark","light","white"];return t.splice(t.indexOf(e.maskcolor()),1),t}),e.anccolor=ko.observable("light"),e.ancletter=ko.observable("uppercase"),e.boxborder=ko.observable("border"),e.fontopt=["Arial","Century Gothic","Courier New","Georgia","Tahoma","Times New Roman","Verdana"],e.font=ko.observable(e.fontopt[1]),e.remakecolors=ko.computed(function(){var t=e.colorscheme(),n=e.boxborder(),r=e.font(),o=e.maskcolor(),s=e.maskletter(),a=e.anccolor(),l=e.ancletter();return i.$("#settings_window, #info_window").length?(i.makeColors(),i.canvaslist=[],i.makeImage("","cleanup","slowfade"),!0):void 0}).extend({throttle:500}),e.allanim=ko.observable(!0),e.allanim.subscribe(function(t){t?(i.dom.wasabi.removeClass("notransition"),$.fx.off=!1):(e.windowanim(t),i.dom.wasabi.addClass("notransition"),$.fx.off=!0)}),e.windowanim=ko.observable(!0),e.windowanim.subscribe(function(t){t&&e.allanim(t)}),e.collapsebar=ko.observable(!1),e.collapsebar.subscribe(function(e){e?(localStorage.collapsebar="true",i.dom.wasabi.addClass("mintop"),setTimeout(function(){i.$("#topcollapse>span").html("&#x25BC;<br>&#x25BC;"),i.$("#top .toptext, #top .title, #bottom").css("display","none"),i.dom.top.addClass("hidden"),$(window).trigger("resize")},800)):(i.model.settings.collapsebar(!1),localStorage.collapsebar="",i.$("#top .toptext, #bottom").css("display",""),i.model.offline()||i.$("#top .title").css("display",""),setTimeout(function(){i.dom.wasabi.removeClass("mintop")},200),setTimeout(function(){i.$("#topcollapse>span").html("&#x25B2;<br>&#x25B2"),i.dom.top.removeClass("hidden"),$(window).trigger("resize")},800))}),e.hidebar=ko.observable(!1),e.sharelinks=ko.observable(!0),e.sharedir=ko.observable(!1),e.menubar=ko.observable(!0),e.data=ko.observable(!0),e.tools=ko.observable(!0),e.zoom=ko.observable(!0),e.logo=ko.observable(!0)},o=function(){var e=this;e.idformats=[{name:"Gene homology",url:"homology/id/",example:"ENSG00000198125"},{name:"Gene tree",url:"genetree/id/",example:"ENSGT00390000003602"},{name:"Alignment block",url:"alignment/region/",example:"13:32906000-32910000"}],e.idformat=ko.observable(e.idformats[1]),e.isblock=ko.pureComputed(function(){return"Alignment block"==e.idformat().name}),e.ishomol=ko.pureComputed(function(){return"Gene homology"==e.idformat().name}),e.ensid=ko.observable("").extend({format:"trim"}),e.comparas=["vertebrates","plants","fungi","pan_homology","bacteria","protists","metazoa"],e.compara=ko.observable(e.comparas[0]),e.genomes=ko.pureComputed(function(){return"vertebrates"==e.compara()?"":"genomes"}),e.seqtype=ko.observable("cdna"),e.isblock.subscribe(function(t){t&&(e.compara(e.comparas[0]),e.seqtype="cdna")}),e.homtype=ko.observable("all"),e.target=ko.observable(""),e.idspecies=ko.observable(""),e.idname=ko.observable(""),e.alignblocks=[{type:"EPO",set:[{name:"Primates",species:["homo_sapiens","macaca_mulatta","pongo_abelii","callithrix_jacchus","gorilla_gorilla","pan_troglodytes","papio_anubis","chlorocebus_sabaeus"]},{name:"Mammals",species:["homo_sapiens","macaca_mulatta","pongo_abelii","equus_caballus","oryctolagus_cuniculus","callithrix_jacchus","bos_taurus","gorilla_gorilla","pan_troglodytes","sus_scrofa","mus_musculus","canis_familiaris","felis_catus","ovis_aries","papio_anubis","chlorocebus_sabaeus","rattus_norvegicus"]},{name:"Fish",species:["danio_rerio","gasterosteus_aculeatus","oryzias_latipes","tetraodon_nigroviridis","lepisosteus_oculatus"]},{name:"Sauropsids",species:["gallus_gallus","taeniopygia_guttata","anolis_carolinensis","meleagris_gallopavo"]}]},{type:"EPO (low coverage)",set:[{name:"Mammals",species:["homo_sapiens","macaca_mulatta","echinops_telfairi","tupaia_belangeri","erinaceus_europaeus","sorex_araneus","microcebus_murinus","pongo_abelii","equus_caballus","ochotona_princeps","cavia_porcellus","choloepus_hoffmanni","procavia_capensis","tursiops_truncatus","tarsius_syrichta","dipodomys_ordii","vicugna_pacos","pteropus_vampyrus","loxodonta_africana","oryctolagus_cuniculus","ailuropoda_melanoleuca","nomascus_leucogenys","callithrix_jacchus","myotis_lucifugus","bos_taurus","gorilla_gorilla","otolemur_garnettii","pan_troglodytes","ictidomys_tridecemlineatus","sus_scrofa","mus_musculus","canis_familiaris","mustela_putorius_furo","felis_catus","ovis_aries","dasypus_novemcinctus","papio_anubis","chlorocebus_sabaeus","rattus_norvegicus"]},{name:"Fish",species:["danio_rerio","takifugu_rubripes","gasterosteus_aculeatus","oryzias_latipes","tetraodon_nigroviridis","gadus_morhua","oreochromis_niloticus","xiphophorus_maculatus","astyanax_mexicanus","lepisosteus_oculatus","poecilia_formosa"]},{name:"Sauropsids",species:["gallus_gallus","taeniopygia_guttata","anolis_carolinensis","meleagris_gallopavo","pelodiscus_sinensis","anas_platyrhynchos","ficedula_albicollis"]}]},{type:"PECAN",set:[{name:"Vertebrates",species:["homo_sapiens","macaca_mulatta","ornithorhynchus_anatinus","monodelphis_domestica","pongo_abelii","equus_caballus","taeniopygia_guttata","oryctolagus_cuniculus","anolis_carolinensis","meleagris_gallopavo","callithrix_jacchus","bos_taurus","gorilla_gorilla","pan_troglodytes","sus_scrofa","mus_musculus","canis_familiaris","felis_catus","gallus_gallus","ovis_aries","papio_anubis","chlorocebus_sabaeus","rattus_norvegicus"]}]}],e.blocktype=ko.observable(e.alignblocks[0]),e.blockset=ko.observable(e.blocktype().set[0]),e.blockref=ko.observable(e.blockset().species[0]),e.mask=ko.observable("")},s=function(e){var t=this;t.w=e,t.settings=new r,t.ensembl=new o,t.library={openid:function(){return""},openitem:function(){return!1},getitem:function(){return{}},importurl:"",sharelink:function(e,n,i){return i||(i=t.library.importurl),~i.indexOf("http://")||(i="http://"+window.location.host+window.location.pathname+i),"http://wasabiapp.org:8000?url="+i},shareicon:function(t,n,i,r){return e.model.settings.sharelinks()&&r?'<span class="svgicon action share blue" title="Open source URL in Wasabi" data-bind="click:function(){$root.w.dialog(\'share\',{url:\''+r+"'})}\">"+e.svgicon("link")+"</span>":""}},t.offline=ko.observable(!0),t.version={local:e.currentversion,remote:ko.observable(0),lastchange:""},t.zlevels=[1,3,5,8,11,15,20],t.zoomlevel=ko.observable(5),t.zoomlevel.subscribe(function(e){t.settings.keepzoom()&&(localStorage.zoomlevel=JSON.stringify(e))}),t.zoomperc=ko.pureComputed(function(){var e=t.zoomlevel(),n=t.zlevels.length-1;return 0==e?"MIN":e==n?"MAX":parseInt(t.zlevels[e]/t.zlevels[n]*100)+"%"}),t.seqtype=ko.observable(""),t.isdna=ko.pureComputed(function(){var e=t.seqtype();return"DNA"==e||"RNA"==e}),t.isdna.subscribe(function(e){t.settings.ctype(e?"nuc":"aa")}),t.aligned=ko.observable(!0),t.symbolw=ko.pureComputed(function(){return"codons"==t.seqtype()?3:1}),t.boxw=ko.pureComputed(function(){return parseInt(t.zlevels[t.zoomlevel()]*t.symbolw())}),t.boxh=ko.pureComputed(function(){return parseInt(1.3*t.zlevels[t.zoomlevel()])}),t.fontsize=ko.pureComputed(function(){return parseInt(1.1*t.zlevels[t.zoomlevel()])}),t.activeid=ko.observable(""),t.activeid.subscribe(function(t){e.$("#seq div[class^='selection']").css({"border-color":"",color:""}),t&&e.$("#selection"+t+",#vertcross"+t+",#horicross"+t).css({"border-color":"orange",color:"orange"})}),t.modified=ko.observable(!1),t.unsaved=ko.observable(!1),t.notifications=ko.observable(!1),t.statusbtn=ko.observable(""),t.visiblecols=ko.observableArray(),t.visiblerows=ko.observableArray(),t.hasdot=ko.observable(!1),t.hasdot.subscribe(function(t){var n=t?"del.":"gap";e.canvaslabels["-"]=n,e.canvaslabels._=n}),t.gaprate=ko.pureComputed(function(){return t.isdna()?.025:.005}),t.gapext=ko.pureComputed(function(){return t.isdna()?.75:.5}),t.transopt=ko.pureComputed(function(){var e=[{t:"codons",v:"codon",p:"codons"}];return"RNA"==t.seqtype()?e.push({t:"mt protein",v:"mttranslate",p:"mt-translate"}):e.push({t:"protein",v:"translate",p:"translate"}),e}),t.iterate=ko.observable(!1),t.minseqlen=ko.observable(0),t.minseqlength=ko.pureComputed(function(){return e.numbertosize(t.minseqlen(),t.seqtype())}),t.maxseqlen=ko.observable(0),t.maxseqlength=ko.pureComputed(function(){return e.numbertosize(t.maxseqlen(),t.seqtype())}),t.totalseqlen=ko.observable(0),t.totalseqlength=ko.pureComputed(function(){return e.numbertosize(t.totalseqlen(),t.seqtype())}),t.alignlen=ko.observable(0),t.alignlength=ko.pureComputed(function(){return e.numbertosize(t.alignlen())}),t.alignheight=ko.pureComputed(function(){return t.visiblerows().length}).extend({throttle:100}),t.seqcount=ko.observable(0),t.leafcount=ko.observable(0),t.nodecount=ko.observable(0),t.hiddenlen=ko.pureComputed(function(){return t.alignlen()-t.visiblecols().length}).extend({throttle:200}),t.hiddenlength=ko.pureComputed(function(){return e.numbertosize(t.hiddenlen(),t.seqtype())}),t.treesource=ko.observable(""),t.seqsource=ko.observable(""),t.sourcetype=ko.observable(""),t.ensinfo=ko.observable({}),t.selmodes=["default","columns","rows"],t.selmode=ko.observable(t.selmodes[0]),t.setmode=function(n){t.selmode(n),e.toggleSelection(n)},t.filemenu=[{txt:"Export",act:"export",icn:"file_export",inf:"Convert current dataset to a file",req:["data"]},{txt:"Share",act:"share",icn:"link",inf:"Share current dataset",req:["data",e.fullmode?"online":"","sharing"]},{txt:"Info",act:"info",icn:"file_info",inf:"View summary info about current dataset",req:["data"]}],t.toolsmenu=[{txt:"PRANK aligner",act:"align",icn:"prank",inf:"Realign current sequences using Prank",req:["seq",e.fullmode?"online":"NA"]},{txt:"Hide gaps",act:"seqtool",icn:"seq",inf:"Collapse sequence alignment columns",req:["seq"]},{txt:"Prune tree",act:"treetool",icn:"prune",inf:"Prune/hide tree leafs",req:["tree"]},{txt:"Translate",act:"translate",icn:"book_open",inf:"Translate sequence data",req:[e.fullmode?"seq":"dna"]},{txt:"Settings",act:"settings",icn:"settings",inf:"Adjust Wasabi behaviour"}],t.editname=ko.observable(!1),t.treealtered=ko.observable(!1),t.noanc=ko.observable(!1),t.update=ko.pureComputed(function(){return t.version.local<t.version.remote()&&t.settings.skipversion()!=t.version.remote()}),t.noaccount=ko.pureComputed(function(){return t.settings.useraccounts()&&!t.settings.userid()}),t.dnasource=ko.observable(""),t.treebackup="",t.undostack=ko.observableArray(),t.undostack.subscribe(function(e){t.modified(Boolean(e.length))}),t.clearundo=function(){t.undostack.removeAll(),t.refreshundo()},t.activeundo={name:ko.observableArray(),undone:ko.observable(""),data:ko.observable("")},t.refreshundo=function(e,n){if(t.undostack().length){e||(e=t.undostack()[0]);var i=e.name.length>8?e.name.split(" ")[0]:e.name;n?t.activeundo.name()[0].name(i):(t.activeundo.name.removeAll(),t.activeundo.name.push({name:ko.observable(i)})),t.activeundo.undone(!1),t.activeundo.data(e)}else t.activeundo.name.removeAll(),t.activeundo.data("")},t.selectundo=function(e){"firsttree"===e&&(e=t.gettreeundo("first")),t.refreshundo(e,"select")},t.addundo=function(n,i){t.settings.undo()&&("tree"==n.type&&-1==n.info.indexOf("also")?n.info+=" Undo also reverts any newer tree changes above.":"Remove columns"==n.name&&t.removeundo("type","seq"),t.undostack.unshift(n),t.undostack().length>t.settings.undolength()&&t.undostack.pop(),t.refreshundo(n,i),t.settings.storeundo&&e.savefile())},t.removeundo=function(e,n){if(e&&n)for(var i=0,r=0;r<t.undostack().length;r++)t.undostack()[r][e]==n&&(t.undostack.splice(r,1),r--)},t.undo=function(){var n=t.activeundo.undone,i=t.activeundo.data();if(i&&!n()){if("tree"==i.type){var r=t.undostack.indexOf(i),o=t.gettreeundo("prev",r).data||t.treebackup;e.treesvg.loaddata(o),t.gettreeundo("remove",r)}else"seq"==i.type&&e.undoseq(i.seqtype,i.data,i.undoaction);t.undostack.remove(i),n(!0),t.settings.storeundo&&e.savefile()}},t.redo=function(){var n=t.activeundo.undone,i=t.activeundo.data();i&&n()&&("tree"==i.type?e.treesvg.loaddata(i.data):"seq"==i.type&&e.undoseq(i.seqtype,i.data,i.redoaction),t.addundo(i,"redo"),t.settings.storeundo&&e.savefile())},t.gettreeundo=function(e,n){for(var i="prev"==e?n+1:0,r="remove"==e?n:t.undostack().length-1,o=!1,s=r;s>=i;s--)if("tree"==t.undostack()[s].type){if(o=t.undostack()[s],"first"==e)break;"remove"==e&&t.undostack.splice(s,1)}return o}};i.model=new s(i),i.model.plugins={},i.toggle=i.model.settings.toggle;var a=function(){var e=this;e.categories=ko.computed(function(){var e=[],t=i.model.treesource(),n=i.model.seqsource();return n&&e.push({name:"Sequence",formats:[{name:"fasta",variants:[{name:"fasta",ext:[".fa"]}]},{name:"phylip",variants:[{name:"phylip",ext:[".phy"],interlace:!0}]}]}),t&&e.push({name:"Tree",formats:[{name:"newick",variants:[{name:"newick",ext:[".nwk",".tre",".tree"]},{name:"extended newick",ext:[".nhx"],desc:"Newick format with additional metadata (hidden nodes etc.)"}]}]}),n&&t&&e.push({name:"Sequence+tree",formats:[{name:"HSAML",variants:[{name:"HSAML",ext:[".xml"],desc:"XML format which supports additional data from PRANK alingments. Click for more info.",url:"http://prank-msa.googlecode.com"}]}]}),$.each(e,function(e,t){t.formats.push({name:"NEXUS",variants:[{name:"NEXUS",ext:[".nex"]}]})}),e}),e.category=ko.observable({}),e.format=ko.observable({}),e.variant=ko.observable({}),e.infolink=function(){e.variant().url&&window.open(e.variant().url)},e.filename=ko.observable("Untitled").extend({format:"alphanum"}),e.fileexts={fasta:".fa",phylip:"phy",newick:".nwk","extended newick":".nhx",HSAML:".xml",phyloxml:".xml",nexus:".nex",text:".txt"},e.fileext=ko.observable(".fa"),e.fileurl=ko.observable(""),e.includeanc=ko.observable(!1),e.includehidden=ko.observable(!1),e.interlaced=ko.observable(!1),e.maskoptions=["lowercase","N","X"],e.masksymbol=ko.observable("lowercase"),e.truncsymbol=ko.observable(""),e.trunclen=ko.observable(""),e.savename=ko.observable("Untitled analysis")};i.model["export"]=new a;var l=function(){var e=this;e.hideaction=ko.observable(),e.hideconserved=ko.observable(!1),e.hidelimit=ko.observable(10),e.minhidelimit=ko.computed({read:function(){return 1==e.hidelimit()},write:function(t){t&&e.hidelimit(1)}}),e.hidelimitperc=ko.computed({read:function(){var t=e.hidelimit(),n=i.model.visiblerows().length;return 0>t?e.hidelimit(0):t>n&&e.hidelimit(n),Math.round(t/n*100)},write:function(t){0>t?prec=0:t>100&&(t=100),e.hidelimit(Math.round(t/100*i.model.visiblerows().length))}}),e.gaptype=ko.observable("indels"),e.gaptype.subscribe(function(t){e.countgaps()}),e.gapcount=[],e.conscount=[],e.countgaps=function(){var t="",n="",r="",o=[],s=i.model.visiblerows(),a=i.model.visiblecols();e.gapcount=[],e.conscount=[],~e.gaptype().indexOf("in")&&("codons"==i.model.seqtype()?o.push("...",":::"):o.push(".",":")),~e.gaptype().indexOf("del")&&("codons"==i.model.seqtype()?o.push("---","___"):o.push("-","_"));for(var l=i.model.alignlen();l--;)e.gapcount[l]=e.conscount[l]=0;$.each(s,function(t,l){setTimeout(function(){$.each(a,function(t,s){return s==i.sequences[l].length?!1:(n=i.sequences[l][s],r=e.conscount[t],void(~o.indexOf(n)?e.gapcount[t]++:r!==!1&&(0===e.conscount[t]?e.conscount[t]=n:e.conscount[t]!=n&&(e.conscount[t]=!1))))}),t==s.length-1&&(i.$("#seqtool_window div.spinnercover").remove(),setTimeout(function(){10==e.hidelimitperc()?e.hidelimitperc(9):e.hidelimitperc(10)},16))},16)})},e.gaplen=ko.observable(0),e.buflen=ko.observable(0),e.hidecolcount=ko.computed(function(){var t=0,n=i.model.visiblerows().length,r=e.hidelimit(),o=[],s=[],a=e.hideconserved(),l="",c=i.$("#seqtool_window").length,u=e.hideaction(),d=parseInt(e.gaplen()),h=parseInt(e.buflen());0>d&&(d=0,e.gaplen(0)),0>h?(h=0,e.buflen(0)):2*h>d&&(h=parseInt((d-1)/2),e.buflen(h));var p=function(e){o[1]=e;var n=o[1]-o[0];n>d&&(o[0]+=h,o[1]-=h,s.push(o),t+=n-2*h),o=[]};return $.each(e.gapcount,function(t,i){l=a&&e.conscount[t],r>=n-i||l?o.length||(o[0]=t):o.length&&p(t)}),o.length&&p(e.gapcount.length),c&&setTimeout(function(){i.colflags=[],i.clearSelection(),"columns"!=i.model.selmode()&&i.model.selmode("columns"),$.each(s,function(e,t){i.selectionSize("","",t);for(var n=t[0];n<t[1];n++)i.colflags[n]=1})},100),t}).extend({throttle:500}),e.hidecolperc=ko.pureComputed(function(){return parseInt(e.hidecolcount()/e.gapcount.length*100)||0}),e.prunemode=!1,e.leafaction=ko.observable(),e.leafsel=ko.observable(),e.markLeafs=function(e){return e?void $.each(i.leafnodes,function(e,t){t.active&&t.highlight(!1)}):(i.registerSelections(),void $.each(i.model.visiblerows(),function(e,t){i.rowflags[e]&&i.leafnodes[t]&&i.leafnodes[t].highlight(!0)}))},e.processLeafs=function(t,n){if("string"!=typeof t){var r=i.$("#names tspan[fill=orange]").length,o="unmarked"==e.leafsel()?!1:!0,n=o?r:i.model.visiblerows().length-r,t="prune"==e.leafaction()?"remove":"hideToggle";if(!n||i.model.visiblerows().length-n<4){var s="remove"==t?"Can't prune: ":"Can't hide: ";return s+=n?"less than 4 leafs would remain.":"nothing to "+e.leafaction()+".",i.$("#treetoolerror").text(s),void setTimeout(function(){i.$("#treetoolerror").empty()},3e3)}}else var o=!0;$.each(i.leafnodes,function(e,n){n.active==o&&n[t]("hide","nocount")}),i.treesvg.refresh();var a="remove"==t?"removed":"hidden",l="remove"==t?"Remove":"Hide";i.model.addundo({name:l+" leafs",type:"tree",data:i.treesvg.data.root.removeAnc().write("undo"),info:n+" leafs were "+a+"."}),i.closeWindow("treetool")}};if(i.model.tools=new l,i.fullmode||(i.model.settings.collapsebar(!0),i.model.settings.sharelinks(!0),i.model.zoomlevel(4)),Object.keys(n).length){if(n.disable){var c=$.isArray(n.disable)?[n.disable]:n.disable;$.each(["menubar","data","tools","zoom","undo","logo"],function(e,t){~c.indexOf(t)&&(n[t]=!1)}),$.each(["filemenu","toolsmenu"],function(e,t){$.map(i.model[t],function(e){return~c.indexOf(e.txt.toLowerCase)?void 0:e})}),delete n.disable}var u=i.model.settings;$.each(n,function(e,t){"undefined"!=typeof u[e]&&("function"==typeof u[e]?u[e](t):u[e]=t),delete n[e]}),e&&e.push(n)}i.init(e)},w=Wasabi.prototype;w.currentversion=160110,w.fullmode=!1,w.unwrap=function(e){return"function"==typeof e&&(e=e()),"function"==typeof e?e():e},w.wrap=function(e,t,n){if("function"==typeof e)e(t);else if(n)e=ko.observable(t);else{if(n===!1)return!1;e=t}return!0},w.indexOfObj=function(e,t,n){for(var i=0;i<e.length;i++)if(e[i][t]==n)return i;return-1},w.slideadd=function(e){$(e).css("display","none"),$(e).slideDown()},w.slideremove=function(e){$(e).slideUp(400,function(){$(this).remove()})},w.marginadd=function(e){setTimeout(function(){e[0].style.marginTop=0},50)},w.waitremove=function(e){setTimeout(function(){$(e).remove()},500)},w.numbertosize=function(e,t,n){if(isNaN(e))return e;t?"dna"==t||"rna"==t?t="bp":"protein"==t&&(t="residues"):t="";var i="bp"==t?[" bp"," kb"," Mb"," Gb"]:"byte"==t?[" Bytes"," KB"," MB"," GB"]:"sec"==t?[" sec"," min :"," h :"]:["","&#x2217;10<sup>3</sup>","&#x2217;10<sup>6</sup>","&#x2217;10<sup>9</sup>"],r="bp"==t?1024:1e3;if(!n)var n="bp"==t||"byte"==t||"sec"==t?r:1e6;if(e=parseInt(e),n>e)return e+(i[0]||" "+t);var o=0;if("sec"==t){for(var s="";e>=r&&o<i.length-1;)s=e%r+i[o]+" "+s,e/=r,o++;return s}for(;e>=r&&o<i.length-1;)e/=r,o++;return e.toFixed(1).replace(".0","")+(i[o]||" "+t)},w.msectodate=function(e){if(e=w.unwrap(e),!e||isNaN(e))return"Never";var t=new Date(1e3*parseInt(e));return("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)+"."+t.getFullYear().toString().substr(2)+" at "+t.getHours()+":"+("0"+t.getMinutes()).slice(-2)},w.parseurl=function(e){if(e||(e=window.location.search),!~e.indexOf("?"))return{};e=e.split("?")[1];try{return JSON.parse('{"'+decodeURI(e).replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(t){return console.log("URL error: "+t),{}}},w.urlregex=/(https?\:\/\/|www\.)+(\w+\.)+[^\s\\]+/gi,w.makeurl=function(e,t,n){return e?("www."==e.substr(0,4)&&(e="http://"+e),t=n||!t?e:t,'<a href="'+e+'" target="_blank">'+t+"</a>"):""},w.communicate=function(e,t,n){"function"==typeof n.after&&n.after()},w.getfile=function(e){var t=this;if(e&&e.file){"string"==typeof e.file&&(e.file=[e.file]),t.importedFiles.removeAll();var n={};"object"==typeof e.file[e.file.length-1]&&(n.settings=e.file.splice(-1,1)[0]),$.each(e.file,function(i,r){var o=r.split("?")[0];o=o.substring(o.lastIndexOf("/")+1);var s="http"==r.slice(0,4)?"remote":"local";$.ajax({type:"GET",url:r,converters:{"text xml":!0},success:function(a){"function"==typeof e.success?e.success(a):(t.importedFiles.push({
name:o.replace(/^.*[\\\/]/,""),data:a}),i==e.file.length-1&&setTimeout(function(){t.parseimport({source:s+" file URL",importurl:r,metadata:n})},100))},error:function(n,i,o){o||(o="abort"==i?"Download cancelled.":"File inaccessible."),"function"==typeof e.error?e.error(o):t.dialogs.error("Cannot download "+r+".<br>"+o)},complete:function(){"function"==typeof e.complete&&e.complete()}})})}},w.parseimport=function(options){var w=this;options||(options={}),options.mode||(options.mode="import");var container=options.container||w.importedFiles,errors=[],notes=[],treeoverwrite=!1,seqoverwrite=!1,Tsequences={},Ttreedata="",Ttreesource="",Tseqsource="",md=options.metadata||{};md.Tidnames={},md.ensinfo||(md.ensinfo={}),md.nodeinfo||(md.nodeinfo={}),md.settings||(md.settings={}),w.piwik.trackEvent("import",options.source||"unknown",options.id||options.importurl||"");var parsename=function(e,t){if(e=e.trim(e),!$.isEmptyObject(md.idnames)){var n=e.toLowerCase();md.idnames[n]&&(e=md.idnames[n])}if(e=e.replace(/_/g," "),!t){for(var i=e;Tsequences[e];)e+="1";i!=e&&notes.push('Duplicate sequence name "'+i+'" renamed to "'+e+'".')}return e},datatype="",name="",parseseq=function(e,t,n,i){if(datatype+="sequence:"+n+" ","check"!=options.mode){var r=!$.isEmptyObject(Tsequences);if(Tsequences={},"json"==n)if(e.homologies){var o=!1;md.ensinfo.type="homology",md.ensinfo.id=e.id,$.each(e.homologies,function(e,t){if(!o){var n=t.source.species.replace(/_/g," ");Tsequences[t.source.id]=t.source.align_seq.split(""),md.ensinfo.species=n,md.nodeinfo[t.source.id]={homology_type:"source gene",gene_id:t.source.id,species:n,accession:t.source.protein_id},o=!0}var n=t.target.species.replace(/_/g," ");Tsequences[t.target.id]=t.target.align_seq.split(""),md.nodeinfo[t.target.id]={homology_type:t.type.replace(/_/g," ").replace("2"," to "),gene_id:t.target.id,species:n,accession:t.target.protein_id,dn_ds:t.target.dn_ds,taxon:t.taxonomy_level,identity:t.target.perc_id}})}else e.alignments&&(md.ensinfo.type="alignment block",$.each(e.alignments,function(t,n){0==t&&(md.ensinfo.id=n.species+"/"+n.seq_region+":"+n.start+"-"+n.end);var i=e.tree.indexOf(n.species),r=e.tree.indexOf(":",i),o=e.tree.substring(i,r).replace(/_/g," ").replace(/\[.*\]/g,"");Tsequences[o]=n.seq.split(""),md.nodeinfo[o]={},$.each(n,function(e,t){"seq"!=e&&(md.nodeinfo[o][e]=t)})}));else if("HSAML"==n){var s=$(e).find("leaf");s.each(parsenodeseq);var a=$(e).find("node");a.each(parsenodeseq)}else if("fasta"==n||"fastq"==n)for(var l=/^[>@](.+)$/gm,c="fasta"==n?">":"+";result=l.exec(e);){var u=e.indexOf(c,l.lastIndex);-1==u&&(u=e.length);var d=e.substring(l.lastIndex,u);d=d.replace(/\s+/g,""),k=parsename(result[1]),Tsequences[k]=d.split("")}else{var h="ARNDCQEGHILKMFPSTUWYVBZX\\-?*",p=new RegExp("\\s(["+h+"]{10}\\s?["+h+"]{10}.*)$","img");if("clustal"==n)p.lastIndex=e.search(/[\n\r]+/),e=e.replace(/ {1}\d+$/gm,""),e=e.replace(/^[ \:\.\*]+$/gm,"");else if("nexus"==n)e=e.substring(i.starti,e.indexOf(";",i.starti)),e=e.replace(/\[.+\]/g,""),i.gap&&"-"!=i.gap&&(e=e.replace(new RegExp(i.gap,"g"),"-"));else if("phylip"==n&&i.ntax){var f=!1,m=p.exec(e);if(m){for(var g=m[1].length,v=1;v<i.ntax;v++){if(m=p.exec(e),g!=m[1].length){f=!0;break}g=m[1].length}p.lastIndex=0}else f=!0;f&&(e=e.replace(/^ *.{10}/gm,"$& "))}e=e.replace(/ *[\n\r]\s*/g,"\n"),e=e.replace(/ {2,}/g," ");for(var b=[],y=0,w=!1,x=!0,k="",_="phylip"==n?!1:!0;m=p.exec(e);){var C=m[1].replace(/ /g,"").split("");if(y<m.index){var T=e.substring(y,m.index).trim();if(k=parsename(T,"skipcheck"),Tsequences[k]){w=!0,_=!0;break}Tsequences[k]=C,b.push(T)}else{if(x){if(b.length>1){w=!0,_=!1;break}x=!1}Tsequences[k].push.apply(Tsequences[k],C)}y=p.lastIndex}if(w){var S=/^.+$/gm;S.lastIndex=y;for(var N=0,k="",T="",D="",A="";m=S.exec(e);){if(T=b[N],k=parsename(T,"skipcheck"),A=m[0].trim(),_){if(D=A.substr(0,T.length),D!=T){errors.push("Unexpected taxaname!<br>("+D+" instead of "+T+")");break}A=A.substr(T.length)}C=A.replace(/ /g,"").split(""),Tsequences[k].push.apply(Tsequences[k],C),N++,N==b.length&&(N=0)}}if(b.length){var E=Object.keys(Tsequences);i.ntax&&0==errors.length&&E.length!=i.ntax&&notes.push("Number of taxa found doesn't match <br>the file metadata (expected "+i.ntax+", found "+E.length+" expected)")}else notes.push("No taxa found in sequence data")}$.isEmptyObject(Tsequences)||(Tseqsource=t,r&&(seqoverwrite=!0))}},parsenodeseq=function(){var e=$(this),t=e.attr("id"),n=e.attr("name")||t;n=parsename(e.attr("name")||t),md.Tidnames[t]=n;var i=e.find("sequence").text();i.length&&(Tsequences[n]=i.replace(/\s+/g,"").split(""))},parsetree=function(e,t,n){if(n||(n="newick"),datatype+="tree:"+n+" ","check"!=options.mode){if(Ttreedata&&(treeoverwrite=!0),Ttreedata="",Ttreesource=t,"newick"==n){e=e.replace(/\n+/g,"");var i=(e.match(/\(/g)||[]).length,r=(e.match(/\)/g)||[]).length;if(i!=r)return errors.push("Seems like Newick but parentheses don't match"),!0;$.isEmptyObject(md.Tidnames)||(md.idnames=md.Tidnames)}Ttreedata=e,("json"==n||"phyloxml"==n&&~e.indexOf("<mol_seq"))&&($.isEmptyObject(Tsequences)||(seqoverwrite=!0),Tseqsource=t)}},filenames=options.filenames||ko.utils.arrayMap(container(),function(e){return e.name});$.isArray(filenames)||(filenames=[filenames]),filenames.sort(function(e,t){return/\.tre/.test(e)?1:/\.tre/.test(t)?-1:/\.ne?x/.test(e)?-1:/\.xml/.test(e)?/\.ne?x/.test(t)?1:-1:/\.ph/.test(e)?/\.ne?x|\.xml/.test(t)?1:-1:/\.ne?x|\.xml|\.ph/.test(t)?1:0});var formatError=function(e){return errors.push("Unrecognized data format in "+e),!0};if($.each(filenames,function(e,t){var n=container.get(t).data,i=!1;if("string"!=typeof n){if($.isArray(n)&&(n=n[0]),"object"!=typeof n)return formatError(t);if(n.data)parseseq(n.data[0],t,"json");else{if(!n.tree)return formatError(t);if(n.alignments)parsetree(n.tree,t),parseseq(n,t,"json");else{if(!n.tree.children)return formatError(t);md.ensinfo.type="genetree",md.ensinfo.id=n.id,parsetree(n.tree,t,"json")}}}else if(/^<.+>$/m.test(n))if(~n.indexOf("<phyloxml"))parsetree(n,t,"phyloxml");else{parseseq(n,t,"HSAML");var r=$(n).find("newick");r.length&&parsetree(r.text(),t)}else if(/^[>@].+$/m.test(n)){var o=/^@.+$/m.test(n)?"fastq":"fasta";parseseq(n,t,o)}else if(/^clustal/i.test(n)){var s=n.search(/[\n\r]/);parseseq(n,t,"clustal",{starti:s})}else if(i=n.match(/^\s*(\d+) {1}(\d+) *[\n\r]/)){var s=n.search(/[\n\r]/);parseseq(n,t,"phylip",{ntax:i[1],nchar:i[2],starti:s})}else if(/^#nexus/i.test(n))for(var a,l=/^begin (\w+)/gim;a=l.exec(n);){var c=a[1].toLowerCase();if("data"==c||"characters"==c){var u=/^\s*matrix\s/im;if(seqstart=n.search(u),~seqstart){var d=n.substring(l.lastIndex,seqstart),h={starti:seqstart+7};~d.search(/ntax=\d/i)&&(h.ntax=d.match(/ntax=(\d+)/i)[1]),~d.search(/nchar=\d/i)&&(h.nchar=d.match(/nchar=(\d+)/i)[1]),~d.search(/datatype=\w/i)&&(h.datatype=d.match(/datatype=(\w+)/i)[1]),~d.search(/gap=\S/i)&&(h.gap=d.match(/gap=(\S+)/i)[1]),parseseq(n,t,"nexus",h)}}else if("trees"==c){var p=n.search(/translate\s/i),f=[];if(~p){var m=n.indexOf(";",p);f=n.substring(p+10,m).replace(/\s+/g," ").split(","),$.each(f,function(e,t){t=t.trim().split(" "),md.Tidnames[t[0]]=t[1]}),l.lastIndex=m}var g=n.indexOf("(",l.lastIndex),v=n.indexOf(";",g),b=n.substring(g,v);parsetree(b,t),l.lastIndex=v}}else{if(!/^\s*\(+['"]?[\w]+.*\;\s*$/.test(n))return formatError(t);parsetree(n,t)}}),"check"==options.mode)return datatype;options.container?delete options.container()[0].data:container([]),md.settings.showanc&&($.isArray(md.settings.showanc)||(md.settings.showanc=[md.settings.showanc]),$.each(md.settings.showanc,function(e,t){md.nodeinfo[t]||(md.nodeinfo[t]={}),md.nodeinfo[t].showanc=!0}),delete md.settings.showanc);var treeopt={skiprender:!0,sequences:Tsequences,nodeinfo:md.nodeinfo,idnames:md.idnames};~datatype.indexOf("phyloxml")?treeopt.phyloxml=Ttreedata:~datatype.indexOf("tree:json")?treeopt.json=Ttreedata:treeopt.newick=Ttreedata;var treeobj=Ttreedata?new Smits.PhyloCanvas(treeopt,w):{data:""};Ttreedata="";var seqnames=Object.keys(Tsequences),process_seq=function(){for(var e=0,t=Tsequences[seqnames[0]].length,n=0,i="",r=!1,o=0,s=!0,a,l,c=0;c<seqnames.length;c++)a=Tsequences[seqnames[c]].join(""),!r&&~a.indexOf(".")&&(r=!0),s&&o&&a.length!=o&&(s=!1),a.length>o&&(o=a.length),a=a.replace(/[-_.:]/g,""),l=a.length,n+=l,l>e&&(e=l,i=a),t>l&&(t=l);var u=new RegExp("["+w.alphabet.DNA.join("")+"U?!]","ig"),d=i.replace(u,""),h=d.length<.2*i.length?"DNA":"protein";return"DNA"==h&&~i.search(/U/i)&&(h="RNA"),{type:h,hasdot:r,maxseqlen:e,minseqlen:t,totallen:n,alignlen:o,aligned:s}},seqstats=seqnames.length?process_seq():{};if("importcdna"==options.mode?seqnames.length?"dna"!=seqstats.type&&errors.push("Provided data doesn't seem to be a DNA sequence"):errors.push("No sequence data found"):treeobj.data||seqnames.length||errors.push("Neither tree or sequence data found"),errors.length){var ul=$("<ul>").css({color:"red","white-space":"normal"});return $.each(errors,function(e,t){ul.append("<li>"+t+"</li>")}),options.dialog?w.$(".errors",options.dialog).empty().append("<br><b>File import errors:</b><br>",ul,"<br>"):w.dialog("error",["File import failed:","<br>",ul,"<br>"]),!1}treeoverwrite&&notes.push("Tree data found in multiple files. Using "+Ttreesource),seqoverwrite&&notes.push("Sequence data found in multiple files. Using "+Tseqsource);var feedback=function(){if(options.dialog?(w.$(".errors",options.dialog).text("Import complete."),"importcdna"==options.mode?(w.$("#translate_window").removeClass("finished flipped"),setTimeout(function(){w.$("#translate_window").addClass("finished")},800)):setTimeout(function(){w.closeWindow(options.dialog)},1e3)):options.importbtn&&(options.importbtn.text("Imported"),options.importbtn.closest("div.popupwindow").length&&setTimeout(function(){w.closeWindow(options.importbtn)},1e3)),notes.length){var e=$("<ul>");$.each(notes,function(t,n){e.append($("<li>").append(n))}),setTimeout(function(){w.makeWindow("File import warnings",["<br>",e,"<br>"],{btn:"OK",icn:"info.png"})},1500)}};if("importcdna"==options.mode)return w.model.dnasource(Tsequences),feedback(),!0;if("noimport"==options.mode)return feedback(),!0;if(options.container)return options.container()[0].imported={sequences:seqnames.length?Tsequences:"",tree:treeobj.data,type:seqstats.type||"",alignlen:seqstats.alignlen||"",ftype:datatype},feedback(),!0;w.sequences=Tsequences,Tsequences="",w.treesvg=treeobj.data?treeobj:{},treeobj="",w.leafnodes={},w.model.clearundo(),w.model.treebackup=w.treesvg.data?w.treesvg.data.root.removeAnc().write("undo"):"",w.model.treesource(w.treesvg.data?Ttreesource:""),w.model.treealtered(!1),w.model.noanc(!1),w.model.dnasource(""),w.model.ensinfo(md.ensinfo);var newcolors=!1;if(seqnames.length)if("DNA"==seqstats.type&&w.model.dnasource(w.sequences),seqstats.type!=w.model.seqtype()&&(newcolors=!0),w.model.seqtype(seqstats.type),w.model.hasdot(seqstats.hasdot),w.model.totalseqlen(seqstats.totallen),w.model.alignlen(seqstats.alignlen),w.model.aligned(seqstats.aligned),w.model.seqcount(seqnames.length),w.model.minseqlen(seqstats.minseqlen),w.model.maxseqlen(seqstats.maxseqlen),w.model.seqsource(Tseqsource),w.maskedcols=[],md.visiblecols)w.model.visiblecols(md.visiblecols);else{for(var c=w.model.alignlen(),colarr=[];c--;)colarr[c]=c;w.model.visiblecols(colarr)}if(!w.treesvg.data&&seqnames.length){var visrows=[];$.each(seqnames,function(e,t){w.leafnodes[t]={name:t},md.nodeinfo[t]&&(w.leafnodes[t].ensinfo=md.nodeinfo[t]),visrows.push(t)}),w.model.visiblerows(visrows),w.model.leafcount(seqnames.length)}w.dom.wrap.css("left",0),w.dom.seq.css("margin-top",0),w.dom.treewrap.css("top",0),w.dom.tree.empty(),w.dom.names.empty();var redrawopt={firstrun:!0};if($.each(md.settings,function(sn,s){"model.seqtype"!=sn&&"translate"!=sn||"codons"!=s||!w.model.isdna()||(Tsequences={},$.each(w.sequences,function(e,t){for(var n=[],i=0;i<t.length;i+=3)n.push(t.slice(i,i+3).join(""));Tsequences[e]=n,delete w.sequences[e]}),w.sequences=Tsequences,Tsequences="",w.model.seqtype("codons")),"position"==sn?redrawopt.position=s:~sn.indexOf(".")&&eval("w."+sn)&&eval("w."+sn+"("+JSON.stringify(s)+")")}),options.id){var libitem=w.model.library.getitem(options.id);libitem?(options.name=w.unwrap(libitem.name),libitem.shared?options.source="shared data":setTimeout(function(){w.communicate("writemeta",{id:options.id,key:"imported"})},2e3)):options.source="shared data"}var filename=filenames.length?filenames[0].split(".")[0].replace(/_/g," "):"";if(w.model["export"].savename(options.name||filename||"Untitled analysis"),w.model.library.openid(options.id||""),options.source){var src=options.source,sourcetype="localread"==src||"upload"==src?"local computer":~src.indexOf("import")?"analysis library":"download"==src?options.importurl?"web address":"text input":src;w.model.sourcetype(sourcetype)}if(w.model.library.importurl=options.importurl||"",w.treesvg.data?w.treesvg.refresh(redrawopt):w.redraw(redrawopt),w.treesvg.data&&seqnames.length){w.treesvg.data.root.children.length<3&&w.model.noanc(!0);var emptyleaves=[];if($.each(w.leafnodes,function(e,t){w.sequences[e]?t.active=!1:(emptyleaves.push(e),t.active=!0)}),emptyleaves.length){var leafsnote=emptyleaves.length+" out of "+Object.keys(w.leafnodes).length+" tree leaves have no sequence";leafsnote+=emptyleaves.length<5?":<br>"+emptyleaves.join(", "):".";var clearbtn=$('<a class="button square small">Delete all sequences</a>');clearbtn.click(function(){w.model.library.openid(""),w.sequences={},w.redraw(),w.closeWindow(this)});var prunebtn=$('<a class="button square small">Prune empty leaves</a>');prunebtn.click(function(){w.model.tools.processLeafs("remove",emptyleaves.length),w.closeWindow(this)}),leafsnote=$("<span>"+leafsnote+"<br><br></span>").append(clearbtn),Object.keys(w.leafnodes).length-emptyleaves.length>3&&leafsnote.append(prunebtn),notes.push(leafsnote)}}return feedback(),!0},w.parseexport=function(e,t){var n=this,i=!1;if("object"==typeof e&&(t||(t=e),e=""),e||t){if(!t)var t={}}else i=!0,n.model["export"].fileurl(""),e=n.model["export"].format().name,t={},t.tags=n.model["export"].variant().name&&"extended newick"==n.model["export"].variant().name,$.each(["masksymbol","includeanc","includehidden","truncsymbol","trunclen"],function(e,i){t[i]=n.model["export"][i]()});"extended newick"==e&&(e="newick",t.tags=!0);var r=t.nameids||{},o=t.usedna&&n.translateseq("protein","check")?n.model.dnasource():n.sequences,s=n.treesvg.data,a="",l=[],c="",u={},d=n.model.seqtype(),h=t.datatype||n.model["export"].category().name||"sequence tree";h=h.toLowerCase();var p=[],f=n.model.visiblecols();$.each(n.leafnodes,function(e,t){"ancestral"!=t.type&&p.push(e)});var m=t.includeanc?Object.keys(n.sequences):p,g=m.length,v=t.includehidden?n.model.alignlen():n.model.visiblecols().length;if("object"==typeof t.container&&(o=t.container.sequences,d=t.container.type,m=Object.keys(o),g=m.length,v=t.container.alignlen,s=t.container.tree,f=[],v))for(var b=v;b--;)f[b]=b;var y=function(n){if(t.makeids||"HSAML"==e)return"";var i={space:"\\s",digit:"\\d"},r=new RegExp(t.truncsymbol?i[t.truncsymbol]||"[^A-Za-z0-9 ]":""),o=n.match(r);o=o?o.index:0;var s=parseInt(t.trunclen)||0,a=o&&(!s||s>o)?o:s;return n=n.replace(/\s+/g,"_"),a?n.substring(0,a):n};t.masksymbol&&"lowercase"!=t.masksymbol&&$.each(n.alphabet[d],function(e,i){"codons"==d&&(i=e),n.symbols[i].masked&&(u[n.symbols[i].masked]=t.masksymbol)}),"HSAML"!=e&&n.model.hasdot()&&(u["."]="-"),t.gapsymbol&&(u["-"]=u["."]=t.gapsymbol),$.each(u,function(e){c+=e});var w=c?new RegExp("["+c+"]","g"):"",x=c?function(e){return u[e]||e}:"",k=function(e){var n=o[e],i="";return t.includehidden?i=n.join(""):$.each(f,function(e,t){return t==n.length?!1:void(i+=n[t])}),w?i.replace(w,x):i};if("newick"!=e){var _=0,C=0,T="";t.startid&&(_=parseInt(t.startid.replace(/\D+/,""))),$.each(m,function(e,t){_++,T=y(t)||"seq"+_,r[t]=T})}var S=function(){return s?s.root.write(t.tags,!Boolean(t.includeanc),r):""},N="";if("fasta"==e)$.each(m,function(e,t){a+=">"+(r[t]||t)+"\n",N=k(t);for(var n=0;n<N.length;n+=50)a+=N.substr(n,50)+"\n"});else if("HSAML"==e){a="<ms_alignment>\n",~h.indexOf("tree")&&(a+="<newick>\n"+S()+"</newick>\n"),a+="<nodes>\n";var D;$.each(m,function(e,t){D=~p.indexOf(t),N=k(t);var n=D?"	<leaf ":"	<node ";n+='id="'+(r[t]||t)+'" name="'+t+'">\n		<sequence>\n		'+N+"\n		</sequence>\n"+(D?"	</leaf>\n":"	</node>\n"),a+=n}),a+="</nodes>\n",a+="</ms_alignment>"}else"phylip"==e?(a=g+" "+v+"\n",$.each(m,function(e,t){N=k(t),a+=(r[t]||t)+"\n"+N+"\n"})):"NEXUS"==e?(a="#NEXUS\n",~h.indexOf("sequence")&&(a+="BEGIN DATA;\n",a+="Dimensions NTax="+g+" NChar="+v+";\n","codons"==d&&(d="nucleotide"),a+="Format DataType="+d+" Gap=- Missing=?;\nMatrix\n",$.each(m,function(e,t){N=k(t),a+=(r[t]||t)+" "+N+"\n"}),a+=";\nEND;\n"),~h.indexOf("tree")&&(a+="BEGIN TREES;\n",a+="Tree tree1 = "+S(),a+="END;\n")):"newick"==e&&(a=S());if(i||t.exportdata){if(t.exportdata){if("object"==typeof t.exportdata){if(t.exportdata.data)a=t.exportdata.data;else if("object"==typeof t.exportdata.imported){if(t.exportdata.imported.sequences){a="Sequence data:\n";var A=0;$.each(t.exportdata.imported.sequences,function(e,n){if(10>A)a+=e+": "+n.join("")+"\n";else{if(10!=A)return!1;a+="..."+(Object.keys(t.exportdata.imported.sequences).length-10)+" sequences not shown...\n"}A++})}t.exportdata.imported.tree&&(a+="\nTree data:\n"+t.exportdata.imported.tree.root.write())}filename=t.exportdata.name||"exported_data.txt"}else a=t.exportdata,filename=t.filename||"exported_data.txt";n.model["export"].filename(filename)}else filename=n.model["export"].filename()+n.model["export"].fileext();n.$("#export_window .paper").text(a),n.$("#export_window").addClass("flipped"),!i||n.model.offline()||n.model.noaccount()||n.communicate("makefile",{filename:filename.replace(/\s+/g,"_"),filedata:a},{saveto:n.model["export"].fileurl})}else t.exporturl&&($.get(t.exporturl,function(e){n.$("#export_window .paper").text(e)},"text"),n.$("#export_window").addClass("flipped"),n.model["export"].fileurl(t.exporturl),n.model["export"].filename(n.parseurl(t.exporturl).file||""));return(t.exporturl||t.snapshot||t.exportdata)&&n.$("#export_window a.backbtn").css("display","none"),t.makeids&&(a={file:a,nameids:r,endid:T}),t.container&&(delete t.container.sequence,delete t.container.tree),n.piwik.trackEvent("export",e),a},w.makeColors=function(){var e=this;if(e.colors=[],e.symbols={},e.model.settings){var t=e.model.settings.colorscheme(),n=e.model.seqtype();"rainbow"!=t&&"greyscale"!=t&&("nucleotides"==t?e.colors={A:["","rgb(0,0,255)"],T:["","rgb(255,255,0)"],G:["","rgb(0,255,0)"],C:["","rgb(255,0,0)"],U:["","rgb(255,255,0)"]}:"Taylor"==t?e.colors={A:["","rgb(204,255,0)"],R:["","rgb(0,0,255)"],N:["","rgb(204,0,255)"],D:["","rgb(255,0,0)"],C:["","rgb(255,255,0)"],Q:["","rgb(255,0,204)"],E:["","rgb(255,0,102)"],G:["","rgb(255,153,0)"],H:["","rgb(0,102,255)"],I:["","rgb(102,255,0)"],L:["","rgb(51,255,0)"],K:["","rgb(102,0,255)"],M:["","rgb(0,255,0)"],F:["","rgb(0,255,102)"],P:["","rgb(255,204,0)"],S:["","rgb(255,51,0)"],T:["","rgb(255,102,0)"],W:["","rgb(0,204,255)"],Y:["","rgb(0,255,204)"],V:["","rgb(153,255,0)"],B:["","rgb(255,255,255)"],Z:["","rgb(255,255,255)"],X:["","rgb(255,255,255)"]}:"Clustal"==t?e.colors={A:["","rgb(128,160,240)"],R:["","rgb(240,21,5)"],N:["","rgb(0,255,0)"],D:["","rgb(192,72,192)"],C:["","rgb(240,128,128)"],Q:["","rgb(0,255,0)"],E:["","rgb(192,72,192)"],G:["","rgb(240,144,72)"],H:["","rgb(21,164,164)"],I:["","rgb(128,160,240)"],L:["","rgb(128,160,240)"],K:["","rgb(240,21,5)"],M:["","rgb(128,160,240)"],F:["","rgb(128,160,240)"],P:["","rgb(255,255,0)"],S:["","rgb(0,255,0)"],T:["","rgb(0,255,0)"],W:["","rgb(128,160,240)"],Y:["","rgb(21,164,164)"],V:["","rgb(128,160,240)"],B:["","rgb(255,255,255)"],X:["","rgb(255,255,255)"],Z:["","rgb(255,255,255)"]}:"Zappo"==t?e.colors={A:["","rgb(255,175,175)"],R:["","rgb(100,100,255)"],N:["","rgb(0,255,0)"],D:["","rgb(255,0,0)"],C:["","rgb(255,255,0)"],Q:["","rgb(0,255,0)"],E:["","rgb(255,0,0)"],G:["","rgb(255,0,255)"],H:["","rgb(100,100,255)"],I:["","rgb(255,175,175)"],L:["","rgb(255,175,175)"],K:["","rgb(100,100,255)"],M:["","rgb(255,175,175)"],F:["","rgb(255,200,0)"],P:["","rgb(255,0,255)"],S:["","rgb(0,255,0)"],T:["","rgb(0,255,0)"],W:["","rgb(255,200,0)"],Y:["","rgb(255,200,0)"],V:["","rgb(255,175,175)"],B:["","rgb(255,255,255)"],X:["","rgb(255,255,255)"],Z:["","rgb(255,255,255)"]}:"hydrophobicity"==t&&(e.colors={A:["","rgb(173,0,82)"],R:["","rgb(0,0,255)"],N:["","rgb(12,0,243)"],D:["","rgb(12,0,243)"],C:["","rgb(194,0,61)"],Q:["","rgb(12,0,243)"],E:["","rgb(12,0,243)"],G:["","rgb(106,0,149)"],H:["","rgb(21,0,234)"],I:["","rgb(255,0,0)"],L:["","rgb(234,0,21)"],K:["","rgb(0,0,255)"],M:["","rgb(176,0,79)"],F:["","rgb(203,0,52)"],P:["","rgb(70,0,185)"],S:["","rgb(94,0,161)"],T:["","rgb(97,0,158)"],W:["","rgb(91,0,164)"],Y:["","rgb(79,0,176)"],V:["","rgb(246,0,9)"],B:["","rgb(12,0,243)"],X:["","rgb(104,0,151)"],Z:["","rgb(12,0,243)"]})),e.colors["-"]=["#ccc","rgb(255,255,255)"],e.colors["."]=["#e3e3e3","rgb(255,255,255)"],e.colors["?"]=["#f00","rgb(255,255,255)"],e.model.hasdot()&&(e.colors["-"][0]="#999");for(var i=e.model.settings.maskcolor(),r="uppercase"==e.model.settings.maskletter(),o=function(e,t,n){var i,r,o,s=t/e,a=~~(6*s),l=6*s-a,c=1-l;switch(a%6){case 0:i=1,r=l,o=0;break;case 1:i=c,r=1,o=0;break;case 2:i=0,r=1,o=l;break;case 3:i=0,r=c,o=1;break;case 4:i=l,r=0,o=1;break;case 5:i=1,r=0,o=c}return"greyscale"==n&&(i=r=o=(i+r+o)/3),"rgb("+parseInt(255*i)+","+parseInt(255*r)+","+parseInt(255*o)+")"},s=function(e,t){var n=e.match(/\d{1,3}/g),i=Math.floor((parseInt(n[0])+2*t[0])/3),r=Math.floor((parseInt(n[1])+2*t[1])/3),o=Math.floor((parseInt(n[2])+2*t[2])/3);return"rgb("+i+","+r+","+o+")"},a=function(e,t){return"white"==t?"rgb(255,255,255)":s(e,"light"==t?[255,255,255]:[100,100,100])},l=0;l<e.letters.length;l++){var c=e.letters[l],u=l%2==0,d="rgb(255,255,255)";l>8&&!u&&(e.canvassymbols[c]=r?e.letters[l-1]:!1),"rainbow"==t||"greyscale"==t?(d=u?o(e.letters.length,l,t):a(o(e.letters.length,l-1,t),i),e.colors[c]||(e.colors[c]=["",d])):e.colors[c]||(e.colors[c]=u?["","rgb(200,200,200)"]:["",a(e.colors[e.letters[l-1]][1],i)]);var h=e.colors[c][1].match(/\d{1,3}/g),p=Math.sqrt(h[0]*h[0]*.241+h[1]*h[1]*.691+h[2]*h[2]*.068),f=120>p?"#eee":"#333";e.colors[c][0]||(e.colors[c][0]=u?f:"dark"==i?"#eee":"#888"),e.symbols[c]={fgcolor:e.colors[c][0],bgcolor:e.colors[c][1]},e.symbols[c].masked=u?e.letters[l+1]:c,e.symbols[c].unmasked=u?c:e.letters[l-1]}if("codons"==n){var m={};$.each(e.alphabet.codons,function(t,n){var i=e.symbols[n].masked,r=t.toLowerCase();m[t]=$.extend({},e.symbols[n]),m[r]=$.extend({},e.symbols[i]),m[t].masked=m[r].masked=r,m[t].unmasked=m[r].unmasked=t}),$.each(e.alphabet.gaps,function(t,n){var i=e.symbols[n].masked,r=n+n+n,o=i+i+i;m[r]=$.extend({},e.symbols[n]),m[r].masked=o,m[r].unmasked=r}),e.symbols=m}var g=e.model.settings.anccolor(),v="colorscheme"!=g,b="lowercase"==e.model.settings.ancletter();if(v||b){var y="",w="",x="dark"==g?"#eee":"#888";$.each(Object.keys(e.symbols),function(t,n){y=e.symbols[n],w=n==y.masked,e.symbols[n+"_anc"]={fgcolor:w||!v?y.fgcolor:x,bgcolor:w||!v?y.bgcolor:a(y.bgcolor,g)},e.canvassymbols[n+"_anc"]=b?y.masked:n})}else $.each(Object.keys(e.symbols),function(t,n){~n.indexOf("_anc")&&(e.symbols[n]=e.canvassymbols[n]=!1)});e.makeCanvases()}},w.makeCanvases=function(){var e=this,t=0,n=0,i=e.model.boxw(),r=e.model.boxh(),o=parseInt(i/5),s=e.model.fontsize();i>1&&"border"==e.model.settings.boxborder()&&(t++,n++,i--,r--),$.each(e.symbols,function(o,a){var l=document.createElement("canvas");l.width=i,l.height=r;var c=l.getContext("2d");if(c.fillStyle=a.bgcolor,c.fillRect(t,n,i,r),s>7){c.font=s+"px "+e.model.settings.font(),c.textAlign="center",c.textBaseline="middle",c.fillStyle=a.fgcolor,s>12&&("#eee"==a.fgcolor?(c.shadowColor="#111",c.shadowOffsetX=0,c.shadowOffsetY=1.5,c.shadowBlur=1):"#333"==a.fgcolor&&(c.shadowColor="#fff",c.shadowOffsetX=0,c.shadowOffsetY=-1,c.shadowBlur=1.5));for(var u=e.canvassymbols[o]?[e.canvassymbols[o]]:o.split(""),d=i/(u.length+1),h=0,p=u[h];h<u.length;h++,p=u[h])e.canvassymbols[p]&&(p=e.canvassymbols[p]),c.fillText(p,d*(h+1)+t,r/2+n)}a.canvas=l})},w.cloneCanvas=function(e){var t=document.createElement("canvas");if(!e)return t;t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),t},w.importstart=0,w.makeImage=function(e,t,n){var i=this,r,o,s=i.model.boxw(),a=i.model.boxh(),l={w:4e3,h:2e3},c=parseInt(l.w/s),u=parseInt(l.h/a),d=i.model.visiblecols(),h=i.model.visiblerows(),p=n?400:100;if(e){var f=e.split(":");"x"==f[0]?r=parseInt(f[1]):"y"==f[0]&&(o=parseInt(f[1]))}if(!r){if(!i.dom.wrap.position())return;r=i.dom.wrap.position().left}o||(o=parseInt(i.dom.seq.css("margin-top")));var m=parseInt((0-r)/s),g=m-m%c,v=parseInt((i.dom.seqwindow.innerWidth()-r)/s);v>d.length&&(v=d.length);var b=parseInt((0-o)/a),y=b-b%u,w=parseInt((i.dom.seqwindow.innerHeight()-i.$("#ruler").outerHeight()-o)/a);w>h.length&&(w=h.length),i.$("#seqtool_window").length&&i.model.tools.hidelimit.valueHasMutated();for(var x=10,k=0,_=0,C=i.$("#seq div.tile"),T=Boolean(i.symbols[Object.keys(i.symbols)[0]+"_anc"]),S=y;w>S;S+=u)for(var N=g;v>N;N+=c)-1==i.canvaslist.indexOf(S+"|"+N)&&(0==k&&(w-y)*(v-g)>1e5&&i.$("#spinner").addClass("show"),i.canvaslist.push(S+"|"+N),_++,setTimeout(function(e,n){return function(){var r=e,o="",l=e+u>h.length?h.length-e:u,f=n+c>d.length?d.length-n:c,m=e+l,g=n+f,v=document.createElement("canvas"),b=$('<div class="tile">');v.width=f*s,v.height=l*a,v.setAttribute("id",e+"|"+n);var y=v.getContext("2d");for(y.fillStyle="white",y.fillRect(0,0,v.width,v.height);m>r;){var w=h[r],x=(r-e)*a;if(i.sequences[w]){for(var S=n;g>S;S++)o=i.sequences[w][d[S]],o&&(i.symbols[o]||(i.symbols[o]=i.symbols["?"]||i.symbols["???"]),T&&"ancestral"==i.leafnodes[w].type&&(o+="_anc"),y.drawImage(i.symbols[o].canvas,(S-n)*s,x));r++}else r++}b.css({left:n*s+"px",top:e*a+"px"}),b.append(v),i.dom.seq.append(b),b.fadeIn(p),k++,k==_&&(i.$("#spinner").removeClass("show"),setTimeout(function(){t&&C.remove()},1e3))}}(S,N),x),x+=500)},w.makeRuler=function(){var e=this,t=e.$("#ruler");t.empty();var n=10,i=e.model.boxw(),r=n*i-4,o="",s=e.model.visiblecols(),a=function(t,n){var r=0==t?0:s.indexOf(t-1)+1,o=r*i-8,a=n-t,l=1==a?"small":a>5?"big":"",c=$('<div class="marker '+l+'" style="left:'+o+'px">&#x25BC<div>|</div></div>');return c.mouseenter(function(t){e.tooltip(t,"Click to reveal "+a+" collapsed column"+(1==a?"":"s")+".",{target:c[0]})}),c.click(function(){e.showColumns([[t,n]],"hidetip"),e.redraw()}),c.data("colrange",[t,n]),c};0!==s[0]&&t.append(a(0,s[0]));for(var l=0;l<s.length-1;l++){if(s[l+1]-s[l]!=1){if(s[l+1]<=s[l]){s.sort(function(e,t){return e-t});for(var c=1;c<s.length;c++)s[c-1]==s[c]&&s.splice(c,1);return void e.redraw()}t.append(a(s[l]+1,s[l+1]))}l%n==0&&(o=l,l+n>s.length&&(r=s.length%n*i-4),4>i&&(o=l%100==0?l>=1e3?"<span>"+l/1e3+"K</span>":"<span>"+l+"</span>":"&nbsp;"),t.append($('<span style="width:'+r+'px">'+o+"</span>")))}s[s.length-1]!=e.model.alignlen()-1&&t.append(a(s[s.length-1]+1,e.model.alignlen()))},w.zoomtimer=0,w.redraw=function(e){var t=this;if(e||(e={}),e.position||(e.position={}),e.zoom){var n=t.model.zoomlevel();if("in"==e.zoom&&n<t.model.zlevels.length-1)t.model.zoomlevel(n+1);else if("out"==e.zoom&&n>0)t.model.zoomlevel(n-1);else if("string"==typeof e.zoom)return!1;clearTimeout(t.zoomtimer)}if(t.canvaslist=[],t.colflags=[],t.rowflags=[],t.model.activeid(""),t.$("#seq div[id*='selection'], #seq div[id*='cross']").remove(),t.$label=t.$("#namelabel"),t.$labelspan=t.$("#namelabel span"),e.firstrun)if(t.treesvg.data){var i=t.$("#tree>svg, #names>svg");i.mousedown(function(e){e.preventDefault();var n=e.target.tagName;if("circle"==n||"tspan"==n){var i=parseInt(e.target.getAttribute("nodeid")),r=t.treesvg.data.root.getNode(i);if(!r)return;t.dom.wasabi.one("mouseup",function(){t.dom.wasabi.unbind("mousemove")});var o={x:e.pageX,y:e.pageY},s=!1,a;t.dom.wasabi.mousemove(function(e){var i=e.pageX-o.x,l=e.pageY-o.y;Math.sqrt(i*i+l*l)>7&&(s||(a=t.movenode("drag",r,n),s=!0),a&&a.offset({left:e.pageX+15,top:e.pageY}))})}})}else $.each(t.model.visiblerows(),function(e,n){var i=t.leafnodes[n].ensinfo?t.leafnodes[n].ensinfo.species:n,r=$('<span style="height:'+t.model.boxh()+"px;font-size:"+t.model.fontsize()+'px;cursor:pointer">'+i+"</span>"),o;r.mouseenter(function(){t.rowBorder({y:e*t.model.boxh()},"keep"),o=setTimeout(function(){t.$label.css({"font-size":t.model.fontsize()+"px",display:"block",opacity:0}),t.$label.offset({top:r.offset().top,left:t.dom.right.offset().left-16}),t.$labelspan.css("margin-left",0-t.dom.names.innerWidth()+7+"px"),t.$labelspan.text(i),t.$label.fadeTo(100,1)},800)}),r.mouseleave(function(){clearTimeout(o),t.$label.fadeOut(100)}),r.click(function(){var e=t.leafnodes[n].ensinfo||t.leafnodes[n].metadata,i={},o={},s="";e&&(e?(s="Ensembl",e.taxon&&(o['<span class="note">Taxa</span> '+e.taxon]=""),e.species&&(e.gene_id&&(o['<span class="note">Gene</span> <a href="http://www.ensembl.org/'+e.species.replace(/\s+/g,"_")+"/Gene/Summary?g="+e.gene_id+'" target="_blank" title="View in Ensembl">'+e.gene_id+"</a>"]=""),e.accession&&(o['<span class="note">Protein</span> <a href="http://www.ensembl.org/'+e.species.replace(/\s+/g,"_")+"/Transcript/ProteinSummary?p="+e.accession+'" target="_blank" title="View in Ensembl">'+e.accession+"</a>"]=""))):(s="Info",$.each(e,function(e,t){o['<span class="note">'+e.capitalize().replace("_"," ")+"</span> "+t]=""})),i['<span class="svgicon" title="View metadata">'+t.svgicon("info")+"</span>"+s]={submenu:o}),i.Delete={t:"Remove this sequence",icon:"trash",click:function(){t.model.visiblerows.remove(n),delete t.leafnodes[n],delete t.sequences[n],r.remove(),t.redraw()}},setTimeout(function(){t.tooltip("","",{clear:!0,arrow:"top",data:i,target:{x:t.$("#names").offset().left,y:r.offset().top,width:t.$("#names").width(),height:t.model.boxh()},style:"black"})},100)}),t.dom.names.append(r)});var r=t.model.visiblerows().length?t.model.visiblerows().length*t.model.boxh():t.model.leafcount()*t.model.boxh();t.model.boxw()<4?t.dom.treewrap.addClass("minimal"):t.dom.treewrap.removeClass("minimal"),e.zoom||(t.dom.treewrap.css("height",r),t.$("#names svg").css("font-size",t.model.fontsize()+"px")),"none"==t.dom.treewrap.css("display")&&t.dom.treewrap.css("display","block");var o=function(){$.isEmptyObject(t.sequences)||e.treeonly?$.isEmptyObject(t.sequences)&&!e.zoom&&(t.model.visiblecols.removeAll(),t.model.seqsource(""),t.model.dnasource(""),t.$("#seq .tile").remove(),t.$("#ruler").empty()):(t.makeRuler(),t.makeColors(),t.makeImage()),t.dom.seqwindow.data("contentWidth")?$(window).trigger("resize"):mCustomScrollbar(t)};if(e.position.tree||e.position.names){var s=parseInt(e.position.tree),a=parseInt(e.position.names);isNaN(s)&&(s=t.dom.tree.width()),isNaN(a)&&(a=t.dom.names.width());var l=parseInt(s+a);l>t.dom.page.width()-20&&(l=t.dom.page.width()-20),t.dom.left.css("width",l),t.dom.right.offset({left:t.dom.left.offset().left+l}),t.dom.namesdragline.css("width",l-5),t.dom.seqdragger.css("left","auto"),t.dom.tree.css("right",l-namesw),t.dom.names.css("width",namesw),t.dom.namesdragger.css("left",s)}var c=Boolean(e.zoom&&!e.refresh),u=parseInt(t.dom.seq.css("width"))||1,d=t.dom.seqwindow.innerWidth(),h=t.model.visiblecols().length*t.model.boxw();e.position.left&&!~e.position.left.toString().indexOf("px")&&(e.position.left=parseInt(e.position.left)*t.model.boxw());var p=parseInt(e.position.left||t.dom.wrap.css("left"));if(c&&!$.isEmptyObject(t.sequences)&&(p=Math.round(h/u*(p-d/2)+d/2)),e.position.top){var f=parseInt(e.position.top);isNaN(f)?(f=t.model.visiblerows.indexOf(e.position.top),-1==f&&(f=0),e.position.top=t.model.boxh()*(f+1)):~e.position.top.toString().indexOf("px")||(f-=1,0>f&&(f=0),e.position.top=t.model.boxh()*f)}var m=parseInt(e.position.top||t.dom.seq.css("margin-top")),g=parseInt(t.dom.seq.css("height"))||1,v=t.dom.left.height();c&&(m=Math.round(r/g*(m-v/2)+v/2)),e.leftscale&&(p=parseInt(p*e.leftscale)),
0>m&&r>v&&Math.abs(m)>r-v&&(m=v-r),(m>0||v>r)&&(m=0),Math.abs(p)>h-d&&(p=d-h),p>0&&(p=0),e.zoom&&!e.refresh?($.isEmptyObject(t.sequences)||(t.dom.seq.animate({opacity:0},{duration:200,complete:function(){t.dom.seq.empty().append('<div id="rborder" class="rowborder">'),t.dom.seq.css({width:h,height:r,"margin-top":m,opacity:1}),t.dom.wrap.css("left",p)}}),t.$("#spinner").addClass("show")),t.dom.treewrap.animate({height:r,top:m},{duration:400,complete:function(){t.zoomtimer=setTimeout(function(){o()},600)}}),$.isEmptyObject(t.treesvg)?t.$("#names span").css({height:t.model.boxh(),"font-size":t.model.fontsize()+"px"}):t.$("#names svg").css("font-size",t.model.fontsize()+"px")):(t.dom.seq.empty().append('<div id="rborder" class="rowborder">'),t.dom.seq.css({width:h,height:r}),t.dom.seq.css("margin-top",m),t.dom.treewrap.css("top",m),t.dom.wrap.css("left",p),o())},w.refresh=function(e){var t=this;e&&(e.stopPropagation(),t.dom.wasabi.click()),t.treesvg.refresh&&t.treesvg.refresh()},w.movenode=function(e,t,n){var i=this;if(!t)return!1;if(i.dom.left.addClass("dragmode"),i.$("#namesborderDragline").addClass("dragmode"),t.highlight(!0),setTimeout(function(){i.tooltip("","Move node: "+(e?"drop node to":"click on")+" target branch or node.",{target:i.dom.left,shiftx:5,shifty:-30,arrow:"bottom",autohide:6e3})},400),e){if(i.dom.right.addClass("dragmode"),setTimeout(function(){i.tooltip("","Delete node: drop node here.",{target:i.dom.right,shifty:-5,arrow:"bottom",autohide:6e3})},400),"circle"==n)var r=$(t.makeCanvas()).attr("id","draggedtree");else if("tspan"==n)var r=$('<div id="draggedlabel">'+t.name+"</div>");i.dom.page.append(r)}var o=0,s=i.dom.seq.height()+10-(i.dom.left.innerHeight()+3),a=i.$("#verticalDragger .dragger"),l=s/(i.$("#verticalDragger").height()-a.height()),c=function(e){var t=parseInt(i.dom.treewrap.css("top"))+e;t>0?t=0:Math.abs(t)>s&&(t=0-s),i.dom.treewrap.stop(1).animate({top:t},1e3,"linear",function(){c(e)}),i.dom.seq.stop(1).animate({marginTop:t},1e3,"linear"),a.stop(1).animate({top:(0-t)/l},1e3,"linear")},u=function(){i.$("#treewrap,#seq,#verticalDragger .dragger").stop(1),clearInterval(o)};return $.each(["up","down"],function(e,t){var n=$('<div class="treescroll '+t+'" style="width:'+i.dom.left.width()+'px">'+("up"==t?"":"")+"</div>");i.dom.page.append(n);var r=n.offset().top;n.mouseenter(function(){o=setInterval(function(){i.makeImage()},2e3)}),n.mousemove(function(e){var i="up"==t?n.outerHeight()-(e.pageY-r):0-(e.pageY-r);i%2!=0&&c(10*i)}),n.mouseleave(function(){u()})}),i.dom.wasabi.one("mouseup",function(n){var o=n.target.tagName;if("circle"==o||"tspan"==o||"line"==o&&"horizontal"==i.$(n.target).attr("class")){var s=parseInt(n.target.getAttribute("nodeid")),a=i.treesvg.data.root.getNode(s);t&&a&&(t.move(a),i.refresh())}else e&&"DIV"==o&&"treebin"==n.target.id&&(t&&t.remove(),i.refresh());t.highlight(!1),i.$("#left,#right,#namesborderDragline").removeClass("dragmode"),i.$("div.treescroll").remove(),u(),e&&r.remove(),i.dom.page.unbind("mousemove"),i.hideTooltip()}),e?r:void 0},w.titlemenu=function(e){var t=this;if(e.stopPropagation(),t.model.editname())return!1;var n="",i={};t.model.library.openitem()&&t.model.library.openitem().shared||(i.Rename=function(){t.model.editname(!0)}),i.Save=function(){t.savefile(t.$("#toptitle>span.note"))},i.Export=function(){t.dialog("export")},t.model.library.openitem()?i["View in Library"]=function(){t.dialog("library")}:n="Not in Library",t.tooltip("",n,{target:t.$("#toptitle"),arrow:"top",shifty:-5,data:i,style:"white greytitle",id:"titlemenu"})},w.topmenu=function(e){var t=this;if(e){var n="",i={},r={online:!t.model.offline()&&!t.model.noaccount(),seq:t.model.seqsource(),dna:t.model.dnasource(),tree:t.model.treesource(),data:t.model.seqsource()||t.model.treesource(),sharing:t.model.settings.sharelinks()},o=t.unwrap(t.model[e])||{};$.each(o,function(n,o){var s={};return"undostack"==e?(o.txt=n,s.txt=o.name,s.icon=o.type,s.t=o.info,s.css={backgroundColor:o==t.model.activeundo.data()?"#ffcc66":""},s.click=function(){t.model.selectundo(o)}):(s.icon=o.icn,s.t=o.inf,s.click="function"==typeof o.act?o.act:function(){t.dialog(o.act)},s.css=o.css||"",o.req&&$.each(o.req,function(e,n){return n&&!r[n]?(s.click="online"==n?function(){t.dialog("jobstatus")}:"dna"==n?function(){return!1}:"",s.css={opacity:"0.2"},!1):void 0})),s.click?void(i[o.txt]=s):!0}),Object.keys(i).length||(n="No items"),t.tooltip("",n,{clear:!0,target:t.$("#"+e),arrow:"top",data:i,style:"white topmenu greytitle",id:e+"_tooltip"})}},w.treemenu=function(e){var t=this,n=e.parent?{"Hide this node":{icon:"hide",t:"Collapse node and its children",click:function(){e.hideToggle()}}}:{};$.each(e.children,function(e,i){if("ancestral"==i.type)return!0;var r=(i.hidden?"Show ":"Hide ")+(0==e?"upper ":"lower ")+" child";if(n[r]={icon:0==e?"upper":"lower",t:"(Un)collapse a child node",click:function(){i.hideToggle()}},i.children.length&&i.hidden){var o=function(){var e=$('<span style="margin-left:5px" class="svgicon">'+t.svgicon("view")+"</span>");return e.mouseenter(function(n){t.tooltip(n,"",{target:e[0],data:i.makeCanvas(),arrow:"left",style:"none",hoverhide:!0})}),e};n[r].add=o}}),n["Show subtree"]={icon:"children",t:"Uncollapse all child nodes",click:function(){e.showSubtree()}};var i={"Show/hide tree nodes":{submenu:n}},r=e.children[e.children.length-2];return"ancestral"==r.type&&(i["Ancestral sequences"]={submenu:{"Show/hide ancestral seq.":{t:(r.hidden?"Reveal":"Hide")+" the ancestral sequence of this node",icon:"ancestral",click:function(){r.hideToggle()}},"Show subtree ancestors":{t:"Show ancestral sequences of the whole subtree",icon:"ancestral",click:function(){e.showSubtree("anc")}},"Hide subtree ancestors":{t:"Hide ancestral sequences of the whole subtree",icon:"ancestral",click:function(){e.showSubtree("anc","hide")}}}}),i["Reorder subtree"]={submenu:{"Swap children":{t:"Swap places of child nodes",icon:"swap",click:function(){e.swap()}}}},e.visibleLeafCount>2&&(i["Reorder subtree"].submenu["Ladderise subtree"]={t:"Reorder the subtree",icon:"ladderize",click:function(){e.ladderize()}}),e.parent&&(i["Move node"]={t:"Graft this node to another branch in the tree",icon:"move",click:function(){movenode("",e,"circle")},noref:!0},i["Place root here"]={t:"Place this node as the tree outgroup",icon:"root",click:function(){e.reRoot()}},i["Remove nodes"]={submenu:{"Remove this node":{t:"Remove this node and its children from the tree",icon:"trash",click:function(){e.remove()}}}},e.leafCount>2&&(i["Remove nodes"].submenu["Keep only subtree"]={t:"Remove all nodes except this subtree",icon:"prune",click:function(){e.prune()}})),i["Export subtree"]={t:"Export this subtree in newick format",icon:"file_export",click:function(){t.dialog("export",{exportdata:e.write()})},css:{"border-top":"1px solid #999"},noref:!0},i},w.tooltip=function(e,t,n){var i=this;n||(n={});var r=n.id?i.$("#"+n.id):[];if(r.length){if(n.norefresh)return r;var o=$(".arrow",r),s=$(".tooltiptitle",r),a=$(".tooltipcontentwrap",r),l=$(".tooltipcontent",r);s.empty(),l.empty()}else{r=$('<div class="tooltip"></div>');var o=$('<div class="arrow"></div>'),s=$('<div class="tooltiptitle"></div>'),a=$('<div class="tooltipcontentwrap"></div>'),l=$('<div class="tooltipcontent"></div>');if(a.append(l),r.append(o,s,a),n.id){if("treemenu"==n.id&&n.data)return void r.remove();r.attr("id",n.id)}var c=n.container||i.dom.page;$(c).append(r)}n.clear&&i.hideTooltip("",r,n.nodeid||""),i.dom.wasabi.off("click");var u=n.arrow||!1,d=n.treetip||!1,h=n.style||i.model.settings.tooltipclass()||"none";if("none"!=h&&r.addClass(h),n.css&&r.css(n.css),n.maxw&&r.css({"max-width":n.maxw+"px","white-space":"pre-line"}),n.target){var p="object"==typeof n.target?n.target:e.currentTarget;if(p.jquery&&(p=p[0]),p.tagName){var f=$(p);p.width||(p.width=f.width()),p.height||(p.height=f.height()),"circle"==p.tagName.toLowerCase()?(n.nodeid&&(d=!0),p.x=f.offset().left+25,p.y=f.offset().top-7):"li"==p.tagName.toLowerCase()?(p.x=f.innerWidth()-2,p.y=f.position().top-2,"white"==h&&(p.y-=1),p.relative=!0):(p.x=f.offset().left,p.y=f.offset().top,f.hasClass("svgicon")&&(p.x+=27,p.y-=3),u||(p.x+=15,p.y+=p.height+5))}p.x||(p.x=e.pageX+5||0),p.y||(p.y=e.pageY+5||0)}else var p={x:e.pageX+5,y:e.pageY+5};if(p.x+=parseInt(n.shiftx||0),p.y+=parseInt(n.shifty||0),!p.relative){var m=i.dom.wasabi.offset().left+i.dom.wasabi.innerWidth()-20;!n.container&&p.x>m&&(p.x=m)}p.width||(p.width=5),p.height||(p.height=5);var g=!1,v=!1,b=!1,y=!1;if(n.nodeid&&i.treesvg.data&&(g=i.treesvg.data.root.getNode(n.nodeid),y=i.treesvg.data.selectedNodeId=n.nodeid),n.data){if(d&&g){var w=g.leafCount-g.visibleLeafCount,v=$('<span class="right">'+(w?' <span class="svgicon" style="padding-right:0" title="Hidden leaves">'+i.svgicon("hide")+"</span>"+w:"")+"</span>");w&&t.length>10&&v.css({position:"relative",right:"0"});var x=$('<span class="svgicon">'+i.svgicon("info")+"</span>").css({cursor:"pointer"});x.mouseenter(function(e){var t=[];t.push('<span class="note">Branch length</span> '+Math.round(1e3*g.len)/1e3);var n=["species","taxa_id","gene","gene_id","bootstrap","duplications","speciations","accession","EC","EC_class"];$.each(n,function(e,n){g[n]&&t.push('<span class="note">'+n.capitalize().replace(/_/g," ")+"</span> "+g[n])}),i.tooltip(e,"",{target:x[0],data:t,arrow:"left",style:"bulletmenu",hoverhide:!0})}),v.append(x),g.parent||g.species||(t="Root");var k=(g.parent?"":"Root node: ")+(g.species?"taxa ":"")+t;t='<span class="title" title="'+k+'">'+t+"</span>",n.data=i.treemenu(g)}if(n.data.tagName||"string"==typeof n.data)l.append(n.data);else{b=!0;var _=$("<ul>");$.each(n.data,function(e,t){if("undefined"==typeof t)return!0;var r=$("<li>");if(t?$.isArray(t)?t={submenu:t}:"string"==typeof t?t={txt:t}:"function"==typeof t&&(t={click:t}):t={},t.txt&&(e=t.txt),t.submenu){var o=Object.keys(t.submenu);if(!o.length)return!0;1==o.length?(e=o[0],t=t.submenu[e],t.txt&&(e=t.txt)):(e+=' <span class="right"></span>',r.addClass("arr"),r.mouseenter(function(e){i.tooltip(e,"",{target:r[0],data:t.submenu,style:n.style||"",treetip:d})}))}var s=t.t?'title="'+t.t+'">':">";t.icon?e='<span class="svgicon" '+s+i.svgicon(t.icon)+"</span>"+e:s&&(e="<span "+s+e+"</span>"),r.html(e),"function"==typeof t.click&&(r.click(function(e){e.stopPropagation(),i.hideTooltip(),t.click()}),d&&!t.noref&&r.click(function(){i.refresh()})),t.over&&r.mouseenter(t.over),t.out&&r.mouseleave(t.out),t.add&&r.append(t.add),t.css&&r.css(t.css),t["class"]&&r.addClass(t["class"]),r.html()&&_.append(r)}),_.html()&&l.append(_),t&&$("li:first-child",_).css("border-radius",0),d&&t&&(a.css({height:l.innerHeight()+2+"px"}),setTimeout(function(){a.css("overflow","visible")},500)),p.tagName&&"li"==p.tagName.toLowerCase()&&($(p).append(r),n.hoverhide=!0)}l.html()&&s.css("border-bottom","1px solid #999")}else d&&(g.parent||g.species?t||(t="Tree node. Click for options."):t="Root node"),n.nohide||(("object"!=typeof n.target||n.target.tagName)&&(n.hoverhide=!0),"string"!=typeof n.autohide&&setTimeout(function(){i.hideTooltip(r)},n.autohide||3e3));if(t?(s.html(t),v&&s.append(v)):s.css("display","none"),n.hoverhide&&p.tagName&&$(p).one("mouseleave",function(e){var t=function(){i.hideTooltip(r,"",y)};if(n.tiphover){var o=setTimeout(t,600);r.one("mouseenter",function(){clearTimeout(o)}),r.one("mouseleave",t)}else t()}),b||r.click(function(e){e.stopPropagation()}),setTimeout(function(){i.dom.wasabi.one("click",function(){i.hideTooltip()})},400),n.ko&&ko.applyBindings(n.ko,r[0]),("top"==u||"bottom"==u)&&(p.x+=(p.width-r.innerWidth())/2,"top"==u&&p.y-i.topedge+r.innerHeight()+10>i.dom.page.innerHeight()&&(u="bottom"),"top"==u?p.y+=p.height+15:"bottom"==u&&(p.y-=r.innerHeight()+10)),u&&r.addClass(u+"arrow"),!n.nomove){var C={left:parseInt(p.x),top:parseInt(p.y)};p.relative?r.css(C):r.offset(C)}return setTimeout(function(){r.addClass("opaque")},34),r},w.hideTooltip=function(e,t,n){var i=this,r=i.treesvg.data?i.treesvg.data.selectedNodeId:!1;if(r&&(!n||r!=n)){try{i.treesvg.data.root.getNode(r).highlight(!1)}catch(o){}i.treesvg.data.selectedNodeId=!1}e||i.model.activeid("");var s=$(e||"div.tooltip").not(t);s.each(function(){var e=$(this);e.removeClass("opaque"),setTimeout(function(){e.remove()},200)})},w.expandTitle=function(e){var t=$('<span class="rotateable">&#x25BA;</span>'),n="",i=$('<span class="action" title="'+(e.desc||"Click to toggle content")+'">'+(e.title||"View/hide")+"</span>");e.info&&(n=$('<span class="note" style="display:none;margin-left:20px">'+e.info+"</span>"),e.onshow=function(){n.fadeIn()},e.onhide=function(){n.fadeOut()}),i.click(function(){var n=e.target||$(this).parent().next(".insidediv");t.hasClass("rotateddown")?(t.removeClass("rotateddown"),e.minh?n.animate({height:e.minh}):n.slideUp(),"function"==typeof e.onhide&&e.onhide()):(t.addClass("rotateddown"),e.maxh?(isNaN(e.maxh)&&(e.maxh=n[0].scrollHeight),n.animate({height:e.maxh})):n.slideDown(),"function"==typeof e.onshow&&e.onshow())});var r=$("<div>").append(t,i);return e.info&&r.append(n),e.inline&&r.css({display:"inline-block","margin-left":"5px"}),"object"==typeof e.css&&r.css(e.css),r},w.makeWindow=function(e,t,n){var i=this;n||(n={}),$.isArray(t)||(t=[t]);var r=i.model.settings.windowanim();if(!(i.$("div.popupwindow").length>10)){n.id&&i.$("#"+n.id).length&&(n.position=i.$("#"+n.id).position(),n.flipside&&"front"!=n.flipside||i.$("#"+n.id).remove());var o=!1,s="";if(n.flipside){if(n.id&&i.$("#"+n.id).length)o=i.$("#"+n.id);else{var a=i.model.settings.windowanim()?"zoomin":"";o=$('<div class="popupwrap '+a+'">'),i.dom.page.append(o)}s="side "+n.flipside+" ",r||(s+="notransition ")}else r&&(s="zoomin ");n["class"]&&(s+=n["class"]);var l=$('<div class="popupwindow '+s+'"></div>'),c=o||l;n.id&&c.attr("id",n.id);var u=i.$("#backfade"),d=$('<span class="closebtn" title="Close window">'+i.svgicon("x")+"</span>"),h=function(){c.removeClass("zoomed"),r?setTimeout(function(){c.remove()},600):c.remove(),"none"!=u.css("display")&&u.fadeOut(),n.closefunc&&n.closefunc()};if(d.click(h),n.btn){if("string"==typeof n.btn||n.btn.jquery){n.btn=[n.btn];var p="center"}else var p="right";var f=$('<div class="btndiv" style="text-align:'+p+'">');$.each(n.btn,function(e,t){"string"==typeof t?f.append($('<a class="button grey">'+t+"</a>").click(h)):(1==t.attr("class").split(" ").length&&t.addClass("grey"),f.append(t))}),t.push(f)}var m=$('<div class="windowtitle"></div>'),g=$('<div class="windowcontent"></div>');g.css("max-height",i.dom.page.height()-100+"px"),n.nowrap&&g.css("white-space","nowrap"),n.nomaxw||g.css("max-width","500px");var v=$('<div class="windowheader"></div>');if(n.header&&$.each(n.header,function(e,t){v.append(t)}),n.icn){var b=n.plugin?"plugins/"+n.plugin:"images";-1==n.icn.indexOf(".")&&(n.icn+=".png");var e='<img class="windowicn" src="'+b+"/"+n.icn+'"> '+e}m.html(e),$.each(t,function(e,t){g.append(t)}),l.append(v,g,m,d),n.hidden&&l.css("display","none"),i.$(o||"#page").append(l);var y={w:i.dom.page.width(),h:i.dom.page.height()},w={w:l.width(),h:l.height()},x=function(e,t){var n=Math.max.apply(null,$.map(i.$("#page>div.popupwindow,div.popupwrap"),function(e,t){return parseInt(i.$(e).css("z-index"))||1})),r=parseInt(i.$(e).css("z-index"));(n>r||r==n&&t)&&i.$(e).css("z-index",n+1)};n.backfade&&c.css({top:y.h/2-w.h/2+"px",left:y.w/2-w.w/2+"px"});var k=n.position||(i.$("#page>div.popupwindow").length?i.$("#page>div.popupwindow").last().position():"");return!k||n.flipside&&"front"!=n.flipside||(x(c,"first"),c.css({top:k.top+10+"px",left:k.left+10+"px"})),c.mousedown(function(){x(c)}),o&&w.w>o.width()&&o.css("width",w.w-50+"px"),o&&w.h>o.height()&&o.css("height",w.h-50+"px"),setTimeout(function(){c.draggable({handle:"div.windowtitle",containment:"parent"})},800),n.backfade?u.fadeIn({complete:function(){r&&c.addClass("zoomed")}}):r&&setTimeout(function(){c.addClass("zoomed")},100),setTimeout(function(){c.addClass("finished")},900),c}},w.closeWindow=function(e,t){var n=this;e&&(e="string"==typeof e?"all"==e?n.$("div.popupwindow"):n.$("#"+e):e.pageX?$(this):n.$(e),e.each(function(){var e=$(this),i=e.hasClass("popupwindow")?e:e.hasClass("popupwrap")?n.$(e[0]):e.closest("div.popupwindow");"function"==typeof t?i.find(".closebtn").click(t):i.find(".closebtn").click()}))},w.dialogs={"export":function(e){var t=this;1==Object.keys(e).length&&(e=!1),t.model["export"].filename(t.model["export"].savename().replace(/\s+/g,"_"));var n=function(e){e.removeClass("finished flipped"),setTimeout(function(){e.addClass("finished")},900)},i=t.treesvg.data&&3==t.treesvg.data.root.children.length?!0:!1,r=$('<!-- ko with:$root.export --><div class="sectiontitle" style="min-width:320px"><img src="images/file.png"><span>File</span></div><span class="cell">Data<hr><select data-bind="options:categories, optionsText:\'name\', value:category"></select></span><span class="cell" data-bind="fadevisible:category().formats.length,with:category">Format<hr><span data-bind="visible:formats.length==1,text:formats[0].name"></span><select data-bind="visible:formats.length>1, options:formats, optionsText:\'name\', value:$parent.format"></select></span><span class="cell" data-bind="with:format,fadevisible:format().variants.length>1">Variant<hr><select data-bind="options:variants, optionsText:\'name\', value:$parent.variant"></select></span> <span class="svgicon" style="margin-left:-8px" data-bind="fadevisible:variant().desc,click:infolink,attr:{title:variant().desc}">'+t.svgicon("info")+'</span><br>&nbsp;Name: <input type="text" class="faded" style="width:200px;text-align:right;margin:0" title="Click to edit" data-bind="value:filename"><span style="font-size:17px" data-bind="visible:variant().ext.length<2,text:variant().ext[0]"></span><select data-bind="visible:variant().ext.length>1, options:variant().ext, value:fileext"></select><br><br><div class="sectiontitle"><img src="images/gear.png"><span>Options</span></div>'+(i?'<input type="checkbox" data-bind="checked:includeanc"> Include ancestors':"")+'<div data-bind="slidevisible:~category().name.indexOf(\'Seq\')"><input type="checkbox" data-bind="checked:includehidden">Include hidden columns<br>&nbsp;&nbsp;Mark masked sequence with <select data-bind="options:maskoptions,value:masksymbol"></select></div><br data-bind="visible:!~category().name.indexOf(\'Seq\')">&nbsp;&nbsp;Cut names to first <select data-bind="options:[\'\',\'space\',\'digit\',\'punct.\'],value:truncsymbol"></select>, max. <input type="text" class="num" data-bind="value:trunclen" style="margin-top:5px">letters</div><!-- /ko -->'),o=$('<a class="button orange" data-bind="visibility:$root.export.format">Make file</a>');o.click(function(){t.parseexport()});var s=$('<!-- ko with:$root.export --><div class="sectiontitle"><img src="images/file.png"><span data-bind="text:filename()+(~filename().indexOf(\'.\')?\'\':fileext())"></span></div><div class="insidediv" style="max-width:400px;max-height:150px;overflow:auto"><div class="paper"></div></div><!-- /ko -->'),a=$('<a class="button backbtn" style="padding-left:17px;margin-top:25px"><span style="vertical-align:2px">&#x25C0;</span> Options</a>');a.click(function(){n($(this).closest("div.popupwrap")),t.model["export"].filename(t.model["export"].savename().replace(/\s+/g,"_"))});var l=$('<a class="button" style="margin-left:40px;margin-top:25px" data-bind="visible:$root.export.fileurl,attr:{href:$root.export.fileurl}">Download</a>'),c=function(n){n.find("paper").text(t.parseexport(e)),n.addClass("flipped"),(e.exporturl||e.exportdata)&&n.find("a.backbtn").css("display","none")};return{title:"Export data",content:r,opts:{icn:"export",btn:o,nowrap:!0},func:e?c:!1,back:{content:[s,a,l]}}},info:function(){var e=this,t=e.model.library,n=~e.model.sourcetype().indexOf("local")?"":t.shareicon(t.openitem(),"","source data",t.importurl),i='<ul class="nowrap"><li data-bind="visible:treesource">Number of tree nodes: <span data-bind="text:nodecount"></span></li><li data-bind="visible:treesource">Number of tree leafs: <span data-bind="text:leafcount"></span></li><li data-bind="visible:seqsource()">Sequence type: <select data-bind="options:[\'DNA\',\'RNA\',\'codons\',\'protein\'],value:seqtype"></select></li><li>Number of sequences: <span data-bind="text:seqcount"></span>, in total of <span data-bind="html:totalseqlength"></span></li><li>Sequence length: from <span data-bind="html:minseqlength"></span> to <span data-bind="html:maxseqlength"></span></li><li>Sequence matrix length: <span data-bind="html:alignlength"></span> columns <span data-bind="visible:hiddenlen,text:\'(\'+hiddenlen()+\' columns hidden)\'"></span></li><li>Sequence matrix height: <span data-bind="text:alignheight"></span> rows</li><li data-bind="visible:sourcetype">Data source: <span data-bind="text:sourcetype"></span> '+n+'</li><li data-bind="visible:treesource()&&!ensinfo().type">Tree file: <span data-bind="text:treesource"></span></li><li data-bind="visible:seqsource()&&!ensinfo().type">Sequence file: <span data-bind="text:seqsource"></span></li></ul>',r='<div data-bind="if:ensinfo().type" style="margin-top:5px"><span style="color:#666">About Ensembl dataset:</span><br><ul class="nowrap" data-bind="with:ensinfo"><!-- ko if: type==\'homology\' --><li>Homologs to <span data-bind="text:species"></span> gene '+"<a data-bind=\"attr:{href:'http://www.ensembl.org/'+species.replace(' ','_')+'/Gene/Summary?g='+id,target:'_blank',title:'View in Ensembl'},text:id\"></a></li><!-- /ko --><!-- ko if: ~type.indexOf('genetree') --><li>Genetree <a data-bind=\"attr:{href:'http://www.ensembl.org/'+(~id.indexOf('ENSGT')?'Multi/GeneTree/Image?gt=':'Gene/Summary?g=')+id,target:'_blank',title:'View in Ensembl'},text:id\"></a></li><!-- /ko --><!-- ko if: ~type.indexOf('alignment') --><li>EPO alignment: <span data-bind=\"text:id.replace('/',': ').replace('_',' ')\"></span></li><!-- /ko --></ul></div>";return{title:"Data information",content:[i,r],opts:{btn:"OK",icn:"info"}}},error:function(e){var t=this;return t.$("div.popupwindow").length>5||e.id&&t.$("#"+e.id).length?void console.log("Skipped notice window: "+e.msg):("string"==typeof e&&(e={msg:e,type:"notice"}),{title:e.type.charAt(0).toUpperCase()+e.type.slice(1),content:e.msg,noid:!0,opts:{btn:"OK",icn:"warning"}})},seqtool:function(){var e=this,t=$('<div style="color:red"><img src="images/warning.png"> Sequences seem to be unaligned</div><div data-bind="with:tools"><div class="spinnercover"><span>Counting gaps...</span></div><div class="sectiontitle"><span>Filter alignment columns</span></div><div class="sectiontext"><select data-bind="options:[\'Hide\',\'Mask\'],value:hideaction"></select> all sequence alignment columns with: <ul class="nowrap"><li><input type="checkbox" data-bind="checked:hideconserved"> fully conserved sequences,</li><li><input type="checkbox" data-bind="checked:minhidelimit"> unaligned sequences, or</li><li><input id="hidecolinp" type="text" class="num nogap" data-bind="value:hidelimit, valueUpdate:\'afterkeydown\'"> <span class="note" data-bind="text:\'(\'+hidelimitperc()+\'%)\'"></span> or less rows of sequence.<br><span class="note">0%</span><span class="draggerline"></span><span class="note">100%</span></li><hr><li>consider <span data-bind="visible:!$root.hasdot()">gaps</span><select data-bind="visible:$root.hasdot, options:[\'indels\',\'insertions\',\'deletions\'],value:gaptype"></select></span> longer than <input type="text" class="num nogap" data-bind="value:gaplen,valueUpdate:\'afterkeydown\'"> columns.</li><li data-bind="slidevisible:hideaction()==\'Hide\'">exclude <input type="text" class="num nogap" data-bind="value:buflen, valueUpdate:\'afterkeydown\'"> columns from each gap edge.</li></ul></div><div>&nbsp;This will <span class="label" data-bind="visible:hideaction()==\'Hide\'" title="Use (right-click) menu in alignment area to remove collapsed columns from dataset">collapse</span><span class="label" data-bind="visible:hideaction()==\'Mask\'" title="Use (right-click) menu in alignment area to to hide masked columns">mask</span> <span data-bind="text:hidecolcount"></span> <span class="note" data-bind="text:\'(\'+hidecolperc()+\'% of)\'"></span> alignment columns.</div></div>'),n=$("<span class=\"dragger\" data-bind=\"style:{marginLeft:'-7px', left:hidelimitperc()+'%'}\"></span>"),i=$(".draggerline",t);i.append(n);var r=$('<a class="button orange">Apply</a>');r.click(function(){e.closeWindow(r),e.piwik.trackEvent("trackEvent","tools","gap hiding",e.model.tools.hideaction()),setTimeout(function(){"Mask"==e.model.tools.hideaction()?e.maskData("columns","skip"):e.hideColumns()},500)});var o=function(){var t=i.width();n.draggable({axis:"x",containment:"parent",drag:function(n,i){e.model.tools.hidelimitperc((i.position.left+4)/t*100)}}),setTimeout(function(){e.model.tools.countgaps()},500)};return{title:"Sequence tools",content:t,func:o,opts:{icn:"seq",btn:["Cancel",r],closefunc:function(){e.clearSelection()}}}},treetool:function(){var e=this,t=$('<div class="sectiontitle"><span>Prune tree leafs</span></div>'),n=$('<div class="sectiontext" data-bind="with:tools">You can mark/unmark tree leafs by clicking on a leaf name<br>or by dragging in the sequence area.<br><br></div>'),i=[];if($.each(e.leafnodes,function(t,n){e.sequences[t]||i.push(t)}),i.length){var r=$('<a class="button square small">Mark empty leafs</a>');r.click(function(){$.each(e.leafnodes,function(t,n){e.sequences[t]?n.highlight(!1):n.highlight(!0)})});var o=i.length>1?["s","ve"]:["","s"];n.append(i.length+" leaf"+o[0]+" ha"+o[1]+" no sequence data.",r,"<br><br>")}n.append('Then click "Apply" to <select data-bind="options:[\'hide\',\'prune\'],value:leafaction"></select> <select data-bind="options:[\'marked\',\'unmarked\'],value:leafsel"></select> tree leafs.<br><span id="treetoolerror" style="color:red"></span>');var s=$('<a class="button orange">Apply</a>');s.click(function(){e.model.tools.processLeafs(),e.piwik.trackEvent("trackEvent","tools","tree pruning")});var a=function(){e.clearSelection(),e.model.tools.markLeafs("unmark"),e.model.tools.prunemode=!1},l=function(){e.clearSelection(),e.model.tools.markLeafs("unmark"),e.model.tools.prunemode=!0,"rows"!=e.model.selmode()&&e.model.selmode("rows")};return{title:"Tree tools",content:[t,n],func:l,opts:{icn:"tree",btn:["Cancel",s],closefunc:a}}},settings:function(){var e=this,t=$('<div class="insidediv" style="margin:0;padding:5px;min-width:330px" data-bind="with:settings">');e.fullmode&&t.append('<div class="row" style="width:380px" data-bind="visible:!$root.offline()"><span class="label" title="Session data is saved to analysis library">Autosave after every</span> <select data-bind="options:autosaveopt,value:autosaveint"></select><a class="button toggle" data-bind="css:{on:autosave},click:toggle.bind($data,autosave)"><span class="light"></span><span class="text" data-bind="text:btntxt(autosave)"></span></a></div>'),t.append('<div class="row">Keep up to <select data-bind="options:[1,5,15,30],value:undolength"></select> <span class="label" title="Actions history enables to undo/redo previous data edits. With large datasets, it may affect the application performance.">actions in undo list</span><a class="button toggle" data-bind="css:{on:undo},click:toggle.bind($data,undo)"><span class="light"></span><span class="text" data-bind="text:btntxt(undo)"></span></a></div>');var n=$('<div class="rowwrap" data-bind="visible:$root.seqsource()">'),i=$('<div class="row bottombtn">').append(e.expandTitle({title:"Colour sequences:",desc:"Click for additional settings",target:n,minh:"34px",maxh:"auto"}).css("display","inline-block"));i.append(' <select data-bind="options:coloropt, value:colorscheme"></select> colour scheme<br><span>Show letters in <select style="margin-top:10px" data-bind="options:fontopt,value:font"></select> with <select data-bind="options:[\'border\',\'no border\'], value:boxborder"></select></span><br><span>Masked sites in <select data-bind="options:cases, value:maskletter"></select> with <select style="margin-top:10px" data-bind="options:maskcolors, value:maskcolor"></select> background</span><br><span>Ancestral sites in <select data-bind="options:cases, value:ancletter"></select> with <select style="margin-top:10px" data-bind="options:anccolors, value:anccolor"></select> backg.</span>'),n.append(i);var r="";if(e.fullmode){var r=$('<div class="rowwrap">'),o=$('<div class="row bottombtn">').append(e.expandTitle({title:"When Wasabi launches:",desc:"Click for additional settings. These settings take effect after reloading the web page"+(e.model.settings.local?" and/or restarting Wasabi server":""),target:r,minh:"34px",maxh:"auto"}).css("display","inline-block"));o.append(' open <select style="margin-bottom:10px" data-bind="options:launchopt,value:onlaunch"></select><br>Restore zoom level <a class="button toggle" data-bind="css:{on:keepzoom},click:toggle.bind($data,keepzoom)"><span class="light"></span><span class="text" data-bind="text:btntxt(keepzoom)"></span></a>'),r.append(o)}e.model.settings.local&&(r.append('<div class="row">Check for updates <a class="button square small" style="margin:-5px 20px 0;font-size:14px" data-bind="click:function(d,e){$root.w.checkversion(e.target)}">check now</a> <a class="button toggle" data-bind="css:{on:checkupdates},click:toggle.bind($data,checkupdates)"><span class="light"></span><span class="text" data-bind="text:btntxt(checkupdates)"></span></a></div><div class="row"><span class="label" title="Which browser to use when Wasabi server starts. Chrome usually has the fastest performance">Autolaunch Wasabi in</span> <select data-bind="options:browsers,optionsText:\'n\',optionsValue:\'v\',value:openbrowser"></select> web browser</div><div class="row"><span class="label" title="This folder will hold the analysis library and other data. Click to edit the folder path">Keep Wasabi data in</span> <input id="datadir" type="text" class="hidden" style="margin:0;width:220px" data-bind="value:datadir" title="Click to edit folder path"></div>'),"osxbundle"==e.model.settings.local?r.append('<div class="row"><span class="label" title="Wasabi server will use a new window instead of the Console app to show its status">Show server feedback</span> <a class="button toggle" data-bind="css:{on:bundlestart},click:toggle.bind($data,bundlestart)"><span class="light"></span><span class="text" data-bind="text:btntxt(bundlestart)"></span></a></div>'):"linux"==e.model.settings.local&&r.append('<div class="row"><span class="label" title="Places a double-clickable shortcut to desktop for easy launching">Create desktop launcher</span> <a class="button toggle" data-bind="css:{on:linuxdesktop},click:toggle.bind($data,linuxdesktop)"><span class="light"></span><span class="text" data-bind="text:btntxt(linuxdesktop)"></span></a></div>'));var s=$('<div class="rowwrap">'),a=$('<div class="row bottombtn">').append(e.expandTitle({title:"User interface:",desc:"Click for additional settings",target:s,minh:"34px",maxh:"171px"}).css("display","inline-block"));return a.append(' all animations <a class="button toggle" data-bind="css:{on:allanim},click:toggle.bind($data,allanim)"><span class="light"></span><span class="text" data-bind="text:btntxt(allanim)"></span></a><br><span class="label" style="margin-top:10px" title="Disable window animations in case of blurry text">Dialog window animations</span><a class="button toggle" style="margin-top:8px;" data-bind="css:{on:windowanim},click:toggle.bind($data,windowanim)"><span class="light"></span><span class="text" data-bind="text:btntxt(windowanim)"></span></a>'),s.append(a,'<div class="row bottombtn"><span class="label" title="Click on bottom-left edge of menubar to toggle the display mode">Auto-hide menubar in minimized mode</span><a class="button toggle" data-bind="css:{on:hidebar},click:toggle.bind($data,hidebar)"><span class="light"></span><span class="text" data-bind="text:btntxt(hidebar)"></span></a><br>'+(e.fullmode?'<span style="display:inline-block;margin-top:10px">Compact viewmode of analysis library</span><a class="button toggle" style="margin-top:8px;" data-bind="css:{on:minlib},click:toggle.bind($data,minlib)"><span class="light"></span><span class="text" data-bind="text:btntxt(minlib)"></span></a><br><span style="display:inline-block;margin-top:10px">Show analysis path in library</span><a class="button toggle" style="margin-top:8px;" data-bind="css:{on:ladderlib},click:toggle.bind($data,ladderlib)"><span class="light"></span><span class="text" data-bind="text:btntxt(ladderlib)"></span></a>':"")+'</div><div class="row"><span class="label" title='+(e.fullmode?'"The analysis sharing links are only useful when Wasabi server is accessible to other computers">Library data':'"Opens the current dataset in the public Wasabi webapp">Data')+' sharing links</span><a class="button toggle" data-bind="css:{on:sharelinks},click:toggle.bind($data,sharelinks)"><span class="light"></span><span class="text" data-bind="text:btntxt(sharelinks)"></span></a></div>'),
t.append(n,r,s),t.append('<div class="row bottombtn" data-bind="visible:userid"><span class="label" data-bind="attr:{title:\'User ID: \'+userid()}">User account</span> <span class="progressline" style="width:150px;margin-left:20px" data-bind="visible:datalimit, attr:{title:dataperc()+\' of \'+$root.w.numbertosize(datalimit,\'byte\')+\' server space in use\'}"><span class="bar" data-bind="style:{width:dataperc}"></span><span class="title" data-bind="html:\'Library size: \'+$root.w.numbertosize(datause(),\'byte\')"></span></span><a class="button toggle" style="margin-top:-2px;padding-bottom:2px" data-bind="click:function(){$root.w.dialog(\'account\')}">Settings</a><br><br><span class="label" title="This web browser remembers and opens your account URL when you go to Wasabi web page. Disable on public computers">Remember me on this computer</span> <span class="svgicon share" style="margin-left:35px" title="View/share your account URL" data-bind="click:function(){$root.w.dialog(\'share\',{library:true})}">'+e.svgicon("link")+'</span><a class="button toggle" data-bind="css:{on:keepuser},click:toggle.bind($data,keepuser)"><span class="light"></span><span class="text" data-bind="text:btntxt(keepuser)"></span></a></div>'),{title:"Settings",content:t,opts:{icn:"settings",btn:"OK",closefunc:function(){e.model.settings.saveprefs()}}}},translate:function(){var e=this,t='<div style="width:420px;margin-bottom:20px">Display the sequences as <span class="buttongroup"><a class="button left" data-bind="click:function(){w.translateSeq(\'DNA\')}, css:{pressed:isdna,disabled:!dnasource()}">nucleotides</a><a class="button middle" data-bind="click:function(){w.translateSeq(\'codons\')}, css:{pressed:seqtype()==\'codons\',disabled:!dnasource()}">codons</a><a class="button right" data-bind="click:function(){w.translateSeq(\'protein\')}, css:{pressed:seqtype()==\'protein\'}">protein</a></span><div>',n=$('<div data-bind="visible:!dnasource()">To backtranslate a protein sequence, Wasabi needs the cdna sequences used for the protein alignment.<br>Drag or select data file(s) with the source cdna.<br></div>'),i=$('<div class="filedrag">Drag cdna file here</div>');i.bind("dragover",function(e){i.addClass("dragover"),e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"}).bind("dragleave",function(e){i.removeClass("dragover"),e.stopPropagation(),e.preventDefault()}).bind("drop",function(t){i.removeClass("dragover"),t.stopPropagation(),t.preventDefault(),e.checkfiles(t.originalEvent.dataTransfer.files,{window:$(this).closest("div.popupwindow"),mode:"importcdna"})});var r=$('<input type="file" multiple style="opacity:0" name="file">'),o=$('<form enctype="multipart/form-data" style="position:absolute">');r.change(function(){e.checkfiles(this.files,{window:$(this).closest("div.popupwindow"),mode:"importcdna"})});var s=$('<a class="button" style="vertical-align:0">Select files</a>');s.click(function(e){r.click(),e.preventDefault()});var a=$('<span style="display:inline-block;font-size:18px;"> or </span>');return o.append(r),i.append(o),n.append([i,a,s]),{title:"Translate sequences",content:[t,n],opts:{icn:"translate",btn:"OK"},back:{title:"Importing cdna",opts:{icn:"import.png"}}}},about:function(){var e=$('<div class="sectiontitle"><span class="label" title="Current version: '+w.currentversion+'">About Wasabi</span></div><div class="sectiontext">Wasabi is a browser-based application for the visualisation and analysis of multiple alignment molecular sequence data.<br>Its multi-platform user interface is built on most recent HTML5 and Javascript standards and it is recommended to use the latest version of <a href="http://www.mozilla.org/firefox" target="_blank">Firefox</a>, <a href="http://www.apple.com/safari" target="_blank">Safari</a> or <a href="http://www.google.com/chrome" target="_blank">Chrome</a> web browser to run Wasabi. <a href="http://wasabi.biocenter.helsinki.fi" target="_blank">Learn more about Wasabi &gt;&gt;</a></div><div class="sectiontitle"><span>Support</span></div><div class="sectiontext"><a class="logo" href="http://www.biocenter.fi" target="_blank"><img src="images/logo_bf.png"></a><a class="logo" href="http://www.biocenter.helsinki.fi/bi" target="_blank"><img src="images/logo_uh.png"></a><a class="logo" href="http://ec.europa.eu/research/mariecurieactions" target="_blank"><img src="images/logo_mc.jpg"></a><a class="logo" href="http://www.helsinki.fi/biocentrum" target="_blank"><img style="height:30px" src="images/logo_bch.gif"></a></div><div class="sectiontitle"><span>Contact</span></div><div class="sectiontext">Wasabi is being developed by Andres Veidenberg from the <a href="http://loytynojalab.biocenter.helsinki.fi" target="_blank">Lytynoja lab</a> in Institute of Biotechnology, University of Helsinki.<br>You can contact us via our <a href="http://wasabiapp.org/feedback" target="_blank">feedback webpage &gt;&gt;</a></div>');return{title:"About",content:e,opts:{icn:"info",btn:"OK"}}},errorlog:function(){var e=this,t='<div class="insidediv"><ul><li>'+e.model.errors().replace(/ \*/g,"</li><li>")+"</li></ul></div>";return{title:"Error log",content:["Wasabi server errors:",t],opts:{icn:"info",btn:"OK"}}},share:function(e){var t=this;e.id||(e.id=t.model.library.openid()),e.item||(e.item=t.model.library.getitem(e.id));var n=t.model.library.sharelink(e.item,e.file||"",e.url||""),i=navigator.userAgent.match(/Mac/i)?"&#x2318;":"crtl",r=dirurl=desc="",o=t.unwrap(e.item.children),s=t.fullmode&&(e.item.folder||!e.file&&!t.unwrap(e.item.outfile));if(t.model.settings.sharedir(s),t.piwik.trackEvent("share",e.id),t.fullmode){if(e.library)desc="to launch Wasabi with your analysis library",n=t.model.library.sharelink()+"/"+t.model.settings.userid();else if(desc='<span data-bind="visible:sharedir">to have the shared item imported to the library</span><span data-bind="visible:!sharedir()">or into Wasabi import dialog to display the shared data</span>',e.url)n=e.url;else if(e.item&&o){dirurl=e.item.folder?n:t.model.library.sharelink(e.item,t.model.library.getitem("parentid",e.id).id);var r='<span class="label" title="The share link will add a read-only reference of this '+(e.item.folder?"collection":"analysis")+' to the recipient\'s library and will include the connected datasets.">Also share the subsequent analysis steps</span> <a class="button toggle" data-bind="css:{on:sharedir'+(s?",disabled:true}":"},click:toggle.bind($data,sharedir)")+'"><span class="light"></span><span class="text" data-bind="text:btntxt(sharedir)"></span></a>',a="";e.item.folder&&!e.item.shared&&(a='<div style="margin-top:10px" data-bind="with:$root.library.getitem(\''+e.id+"')\"><span class=\"label\" title=\"You may choose a 'cover' dataset that will be opened when this sharing link is used\">Upon import, open </span><select data-bind=\"options: $root.library.childlist($data), optionsText: 'name', optionsValue: 'id', value: $data.opendataset\"></select></div>");var l='<div class="insidediv">'+r+a+"</div><br>"}}else desc='to open this dataset in <a href="http://wasabiapp.org" target="_blank">Wasabi webapp</a>';var c=$('<div data-bind="with:settings">Paste this URL to a web browser address bar<br>'+desc+".<br><br></div>"),u=$('<input class="transparent" style="width:350px;padding:0" onclick="$(this).select()" data-bind="value:sharedir()?\''+dirurl+"':'"+n+"'\"></input>");setTimeout(function(){u[0].select()},500);var d=$('<input style="width:183px" type="email" placeholder="e-mail address">'),h=$('<a class="button square" style="margin-left:3px">Send</a>'),p=function(){~d.val().indexOf("@")&&t.communicate("sendmail",{email:d.val(),url:u.val()},{btn:h,restore:!0})};h.click(p),c.append(u,'<div class="inputdesc">Press '+i+"+C to copy the link to clipboard</div>",l),t.model.settings.email&&c.append("Share the link: ",d,h);var f=$('<a class="button blue" href="'+n+'" target="_blank">Open link</a>');return{title:"Share data",content:c,opts:{icn:"info",btn:["OK",f]}}}},w.dialogs.warning=w.dialogs.notice=w.dialogs.error,w.dialog=function(e,t){var n=this,i=!1;t?("string"==typeof t||$.isArray(t))&&(t={msg:t}):t={},t.type=e;var r=t.id||e+"_window";if(n.$&&n.$("#"+r).length){if(!n.$("#"+r).hasClass("popupwrap"))return void n.$("#"+r).trigger("mousedown");n.closeWindow(r)}if(e in n.dialogs){var o=n.dialogs[e].call(n,t),s=o.opts||{},a=o.title||e;(!s.noid||t.id)&&(s.id=r),s.icn||(s.icn="info"),o.back&&(s.flipside="front"),s["class"]=e,i=n.makeWindow(a,o.content||[],s),o.back&&(o.back.opts?s=o.back.opts:delete s.btn,s.flipside="back",s.backfade=!1,n.makeWindow(o.back.title||a,o.back.content||[],s)),ko.applyBindings(n.model,i[0]),"function"==typeof o.func&&o.func(i)}else if(e in n.model.plugins){var l=n.model.plugins[e];l._submitted(!1);var c=l.buildUI();i=n.makeWindow(l._title,c.content,{id:e,btn:c.btn,icn:l._icon.img,header:c.header,plugin:l._folder}),ko.applyBindings(l,i[0])}return i},w.selectionSize=function(e,t,n){var i=this;if("undefined"==typeof n)var n="rb",r={};else if("object"==typeof n){var r=n.length?{x:n[0]*i.model.boxw(),w:n[1]-n[0]}:n.x&&n.y?{x:n.x,y:n.y}:{x:0,y:0};if(n.length&&(n[1]*i.model.boxw()<Math.abs(i.dom.wrap.position().left)||n[0]*i.model.boxw()>Math.abs(i.dom.wrap.position().left)+i.dom.seqwindow.innerWidth()))return;if(e){var o=e.pageX-n.x,s=e.pageY-n.y;if(10>o||10>s)return;n="rb"}}if(t=t||i.model.activeid()){var a=e.target.id?e.target:e.target.parentNode;if("DIV"==a.tagName&&t!=a.id.substr(0-t.toString().length))return!1;var l=i.$("#selection"+t);if(!l.length)return;if("b"!=n&&"t"!=n){if("r"==n||"rb"==n){var c=e.pageX-l.offset().left-5;c=c-c%i.model.boxw()+i.model.boxw()}else if("l"==n||"lt"==n){var u=e.pageX-l.parent().offset().left+5;u-=u%i.model.boxw();var d=l.position().left+l.innerWidth();u>d-i.model.boxw()&&(u=d-i.model.boxw());var c=d-u;l.css("left",u),i.$("#vertcross"+t).css("left",u)}c<i.model.boxw()&&(c=i.model.boxw()),l.css("width",c),i.$("#vertcross"+t).css("width",c)}if("r"!=n&&"l"!=n){if("b"==n||"rb"==n){var h=e.pageY-l.offset().top-5;h=h-h%i.model.boxh()+i.model.boxh()}else if("t"==n||"lt"==n){var p=e.pageY-l.parent().offset().top+5;p-=p%i.model.boxh();var f=l.position().top+l.innerHeight();p>f-i.model.boxh()&&(p=f-i.model.boxh());var h=f-p;l.css("top",p),i.$("#horicross"+t).css("top",p)}h<i.model.boxh()&&(h=i.model.boxh()),l.css("height",h),i.$("#horicross"+t).css("height",h)}if(l.innerHeight()>20&&l.innerWidth()>40){if(l.innerWidth()>140)var m=" rows | ",g=" columns";else var m="x",g="";i.$("#selection"+t+" div.description").css("display","block"),i.$("#selection"+t+" div.description").text(parseInt(l.innerHeight()/i.model.boxh())+m+parseInt(l.innerWidth()/i.model.boxw())+g)}else i.$("#selection"+t+" div.description").css("display","none")}else{t=i.$("div[id^='selection']").length+1;var v=0,b=0,c=1,h=1;i.dom.seq.append('<div id="selection'+t+'" class="selection"><div class="description"></div><div class="ltresize"></div><div class="rbresize"></div></div>			<div id="vertcross'+t+'" class="selectioncross"><div class="lresize"></div><div class="rresize"></div></div>			<div id="horicross'+t+'" class="selectioncross"><div class="tresize"></div><div class="bresize"></div></div>'),"object"==typeof n?(v=r.x||v,b=r.y||i.model.boxh()*i.model.visiblerows().length-i.model.boxh(),c=r.w||c):(v=(r.x||e.pageX)-i.dom.seq.offset().left-2,b=(r.y||e.pageY)-i.dom.seq.offset().top,i.model.activeid(t)),v-=v%i.model.boxw(),b-=b%i.model.boxh(),0>v&&(v=0),0>b&&(b=0),i.$("#selection"+t).css({left:v,top:b,width:i.model.boxw()*c,height:i.model.boxh()*h,display:"block"}),i.$("#vertcross"+t).css({left:v,top:"0",width:i.model.boxw()*c,height:i.dom.seq.innerHeight(),display:"columns"==i.model.selmode()?"block":"none"}),i.$("#horicross"+t).css({left:"0",top:b,width:i.dom.seq.innerWidth(),height:i.model.boxh()*h,display:"rows"==i.model.selmode()?"block":"none"}),i.dom.seqwindow.mouseup(function(){i.$("#selection"+t).mouseenter(function(){i.$("#selection"+t+" div.rbresize, #selection"+t+" div.ltresize").css("opacity","1")}),i.$("#selection"+t).mouseleave(function(){i.$("#selection"+t+" div.rbresize, #selection"+t+" div.ltresize").css("opacity","0")}),i.$("#vertcross"+t).mouseenter(function(){i.$("#vertcross"+t+" div.lresize, #vertcross"+t+" div.rresize").css("opacity","1")}),i.$("#vertcross"+t).mouseleave(function(){i.$("#vertcross"+t+" div.lresize, #vertcross"+t+" div.rresize").css("opacity","0")}),i.$("#horicross"+t).mouseenter(function(){i.$("#horicross"+t+" div.tresize, #horicross"+t+" div.bresize").css("opacity","1")}),i.$("#horicross"+t).mouseleave(function(){i.$("#horicross"+t+" div.tresize, #horicross"+t+" div.bresize").css("opacity","0")}),i.$("#selection"+t+" div.rbresize").mousedown(function(){i.dom.seqwindow.mousemove(function(e){i.selectionSize(e,t,"rb")})}),i.$("#selection"+t+" div.ltresize").mousedown(function(){i.dom.seqwindow.mousemove(function(e){i.selectionSize(e,t,"lt")})}),i.$("#vertcross"+t+" div.rresize").mousedown(function(){i.dom.seqwindow.mousemove(function(e){i.selectionSize(e,t,"r")})}),i.$("#vertcross"+t+" div.lresize").mousedown(function(){i.dom.seqwindow.mousemove(function(e){i.selectionSize(e,t,"l")})}),i.$("#horicross"+t+" div.bresize").mousedown(function(){i.dom.seqwindow.mousemove(function(e){i.selectionSize(e,t,"b")})}),i.$("#horicross"+t+" div.tresize").mousedown(function(){i.dom.seqwindow.mousemove(function(e){i.selectionSize(e,t,"t")})})})}},w.registerSelections=function(e){var t=this;if(!e||"skip"!=e){t.colflags=[],t.rowflags=[],t.selections=[];var n=e?"#selection"+e:'div[id^="selection"]';t.$(n).each(function(){for(var e=$(this),n=parseInt(e.position().left/t.model.boxw()),i=parseInt((e.position().left+e.width())/t.model.boxw()),r=parseInt(e.position().top/t.model.boxh()),o=parseInt((e.position().top+e.height())/t.model.boxh()),s=n;i>s;s++)t.colflags[s]=1;for(var a=r;o>a;a++)t.rowflags[a]=1;t.selections.push({rowstart:r,rowend:o,colstart:n,colend:i})})}},w.clearSelection=function(e){var t=this;e="undefined"==typeof e?!1:e,e?(t.$("#selection"+e).remove(),t.$("#vertcross"+e).remove(),t.$("#horicross"+e).remove()):t.$("#seq div[id*='selection'],#seq div[id*='cross']").remove(),t.model.activeid("")},w.toggleSelection=function(e,t,n){var i=this;if("undefined"==typeof t&&(t=""),"undefined"==typeof n&&(n=""),!~e.indexOf("tmp")||"default"==i.model.selmode()){"default"==e?(i.toggleSelection("hide rows",t),e="hide columns"):"columns"==e?(i.toggleSelection("hide rows",t),e="show columns"):"rows"==e&&(i.toggleSelection("show rows",t),e="hide columns");var r=~e.indexOf("rows")?i.$('div[id^="horicross'+t+'"]'):~e.indexOf("columns")?i.$('div[id^="vertcross'+t+'"]'):i.$('div[idw.$="cross'+t+'"]');n&&(r=r.not('div[idw.$="cross'+n+'"]')),i.$(r).each(function(){~e.indexOf("show")?$(this).stop().fadeIn(200):$(this).fadeOut(200)})}},w.seqinfo=function(e){var t=this;if(!e.pageX||!e.pageY)return!1;var n=e.pageX-t.dom.seq.offset().left-2;n=parseInt(n/t.model.boxw());var i=e.pageY-t.dom.seq.offset().top-2;i=parseInt(i/t.model.boxh()),0>n&&(n=0),0>i&&(i=0);var r=t.model.visiblecols()[n],o=t.model.visiblerows()[i];if(!t.sequences[o])return!1;var s=r==n?"":"<br>(column "+(r+1)+" if uncollapsed)",a=t.sequences[o].slice(0,r+1).join("").replace(/[_\-.:]/g,"").length,l="undefined"==typeof t.sequences[o][r]?"":t.sequences[o][r];l=t.canvaslabels[l]||l;var c=t.model.boxh()>12&&"undefined"!=typeof t.symbols[l]?t.cloneCanvas(t.symbols[l].canvas):'<span style="color:orange">'+l+"</span>";t.leafnodes[o]&&(o=t.leafnodes[o].species||o);var u=$('<span style="color:orange">'+o+"</span><br>").add(c).add("<span> position "+a+" column "+(n+1)+s+"</span>");return{content:u,col:n,row:i,x:n*t.model.boxw(),y:i*t.model.boxh(),relative:!0,width:t.model.boxw(),height:t.model.boxh()}},w.hideColumns=function(e,t){var n=this;"string"==typeof e&&n.registerSelections(e);for(var i=t||!n.model.settings.undo()?!1:[],r=[],o=0,s=0,a=0;s<n.colflags.length;s++)i&&(o=n.model.visiblecols()[s-a],n.colflags[s]?r.length||(r[0]=o):r.length&&(r[1]=o,i.push(r),r=[])),n.colflags[s]&&(n.model.visiblecols.splice(s-a,1),a++);if(i&&(r.length&&(r[1]=o+1,i.push(r)),i.length)){var l=1==i.length?" was":"s were",c=i.length+" alignment column range"+l+" collapsed.";n.model.addundo({name:"Collapse columns",seqtype:n.model.seqtype(),type:"seq",data:i,info:c,undoaction:"show columns",redoaction:"hide columns"})}n.redraw()},w.showColumns=function(e,t,n){var i=this;if(t&&i.hideTooltip(),"all"==e){for(var r=i.model.alignlen(),o=[];r--;)o[r]=r;return i.model.visiblecols(o),void i.redraw()}var s=i.model.visiblecols();$.each(e,function(e,t){if(2!=t.length)return!0;n&&(t=i.translateColumns(n,i.model.seqtype(),t));var r=t[0],o=t[t.length-1],a=0,l=0,c=[];$.each(s,function(e,t){if(t>=r){if(e&&!a&&(a=e),!(o>t))return!1;l++}});for(var u=r;o>u;u++)c.push(u);r>=s.length&&(a=s.length),i.model.visiblecols.splice.apply(i.model.visiblecols,[a,l].concat(c))})},w.removeColumns=function(e){var t=this,n=e||!t.model.settings.undo()?!1:{};if(!e){var e=[],i=[];t.$("#right div.marker").each(function(){i=$(this).data("colrange");for(var t=i[0];t<i[1];t++)e.push(t)})}if(e.length){n&&(n.removecols=e);for(var r in t.sequences){for(var o=[],s=0;s<e.length;s++)o.push(t.sequences[r].splice(e[s]-s,1)[0]);n&&(n[r]=o)}n&&t.model.addundo({name:"Remove columns",type:"seq",seqtype:t.model.seqtype(),undoaction:"addColumns",redoaction:"removeColumns",data:n,info:e.length+" alignment columns were removed"}),t.showColumns("all")}},w.addColumns=function(e,t){var n=this;if(e&&t){n.model.seqtype()!=t&&n.translateSeq(t);for(var i in e)if(n.sequences[i])for(var r=0;r<e.removecols.length;r++)n.sequences[i].splice(e.removecols[r],0,e[i][r]);n.redraw()}},w.hideRows=function(e){var t=this,n=[];t.registerSelections(e);for(var i=0;i<t.rowflags.length;i++)t.rowflags[i]&&n.push(t.model.visiblerows()[i]);$.each(n,function(e,n){t.leafnodes[n]&&t.leafnodes[n].hideToggle("hide")}),t.refresh()},w.maskData=function(e,t){var n=this,i=~e.indexOf("rows")?"rows":~e.indexOf("columns")?"columns":"selections";if(~e.indexOf("unmask"))var r="unmasked",o=!1;else var r="masked",o=1;n.registerSelections(t);var s={},a="";if(~e.indexOf("all"))for(var l in n.sequences)for(var c=0;c<n.sequences[l].length;c++)n.sequences[l][c]=n.symbols[n.sequences[l][c]][r];else if("hidemaskedcols"==e){for(var c=0;c<n.maskedcols.length;c++)if(n.maskedcols[c]){var u=n.model.visiblecols.indexOf(c);~u&&n.model.visiblecols.splice(u,1)}}else if("columns"==i){s._columns=[];var d=!0,h=!1;for(var l in n.sequences)if(~n.model.visiblerows.indexOf(l)){o&&(s[l]="columns");for(var c=0;c<n.colflags.length;c++)n.colflags[c]&&(h=n.model.visiblecols()[c],n.sequences[l][h]=n.symbols[n.sequences[l][h]][r],n.maskedcols[h]=o,o&&d&&s._columns.push(h));d=!1}a=s._columns.length+" "+n.model.seqtype()+" alignment columns were masked."}else if("rows"==i){for(var p=0;p<n.rowflags.length;p++)if(n.rowflags[p]){var l=n.model.visiblerows()[p];o&&(s[l]="all");for(var c=0;c<n.sequences[l].length;c++)n.sequences[l][c]=n.symbols[n.sequences[l][c]][r]}a=Object.keys(s).length+" sequences were masked."}else if("selections"==i){for(var f=0;f<n.selections.length;f++)for(var m=n.selections[f],p=m.rowstart;p<m.rowend;p++){var l=n.model.visiblerows()[p];s[l]||(s[l]=[]);for(var c=m.colstart;c<=m.colend;c++){var h=n.model.visiblecols()[c];n.sequences[l][h]=n.symbols[n.sequences[l][h]][r],o?s[l].push(h):maskedcols[h]=!1}}a=n.selections.length+" alignment blocks were masked."}$.isEmptyObject(s)||n.model.addundo({name:"Mask "+i,seqtype:n.model.seqtype(),type:"seq",data:s,info:a,undoaction:"unmask",redoaction:"mask"}),n.redraw()},w.undoseq=function(e,t,n){var i=this;if(~n.indexOf("mask")){var r=~n.indexOf("unmask")?"unmasked":"masked",o=t._columns?t._columns:[];for(name in t)if(i.sequences[name])if("all"===t[name])for(var s=0;s<i.sequences[name].length;s++)i.sequences[name][s]=i.symbols[i.sequences[name][s]][r];else{"columns"!==t[name]&&(o=t[name]),o=i.translateColumns(e,i.model.seqtype(),o);for(var s=0;s<o.length;s++)i.sequences[name][o[s]]=i.symbols[i.sequences[name][o[s]]][r]}}else if(~n.indexOf("show"))i.showColumns(t,!1,e);else if(~n.indexOf("hide")){i.colflags=[];var s=0,a=0,l=i.model.visiblecols();$.each(t,function(t,n){if(2!=n.length)return!0;n=i.translateColumns(e,i.model.seqtype(),n);for(var r=n[0],o=n[n.length-1];t<l.length;t++)if(s=l[t],s>=r){if(!(o>s))break;i.colflags[t]=1}}),i.hideColumns(!1,"skipundo")}else~n.indexOf("add")?i.addColumns(t,e):~n.indexOf("remove")&&i.removeColumns(i.translateColumns(e,i.model.seqtype(),t.removecols));i.redraw()},w.hideborder=!1,w.rowBorder=function(e,t){var n=this;n.hideborder&&clearTimeout(n.hideborder);var i=n.$("#rborder"),r=function(){i.css("opacity",0),setTimeout(function(){i.css("display","none")},300)};if("hide"==t)return void r();var o=e.y||n.seqinfo(e).y||0;i.css("top",o),"none"==i.css("display")&&i.css({display:"block",opacity:1,height:n.model.boxh()-1}),"keep"!=t&&(hideborder=setTimeout(r,3e3))},w.translateColumns=function(e,t,n){var i=this;if(e&&t){"RNA"==e&&(e="DNA"),"RNA"==t&&(t="DNA"),n||(n=i.model.visiblecols());var r=[],o="DNA"==e?1/3:"DNA"==t?3:1;if(e==t||1==o)return n;if(3==o)for(var s=0,a=0;s<n.length;s++)a=3*n[s],r.push(a,a+1,a+2);else for(var s=0;s<n.length;s++)n[s]%3==0&&r.push(n[s]/3);return r}},w.translateSeq=function(e,t,n){var i=this,r=i.model.seqtype(),o=i.model.dnasource();if(i.piwik.trackEvent("tools","translate",r+" => "+e),!t&&r==e||!o)return!1;var s=[],a,l,c,u,d,h={},p=!1,f,m=0,g=/[-_.:]+/g,v=function(e){return e.length%3?e.substring(0,0-e.length%3):e};if($.each(i.sequences,function(n,a){if(m++,t&&m>20)return!1;if(!o[n])return i.leafnodes[n]&&"ancestral"!=i.leafnodes[n].type?s.push('No cdna sequence for <span class="grey">'+n+"<span>"):p=!0,5>m;var b=o[n].join("").replace(g,v),y=[];if("protein"==r){b=b.replace(g,"");var w=a.join("").replace(g,"").length,x=0;if(3*w!=b.length)return s.push('cdna sequence has wrong length for <span class="grey">'+n+"<span>"),5>m;if(t)return!0;$.each(a,function(t,n){g.test(n)?(c=n+n+n,g.lastIndex=0):(f=n==i.symbols[n].masked?"toLowerCase":"toUpperCase",c=b.substr(3*x,3)[f](),x++),"codons"==e?y.push(c):y=y.concat(c.split(""))})}else if("protein"==e){if(d="codons"==r?1:3,3==d&&b.length%3)return s.push('cDNA for <span class="grey">'+n+"</span> doesn't divide to 3-base codons"),5>m;if(t)return!0;for(var k=0;k<a.length;k+=d)c=3==d?a.slice(k,k+3).join(""):a[k],l=c.substr(1,1),f=i.letters.indexOf(l)%2?"toLowerCase":"toUpperCase",u=/[-_.:]{3}/.test(c)?l:i.alphabet.codons[c.toUpperCase()]?i.alphabet.codons[c.toUpperCase()][f]():"?",y.push(u)}else{if(d="codons"==r?1:3,3==d&&b.length%3)return s.push('cDNA for <span class="grey">'+n+"</span> doesn't divide to 3-base codons"),!0;if(t)return!0;for(var k=0;k<a.length;k+=d)3==d?y.push(a.slice(k,k+3).join("")):y=y.concat(a[k].split(""))}h[n]=y}),t)return!s.length;if(s.length){var b=$("<ul>");$.each(s,function(e,t){return e>4&&(t="...(not showing all errors)"),b.append("<li>"+t+"</li>"),e>4?!1:void 0});var y="";return"protein"==r&&(i.model.dnasource(""),y="<br>Please use a cdna file that matches the current data."),void i.dialog("error",["Sequence translation failed:",b,y])}var w=function(){if($.isEmptyObject(h))return!1;i.sequences=h;var t=i.model.symbolw();i.model.seqtype(e);var o="DNA"==r?1/3:"DNA"==e?3:1;1!=o&&(i.model.minseqlen(Math.round(i.model.minseqlen()*o)),i.model.maxseqlen(Math.round(i.model.maxseqlen()*o)),i.model.totalseqlen(Math.round(i.model.totalseqlen()*o)),i.model.alignlen(Math.round(i.model.alignlen()*o)),i.model.visiblecols(i.translateColumns(r,e))),n||i.redraw({zoom:!0,refresh:!0,leftscale:o})};if(p){var x=$('<a class="button">Translate</a>').click(function(){w(),i.closeWindow(this)}),k="The cdna source is missing the ancestral sequences present in current alignment.<br>Sequence translation will remove the ancestral sequences. Translate anyway?";i.makeWindow("Warning",[k],{id:"transwarn",btn:["Cancel",x],icn:"warning"})}else w();return!1},w.seqmenu=function(e){for(var t=this,n=0,i={},r=0;r<t.maskedcols.length;r++)t.maskedcols[r]&&n++;var o=t.model.selmode(),s=t.model.activeid(),a=t.$('div[id^="selection"]').length,l={},c=t.model.selmode();if($.each(t.model.selmodes,function(e,n){l[n]={click:function(){t.model.setmode(n)},icon:n},n==c&&(l[n]["class"]="active")}),s){var u="default"==o?"selection area":o,d={};d["Mask "+u]={click:function(){t.maskData("mask"+u,s)},icon:"mask"},d["Unmask "+u]={click:function(){t.maskData("unmask"+u,s)},icon:"unmask"},a>1&&(d["Mask all "+a+" selections"]={click:function(){t.maskData("mask"+u)},icon:"mask"},d["Unmask all "+a+" selections"]={click:function(){t.maskData("unmask"+u)},icon:"unmask"});var h={};"rows"!=o&&(h["Collapse columns"]={click:function(){t.hideColumns(s)},over:function(){t.toggleSelection("show columns tmp",s)},icon:"collapse",out:function(){t.toggleSelection("hide columns tmp",s)}},a>1&&(h["Collapse all selected columns"]={click:function(){t.hideColumns("")},over:function(){t.toggleSelection("show columns tmp")},icon:"collapse",out:function(){t.toggleSelection("hide columns tmp")}}));var p={};"columns"!=o&&t.model.treesource()&&(p["Collapse rows"]={click:function(){t.hideRows(s)},over:function(){t.toggleSelection("show rows tmp",s)},icon:"collapse",out:function(){t.toggleSelection("hide rows tmp",s)}},a>1&&(p["Collapse all selected rows"]={click:function(){t.hideRows()},over:function(){t.toggleSelection("show rows tmp")},icon:"collapse",out:function(){t.toggleSelection("hide rows tmp")}}));var f={};f["Clear selection"]={click:function(){t.clearSelection(s)},icon:"selection"},a>1&&(f["Clear all selections"]={click:function(){t.clearSelection()},icon:"selections"}),i={"Sequence masking":{submenu:d},"Sequence columns":{submenu:h},"Sequence rows":{submenu:p},Selections:{submenu:f}}}else i={"Unmask all sequences":{click:function(){t.maskData("unmaskall")},icon:"unmask"}},t.model.hiddenlen()&&(i["Reveal "+t.model.hiddenlen()+" hidden columns"]={click:function(){t.showColumns("all","hidetip")},icon:"expand"},i["Remove "+t.model.hiddenlen()+" hidden columns"]={click:function(){t.removeColumns()},icon:"trash"}),n&&(i["Collapse "+n+" masked columns"]={click:function(){t.maskData("hidemaskedcols")},icon:"collapse"}),a&&(i["Clear "+a+" selections"]={click:function(){t.clearSelection()},icon:"selections"});return i["Selection mode"]={submenu:l,icon:t.model.selmode(),"class":"active"},i},w.init=function(e){var t=this;if(t.fullmode&&t.extend(),/iPad|iPhone|iPod/.test(navigator.userAgent)&&setTimeout(function(){window.scrollTo(0,1)},15),!document.createElement("canvas").getContext)return void t.dialog("warning","Your web browser does not support running Wasabi.<br>Please upgrade to a <a onclick=\"w.dialog('about')\">modern browser</a>.");var n='<div id="page" data-bind="css:{hiddentop:settings.hidebar,notop:!settings.menubar()}"><noscript><div><img src="images/warning.png">You have disabled Javascript in your web browser.<br>Please turn on Javascript to use the Wasabi web application.</div></noscript><div id="startup"></div><div id="top" class="away" data-bind="css:{hidden:settings.collapsebar}"><div id="toptitle" class="title" data-bind="visible:!offline()&&(seqsource()||treesource())"><input type="text" class="static noselect" data-bind="value:$root.export.savename, valueUpdate:\'afterkeydown\', style:{width:$root.export.savename().length*9+\'px\'}, css:{editable:editname}, click:function(i,e){ $root.editname(false);w.titlemenu(e); }, hasFocus: editname" autocomplete="off" title="Analysis name. Click for more options"><span class="note" data-bind="bindHTML:unsaved()||library.shareicon(library.openitem())"></span></div><div id="topcollapse" title="Click to toggle menubar collapse" data-bind="click:function(){$root.settings.toggle($root.settings.collapsebar)}"><span>test</span><br>...</div><div class="buttonblock" style="left:5%" data-bind="visible:settings.data"><a id="filemenu" class="button transparent icon" data-bind="click:function(){w.topmenu(\'filemenu\')}" title="Click for data menu"><img src="images/file.png"></a><div class="toptext">Data</div></div><div class="buttonblock" style="left:12%" data-bind="visible:settings.tools"><a id="toolsmenu" class="button transparent icon" data-bind="click:function(){w.topmenu(\'toolsmenu\')}" title="Click for tools menu"><img src="images/run.png"></a><div class="toptext">Tools</div></div><div class="buttonblock" style="left:20%" data-bind="visible:settings.zoom"><div id="zoombtns" style="display:inline-block;position:relative;"><a id="zoomout" data-bind="click:function(){ w.redraw({zoom:\'out\'}) }" class="button zoom" title="Zoom out">-</a> <a id="zoomin" data-bind="click:function(){ w.redraw({zoom:\'in\'}) }" class="button zoom" title="Zoom in">+</a><div class="toptext zoomperc" data-bind="text:zoomperc"></div><div class="toptext">Zoom</div></div></div><div class="buttonblock" style="left:30%" data-bind="visible:settings.undo"><a id="undobtn" class="button left" data-bind="html:w.svgicon(\'undo\'), click:undo, css:{disabled:!activeundo.data()||activeundo.undone()}" title="Undo"></a><a id="undostack" class="button middle" data-bind="click:function(){w.topmenu(\'undostack\')}" title="Click to see and select previous actions"><span style="margin-top:0" data-bind="visible:!activeundo.data()">History</span><!-- ko foreach:{data:activeundo.name, afterRender:w.marginadd, beforeRemove:w.waitremove} --><span data-bind="fadeText:name"></span><!-- /ko --></a><a id="redobtn" class="button right" data-bind="html:w.svgicon(\'redo\'), click:redo, css:{disabled:!activeundo.data()||!activeundo.undone()}" title="Redo"></a><div class="toptext">Actions history</div></div><div class="buttonblock" style="left:40%;margin-left:80px;z-index:2;display:none" data-bind="fadevisible:statusbtn"><a id="statusbtn" data-bind="html:statusbtn, click:function(){w.dialog(\'jobstatus\')}" class="button square" title="Click for details"></a><div class="toptext">Notifications</div></div><div id="logo" class="buttonblock" stye="right:20px" data-bind="visible:settings.logo, click:function(){w.dialog(\'about\')}" title="Click for more information"><img src="images/wasabi_logo.png"><div class="toptext">About Wasabi</div></div></div><!--top buttons--><div id="left"><div id="notree" data-bind="fadevisible:!treesource()">No tree data</div><div id="treewrap"><div id="tree"></div><div id="names"></div></div><div id="bottomfade"></div><div id="topfade"></div><div id="borderDrag" title="Drag to adjust sequence area width"><span>&#x22EE;</span></div></div><div id="namesborderDragline" class="draggerline dragmode" data-bind="css:{\'visible\':treesource()||seqsource()}"><div id="namesborderDrag" class="dragger" title="Drag to adjust tree width">&#x22EE;</div></div><div id="right"><div id="seqwindow"><div id="noseq" data-bind="fadevisible:!seqsource()">No sequence data</div><div id="wrap"><div id="ruler"></div><div id="seqwrap"><div id="seq"><div id="rborder" class="rowborder"></div></div></div></div><img id="leftshadow" src="images/shadow_left.png"><img id="rightshadow" src="images/shadow_right.png"><img id="spinner" style="height:36px" src="images/spinner.gif"></div><div id="horizontalDragger" class="draggerline"><div class="dragger"></div></div><div id="verticalDragger" class="draggerline vertical"><div class="dragger"></div></div><div id="treebin"><div></div></div></div><div id="namelabel"><span></span></div><div id="bottom">Andres Veidenberg<span style="color:#ccc">|</span> University of Helsinki<br><a data-bind="click:function(){w.dialog(\'about\')}" title="Click for more info">About Wasabi</a></div><div id="backfade"></div></div>';t.dom.wasabi.addClass("wasabi"),t.dom.wasabi.empty().html(n);var i=["page","left","right","top","bottom","seq","seqwindow","seqwrap","wrap","tree","treewrap","ruler","names"];$.each(i,function(e,n){t.dom[n]=t.$("#"+n)}),ko.applyBindings(t.model,t.dom.wasabi[0]),t.$("#treebin div").append(t.svgicon("trash")),t.dom.namesdragline=t.$("#namesborderDragline"),t.dom.namesdragger=t.$("#namesborderDrag"),
t.dom.seqdragger=t.$("#borderDrag");var r,o,s,a=t.dom.left.offset().left,l=a+t.dom.left.width()+t.dom.right.width()-20;t.dom.seqdragger.draggable({axis:"x",containment:[a,0,l,0],start:function(e,n){r=n.offset.left-t.dom.namesdragger.offset().left+5,a=t.dom.left.offset().left},drag:function(e,n){t.dom.left.css("width",n.offset.left-a+10),t.dom.right.offset({left:n.offset.left+10}),t.dom.namesdragline.css("width",n.offset.left-a+6),o=n.offset.left-r+6,a-6>o?(t.dom.namesdragger.offset({left:a-6}),s=t.dom.left.width()-9,t.dom.tree.css("right",s),t.dom.names.css("width",s)):t.dom.namesdragger.offset({left:o})},stop:function(){$(window).trigger("resize")}}),t.dom.namesdragger.draggable({axis:"x",containment:"parent",start:function(){s=t.dom.left.width(),a=t.dom.left.offset().left},drag:function(e,n){t.dom.tree.css("right",a+s-n.offset.left-16),t.dom.names.css("width",a+s-n.offset.left-16)}}),t.dom.namesdragger.hover(function(){t.dom.names.css("border-color","#aaa")},function(){t.dom.names.css("border-color","white")}),t.dom.names.mouseleave(function(e){t.rowBorder(e,"hide")}),t.dom.seqwindow.mousedown(function(e){e.preventDefault();var n={x:e.pageX,y:e.pageY};e.pageY>t.dom.seqwindow.offset().top+30&&(1==e.which&&"DIV"!=e.target.tagName&&(t.model.activeid(""),t.dom.seqwindow.mousemove(function(e){t.selectionSize(e,"",n)}),t.dom.seqwindow.one("mouseup",function(e){if(t.model.activeid(""),e.pageY>t.dom.seqwindow.offset().top+30&&1==e.which&&"DIV"!=e.target.tagName&&0==t.$("div.canvasmenu").length){var i=e.pageX-n.x,r=e.pageY-n.y;if(Math.sqrt(i*i+r*r)<10&&!t.$("#seqmenu").length){var o=t.seqinfo(e),s=Math.abs(parseInt(t.dom.seq.css("margin-top")))+t.dom.seqwindow.innerHeight()-90;t.model.alignheight()*t.model.boxh()<s&&(s=t.model.alignheight()*t.model.boxh()-60);var a=o.y>s?"bottom":"top";t.rowBorder(o),t.tooltip(e,o.content,{container:t.dom.seq,arrow:a,target:o,shifty:-5})}}})),t.dom.page.one("mouseup",function(){t.dom.seqwindow.unbind("mousemove"),t.model.tools.prunemode&&t.model.tools.markLeafs()}))}),t.dom.seqwindow.bind("contextmenu",function(e){if(e.preventDefault(),$.isEmptyObject(t.sequences))return!1;var n=""==e.target.id?e.target.parentNode:e.target,i=~n.id.indexOf("selection")||~n.id.indexOf("cross")?n.id.substr(9):"";t.model.activeid(i),t.tooltip(e,"",{data:t.seqmenu(),id:"seqmenu"})}),t.touchHandler=function(e){var t=e.touches.length,n=e.changedTouches[0],i=0,r=[],o=!0,s=n.target,a=s.getAttribute("id"),l=s.tagName,c=s.className.split(" ")[0];if(!(t>1||(("CANVAS"==l||"circle"==l||0==c.indexOf("selection")||"dragger"==c||"ui-draggable"==c||"description"==c||"ruler"==s.parentNode.getAttribute("id"))&&(o=!1),o))){switch(e.type){case"touchstart":r=["mouseover","mousedown"];break;case"touchmove":r=["mousemove"];break;case"touchend":r=["mouseup","mouseout"];break;default:return}e.preventDefault(),(0==c.indexOf("selection")||"description"==c)&&("touchstart"==e.type&&(r.shift(),r.push("contextmenu")),i=2);var u=function(e){var t=document.createEvent("MouseEvent");t.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,i,null),n.target.dispatchEvent(t)};$.each(r,function(e,t){u(t)})}},"ontouchend"in document&&(t.dom.wasabi.addEventListener("touchstart",touchHandler,!0),t.dom.wasabi.addEventListener("touchmove",touchHandler,!0),t.dom.wasabi.addEventListener("touchend",touchHandler,!0));var c=function(){setTimeout(function(){t.dom.top.removeClass("away"),t.$("#startup").fadeOut({complete:function(){setTimeout(function(){t.$("#startup").remove(),t.dom.left.add(t.dom.right).css("opacity",1),t.dom.namesdragline.removeClass("dragmode"),t.fullmode||(setTimeout(function(){t.model.settings.hidebar(!0)},400),setTimeout(function(){$(window).trigger("resize")},1e3))},200)}})},300)};if(t.fullmode){var u=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1),d=window.location.search;t.model.settings.loadprefs(),t.model.settings.urlvars=d,u.length&&!~u.indexOf(".")&&(t.model.settings.urlid=u),(~window.location.host.indexOf("localhost")||"file:"==window.location.protocol)&&t.model.settings.sharelinks(!1),t.communicate("checkserver",{userid:t.model.settings.urlid||t.model.settings.userid()||""},{success:t.startup.bind(t),error:t.startup.bind(t),retry:!0,after:c})}else e?t.getfile({file:e,complete:c}):(t.dialog("error","No file URL to import."),c())},Wasabi.prototype.svgpaths={trash:"M20.826,5.75l0.396,1.188c1.54,0.575,2.589,1.44,2.589,2.626c0,2.405-4.308,3.498-8.312,3.498c-4.003,0-8.311-1.093-8.311-3.498c0-1.272,1.21-2.174,2.938-2.746l0.388-1.165c-2.443,0.648-4.327,1.876-4.327,3.91v2.264c0,1.224,0.685,2.155,1.759,2.845l0.396,9.265c0,1.381,3.274,2.5,7.312,2.5c4.038,0,7.313-1.119,7.313-2.5l0.405-9.493c0.885-0.664,1.438-1.521,1.438-2.617V9.562C24.812,7.625,23.101,6.42,20.826,5.75zM11.093,24.127c-0.476-0.286-1.022-0.846-1.166-1.237c-1.007-2.76-0.73-4.921-0.529-7.509c0.747,0.28,1.58,0.491,2.45,0.642c-0.216,2.658-0.43,4.923,0.003,7.828C11.916,24.278,11.567,24.411,11.093,24.127zM17.219,24.329c-0.019,0.445-0.691,0.856-1.517,0.856c-0.828,0-1.498-0.413-1.517-0.858c-0.126-2.996-0.032-5.322,0.068-8.039c0.418,0.022,0.835,0.037,1.246,0.037c0.543,0,1.097-0.02,1.651-0.059C17.251,18.994,17.346,21.325,17.219,24.329zM21.476,22.892c-0.143,0.392-0.69,0.95-1.165,1.235c-0.474,0.284-0.817,0.151-0.754-0.276c0.437-2.93,0.214-5.209-0.005-7.897c0.881-0.174,1.708-0.417,2.44-0.731C22.194,17.883,22.503,20.076,21.476,22.892zM11.338,9.512c0.525,0.173,1.092-0.109,1.268-0.633h-0.002l0.771-2.316h4.56l0.771,2.316c0.14,0.419,0.53,0.685,0.949,0.685c0.104,0,0.211-0.017,0.316-0.052c0.524-0.175,0.808-0.742,0.633-1.265l-1.002-3.001c-0.136-0.407-0.518-0.683-0.945-0.683h-6.002c-0.428,0-0.812,0.275-0.948,0.683l-1,2.999C10.532,8.77,10.815,9.337,11.338,9.512z",move:"m 24.133853,13.490314 -7.796759,-0.01543 -0.02315,-7.3030908 1.888646,-0.0053 -3.153811,-5.1146393 -3.120827,5.1318383 1.867289,-0.0053 0.02362,7.2911038 -7.6808166,-0.01576 0.00454,-1.780734 -5.44103405,2.946758 5.42723725,2.968877 0.00454,-1.762513 7.6925124,0.0162 0.02284,7.206241 -1.887118,0.0058 3.153301,5.114161 3.121844,-5.131842 -1.869322,0.0053 -0.0228,-7.193775 7.784047,0.01595 -0.0045,1.780732 5.440525,-2.947235 -5.426224,-2.96984 z",view:"M16,8.286C8.454,8.286,2.5,16,2.5,16s5.954,7.715,13.5,7.715c5.771,0,13.5-7.715,13.5-7.715S21.771,8.286,16,8.286zM16,20.807c-2.649,0-4.807-2.157-4.807-4.807s2.158-4.807,4.807-4.807s4.807,2.158,4.807,4.807S18.649,20.807,16,20.807zM16,13.194c-1.549,0-2.806,1.256-2.806,2.806c0,1.55,1.256,2.806,2.806,2.806c1.55,0,2.806-1.256,2.806-2.806C18.806,14.451,17.55,13.194,16,13.194z",hide:"M11.478,17.568c-0.172-0.494-0.285-1.017-0.285-1.568c0-2.65,2.158-4.807,4.807-4.807c0.552,0,1.074,0.113,1.568,0.285l2.283-2.283C18.541,8.647,17.227,8.286,16,8.286C8.454,8.286,2.5,16,2.5,16s2.167,2.791,5.53,5.017L11.478,17.568zM23.518,11.185l-3.056,3.056c0.217,0.546,0.345,1.138,0.345,1.76c0,2.648-2.158,4.807-4.807,4.807c-0.622,0-1.213-0.128-1.76-0.345l-2.469,2.47c1.327,0.479,2.745,0.783,4.229,0.783c5.771,0,13.5-7.715,13.5-7.715S26.859,13.374,23.518,11.185zM25.542,4.917L4.855,25.604L6.27,27.02L26.956,6.332L25.542,4.917z",lower:"m 16.286444,19.755113 c -1.893,-2.371 -3.815,-5.354 -6.009,-7.537 -1.4610005,-1.428 -3.1550005,-2.6640001 -5.3400005,-2.6930001 h -3.5 v 3.5000001 h 3.5 c 0.971,-0.119 2.845,1.333 4.712,3.771 1.8950005,2.371 3.8150005,5.354 6.0110005,7.537 1.326,1.297 2.847,2.426 4.751,2.645 v 2.646 l 7.556,-4.363 -7.556,-4.362 v 2.535 c -1.04,-0.339 -2.581,-1.663 -4.125,-3.679 z m -4.213975,-9.127222 7.556,-4.3609997 -7.556,-4.3620001 v 2.701 c -2.9290009,0.374 -4.9050009,2.6400001 -6.8090009,4.9520001 0.545,0.7029997 1.08,1.4179997 1.604,2.1269997 0.192,0.26 0.383,0.514 0.573,0.77 0.802,-1.043 1.584,-1.999 2.341,-2.7399997 0.8840009,-0.885 1.6730009,-1.393 2.2910009,-1.588 v 2.5009997 z",upper:"m 16.332263,10.124423 c -1.893,2.371 -3.815,5.354 -6.009,7.537 -1.461001,1.428 -3.155001,2.664 -5.340001,2.693 h -3.5 v -3.5 h 3.5 c 0.971,0.119 2.845,-1.333 4.712,-3.771 1.895001,-2.371 3.815001,-5.3539995 6.011001,-7.5369995 1.326,-1.297 2.847,-2.426 4.751,-2.645 V 0.25542346 l 7.556,4.36300004 -7.556,4.3619998 V 6.4454235 c -1.04,0.339 -2.581,1.663 -4.125,3.6789995 z m -4.213975,9.127222 7.556,4.361 -7.556,4.362 v -2.701 c -2.9290014,-0.374 -4.9050014,-2.64 -6.8090014,-4.952 0.545,-0.703 1.08,-1.418 1.604,-2.127 0.192,-0.26 0.383,-0.514 0.573,-0.77 0.802,1.043 1.584,1.999 2.341,2.74 0.8840014,0.885 1.6730014,1.393 2.2910014,1.588 v -2.501 z",swap:"M21.786,20.654c-0.618-0.195-1.407-0.703-2.291-1.587c-0.757-0.742-1.539-1.698-2.34-2.741c-0.191,0.256-0.382,0.51-0.574,0.77c-0.524,0.709-1.059,1.424-1.604,2.127c1.904,2.31,3.88,4.578,6.809,4.952v2.701l7.556-4.362l-7.556-4.362V20.654zM9.192,11.933c0.756,0.741,1.538,1.697,2.339,2.739c0.195-0.262,0.39-0.521,0.587-0.788c0.52-0.703,1.051-1.412,1.592-2.11c-2.032-2.463-4.133-4.907-7.396-5.025h-3.5v3.5h3.5C6.969,10.223,7.996,10.735,9.192,11.933zM21.786,10.341v2.535l7.556-4.363l-7.556-4.363v2.647c-1.904,0.219-3.425,1.348-4.751,2.644c-2.196,2.183-4.116,5.167-6.011,7.538c-1.867,2.438-3.741,3.888-4.712,3.771h-3.5v3.5h3.5c2.185-0.029,3.879-1.266,5.34-2.693c2.194-2.184,4.116-5.167,6.009-7.538C19.205,12.003,20.746,10.679,21.786,10.341z",children:"M21.786,20.698c-1.792-0.237-2.912-1.331-4.358-2.886c-0.697-0.751-1.428-1.577-2.324-2.319c1.396-1.165,2.411-2.519,3.483-3.503c1.01-0.92,1.901-1.519,3.199-1.688v2.574l7.556-4.363L21.786,4.15v2.652c-3.34,0.266-5.45,2.378-6.934,4.013c-0.819,0.896-1.537,1.692-2.212,2.192c-0.685,0.501-1.227,0.731-2.013,0.742c-0.001,0-0.002,0-0.003,0H2.812v3.5h0.001v0.001c0,0,0.046-0.001,0.136-0.001h7.677c0.786,0.011,1.33,0.241,2.017,0.743c1.021,0.743,2.095,2.181,3.552,3.568c1.312,1.258,3.162,2.46,5.592,2.649v2.664l7.556-4.36l-7.556-4.361V20.698z",root:"m 10.443278,18.371569 -4.3609998,-7.556 -4.362,7.556 2.701,0 c 0.374,2.929 2.64,4.905 4.952,6.809 0.7029998,-0.545 1.4179998,-1.08 2.1269998,-1.604 0.26,-0.192 0.514,-0.383 0.77,-0.573 -1.043,-0.802 -1.999,-1.584 -2.7399998,-2.341 -0.885,-0.884 -1.393,-1.673 -1.588,-2.291 l 2.5009998,0 z M 19.5705,13.9285 c -2.371,1.893 -5.354,3.815 -7.537,6.009 -1.428,1.461 -2.664,3.155 -2.693,5.34 l 0,3.5 3.5,0 0,-3.5 c -0.119,-0.971 1.333,-2.845 3.771,-4.712 2.371,-1.895 5.354,-3.815 7.537,-6.011 1.297,-1.326 2.426,-2.847 2.645,-4.751 l 2.646,0 -4.363,-7.556 -4.362,7.556 2.535,0 c -0.339,1.04 -1.663,2.581 -3.679,4.125 z m -2.712625,-3.80427 -4.361,-7.5560002 -4.362,7.5560002 2.701,0 c 0.374,2.929 2.64,4.905 4.952,6.809 0.703,-0.545 1.418,-1.08 2.127,-1.604 0.26,-0.192 0.514,-0.383 0.77,-0.573 -1.043,-0.802 -1.999,-1.584 -2.74,-2.341 -0.885,-0.884 -1.393,-1.673 -1.588,-2.291 l 2.501,0 z",tree:"m 11.920931,9.975778 7.556,-4.3609999 -7.556,-4.362 0,2.701 c -2.929,0.374 -4.905,2.64 -6.809,4.952 0.545,0.7029999 1.08,1.4179999 1.604,2.1269999 0.192,0.26 0.383,0.514 0.573,0.77 0.802,-1.043 1.584,-1.999 2.341,-2.7399999 0.884,-0.885 1.673,-1.393 2.291,-1.588 l 0,2.5009999 z M 16.364,19.103 C 14.471,16.732 12.549,13.749 10.355,11.566 8.894,10.138 7.2,8.9019999 5.015,8.8729999 l -3.5,0 0,3.5000001 3.5,0 c 0.971,-0.119 2.845,1.333 4.712,3.771 1.895,2.371 3.815,5.354 6.011,7.537 1.326,1.297 2.847,2.426 4.751,2.645 l 0,2.646 7.556,-4.363 -7.556,-4.362 0,2.535 c -1.04,-0.339 -2.581,-1.663 -4.125,-3.679 z m 3.80427,-2.712625 7.556,-4.361 -7.556,-4.3620001 0,2.7010001 c -2.929,0.374 -4.905,2.64 -6.809,4.952 0.545,0.703 1.08,1.418 1.604,2.127 0.192,0.26 0.383,0.514 0.573,0.77 0.802,-1.043 1.584,-1.999 2.341,-2.74 0.884,-0.885 1.673,-1.393 2.291,-1.588 l 0,2.501 z",prune:"m 19.562851,8.073736 0.03125,2.71875 c -2.882582,0.393185 -4.828834,2.614048 -6.6875,4.90625 -0.221506,-0.28835 -0.462009,-0.559778 -0.6875,-0.84375 l -2.6562499,2.28125 c 1.7932879,2.268757 3.6193419,4.978996 5.6874999,7 1.337057,1.285599 2.875445,2.39106 4.78125,2.59375 l 0.03125,2.65625 7.5,-4.4375 -7.59375,-4.28125 0.03125,2.53125 c -1.042873,-0.330081 -2.595045,-1.653544 -4.15625,-3.65625 -0.250648,-0.308484 -0.497657,-0.642447 -0.75,-0.96875 0.764461,-1.007755 1.525207,-1.934522 2.25,-2.65625 0.87639,-0.892537 1.633692,-1.424716 2.25,-1.625 l 0.03125,2.5 7.53125,-4.40625 -7.59375,-4.3125 z m -8.36868,-7.52352533 0.03125,2.71875003 c -2.911323,0.3971054 -4.8743904,2.6524548 -6.7499997,4.96875 -0.041426,-0.00107 -0.083225,1.967e-4 -0.125,0 l -3.49999995,0.03125 0.03125,3.4999993 3.49999995,-0.03125 c 0.5326396,-0.06991 1.3474214,0.347693 2.28125,1.125 l 2.65625,-2.3125 c -0.4208407,-0.381919 -0.8472931,-0.7770725 -1.3125,-1.0937495 0.324874,-0.3826572 0.6518381,-0.7469274 0.96875,-1.0624998 0.87639,-0.8925366 1.6649427,-1.4247156 2.2812497,-1.625 l 0.03125,2.5 7.5,-4.40625 -7.59375,-4.31250003 z",ancestral:"m 15.386335,19.644173 c -1.429914,-0.237 -2.32361,-1.331 -3.477436,-2.886 -0.556166,-0.751 -1.139463,-1.577 -1.85442,-2.319 1.113929,-1.165 1.923841,-2.519 2.779236,-3.503 0.805923,-0.92 1.51689,-1.5189996 2.55262,-1.6879996 v 2.5739996 l 6.029259,-4.3629996 -6.029259,-4.363 v 2.652 c -2.66513,0.266 -4.34879,2.378 -5.5329375,4.013 -0.6535154,0.8959996 -1.2264386,1.6919996 -1.7650503,2.1919996 -0.5465912,0.501 -0.9790766,0.731 -1.60626,0.742 -7.979e-4,0 -0.0016,0 -0.00239,0 H 0.24616125 v 3.5 h 7.9794e-4 v 0.001 c 0,0 0.0367054,-0.001 0.10852029,-0.001 H 6.4812893 c 0.6271833,0.011 1.0612646,0.241 1.6094518,0.743 0.8146999,0.743 1.6716909,2.181 2.8342939,3.568 1.046902,1.258 2.523096,2.46 4.462098,2.649 v 2.664 l 6.029259,-4.36 -6.029259,-4.361 v 2.546 z m 6.995306,-0.811762 7.556,-4.363 -7.556,-4.363 v 2.598 H 3.4086411 v 3.5 H 22.381641 v 2.628 z",redo:"M24.083,15.5c-0.009,4.739-3.844,8.574-8.583,8.583c-4.741-0.009-8.577-3.844-8.585-8.583c0.008-4.741,3.844-8.577,8.585-8.585c1.913,0,3.665,0.629,5.09,1.686l-1.782,1.783l8.429,2.256l-2.26-8.427l-1.89,1.89c-2.072-1.677-4.717-2.688-7.587-2.688C8.826,3.418,3.418,8.826,3.416,15.5C3.418,22.175,8.826,27.583,15.5,27.583S27.583,22.175,27.583,15.5H24.083z",undo:"m 6.916,15.5 c 0.009,4.739 3.844,8.574 8.583,8.583 4.741,-0.009 8.577,-3.844 8.585,-8.583 -0.008,-4.741 -3.844,-8.577 -8.585,-8.585 -1.913,0 -3.665,0.629 -5.09,1.686 l 1.782,1.783 -8.429,2.256 2.26,-8.427 1.89,1.89 C 9.984,4.426 12.629,3.415 15.499,3.415 22.173,3.418 27.581,8.826 27.583,15.5 27.581,22.175 22.173,27.583 15.499,27.583 8.825,27.583 3.416,22.175 3.416,15.5 h 3.5 z",file:"M23.024,5.673c-1.744-1.694-3.625-3.051-5.168-3.236c-0.084-0.012-0.171-0.019-0.263-0.021H7.438c-0.162,0-0.322,0.063-0.436,0.18C6.889,2.71,6.822,2.87,6.822,3.033v25.75c0,0.162,0.063,0.317,0.18,0.435c0.117,0.116,0.271,0.179,0.436,0.179h18.364c0.162,0,0.317-0.062,0.434-0.179c0.117-0.117,0.182-0.272,0.182-0.435V11.648C26.382,9.659,24.824,7.49,23.024,5.673zM25.184,28.164H8.052V3.646h9.542v0.002c0.416-0.025,0.775,0.386,1.05,1.326c0.25,0.895,0.313,2.062,0.312,2.871c0.002,0.593-0.027,0.991-0.027,0.991l-0.049,0.652l0.656,0.007c0.003,0,1.516,0.018,3,0.355c1.426,0.308,2.541,0.922,2.645,1.617c0.004,0.062,0.005,0.124,0.004,0.182V28.164z",edit:"M13.587,12.074c-0.049-0.074-0.11-0.147-0.188-0.202c-0.333-0.243-0.803-0.169-1.047,0.166c-0.244,0.336-0.167,0.805,0.167,1.048c0.303,0.22,0.708,0.167,0.966-0.091l-7.086,9.768l-2.203,7.997l6.917-4.577L26.865,4.468l-4.716-3.42l-1.52,2.096c-0.087-0.349-0.281-0.676-0.596-0.907c-0.73-0.529-1.751-0.369-2.28,0.363C14.721,6.782,16.402,7.896,13.587,12.074zM10.118,25.148L6.56,27.503l1.133-4.117L10.118,25.148zM14.309,11.861c2.183-3.225,1.975-4.099,3.843-6.962c0.309,0.212,0.664,0.287,1.012,0.269L14.309,11.861z",gear:"M 28.83237,16.669786 V 12.992777 L 25.568623,11.832119 C 25.343305,11.050659 25.032164,10.305781 24.646207,9.6078881 L 26.133842,6.4781406 23.533794,3.8780911 20.404112,5.365793 C 19.706285,4.979834 18.961275,4.6686288 18.179814,4.443376 L 17.01909,1.1796293 H 13.342147 L 12.181423,4.4434429 C 11.399964,4.6686288 10.655086,4.979834 9.957192,5.365793 L 6.8274444,3.8780911 4.2273947,6.4781406 5.7151635,9.6078881 C 5.329205,10.305781 5.0179334,11.050659 4.7927469,11.832119 L 1.529,12.992777 v 3.677008 l 3.2637469,1.160658 c 0.2251865,0.78146 0.5364581,1.526338 0.9224166,2.224231 l -1.4877686,3.129749 2.6000495,2.600049 3.1297476,-1.487703 c 0.697894,0.385959 1.442772,0.697165 2.224231,0.922484 L 13.342147,28.483 h 3.676943 l 1.160724,-3.263747 c 0.781461,-0.225187 1.526472,-0.536459 2.224298,-0.922417 l 3.129682,1.487636 2.600048,-2.600049 -1.487635,-3.129681 c 0.385959,-0.697826 0.69723,-1.442839 0.922416,-2.224299 l 3.263747,-1.160657 z m -13.651686,3.167987 c -2.765062,0 -5.006588,-2.241462 -5.006588,-5.006458 0,-2.764996 2.241526,-5.0065239 5.006588,-5.0065239 2.764997,0 5.006458,2.2415279 5.006458,5.0065239 0,2.764996 -2.241461,5.006458 -5.006458,5.006458 z",gears:"M17.41,20.395l-0.778-2.723c0.228-0.2,0.442-0.414,0.644-0.643l2.721,0.778c0.287-0.418,0.534-0.862,0.755-1.323l-2.025-1.96c0.097-0.288,0.181-0.581,0.241-0.883l2.729-0.684c0.02-0.252,0.039-0.505,0.039-0.763s-0.02-0.51-0.039-0.762l-2.729-0.684c-0.061-0.302-0.145-0.595-0.241-0.883l2.026-1.96c-0.222-0.46-0.469-0.905-0.756-1.323l-2.721,0.777c-0.201-0.228-0.416-0.442-0.644-0.643l0.778-2.722c-0.418-0.286-0.863-0.534-1.324-0.755l-1.96,2.026c-0.287-0.097-0.581-0.18-0.883-0.241l-0.683-2.73c-0.253-0.019-0.505-0.039-0.763-0.039s-0.51,0.02-0.762,0.039l-0.684,2.73c-0.302,0.061-0.595,0.144-0.883,0.241l-1.96-2.026C7.048,3.463,6.604,3.71,6.186,3.997l0.778,2.722C6.736,6.919,6.521,7.134,6.321,7.361L3.599,6.583C3.312,7.001,3.065,7.446,2.844,7.907l2.026,1.96c-0.096,0.288-0.18,0.581-0.241,0.883l-2.73,0.684c-0.019,0.252-0.039,0.505-0.039,0.762s0.02,0.51,0.039,0.763l2.73,0.684c0.061,0.302,0.145,0.595,0.241,0.883l-2.026,1.96c0.221,0.46,0.468,0.905,0.755,1.323l2.722-0.778c0.2,0.229,0.415,0.442,0.643,0.643l-0.778,2.723c0.418,0.286,0.863,0.533,1.323,0.755l1.96-2.026c0.288,0.097,0.581,0.181,0.883,0.241l0.684,2.729c0.252,0.02,0.505,0.039,0.763,0.039s0.51-0.02,0.763-0.039l0.683-2.729c0.302-0.061,0.596-0.145,0.883-0.241l1.96,2.026C16.547,20.928,16.992,20.681,17.41,20.395zM11.798,15.594c-1.877,0-3.399-1.522-3.399-3.399s1.522-3.398,3.399-3.398s3.398,1.521,3.398,3.398S13.675,15.594,11.798,15.594zM27.29,22.699c0.019-0.547-0.06-1.104-0.23-1.654l1.244-1.773c-0.188-0.35-0.4-0.682-0.641-0.984l-2.122,0.445c-0.428-0.364-0.915-0.648-1.436-0.851l-0.611-2.079c-0.386-0.068-0.777-0.105-1.173-0.106l-0.974,1.936c-0.279,0.054-0.558,0.128-0.832,0.233c-0.257,0.098-0.497,0.22-0.727,0.353L17.782,17.4c-0.297,0.262-0.568,0.545-0.813,0.852l0.907,1.968c-0.259,0.495-0.437,1.028-0.519,1.585l-1.891,1.06c0.019,0.388,0.076,0.776,0.164,1.165l2.104,0.519c0.231,0.524,0.541,0.993,0.916,1.393l-0.352,2.138c0.32,0.23,0.66,0.428,1.013,0.6l1.715-1.32c0.536,0.141,1.097,0.195,1.662,0.15l1.452,1.607c0.2-0.057,0.399-0.118,0.596-0.193c0.175-0.066,0.34-0.144,0.505-0.223l0.037-2.165c0.455-0.339,0.843-0.747,1.152-1.206l2.161-0.134c0.152-0.359,0.279-0.732,0.368-1.115L27.29,22.699zM23.127,24.706c-1.201,0.458-2.545-0.144-3.004-1.345s0.143-2.546,1.344-3.005c1.201-0.458,2.547,0.144,3.006,1.345C24.931,22.902,24.328,24.247,23.127,24.706z",settings:"M26.834,14.693c1.816-2.088,2.181-4.938,1.193-7.334l-3.646,4.252l-3.594-0.699L19.596,7.45l3.637-4.242c-2.502-0.63-5.258,0.13-7.066,2.21c-1.907,2.193-2.219,5.229-1.039,7.693L5.624,24.04c-1.011,1.162-0.888,2.924,0.274,3.935c1.162,1.01,2.924,0.888,3.935-0.274l9.493-10.918C21.939,17.625,24.918,16.896,26.834,14.693z",info:"m 15.018683,3.1391031 c 6.443587,0 11.659423,5.2579 11.659423,11.7561999 0,6.4971 -5.214784,11.7561 -11.659423,11.7561 -6.443445,0 -11.6594235,-5.2579 -11.6594235,-11.7561 0,-6.4970999 5.2146408,-11.7561999 11.6594235,-11.7561999 m 0,-2.83279997 c -7.9909904,0 -14.4689234,6.53159997 -14.4689234,14.58899987 0,8.0573 6.477933,14.5891 14.4689234,14.5891 7.990916,0 14.468923,-6.5318 14.468923,-14.5891 0,-8.0573999 -6.478007,-14.58899987 -14.468923,-14.58899987 l 0,0 z M 14.777487,23.096903 c -1.981396,0.702 -3.614841,-0.1026 -3.287183,-2.0216 0.327797,-1.9192 2.207982,-6.0276 2.476222,-6.8044 0.268024,-0.777 -0.245971,-0.9899 -0.796913,-0.6738 -0.317758,0.1848 -0.790033,0.5553 -1.195442,0.9153 -0.112448,-0.2281 -0.270557,-0.4891 -0.389259,-0.7387 0.661568,-0.6686 1.767455,-1.5648 3.076615,-1.8897 1.564185,-0.3893 4.178565,0.2331 3.05491,3.2478 -0.802397,2.1486 -1.369845,3.6313 -1.727421,4.7356 -0.357372,1.1047 0.06708,1.3363 0.692749,0.906 0.488785,-0.3366 1.009453,-0.7943 1.391125,-1.1493 0.176646,0.2893 0.233116,0.3817 0.407799,0.7141 -0.662552,0.6848 -2.395661,2.2873 -3.703202,2.7587 z M 18.882869,9.8053031 c -0.89869,0.7711999 -2.230744,0.7545999 -2.975963,-0.038 -0.745011,-0.7919 -0.620689,-2.0594 0.277789,-2.8307 0.898621,-0.7712 2.230955,-0.7546 2.975961,0.038 0.744941,0.7922 0.620759,2.0595 -0.277787,2.8312 z",error:"M 21.213204,0 8.7867964,0 0,8.7867964 0,21.213204 8.7867964,30 21.213204,30 30,21.213204 30,8.7867964 21.213204,0 Z m -6.179709,25.377524 c -1.180121,0 -2.136772,-0.956723 -2.136772,-2.136844 0,-1.179976 0.956651,-2.136554 2.136772,-2.136554 1.179976,0 2.136553,0.956578 2.136553,2.136554 0,1.180121 -0.956577,2.136844 -2.136553,2.136844 z M 17.856772,7.8814806 c -0.180656,1.4402908 -1.507282,8.4524274 -1.94585,10.7566024 -0.08104,0.426116 -0.453568,0.735436 -0.887403,0.735436 l -0.0174,0 c -0.449199,0 -0.832863,-0.318859 -0.916602,-0.760048 -0.444174,-2.338908 -1.768907,-9.3570878 -1.946723,-10.7745875 -0.214078,-1.7068689 1.11801,-3.2163349 2.838131,-3.2163349 1.742912,0 3.09284,1.5294902 2.87585,3.258932 z",mask:"m 1.0561798,1.2025983 0,27.5312497 27.8125002,0 0,-27.5312497 z m 13.5312502,6.375 c 2.214833,1.57e-5 3.874988,0.601578 4.96875,1.75 1.093736,1.1484497 1.624986,2.8854277 1.625,5.2187497 l 0,8.71875 -2.5,0 0,-2.3125 c -0.57423,0.929689 -1.29949,1.615886 -2.15625,2.0625 -0.85678,0.4375 -1.916675,0.656249 -3.15625,0.65625 -1.567714,-10e-7 -2.820317,-0.4375 -3.7500002,-1.3125 -0.9205751,-0.884113 -1.3750017,-2.054684 -1.375,-3.53125 -1.7e-6,-1.72265 0.5703102,-3.031243 1.71875,-3.90625 1.1575472,-0.874991 3.0655272,-1.3125 5.1875002,-1.3125 l 3.53125,0 0,-0.25 c -1.2e-5,-1.157541 -0.390637,-2.058582 -1.15625,-2.6875 -0.756521,-0.638008 -1.811207,-0.9374857 -3.1875,-0.9374997 -0.875007,1.4e-5 -1.733079,0.102878 -2.5625,0.3124997 -0.829431,0.209649 -1.640628,0.518242 -2.4062502,0.9375 l 0,-2.3124997 c 0.9205692,-0.355454 1.8216102,-0.639307 2.6875002,-0.8125 0.865879,-0.1822761 1.71093,-0.2812343 2.53125,-0.28125 z m 1.59375,7.9999997 c -2.03256,7e-6 -3.466152,0.222664 -4.25,0.6875 -0.783859,0.464851 -1.156255,1.253912 -1.15625,2.375 -5e-6,0.893233 0.291662,1.627607 0.875,2.15625 0.592442,0.519533 1.394524,0.781252 2.40625,0.78125 1.394522,2e-6 2.505198,-0.515623 3.34375,-1.5 0.847644,-0.993486 1.281238,-2.29687 1.28125,-3.9375 l 0,-0.5625 z",unmask:"m 15.036963,7.9749003 -3.566056,9.1517097 7.145127,0 -3.579071,-9.1517097 m -1.483688,-2.4511305 2.980391,0 7.405422,18.3896382 -2.733109,0 -1.770013,-4.717502 -8.758961,0 -1.7700141,4.717502 -2.7721524,0 L 13.553275,5.5237698 M 1.14441,14.816713 l 0,-13.75803 13.972162,0 13.972162,0 0,13.75803 0,13.75803 -13.972162,0 -13.972162,0 z m 25.149892,0 0,-11.006424 -11.17773,0 -11.1777296,0 0,11.006424 0,11.006424 11.1777296,0 11.17773,0 z",selection:"m 2.4719102,2.6966293 25.0561788,0 0,25.0561807 -25.0561788,0 z",selections:"m 12.640449,12.528089 16.067415,0 0,16.067418 -16.067415,0 z M 1.5193118,1.1320225 l 0,16.0624995 9.2812502,0 0,-6.5625 6.78125,0 0,-9.4999995 -16.0625002,0 z",rows:"M4.082,4.083v2.999h22.835V4.083H4.082zM4.082,20.306h22.835v-2.999H4.082V20.306zM4.082,13.694h22.835v-2.999H4.082V13.694zM4.082,26.917h22.835v-2.999H4.082V26.917z",columns:"m 4.0825,26.9175 2.999,0 0,-22.835 -2.999,0 0,22.835 z m 16.223,0 0,-22.835 -2.999,0 0,22.835 2.999,0 z m -6.612,0 0,-22.835 -2.999,0 0,22.835 2.999,0 z m 13.223,0 0,-22.835 -2.999,0 0,22.835 2.999,0 z",collapse:"M25.083,18.895l-8.428-2.259l2.258,8.428l1.838-1.837l7.053,7.053l2.476-2.476l-7.053-7.053L25.083,18.895zM5.542,11.731l8.428,2.258l-2.258-8.428L9.874,7.398L3.196,0.72L0.72,3.196l6.678,6.678L5.542,11.731zM7.589,20.935l-6.87,6.869l2.476,2.476l6.869-6.869l1.858,1.857l2.258-8.428l-8.428,2.258L7.589,20.935zM23.412,10.064l6.867-6.87l-2.476-2.476l-6.868,6.869l-1.856-1.856l-2.258,8.428l8.428-2.259L23.412,10.064z",expand:"m 22.442659,4.7885628 -6.867,6.8700002 2.476,2.476 6.868,-6.8690002 1.856,1.856 2.258,-8.42800002 -8.428,2.25900002 1.837,1.836 z M 7.2783679,25.007363 l 6.8700011,-6.869 -2.476,-2.476 -6.8690011,6.869 -1.8579996,-1.857 -2.25799993,8.428 8.42799953,-2.258 -1.837,-1.837 z M 8.9349169,2.8930628 0.50691681,0.63506278 2.7649167,9.0630628 l 1.8380002,-1.837 6.6780001,6.6780002 2.476,-2.476 -6.6780001,-6.6780002 1.856,-1.857 z m 11.9177101,24.2527002 8.428,2.259 -2.258,-8.428 -1.838,1.837 -7.053,-7.053 -2.476,2.476 7.053,7.053 -1.856,1.856 z",ladderize:"m 12.215203,20.087313 7.555999,4.361 -7.555999,4.362 0,-2.701 c -2.929,-0.374 -4.905,-2.64 -6.809,-4.952 0.545,-0.703 1.08,-1.418 1.604,-2.127 0.192,-0.26 0.383,-0.514 0.573,-0.77 0.802,1.043 1.584,1.999 2.341,2.74 0.884,0.885 1.673,1.393 2.291,1.588 l 0,-2.501 z m 4.443068,-9.127222 c -1.893,2.371 -3.814999,5.354 -6.008999,7.537 -1.461,1.428 -3.155,2.664 -5.34,2.693 l -3.500001,0 0,-3.5 3.500001,0 c 0.971,0.119 2.845,-1.333 4.712,-3.771 1.895,-2.371 3.814999,-5.3540005 6.010999,-7.5370005 1.326,-1.2969995 2.847,-2.4259995 4.751,-2.6449995 l 0,-2.646 7.556,4.363 -7.556,4.3619997 0,-2.5350002 c -1.04,0.339 -2.581,1.663 -4.125,3.6790005 z m 3.80427,2.712625 7.556,4.361 -7.556,4.362 0,-2.701 c -2.929,-0.374 -4.905,-2.64 -6.809,-4.952 0.545,-0.703 1.08,-1.418 1.604,-2.127 0.192,-0.26 0.383,-0.514 0.573,-0.77 0.802,1.043 1.584,1.999 2.341,2.74 0.884,0.885 1.673,1.393 2.291,1.588 l 0,-2.501 z",home:"M 26.670806,16.493462 V 29.424066 H 18.286212 V 22.39681 h -6.314974 v 7.027256 H 3.5866439 V 16.493462 H 0.58577771 L 15.12876,0.47983084 29.671744,16.493543 h -3.000938 z",link:"M 8.0661255,11.09575 C 8.5908359,10.571119 9.1725964,10.138539 9.7913076,9.7974556 13.239434,7.8966511 17.662037,8.9076608 19.878382,12.268811 l -2.68212,2.682111 c -0.769488,-1.755297 -2.678845,-2.752945 -4.579297,-2.327878 -0.715423,0.160032 -1.395368,0.516774 -1.95096,1.072447 l -5.1418567,5.141714 c -1.5608957,1.560896 -1.5608252,4.100786 1.407e-4,5.661687 1.5608955,1.560899 4.1007223,1.560899 5.661619,0 l 1.585039,-1.584976 c 1.441007,0.571744 2.987643,0.800726 4.513129,0.686277 l -3.498368,3.498358 c -2.999263,2.999265 -7.8619579,2.999265 -10.8612202,0 -2.9992702,-2.99919 -2.9993405,-7.861957 -7.04e-5,-10.861228 L 8.0661255,11.09575 z M 16.231253,2.9305582 12.732887,6.4289264 c 1.525756,-0.1143196 3.072112,0.1146635 4.513192,0.6864089 L 18.831054,5.530297 c 1.560967,-1.560974 4.100793,-1.560974 5.66176,0 1.560966,1.5609656 1.560966,4.1007846 0,5.66176 l -5.141787,5.141646 c -1.565624,1.565624 -4.109486,1.552404 -5.661616,0 -0.361957,-0.361897 -0.674508,-0.812568 -0.868647,-1.255232 l -2.68204,2.682043 c 0.28173,0.427366 0.574801,0.796906 0.950887,1.172991 0.97057,0.970644 2.205549,1.693514 3.62632,2.035293 1.84151,0.443231 3.814603,0.197539 5.509722,-0.736992 0.618713,-0.341151 1.200543,-0.77367 1.725175,-1.298301 l 5.141716,-5.141647 c 2.999263,-2.999263 2.999263,-7.861967 7.1e-5,-10.8612998 -2.999331,-2.99926258 -7.862029,-2.99926258 -10.861362,0 z",book:"M 28.347812,0.36536353 H 4.6478895 C 2.6884607,0.36536353 1.1,1.9538248 1.1,3.9132611 V 26.052111 C 1.1,28.011539 2.6884607,29.6 4.6478895,29.6 H 28.347812 V 5.5117949 c 0,0 -1.950847,0 -4.716783,0 v 9.6172031 l -2.680998,-2.681075 -2.681074,2.681075 V 5.5117949 c -5.906959,0 -12.326514,0 -12.9114881,0 -1.6753856,0 -1.6753856,-2.4500276 0,-2.4500276 0.9675108,0 15.1411971,0 22.9903431,0 V 0.36536353 z",book_open:"M 27.952974,7.6864478 V 21.425765 l -0.8761,0.140796 V 7.6864478 4.9067928 c -4.706511,0.143612 -9.161985,0.900247 -12.17881,2.778318 C 11.881098,5.8070398 7.4257655,5.0504048 2.7192538,4.9067928 v 2.779655 13.8801132 l -0.8761,-0.140796 V 7.6864478 H 0.4 V 23.103626 h 10.94333 c 1.786413,0 1.98247,1.096374 3.554734,1.096374 1.57522,0 1.764942,-1.096374 3.554805,-1.096374 H 29.4 V 7.6864478 H 27.952974 z M 13.701936,21.374376 C 11.35051,20.441394 8.5001062,19.841112 5.0409715,19.581063 V 7.4361848 c 2.8408309,0.238366 6.2397045,0.815698 8.6609645,2.321999 V 21.374376 z m 11.05315,-1.793313 c -3.459204,0.259979 -6.309609,0.860331 -8.660965,1.793313 V 9.7582538 c 2.421261,-1.5063 5.820135,-2.083703 8.660965,-2.321999 V 19.581063 z",download:"m 20.041788,18.510605 v 5.318832 l -9.995423,1.57e-4 V 18.510668 L 7.6359454,16.092571 V 26.243926 H 22.45221 V 16.092571 l -2.410422,2.418034 z M 12.944237,27.510757 11.275915,29.7 h 7.536419 L 17.143976,27.510757 H 12.944237 z M 9.88931,3.6929107 H 20.198993 V 6.0034896 H 9.88931 V 3.6929107 z M 20.198993,10.196814 V 7.5439471 H 9.88931 V 10.196814 H 5.5 l 9.543891,9.577576 9.544186,-9.577576 H 20.198993 z M 9.88931,2.1524536 H 20.198993 V 0.381 H 9.88931 v 1.7714536 z",file_blank:"M 5.115534,26.684466 V 3.315534 h 19.661859 c 0,0 0,13.115109 0,15.34994 0,4.442983 -5.485223,2.663002 -5.485223,2.663002 0,0 1.679395,5.35599 -2.463592,5.35599 -2.256792,0 -3.383146,0 -11.713044,0 z M 27.592927,18.908524 V 0.5 H 2.3 v 29 h 14.571515 c 4.798021,0 10.721412,-6.26942 10.721412,-10.591476 z",files:"m 22.822349,20.958895 h -11.34385 v -2.113446 h 11.34378 v 2.113446 z m 0,-4.115373 h -11.34385 v -2.113445 h 11.34378 v 2.113445 z m 0,-4.039006 H 11.478499 V 10.69107 h 11.34378 v 2.113446 z M 8.6848755,26.782072 V 8.1054804 H 25.545524 c 0,0 0,9.4048346 0,11.6415646 0,3.589547 -4.939052,2.383474 -4.939052,2.383474 0,0 1.170074,4.651553 -2.254343,4.651553 -2.25878,0 -1.330273,0 -9.6672535,0 z M 28.363452,19.638061 V 5.2875525 H 5.8669476 V 29.6 H 18.395032 c 4.802101,0 9.96842,-5.636278 9.96842,-9.961939 z M 3.5656869,26.719866 V 3.0768177 H 25.475076 V 0.6 H 1.1 v 26.119937 h 2.4656869 z",file_info:"M 5.015534,26.784466 V 3.415534 h 19.661859 c 0,0 0,13.115109 0,15.349939 0,4.442983 -5.485223,2.663003 -5.485223,2.663003 0,0 1.679396,5.35599 -2.463592,5.35599 -2.256792,0 -3.383146,0 -11.713044,0 z M 27.492927,19.008524 V 0.6 H 2.2 v 29 h 14.571515 c 4.798021,0 10.721412,-6.26942 10.721412,-10.591476 z M 14.413012,21.86784 c -1.735495,0.609985 -3.166138,-0.08946 -2.879094,-1.756049 0.286973,-1.667077 1.933849,-5.235978 2.168805,-5.91065 0.234745,-0.674884 -0.215458,-0.859935 -0.698041,-0.58542 -0.278315,0.160626 -0.691917,0.482442 -1.047097,0.795177 -0.09833,-0.198143 -0.236927,-0.424794 -0.340891,-0.641801 0.579437,-0.580704 1.548051,-1.359199 2.694818,-1.641245 1.369969,-0.338216 3.659842,0.202366 2.675672,2.821095 -0.702757,1.866487 -1.199769,3.154524 -1.512997,4.113706 -0.312947,0.959534 0.05884,1.160704 0.606818,0.786871 0.428031,-0.292252 0.884218,-0.689806 1.218493,-0.998247 0.154643,0.251356 0.204126,0.331529 0.35708,0.620332 -0.580352,0.594852 -2.098418,1.986852 -3.243566,2.396231 z m 3.595719,-11.545942 c -0.787153,0.670027 -1.953911,0.655456 -2.606551,-0.0328 -0.652571,-0.687835 -0.54368,-1.7886383 0.243262,-2.4588761 0.787153,-0.6699563 1.954051,-0.6554563 2.606551,0.032379 0.6525,0.6881165 0.543679,1.7890601 -0.243262,2.4592981 z",file_add:"m 23.022856,0.5 c -3.213305,0 -5.818313,2.6047976 -5.818313,5.8181027 0,3.2133053 2.605008,5.8181023 5.818313,5.8181023 3.213165,0 5.818033,-2.604797 5.818033,-5.8181023 C 28.840889,3.1047976 26.236021,0.5 23.022856,0.5 z m 3.575641,6.8752432 h -2.51843 V 9.893744 h -1.94506 V 7.3752432 h -2.51843 V 5.430324 h 2.51843 V 2.9119641 h 1.94506 V 5.430324 h 2.51843 V 7.3752432 z M 7.1085454,16.198006 H 20.74343 v 2.108237 H 7.1085454 V 16.198006 z M 20.148204,13.709161 H 7.1085454 V 11.600924 H 17.113748 c 0.8317,0.928116 1.86312,1.652928 3.034456,2.108237 z m 6.403842,-0.289601 v 5.506154 C 26.552046,23.240713 20.638229,29.5 15.847962,29.5 H 1.3 V 0.5468731 h 16.290069 c -0.05791,0.054603 -0.115461,0.1099095 -0.171962,0.1664805 -0.768171,0.7681012 -1.358688,1.6662806 -1.752226,2.6445027 H 4.1109832 V 26.689017 c 8.3164348,0 9.4409678,0 11.6941118,0 4.136291,0 2.45961,-5.347334 2.45961,-5.347334 0,0 5.476358,1.777174 5.476358,-2.658627 0,-0.689183 0,-2.414986 0,-4.470939 0.987849,-0.08834 1.937891,-0.357768 2.810983,-0.792557 z M 7.1085454,7.0096046 h 8.0179076 c 0.06261,0.728396 0.223614,1.4363421 0.476813,2.1082374 H 7.1085454 V 7.0096046 z",
file_export:"M 12.532782,11.81826 C 14.234772,4.40665 22.710656,2.89287 22.710656,2.89287 V 0.4 l 5.054727,5.04642 -5.054727,5.04664 V 8.00011 c -7.1e-5,7e-5 -6.554423,-0.0616 -10.177874,3.81815 z M 22.842,13.3459 c 0,2.76499 0,5.43341 0,6.29722 0,4.00108 -4.939714,2.39799 -4.939714,2.39799 0,0 1.512224,4.82336 -2.21871,4.82336 -2.032324,0 -3.04662,0 -10.5480469,0 V 5.81969 H 13.302337 C 14.116731,4.88324 15.080206,4.03408 16.183755,3.28416 H 2.6 V 29.4 h 13.122218 c 4.32093,0 9.655311,-5.64592 9.655311,-9.53804 V 10.81445 C 24.20852,11.98149 24.903393,11.28788 22.842,13.3459 z m -2.703898,5.95738 H 7.8392864 V 17.40153 H 20.138172 v 1.90175 z m -0.002,-4.14671 H 7.8392864 V 13.25495 H 20.136061 v 1.90162 z",folder:"M 29.59436,26.75 H 0.32456624 V 6.4544356 H 1.5660473 c 1.9340154,0 0.8261813,-3.4516267 3.3135615,-3.4516267 3.5510335,0 2.1118432,0 5.6617722,0 2.486276,0 1.381755,3.4516267 3.314666,3.4516267 H 29.595464 V 26.75 z",floppy:"M 17.065811,4.2836335 H 20.09251 V 9.750485 H 17.065811 V 4.2836335 z M 23.91699,0.6 H 0.9 v 29 H 29.05534 V 5.7383495 L 23.91699,0.6 z M 7.551699,2.7116505 H 21.875728 V 11.299029 H 7.551699 V 2.7116505 z M 24.996255,27.300553 H 4.959085 V 16.061927 h 20.03717 V 27.300553 z M 22.896359,19.358495 H 7.0589806 V 17.950728 H 22.896359 v 1.407767 z m 0,1.618932 H 7.0589806 v 1.407767 H 22.896359 v -1.407767 z m 0,3.026699 H 7.0589806 v 1.407767 H 22.896359 v -1.407767 z",pagan:"M 7.9464069,25.999381 C 5.0337975,25.044237 2.5647272,22.94392 1.1231595,20.19516 0.02169705,18.094906 0.08906178,13.539371 1.2542156,11.332489 3.3111258,7.4365573 7.8551583,5.029664 12.061303,5.6081619 c 1.161997,0.1598156 3.001402,0.8716814 4.348684,1.6829761 1.767858,1.0645638 2.467265,1.2961466 2.879973,0.9536204 0.449465,-0.373023 0.429875,-0.6282 -0.111726,-1.4547963 -0.361254,-0.5513317 -0.548563,-1.110675 -0.416252,-1.2429819 0.215027,-0.2150321 6.194019,-1.7394932 6.958972,-1.7743271 0.615996,-0.028054 0.27428,0.8418155 -1.438185,3.6610379 -0.960505,1.5812667 -1.954957,2.880547 -2.209888,2.887283 -0.254937,0.0066 -0.738082,-0.4012535 -1.073649,-0.9066536 -0.502211,-0.7563693 -0.719006,-0.8285656 -1.225566,-0.4081449 -0.540564,0.4486446 -0.497433,0.7438482 0.354556,2.4267545 0.533493,1.053787 0.96999,2.34692 0.96999,2.873622 0,0.683704 0.235086,0.95764 0.82182,0.95764 0.597368,0 0.821818,-0.273936 0.821818,-1.003033 0,-0.551663 0.167016,-1.106248 0.371134,-1.232408 0.49917,-0.308504 6.707703,2.331087 6.707703,2.851817 0,0.520729 -6.208533,3.16032 -6.707703,2.851809 -0.204118,-0.126143 -0.371134,-0.680727 -0.371134,-1.232409 0,-0.706265 -0.227614,-1.003033 -0.769302,-1.003033 -0.575816,0 -0.83343,0.401024 -1.024258,1.594408 -0.381097,2.383289 -2.602598,5.31229 -5.098661,6.722483 -2.277497,1.286706 -5.9258631,1.833991 -7.9032221,1.185555 z M 15.232735,24.361807 C 21.696756,21.064081 21.990671,11.638837 15.74969,7.7839071 9.4480451,3.8915119 0.96358533,8.5374753 0.96358533,15.880568 c 0,3.623605 2.88059807,7.749352 6.28753797,9.005355 2.2349176,0.823927 5.7978387,0.58996 7.9816117,-0.524116 z M 7.7805361,21.487642 C 7.4381926,20.933719 5.9991357,13.768893 5.8290315,11.771433 L 5.6890584,10.127777 8.5338196,10.00465 c 3.2765294,-0.1418054 4.7701064,0.35345 6.2035964,2.057063 2.119132,2.518465 0.890674,5.270287 -2.617362,5.862963 l -1.557541,0.263146 -0.38218,1.722774 c -0.2887318,1.301578 -0.5987218,1.753615 -1.2679431,1.848988 -0.487177,0.06943 -0.9965112,-0.05295 -1.1318538,-0.271942 z m 5.2221419,-6.11793 c 0.460731,-0.250882 -0.514534,-1.338256 -1.200271,-1.338256 -0.327933,0 -0.566055,0.426735 -0.566055,1.01439 0,0.979661 0.420418,1.056748 1.766326,0.323866 z",prank:"M 5.4012028,28.354915 C 1.0319612,27.248794 0.3,25.3299 0.3,14.981699 0.3,1.6401892 0.6372533,1.330007 15.143127,1.330007 c 14.296316,0 14.323169,0.023732 14.510514,12.824834 0.207265,14.162095 0.0558,14.320627 -13.789048,14.43588 -5.075676,0.04225 -9.7841987,-0.06384 -10.4633902,-0.235806 z M 25.528673,26.809299 c 2.765271,-1.312209 2.973926,-2.132851 2.975645,-11.703259 0.0023,-12.8916548 0.37323,-12.5466354 -13.488225,-12.5466354 -13.8319735,0 -13.4900852,-0.31282 -13.4891158,12.3422474 9.763e-4,12.76284 -0.1829516,12.590296 13.4209578,12.590296 7.693092,0 9.370182,-0.108204 10.580738,-0.682649 z M 10.386004,22.893168 C 10.143372,21.888553 7.902135,10.237792 7.4764572,7.7682987 l -0.264237,-1.5329264 5.0667668,0 c 4.911166,0 5.120902,0.03636 6.829677,1.1839862 5.952131,3.9974935 3.879912,10.6529955 -3.321643,10.6683595 -0.949488,0.002 -1.095554,0.199071 -1.310604,1.768014 -0.440134,3.211126 -0.906139,3.957191 -2.471742,3.957191 -1.109919,0 -1.442125,-0.188764 -1.618671,-0.919755 z M 17.6749,14.819096 c 1.436786,-0.546264 1.261678,-2.075031 -0.300341,-2.622098 -1.352982,-0.473858 -1.509484,-0.340282 -1.81626,1.550155 -0.265707,1.637348 0.118154,1.831751 2.116601,1.071943 z",seq:"m 0.6,25.014285 0,-2.485714 2.0714286,0 2.0714285,0 0,2.485714 0,2.485715 -2.0714285,0 -2.0714286,0 0,-2.485715 z m 4.9714286,0 0,-2.485714 2.0714286,0 2.0714278,0 0,2.485714 0,2.485715 -2.0714278,0 -2.0714286,0 0,-2.485715 z m 4.9714284,0 0,-2.485714 2.071429,0 2.071428,0 0,2.485714 0,2.485715 -2.071428,0 -2.071429,0 0,-2.485715 z m 14.914285,0 0,-2.485714 2.07143,0 2.071428,0 0,2.485714 0,2.485715 -2.071428,0 -2.07143,0 0,-2.485715 z M 0.6,18.8 l 0,-2.9 2.0714286,0 2.0714285,0 0,2.9 0,2.899999 -2.0714285,0 -2.0714286,0 L 0.6,18.8 z m 4.9714286,0 0,-2.9 2.0714286,0 2.0714278,0 0,2.9 0,2.899999 -2.0714278,0 -2.0714286,0 0,-2.899999 z m 4.9714284,0 0,-2.9 2.071429,0 2.071428,0 0,2.9 0,2.899999 -2.071428,0 -2.071429,0 0,-2.899999 z m 4.971429,0 0,-2.9 2.071428,0 2.071429,0 0,2.9 0,2.899999 -2.071429,0 -2.071428,0 0,-2.899999 z m 9.942856,0 0,-2.9 2.07143,0 2.071428,0 0,2.9 0,2.899999 -2.071428,0 -2.07143,0 0,-2.899999 z M 0.6,12.171428 l 0,-2.8999998 2.0714286,0 2.0714285,0 0,2.8999998 0,2.9 -2.0714285,0 -2.0714286,0 0,-2.9 z m 4.9714286,0 0,-2.8999998 2.0714286,0 2.0714278,0 0,2.8999998 0,2.9 -2.0714278,0 -2.0714286,0 0,-2.9 z m 4.9714284,0 0,-2.8999998 2.071429,0 2.071428,0 0,2.8999998 0,2.9 -2.071428,0 -2.071429,0 0,-2.9 z m 9.942858,0 0,-2.8999998 2.071428,0 2.071428,0 0,2.8999998 0,2.9 -2.071428,0 -2.071428,0 0,-2.9 z m 4.971427,0 0,-2.8999998 2.07143,0 2.071428,0 0,2.8999998 0,2.9 -2.071428,0 -2.07143,0 0,-2.9 z M 0.6,5.5428568 l 0,-2.9 2.0714286,0 2.0714285,0 0,2.9 0,2.9000001 -2.0714285,0 -2.0714286,0 0,-2.9000001 z m 4.9714286,0 0,-2.9 2.0714286,0 2.0714278,0 0,2.9 0,2.9000001 -2.0714278,0 -2.0714286,0 0,-2.9000001 z m 4.9714284,0 0,-2.9 2.071429,0 2.071428,0 0,2.9 0,2.9000001 -2.071428,0 -2.071429,0 0,-2.9000001 z m 9.942858,0 0,-2.9 2.071428,0 2.071428,0 0,2.9 0,2.9000001 -2.071428,0 -2.071428,0 0,-2.9000001 z m 4.971427,0 0,-2.9 2.07143,0 2.071428,0 0,2.9 0,2.9000001 -2.071428,0 -2.07143,0 0,-2.9000001 z",close:"M 15,0.5 C 6.9918471,0.5 0.5,6.9918471 0.5,15 0.5,23.008153 6.9918471,29.5 15,29.5 23.008153,29.5 29.5,23.008153 29.5,15 29.5,6.9918471 23.008153,0.5 15,0.5 z m 5.499019,23.12574 -5.42849,-5.428138 -5.4285606,5.428842 -2.9158373,-2.917527 5.4273639,-5.428138 -5.4279974,-5.427646 2.9174563,-2.9157665 5.4271531,5.4263785 5.426238,-5.4270824 2.91823,2.9163304 -5.427223,5.427505 5.427857,5.427082 -2.91619,2.91816 z",x:"M 21.259103,24.456135 14.893786,18.091104 8.5282816,24.456892 5.109218,21.03575 11.473304,14.670905 5.1085562,8.3065359 8.5296052,4.8874717 14.893315,11.25033 l 6.362762,-6.3636146 3.421806,3.4196309 -6.363899,6.3641817 6.364655,6.363708 -3.419536,3.421899 z",left:"m 11.63564,26.215669 8.287785,0 -8.258987,-8.298525 17.912228,0 0,-6.221225 -17.912228,0 8.258987,-8.2985236 -8.287785,0 L 0.28089887,14.806533 z",gt:"m 9.4382025,1.4999997 0,7.228332 L 15.680051,15 9.4382025,21.271668 9.4382025,28.5 22.873979,15 z",bubble:"m 15.016855,3.3667079 c -8.1508694,0 -14.75842803,5.078287 -14.75842803,11.3426971 0,2.141068 0.78114243,4.140625 2.12521353,5.848511 L 0.25842697,25.33265 6.175502,23.776 c 2.4657114,1.422698 5.520706,2.276101 8.841353,2.276101 8.150868,0 14.758426,-5.078288 14.758426,-11.342696 0,-6.2644101 -6.607558,-11.3426971 -14.758426,-11.3426971 z",time:"m 7.1868924,17.780343 9.8191816,0 0,-10.8046037 -3.167496,0 0,7.6371107 -6.6516856,0 0,3.167493 z M 15,3.6674786 C 21.264,3.6674786 26.332518,8.7369922 26.332518,15 26.332518,21.264 21.262945,26.332521 15,26.332521 8.736,26.332521 3.667476,21.262948 3.667476,15 3.667476,8.7359203 8.7370586,3.6674786 15,3.6674786 M 15,0.5 C 6.9918468,0.5 0.5,6.9918406 0.5,15 0.5,23.008156 6.9918468,29.5 15,29.5 23.008162,29.5 29.5,23.008156 29.5,15 29.5,6.9918406 23.008162,0.5 15,0.5 Z",detach:"m 12.219101,14.854986 -2.6562499,2.28125 c 1.7932879,2.268757 3.6193419,4.978996 5.6874999,7 1.337057,1.285599 2.875445,2.39106 4.78125,2.59375 l 0.03125,2.65625 7.5,-4.4375 -7.59375,-4.28125 0.03125,2.53125 c -1.042873,-0.330081 -2.595045,-1.653544 -4.15625,-3.65625 -3.625,-4.6875 -2.061695,-2.787323 -3.625,-4.6875 z m -1.02493,-14.30477533 0.03125,2.71875003 c -2.911323,0.3971054 -4.8743904,2.6524548 -6.7499997,4.96875 -0.041426,-0.00107 -0.083225,1.967e-4 -0.125,0 l -3.49999995,0.03125 0.03125,3.4999993 3.49999995,-0.03125 c 0.5326396,-0.06991 1.3474214,0.347693 2.28125,1.125 l 2.65625,-2.3125 c -0.4208407,-0.381919 -0.8472931,-0.7770725 -1.3125,-1.0937495 0.324874,-0.3826572 0.6518381,-0.7469274 0.96875,-1.0624998 0.87639,-0.8925366 1.6649427,-1.4247156 2.2812497,-1.625 l 0.03125,2.5 7.5,-4.40625 z",duplicate:"M 13.404297 0.30664062 L 13.435547 3.0253906 C 10.524224 3.4224961 8.5611562 5.6778454 6.6855469 7.9941406 C 6.6441209 7.9930706 6.6023219 7.9943374 6.5605469 7.9941406 L 3.0605469 8.0253906 L 3.0917969 11.525391 L 6.5917969 11.494141 C 7.1189719 11.424951 7.9238896 11.835642 8.8457031 12.597656 C 10.62809 14.857585 12.442945 17.544488 14.498047 19.552734 C 15.835104 20.838333 17.373492 21.943794 19.279297 22.146484 L 19.310547 24.802734 L 26.810547 20.365234 L 19.216797 16.083984 L 19.248047 18.615234 C 18.205174 18.285153 16.653002 16.96169 15.091797 14.958984 C 11.540919 10.367331 12.919263 12.03756 11.509766 10.324219 C 10.704935 9.5701916 10.434779 9.4170754 10.216797 9.2128906 C 10.541671 8.8302334 10.868635 8.465963 11.185547 8.1503906 C 12.061937 7.2578541 12.85049 6.7256751 13.466797 6.5253906 L 13.498047 9.0253906 L 20.998047 4.6191406 L 13.404297 0.30664062 z M 4.1328125 15.457031 L 1.4765625 17.738281 C 3.2698508 20.007038 5.0959045 22.717277 7.1640625 24.738281 C 8.5011198 26.02388 10.039508 27.129341 11.945312 27.332031 L 11.976562 29.988281 L 19.476562 25.550781 L 11.882812 21.269531 L 11.914062 23.800781 C 10.87119 23.4707 9.3190173 22.147238 7.7578125 20.144531 C 4.1328125 15.457032 5.6961175 17.357207 4.1328125 15.457031 z",delete1:"M 11.193359 0.55078125 L 11.224609 3.2695312 C 8.3132868 3.6666367 6.3502187 5.9219861 4.4746094 8.2382812 C 4.4331834 8.2372112 4.3913844 8.2384781 4.3496094 8.2382812 L 0.84960938 8.2695312 L 0.88085938 11.769531 L 4.3808594 11.738281 C 4.913499 11.668371 6.1400074 12.234872 6.6621094 12.863281 C 7.8590732 14.412828 8.7440838 15.476359 10.164062 17.199219 C 11.620007 16.191692 11.697494 16.096937 12.929688 15.236328 C 9.3153227 10.562583 10.851043 12.429094 9.3105469 10.556641 C 8.9096743 10.150113 8.3994412 9.7704623 8.0058594 9.4570312 C 8.3307334 9.074374 8.6576975 8.7101037 8.9746094 8.3945312 C 9.8509994 7.5019947 10.639552 6.9698157 11.255859 6.7695312 L 11.287109 9.2695312 L 18.787109 4.8632812 L 11.193359 0.55078125 z M 15.011719 18.185547 C 13.805498 19.209141 13.66135 19.362257 12.265625 20.486328 L 14.417969 22.779297 C 15.755026 24.064896 17.293414 25.170357 19.199219 25.373047 L 19.230469 28.029297 L 26.730469 23.591797 L 19.136719 19.310547 L 19.167969 21.841797 C 18.125096 21.511716 16.572924 20.188253 15.011719 18.185547 z",delete2:"m 11.193359,4.5507813 0.03125,2.7187499 C 8.3132864,7.6666367 6.3502187,9.921986 4.4746094,12.238281 c -0.041426,-0.0011 -0.083225,1.97e-4 -0.125,0 l -3.50000002,0.03125 0.03125,3.5 3.50000002,-0.03125 c 0.5326396,-0.06991 1.759148,0.496591 2.28125,1.125 1.1969638,1.549547 2.0815929,2.612774 3.5015716,4.335634 1.455944,-1.007527 1.533814,-1.101978 2.766007,-1.962587 -3.6143648,-4.673745 -2.078645,-2.807234 -3.6191411,-4.679687 -0.4008726,-0.406528 -0.9111057,-0.786179 -1.3046875,-1.09961 0.324874,-0.382657 0.6518381,-0.746927 0.96875,-1.0625 0.87639,-0.892536 1.6649426,-1.424715 2.2812496,-1.625 l 0.03125,2.5 7.5,-4.40625 z"},Wasabi.prototype.svgpaths["default"]=Wasabi.prototype.svgpaths.selections,Wasabi.prototype.svgicon=function(e,t){var n=this;t||(t={});var i=t.transform?'transform="'+t.transform+'"':"",r=t.fill?"fill:"+t.fill:"",o=t.stroke?"stroke:"+t.stroke:"";r&&o&&(r+=",");var s=t.shadow?'filter="url(#dropshadow)"':"",a=t.shadow?"-10 -10 50 50":"0 0 30 30";"object"!=typeof t.shadow&&(t.shadow={});var l={x:t.shadow.x||0,y:t.shadow.y||0,blur:t.shadow.blur||3},c='<filter id="dropshadow" width="140%" height="140%" x="-20%" y="-20%"><feGaussianBlur in="SourceAlpha" stdDeviation="'+l.blur+'" /><feColorMatrix type="matrix" value="1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0.6,0"/><feOffset dx="'+l.x+'" dy="'+l.y+'" /><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',u='<svg class="icon" preserveAspectRatio="none" viewBox="'+a+'" '+i+">"+(s?c:"")+'<path d="'+(n.svgpaths[e]||"")+'" '+(r||o?' style="'+r+o+'"':"")+" "+s+"></path></svg>",d=t.title?'title="'+t.title+'"':"";return t.span?'<span class="svgicon" '+d+">"+u+"</span>":u};